2007-03-31  Noriyuki Soda  <soda@sra.co.jp>

	* RELNOTES
	avoid an expression which may be misinterpreted as a security problem.

2007-03-31  Osamu Tatebe <tatebe@cs.tsukuba.ac.jp>

	* RELNOTES
	correct description

2007-03-30  Tohru Sotoyama <sotoyama@sra.co.jp>

	* package/solaris/build
	change globus root directory

2007-03-30  Noriyuki Soda  <soda@sra.co.jp>

	* ChangeLog LICENSE RELNOTES
	merge changes in the CVS main trunk until gfarm-1.4.1 to the GNEO
	branch
	
	* ChangeLog
	Catched up with the current ChangeLog.

	* ChangeLog
	recover missed log messages in previous commit
	
	* doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man5/gfarm.conf.5.html man/ja/man5/gfarm.conf.5 man/man5/gfarm.conf.5:
	regen

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja, doc/docbook/en/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook:
	merge the following changes in the SourceForge Subversion repository:

	Revision: 3674
		  http://gfarm.svn.sourceforge.net/gfarm/?rev=3674&view=rev
	Author:   sotoyama
	Date:     2007-03-29 02:34:39 -0700 (Thu, 29 Mar 2007)
	Log Message:
	add limitation about mixing gsi authentication with sharedsecret
	found in [gfarm-developers:02814]

	Revision: 3676
		  http://gfarm.svn.sourceforge.net/gfarm/?rev=3676&view=rev
	Author:   sotoyama
	Date:     2007-03-29 04:46:11 -0700 (Thu, 29 Mar 2007)
	Log Message:
	add limitation about mixing gsi authentication with sharedsecret
	found in [gfarm-developers:02814] to `auth' statement

	Revision: 3682
		  http://gfarm.svn.sourceforge.net/gfarm/?rev=3682&view=rev
	Author:   n-soda
	Date:     2007-03-29 11:03:31 -0700 (Thu, 29 Mar 2007)
	Log Message:
	swap section order of limitation and example of the "auth" directive,
	and add a paragraph to describe the example.

2007-03-30  yusuke Tanimura <yusuke.tanimura@aist.go.jp>

	* RELNOTES:
	proofreading

2007-03-29  Noriyuki Soda  <soda@sra.co.jp>

	* server/gfsd/gfsd.c:
	merge the follownig change from the SourceForge Subversion repository:

	Revision: 3681
		  http://gfarm.svn.sourceforge.net/gfarm/?rev=3681&view=rev
	Author:   n-soda
	Date:     2007-03-29 07:37:36 -0700 (Thu, 29 Mar 2007)
	Log Message:
	report error status of close(2) in gfs_server_open_local(),
	problem reported by Markus Elfring as:
	http://sourceforge.net/tracker/index.php?func=detail&aid=1687850&group_id=172718&atid=862742

	Also, treat an error at sendmsg(2) as just an error instead of
	fatal one.

	* bench/fsysbench/fsysbench.c:
	merge the follownig change from the SourceForge Subversion repository:

	Revision: 3679
		  http://gfarm.svn.sourceforge.net/gfarm/?rev=3679&view=rev
	Author:   n-soda
	Date:     2007-03-29 05:13:05 -0700 (Thu, 29 Mar 2007)
	Log Message:
	timer_interrupt_handler() shouldn't call printf(3), but write(2),
	because the former is not async-signal-safe.
	c.f.
	https://sourceforge.net/tracker/?func=detail&atid=862742&aid=1687842&group_id=172718
	
	* ftool/gfarm_agent/gfarm_agent.c:
	merge the follownig change from the SourceForge Subversion repository:

	Revision: 3678
		  http://gfarm.svn.sourceforge.net/gfarm/?rev=3678&view=rev
	Author:   n-soda
	Date:     2007-03-29 04:59:54 -0700 (Thu, 29 Mar 2007)
	Log Message:
	sigterm_handler() shouldn't call exit(3), but _exit(2), because
	the former is not async-signal-safe.
	c.f.
	https://sourceforge.net/tracker/?func=detail&atid=862742&aid=1687842&group_id=172718
	
	* server/gfsd/gfsd.c:
	merge the follownig change from the SourceForge Subversion repository:

	Revision: 3675
		  http://gfarm.svn.sourceforge.net/gfarm/?rev=3675&view=rev
	Author:   n-soda
	Date:     2007-03-29 03:30:02 -0700 (Thu, 29 Mar 2007)
	Log Message:
	do not call exit(3) but _exit(2) in accepting_sigterm_handler(),
	because the former is not async-signal-safe.
	problem reported by Markus Elfring in
	http://sourceforge.net/tracker/index.php?func=detail&aid=1687842&group_id=172718&atid=862742

2007-03-29  yusuke Tanimura <yusuke.tanimura@aist.go.jp>

	* RELNOTES, LICENSE:
	update release notes and the copyright display for the version 1.4.1

2007-03-28  Osamu Tatebe <tatebe@cs.tsukuba.ac.jp>

	* ChangeLog:
	Catched up with the current ChangeLog.

2007-03-28  Noriyuki Soda  <soda@sra.co.jp>

	* include/gfarm/gfarm_misc.h, package/freebsd/Makefile,	package/pkgsrc/Makefile, package/redhat/gfarm.spec, package/solaris/build:
	increase version number to 1.4.1

	* include/gfarm/gfarm_error.h, lib/libgfarm/gfarm/error.c, lib/libgfarm/gfarm/gfs_client.c:
	merge the following change from the SourceForge Subversion repository:

	Revision: 3673
		  http://gfarm.svn.sourceforge.net/gfarm/?rev=3673&view=rev
	Author:   n-soda
	Date:     2007-03-28 07:11:37 -0700 (Wed, 28 Mar 2007)
	Log Message:
	make gfsd reconnection feature work against more network errors.
	this fixes a problem reported by Yamamoto Naotaka-san
	in [gfarm-developers:03456] which was caused by ECONNRESET.

	introduce ENETDOWN, EHOSTDOWN and ENETRESET as gfarm native errors
	for this purpose. (although ENETRESET will be nearly never used)

	* gftool/gneo/gneo.c:
	just a portability fix

	* regress/gfs_hook/lib/fsystest/index.FreeBSD.expected, regress/gfs_hook/lib/fsystest/index.Linux.expected, regress/gfs_hook/lib/fsystest/index.NetBSD.expected, regress/gfs_hook/lib/fsystest/index.SunOS.expected:
	results are different on the GNEO branch with gfs_hook

	* regress/Makefile, regress/README.ja, regress/XFAIL, regress/account.sh, regress/config.sh, regress/loop.sh, regress/regress.conf, regress/regress.sh, regress/schedule, regress/tst.sh, regress/check.sh, regress/fuse_test.sh, regress/schedule.hook, regress/gfs_hook/lib/fsystest/Makefile, regress/gfs_hook/lib/fsystest/fsystest.c, regress/gfs_hook/lib/fsystest/fsystest.sh, regress/gfs_hook/lib/fsystest/index.FreeBSD.expected, regress/gfs_hook/lib/fsystest/index.Linux.expected, regress/gfs_hook/lib/fsystest/index.NetBSD.expected, regress/gfs_hook/lib/fsystest/index.SunOS.expected, regress/gfs_hook/tool/build/configure_make.sh, regress/gfs_hook/tool/dd/dd.sh, regress/gfs_hook/tool/postgresql/make-check.sh, regress/gfs_hook/tool/touch/touch_time.sh, regress/gftool/gfrep/gfrep-D_dir.sh, regress/lib/libgfarm/gfarm/gfs_pio_flush/write_buffered.sh:
	merge changes in the Subversion repository to the GNEO branch
	
	* regress/Makefile, regress/README.ja, regress/XFAIL, regress/account.sh, regress/config.sh, regress/loop.sh, regress/regress.conf, regress/regress.sh, regress/schedule, regress/tst.sh, regress/check.sh, regress/fuse_test.sh, regress/schedule.hook, regress/gfs_hook/lib/fsystest/Makefile, regress/gfs_hook/lib/fsystest/fsystest.c, regress/gfs_hook/lib/fsystest/fsystest.sh, regress/gfs_hook/lib/fsystest/index.FreeBSD.expected, regress/gfs_hook/lib/fsystest/index.Linux.expected, regress/gfs_hook/lib/fsystest/index.NetBSD.expected, regress/gfs_hook/lib/fsystest/index.SunOS.expected, regress/gfs_hook/tool/build/configure_make.sh, regress/gfs_hook/tool/dd/dd.sh, regress/gfs_hook/tool/postgresql/make-check.sh, regress/gfs_hook/tool/touch/touch_time.sh, regress/gftool/gfrep/gfrep-D_dir.sh, regress/lib/libgfarm/gfarm/gfs_pio_flush/write_buffered.sh:
	merge changes in the Subversion repository to the CVS main trunk	

2007-03-27  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_client.c:
	merge the following change from the SourceForge subversion repository:

	Revision: 3672
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3672&view=rev
	Author:   sotoyama
	Date:     2007-03-27 04:10:57 -0700 (Tue, 27 Mar 2007)
	Log Message:
	gfsd TCP timeout:
		5 seconds -> 30 seconds, since it was too short.
	gfsd UDP timeout:
		first timeout: 10ms -> 8 seconds, since it was too short.
		change number of retries to 3 times, just like the TCP case.
		total UDP timeout is now 65 seconds.

	* regress/gfs_hook/lib/fsystest/index.SunOS.expected, regress/gfs_hook/lib/fsystest/index.FreeBSD.expected:
	results are different on the GNEO branch with gfs_hook

	* gftool/gneo/gneo.c: just a portability fix

	* regress/gfs_hook/lib/fsystest/index.NetBSD.expected, regress/gfs_hook/lib/fsystest/index.Linux.expected:
	results are different on the GNEO branch with gfs_hook

	* regress/gftool/gfrep/gfrep-D_dir.sh, regress/lib/libgfarm/gfarm/gfs_pio_flush/write_buffered.sh, regress/Makefile, regress/README.ja, regress/XFAIL, regress/account.sh, regress/check.sh, regress/config.sh, regress/fuse_test.sh, regress/gfs_hook/lib/fsystest/Makefile, regress/gfs_hook/lib/fsystest/fsystest.c, regress/gfs_hook/lib/fsystest/fsystest.sh, regress/gfs_hook/lib/fsystest/index.FreeBSD.expected, regress/gfs_hook/lib/fsystest/index.Linux.expected, regress/gfs_hook/lib/fsystest/index.NetBSD.expected, regress/gfs_hook/lib/fsystest/index.SunOS.expected, regress/gfs_hook/tool/build/configure_make.sh, regress/gfs_hook/tool/dd/dd.sh, regress/gfs_hook/tool/postgresql/make-check.sh, regress/gfs_hook/tool/touch/touch_time.sh, regress/loop.sh, regress/regress.conf, regress/regress.sh, regress/schedule, regress/schedule.hook, regress/tst.sh:
	merge changes in the Subversion repository to the GNEO branch

	* regress/gfs_hook/tool/dd/dd.sh, regress/gfs_hook/tool/postgresql/make-check.sh, regress/gfs_hook/tool/touch/touch_time.sh, regress/gftool/gfrep/gfrep-D_dir.sh, regress/lib/libgfarm/gfarm/gfs_pio_flush/write_buffered.sh, regress/Makefile, regress/README.ja, regress/XFAIL, regress/account.sh, regress/check.sh, regress/config.sh, regress/fuse_test.sh, regress/gfs_hook/lib/fsystest/Makefile, regress/gfs_hook/lib/fsystest/fsystest.c, regress/gfs_hook/lib/fsystest/fsystest.sh, regress/gfs_hook/lib/fsystest/index.FreeBSD.expected, regress/gfs_hook/lib/fsystest/index.Linux.expected, regress/gfs_hook/lib/fsystest/index.NetBSD.expected, regress/gfs_hook/lib/fsystest/index.SunOS.expected, regress/gfs_hook/tool/build/configure_make.sh, regress/loop.sh, regress/regress.conf, regress/regress.sh, regress/schedule, regress/schedule.hook, regress/tst.sh:
	merge changes in the Subversion repository to the CVS main trunk

	* lib/libgfarm/gfarm/agent_client.c, lib/libgfarm/gfarm/agent_client.h, lib/libgfarm/gfarm/agent_wrap.c, lib/libgfarm/gfarm/agent_wrap.h:
	merge the following change from SourceForge Subversion repository:

	Revision: 3671
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3671&view=rev
	Author:   n-soda
	Date:     2007-03-26 19:46:10 -0700 (Mon, 26 Mar 2007)
	Log Message:
	fix a problem which leads segmentation fault.
	agent_server may be changed during agent_client_rpc(),
	if the RPC returns GFARM_ERR_BROKEN_PIPE or GFARM_ERR_UNEXPECTED_EOF.
	and in that case, subsequent RPC would refer stale agent_server
	without this fix.

2007-03-23  Noriyuki Soda  <soda@sra.co.jp>

	* gneo_gfextra/bin/config-gneo.in:
	forgot to support -S option, when it was introduced by
	revision 1.3.2.8 of gftool/config-gfarm/config-gfarm.postgresql on 2007-01-15
	with the following log:
	introduce version 2 schema to the PostgreSQL backend.
	based on the implementation by Yamamoto Naotaka-san in [gfarm-developers:02485]

2007-03-19  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/hooks_subr.c:
	merge the following changes in the SourceForge subversion repository:

	Revision: 3657
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3657&view=rev
	Author:   tatebe
	Date:     2007-03-12 23:14:58 -0700 (Mon, 12 Mar 2007)
	Log Message:
	accept //gfarm

	Revision: 3664
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3664&view=rev
	Author:   tatebe
	Date:     2007-03-15 17:18:57 -0700 (Thu, 15 Mar 2007)
	Log Message:
	fix a bug introduced by r3657.

	* lib/libgfarm/gfarm/gfarm_list.c:
	merge the following integer overflow check
	from the SourceForge subversion repository:

	Revision: 3655
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3655&view=rev
	Author:   n-soda
	Date:     2007-03-12 03:19:18 -0700 (Mon, 12 Mar 2007)
	Log Message:
	check integer overflow, for files newly added to the SourceForge
	repository

	* gftool/gfexport/gfexport.c:
	merge the following change from the SourceForge subversion repository:

	Revision: 3669
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3669&view=rev
	Author:   n-soda
	Date:     2007-03-19 05:15:10 (Mon, 19 Mar 2007)
	Log Message:
	make gfexport faster, problem reported by Yamamoto Naotaka-san

	* server/gfsd/gfsd.c:
	merge the following change from the SourceForge subversion repository:

	Revision: 3614
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3614&view=rev
	Author:   n-soda
	Date:     2007-03-08 19:50:14 -0800 (Thu, 08 Mar 2007)
	Log Message:
	typo in message

	* gftool/config-gfarm/sysdep/hpux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/netbsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/osf1/config-gfarm.sysdep, gftool/config-gfarm/sysdep/solaris/config-gfarm.sysdep, gftool/config-gfarm/config-agent.in, gftool/config-gfarm/sysdep/aix/config-gfarm.sysdep, gftool/config-gfarm/sysdep/default/config-gfarm.sysdep, gftool/config-gfarm/sysdep/freebsd/config-gfarm.sysdep:
	merge the following changes from the SourceForge subversion repository:

	Revision: 3593
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3593&view=rev
	Author:   tatebe
	Date:     2007-02-28 14:49:16 -0800 (Wed, 28 Feb 2007)
	Log Message:
	add mkcnf_agent_sysdep to create some directories needed to run
	gfarm_agent

	* lib/gfs_hook/sysdep/linux/getdents.c:
	merge the following change from the SourceForge subversion repository:

	Revision: 3567
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3567&view=rev
	Author:   n-soda
	Date:     2007-02-19 06:46:24 -0800 (Mon, 19 Feb 2007)
	Log Message:
	offsetof() doesn't have to be defined here, because <stddef.h> is
	already included by this file.
	This problem came from glibc-2.3.1 itself, but haven't be exposed since
	system-supplied <stddef.h> has same definition with this file.
	But Fedora Core 6 exposes this with warning: "offsetof" redefined

	* gftool/config-gfarm/gfarm.schema-2.sql:
	merge the following change from the SourceForge subversion repository:

	Revision: 3566
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3566&view=rev
	Author:   n-soda
	Date:     2007-02-19 02:36:29 -0800 (Mon, 19 Feb 2007)
	Log Message:
	disallow removing a FileSection, if it is still referenced by a
	FileSectionCopy.  this shouldn't harm anything, because the LDAP
	schema already has this constraint.

	* lib/libgfarm/gfarm/metadb_none.c, lib/libgfarm/gfarm/metadb_pgsql.c, lib/libgfarm/gfarm/metadb_ldap.c, lib/libgfarm/gfarm/metadb_localfs.c:
	merge the following change from the SourceForge subversion repository:

	Revision: 3544
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3544&view=rev
	Author:   n-soda
	Date:     2007-02-07 01:39:42 -0800 (Wed, 07 Feb 2007)
	Log Message:
	if syslog is enabled (i.e. it's a daemon), report metadb
	initialization error at the first time when the error occurrs.

	The intention of this change is to make gfarm_agent report such
	errors.  Until now, such errors weren't usually reported, because
	the errors are passed to log_proto() in gfarm_agent.c.
	(debug-level messages aren't displayed by the default "log_level"
	setting.)

	* gftool/gfarm_agent/gfarm_agent.c:
	merge the following change from the SourceForge subversion repository:

	Revision: 3543
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3543&view=rev
	Author:   n-soda
	Date:     2007-02-07 01:31:21 -0800 (Wed, 07 Feb 2007)
	Log Message:
	report error at gfarm_initialize() to deal with the problem reported
	by Yamamoto-san in [gfarm-developers:02961]

	* gftool/gfwhoami/gfwhoami.c:
	merge the following change from the SourceForge subversion repository:

	Revision: 3542
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3542&view=rev
	Author:   n-soda
	Date:     2007-02-07 00:32:04 -0800 (Wed, 07 Feb 2007)
	Log Message:
	supply missing gfarm_terminate()

	* lib/libgfarm/gfarm/metadb_pgsql.c:
	merge following change in the SourceForge subversion repository.
	this fixes http://datafarm.apgrid.org/bugzilla-ja/show_bug.cgi?id=75

	Revision: 3595
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3595&view=rev
	Author:   sotoyama
	Date:     2007-02-28 20:26:14 -0800 (Wed, 28 Feb 2007)
	Log Message:
	gfarm_pgsql_terminate(): add missed clearing static connection

2007-03-12  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/metadb_pgsql.c:
	fix the following problems in gfarm_pgsql_path_info_get_all_foreach():
	- missing retry against closed connection
	- memory leak in error case
	from gfarm v2

	* lib/libgfarm/gfutil/logutil.c:
	preserve errno, because vsnprintf() may change it.
	from gfarm v2.

2007-03-09  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_client.c:
	merge the following change from SourceForge subversion repository:

	Revision: 3616
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3616&view=rev
	Author:   n-soda
	Date:     2007-03-09 00:59:27 -0800 (Fri, 09 Mar 2007)
	Log Message:
	increase default UDP timeout from 7.11sec to 101.11sec.
	because maximum roundtrip was 79.9sec
	(average was 7.95sec and median was 6.55sec)
	under a load generated by test script provided by Ishibashi-san
	in [gfarm-developers:03283] (500 parallel gfexport * 4 parallel hosts,
	all hosts were in AIST Gfarm cluster).

	It seems the cause of this problem is UDP packet loss, because
	local client doesn't need to increase the timeout, and
	some TCP connect(2) to gfsd also took very long time (more than 60sec).

	* gftool/gfarm_agent/gfarm_agent.c:
	merge the following change from SourceForge subversion repository:

	Revision: 3615
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3615&view=rev
	Author:   n-soda
	Date:     2007-03-09 00:46:15 -0800 (Fri, 09 Mar 2007)
	Log Message:
	do sleep(1), when pthread_create() failed.  this fixes starvation
	observed on Fedora Core 5 (kernel 2.6.19-1.2288.fc5smp)
	(pthread_create() returned errno=ENOMEM and only the main thread
	runs).

2007-03-02  Noriyuki Soda  <soda@sra.co.jp>

	* server/gfsd/gfsd.c:
	merge the following change from SourceForge subversion repository,
	via CVS main trunk:

	Revision: 3596
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3596&view=rev
	Author:   n-soda
	Date:     2007-03-02 07:08:39 -0800 (Fri, 02 Mar 2007)
	Log Message:
	be more verbose, when any error occurrs during UDP processing.

	* server/gfsd/gfsd.c:
	merge the following change from SourceForge subversion repository:

	Revision: 3596
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3596&view=rev
	Author:   n-soda
	Date:     2007-03-02 07:08:39 -0800 (Fri, 02 Mar 2007)
	Log Message:
	be more verbose, when any error occurrs during UDP processing.

2007-02-21  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfarm_agent/gfarm_agent.c, include/gfarm/gfarm_misc.h, lib/libgfarm/gfarm/config.c, server/gfmd/gfmd.c, server/gfsd/gfsd.c:
	define GFARM_VERSION (="1.4.0.99 GNEO") and display the information as usage of
	gfmd, gfsd and gfarm_agent.
	also introduce the following functions, requested by Ishibashi-san:
		gfarm_version_string()
		gfarm_major_version()
		gfarm_minor_version()
		gfarm_patch_version()
		gfarm_micro_version()
	Note that GNEO branch has " GNEO" as the suffix of GFARM_VERSION.

	* include/gfarm/gfarm_misc.h, lib/libgfarm/gfarm/config.c:
	introduce the following functions, requested by Ishibashi-san:
		gfarm_version_string()
		gfarm_major_version()
		gfarm_minor_version()
		gfarm_patch_version()
		gfarm_micro_version()

	* gftool/gfarm_agent/gfarm_agent.c, include/gfarm/gfarm_misc.h, server/gfmd/gfmd.c, server/gfsd/gfsd.c:
	define GFARM_VERSION (=1.4.0.99) and display the information as usage of
	gfmd, gfsd and gfarm_agent.

2007-02-08  Noriyuki Soda  <soda@sra.co.jp>

	* regress/schedule:
	mv "gftool/gfarmfs-fuse.sh" test from the end of schedule to the middle,
	because it takes for a while until the gfarmfs command actually exits
	after the completion of "gftool/gfarmfs-fuse.sh", and clearing the testing
	environment of "make selfcheck-*" causes the gfarmfs command hang.

2007-01-30  Noriyuki Soda  <soda@sra.co.jp>

	* gneo_gfextra/README.txt:
	add note how to use gfarm-pgsql script from root privilege
	(e.g. as a rc script).
	config-gneo has to be invoked by root in that case.

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja, gftool/gfarm_agent/gfarm_agent.c, include/gfarm/gfs.h, lib/libgfarm/gfarm/agent_client.c, lib/libgfarm/gfarm/agent_client.h, lib/libgfarm/gfarm/agent_wrap.c, lib/libgfarm/gfarm/agent_wrap.h, lib/libgfarm/gfarm/auth.h, lib/libgfarm/gfarm/auth_client.c, lib/libgfarm/gfarm/auth_common.c, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_misc.h, lib/libgfarm/gfarm/gfs_pio_scramble.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_stat.c, lib/libgfarm/gfarm/metadb_pgsql.c:
	merge changes of gfarm_v1 cvs main trunk on 30 January, 2007.

	* doc/Gfarm-FAQ.ja: use TAB

	* gftool/gfarm_agent/gfarm_agent.c, include/gfarm/gfs.h, lib/libgfarm/gfarm/agent_client.c, lib/libgfarm/gfarm/agent_client.h, lib/libgfarm/gfarm/agent_wrap.c, lib/libgfarm/gfarm/agent_wrap.h, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_misc.h, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_stat.c:
	merge the following changes from SourceForge subversion repository:

	Revision: 3514
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3514&view=rev
	Author:   n-soda
	Date:     2007-01-28 23:59:01 -0800 (Sun, 28 Jan 2007)
	Log Message:
	missing changes to make inode numbers unsigned

	* lib/libgfarm/gfarm/metadb_pgsql.c:
	merge the following change from SourceForge subversion repository:

	Revision: 3490
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3490&view=rev
	Author:   sotoyama
	Date:     2007-01-22 00:14:06 -0800 (Mon, 22 Jan 2007)
	Log Message:
	In previous revision, gfarm_pgsql_path_info_get() did not retry if
	PostgreSQL returns error status means "terminate due to admin
	command", and this causes "invalid argument" error in the first
	access after restart PostgreSQL.  This problem was reported in
	[gfarm-developers:02643] by Naotaka YAMAMOTO-san.

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	merge the following change from SourceForge subversion repository:

	Revision: 3489
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3489&view=rev
	Author:   n-soda
	Date:     2007-01-21 08:40:33 -0800 (Sun, 21 Jan 2007)
	Log Message:
	clarify subject name difference between GT2 and GT3

	* lib/libgfarm/gfarm/auth.h, lib/libgfarm/gfarm/auth_client.c, lib/libgfarm/gfarm/auth_common.c:
	merge the following change from SourceForge subversion repository:

	Revision: 3488
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3488&view=rev
	Author:   n-soda
	Date:     2007-01-19 11:39:55 -0800 (Fri, 19 Jan 2007)
	Log Message:
	be more verbose when a critical error happened while accessing
	~/.gfarm_shared_key.
	In the case in [gfarm-developers:02814] and [gfarm-developers:02820],
	the user's home directory didn't exist.

	XXX In this case, another authenticaion method won't be tried.
	Is this OK?

2007-01-24  Noriyuki Soda  <soda@sra.co.jp>

	* doc/html/ja/ref/man5/gfarm.conf.5.html, man/ja/man5/gfarm.conf.5, man/man1/gfkey.1, doc/docbook/en/ref/man1/gfkey.1.docbook, doc/html/en/ref/man1/gfkey.1.html, doc/html/ja/ref/man1/gfreg.1.html:
	merge the following changes in the CVS main trunk to the GNEO branch:
	[gfarm-cvs:09901]: add missing </para> to gfkey.1.docbook
	[gfarm-cvs:09902] ... [gfarm-cvs:09903]: regen
	[gfarm-cvs:09904] ... [gfarm-cvs:09906]: missed regen

	* doc/html/ja/ref/man1/gfreg.1.html, doc/html/ja/ref/man5/gfarm.conf.5.html, man/ja/man5/gfarm.conf.5:
	missed regn

	* man/man1/gfkey.1, doc/html/en/ref/man1/gfkey.1.html: regen

	* doc/docbook/en/ref/man1/gfkey.1.docbook:
	merge the following change from the SourceForge subversion repository:

	Revision: 3492
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3492&view=rev
	Author:   n-soda
	Date:     2007-01-23 22:59:47 -0800 (Tue, 23 Jan 2007)
	Log Message:
	add missing </para>

2007-01-19  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfdump/gfdump.c:
	merge the following change from the CVS main repository:
	add -v option to see what's going on

	* gftool/gfdump/gfdump.c:
	merge the following change from the SourceForge Subversion repository:

	Revision: 3478
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3478&view=rev
	Author:   n-soda
	Date:     2007-01-18 00:33:21 -0800 (Thu, 18 Jan 2007)
	Log Message:
	add -v option to see what's going on

	* regress/Makefile, regress/XFAIL, regress/gfs_hook/tool/build/configure_make.sh, regress/gfs_hook/tool/scp/scp_from_gfarm.sh, regress/gfs_hook/tool/scp/scp_to_gfarm.sh:
	merge the following change from the CVS main trunk:
	tests which are known to fail with GSI

	* regress/Makefile, regress/XFAIL, regress/gfs_hook/tool/build/configure_make.sh, regress/gfs_hook/tool/scp/scp_from_gfarm.sh, regress/gfs_hook/tool/scp/scp_to_gfarm.sh:
	merge the following change from the SourceForge Subversion repository:

	Revision: 3484
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3484&view=rev
	Author:   n-soda
	Date:     2007-01-18 15:13:42 -0800 (Thu, 18 Jan 2007)
	Log Message:
	tests which are known to fail with GSI

2007-01-18  Noriyuki Soda  <soda@sra.co.jp>

	* LICENSE: update copyright year

	* regress/config.sh:
	make GSI configuration actually work with the testsuite in the GNEO branch.

	* gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/gfarm.conf-ldap.in, gftool/config-gfarm/gfarm.conf-postgresql.in:
	make it possible to eliminate metadb_server_cred_service and
	spool_server_cred_service directive in gfarm.conf,
	by specifying "" or "-" as --gfmd-service and --gfsd-service option.

	* lib/libgfarm/gfarm/metadb_pgsql.c:
	merge the following change from the CVS main trunk:
	deal with the case that some of file_section_copy metadata used for "gfdump -r"
	refer removed filesystem nodes.
	this problem was reported by Yamamoto-san in [gfarm-developers:02789].

	* lib/libgfarm/gfarm/metadb_pgsql.c:
	merge the following change from the SourceForge subversion repository:

	Revision: 3479
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3479&view=rev
	Author:   n-soda
	Date:     2007-01-18 03:04:35 -0800 (Thu, 18 Jan 2007)
	Log Message:
	deal with the case that some of file_section_copy metadata used
	for "gfdump -r" refer removed filesystem nodes.  this problem was
	reported by Yamamoto-san in [gfarm-developers:02789].

2007-01-17  Noriyuki Soda  <soda@sra.co.jp>

	* include/gfarm/gfarm_config.h.in, configure:
	use autoconf-2.59 instead of 2.60, to shut up the following messages:
	config.status: WARNING:  makes/config.mk.in seems to ignore the --datarootdir setting
	config.status: WARNING:  gftool/config-gfarm/config-gfarm.in seems to ignore the --datarootdir setting
	config.status: WARNING:  gftool/config-gfarm/config-gfsd.in seems to ignore the --datarootdir setting
	config.status: WARNING:  gftool/config-gfarm/config-agent.in seems to ignore the --datarootdir setting

	problem reported by Ishibashi-san in [gfarm-developers:02763]

2007-01-16  Noriyuki Soda  <soda@sra.co.jp>

	* regress/lib/libgfarm/gfarm/seek-write/sw-test.c:
	merge the folowing change from the CVS main trunk:
	use file_offset_t instead of off_t for gfarm.
	this fixes a compile error on FreeBSD.

	* regress/lib/libgfarm/gfarm/seek-write/sw-test.c:
	merge the following change in the SourceForge subversion repository:
	Revision: 3475
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3475&view=rev
	Author:   n-soda
	Date:     2007-01-16 14:20:25 -0800 (Tue, 16 Jan 2007)
	Log Message:
	use file_offset_t instead of off_t for gfarm.
	this fixes a compile error on FreeBSD.

	* regress/Makefile, regress/lib/libgfarm/gfarm/seek-write/Makefile, regress/lib/libgfarm/gfarm/seek-write/sw-test.c, regress/lib/libgfarm/gfarm/seek-write/sw-test.sh:
	merge the following change from the main trunk:
	clear EOF state, if gfs_pio_seek() is called or any writing operation is used.
	this fixes http://datafarm.apgrid.org/bugzilla-ja/show_bug.cgi?id=78
	reported by Ishibashi-san

	* regress/gfs_hook/tool/dd/dd.sh:
	merge the following change from the CVS main trunk:

	do not return XFAIL blindly, because this test may return PASS
	on some platforms even in the remote case.

	this change was mistakenly committed as part of revision 3472 in the
	SourceForge subversion repository.

	* regress/gfs_hook/tool/dd/dd.sh:
	do not return XFAIL blindly, because this test may return PASS
	on some platforms even in the remote case.

	this change was mistakenly committed as part of revision 3472 in the
	SourceForge subversion repository.

	* lib/libgfarm/gfarm/gfs_pio.c:
	merge the following change from the main trunk:
	clear EOF state, if gfs_pio_seek() is called or any writing operation is used.
	this fixes http://datafarm.apgrid.org/bugzilla-ja/show_bug.cgi?id=78
	reported by Ishibashi-san

	* regress/Makefile, regress/lib/libgfarm/gfarm/seek-write/sw-test.sh, lib/libgfarm/gfarm/gfs_pio.c:
	merge the following change from the SourceForce subversion repository:

	Revision: 3472
	          http://gfarm.svn.sourceforge.net/gfarm/?rev=3472&view=rev
	Author:   n-soda
	Date:     2007-01-16 10:56:49 -0800 (Tue, 16 Jan 2007)
	Log Message:
	clear EOF state, if gfs_pio_seek() is called or any writing
	operation is used.  this fixes
	http://datafarm.apgrid.org/bugzilla-ja/show_bug.cgi?id=78
	reported by Ishibashi-san

2007-01-15  Noriyuki Soda  <soda@sra.co.jp>

	* regress/gfs_hook/tool/dd/dd.sh, regress/gfs_hook/tool/sh/test-d.sh, regress/gftool/gfhost/delete-add.sh, regress/gftool/gfreg/gfreg-N-I.sh, regress/gftool/gfrep/check_gfwhere_out_after_-D.awk, regress/gftool/gfrep/gfrep-D.sh, regress/gftool/gfrep/search_host_and_domain.awk, regress/lib/libgfarm/gfarm/gfs_readdir/normal.sh, package/freebsd/pkg-plist, package/pkgsrc/PLIST, package/redhat/gfarm.spec, package/solaris/gfarm-server.files, regress/Makefile, regress/README.ja, regress/config.sh, regress/gfs_hook/tool/build/configure_make.sh, regress/schedule, debian/gfmd.install, gftool/config-gfarm/Makefile, gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/config-gfarm.postgresql, gftool/config-gfarm/gfarm.schema-1.sql, gftool/config-gfarm/gfarm.schema-2.sql, gftool/config-gfarm/gfarm.sql, gftool/config-gfarm/sysdep/linux/redhat/gfarm_agent.in, gftool/config-gfarm/sysdep/linux/suse/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/suse/gfarm_agent.in, gftool/gfrm/gfrm.c, gftool/gfwhere/gfwhere.c, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/metadb_pgsql.c, ChangeLog:
	merge changes of gfarm_v1 CVS main trunk on 15 January, 2007.
	this is mostly bug fixes
	 + the intrduction of version 2 schema of the PostgreSQL backend which is based
	   on the implementation by Yamamoto Naotaka-san in [gfarm-developers:02485]

	* package/pkgsrc/PLIST, package/redhat/gfarm.spec, package/solaris/gfarm-server.files, regress/Makefile, regress/README.ja, regress/config.sh, debian/gfmd.install, gftool/config-gfarm/Makefile, gftool/config-gfarm/config-gfarm.postgresql, gftool/config-gfarm/gfarm.schema-1.sql, gftool/config-gfarm/gfarm.schema-2.sql, gftool/config-gfarm/gfarm.sql, lib/libgfarm/gfarm/metadb_pgsql.c, package/freebsd/pkg-plist:
	merge the following change from the SourceForge subversion repository:

	r3468 | n-soda | 2007-01-15 18:54:24 +0900 (Mon, 15 Jan 2007) |

	introduce version 2 schema to the PostgreSQL backend.
	based on the implementation by Yamamoto Naotaka-san in [gfarm-developers:02485]
	with the following modifications:
	- do not use "postgresql_schema_version" directive in gfarm.conf,
	  determinie the version on the fly instead.
	- do not actually delete a Host, because that causes a dangling reference
	  from a FileSectionCopyInfo to the Host.
	  introduce "available" flag to see whether the host is really available
	  or not.
	  Also, rename the hostname of the virtually deleted Host, so that the
	  FileSection will be inaccessible while the Host is deleted.
	  (XXX Is this really good idea?)
	- config-gfarm:
	  make it possible to create version 1 backend database,
	  this is especially necessary to run the testsuite against the version 1
	  database to keep backward compatibility.

	* gftool/gfwhere/gfwhere.c:
	merge the following changes from the SourceForge subversion repository:

	r3236 | tatebe | 2006-11-28 23:57:50 +0900 (Tue, 28 Nov 2006) | 3 lines

	fix a bug such that -I option does not work for files, which is introduced
	by the previous commit.
	display error message when specified file section does not exist.

	* gftool/gfrm/gfrm.c:
	merge the following changes from the SourceForge subversion repository:

	r3280 | tatebe | 2006-12-15 19:46:55 +0900 (Fri, 15 Dec 2006) | 2 lines

	fix a bug such that gfrm cannot delete a file that does not have any file sectio
	n copy information.


	* regress/README.ja, regress/config.sh, regress/gftool/gfarmfs-fuse.sh, regress/schedule:
	merge the following changes from the SourceForge subversion repository:


	* regress/gftool/gfhost/delete-add.sh, regress/schedule:
	merge the following change from the SourceForge subversion repository:

	r3467 | n-soda | 2007-01-15 18:33:51 +0900 (Mon, 15 Jan 2007) | 2 lines

	add a test case that a patch in [gfarm-developers:02485] makes it fail.

	* regress/lib/libgfarm/gfarm/seek-write/Makefile, regress/lib/libgfarm/gfarm/seek-write/sw-test.c, regress/lib/libgfarm/gfarm/seek-write/sw-test.sh, regress/schedule:
	merge the following changes from the SourceForge subversion repository:


	* regress/lib/libgfarm/gfarm/gfs_readdir/normal.sh:
	merge the following changes from the SourceForge subversion repository:

	r3271 | sotoyama | 2006-12-12 17:28:31 +0900 (Tue, 12 Dec 2006) | 2 lines

	return not UNSUPPORTED but FAIL, if this fails to make a directory or file


	* regress/gftool/gfrep/check_gfwhere_out_after_-D.awk, regress/gftool/gfrep/gfrep-D.sh, regress/gftool/gfrep/search_host_and_domain.awk:
	merge the following changes from the SourceForge subversion repository:

	r3285 | sotoyama | 2006-12-19 19:58:09 +0900 (Tue, 19 Dec 2006) | 2 lines

	cut out awk routines for common use


	* regress/gftool/gfreg/gfreg-N-I.sh:
	merge the following changes from the SourceForge subversion repository:

	r3272 | sotoyama | 2006-12-12 17:44:27 +0900 (Tue, 12 Dec 2006) | 2 lines

	return not UNSUPPORTED but FAIL if none of the hosts is available


	* regress/gfs_hook/tool/sh/test-d.sh:
	merge the following change from the SourceForge subversion repository:

	r3266 | sotoyama | 2006-12-05 20:04:07 +0900 (Tue, 05 Dec 2006) | 3 lines

	fix a bug that removes already existing gfarm files,
	reported in [gfarm-developers:02487] by Yamamoto-san

	* regress/gfs_hook/tool/build/configure_make.sh, regress/gfs_hook/tool/dd/dd.sh:
	merge the following change from the SourceForge subversion repository:

	r3268 | sotoyama | 2006-12-06 15:13:58 +0900 (Wed, 06 Dec 2006) | 3 lines

	return `expected fail', if these tests don't run on a filesystem node,
	from the report [gfarm-developers:02489] by Yamamoto-san

	* regress/Makefile:
	merge the following change from the SourceForge subversion repository:

	r3466 | n-soda | 2007-01-11 23:04:12 +0900 (Thu, 11 Jan 2007) | 2 lines

	remove "log" file at "make distclean"

	* lib/libgfarm/gfarm/gfs_pio.c:
	merge the following change from the SourceForge subversion repository:

	r3282 | n-soda | 2006-12-15 23:59:28 +0900 (Fri, 15 Dec 2006) | 2 lines

	no functional change. just change the order of functions.

	* gftool/config-gfarm/sysdep/linux/suse/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/suse/gfarm_agent.in, gftool/config-gfarm/sysdep/linux/redhat/gfarm_agent.in:
	merge the following change from the SourceForge subversion repository:

	r3202 | tatebe | 2006-10-17 09:45:42 +0900 (Tue, 17 Oct 2006) | 2 lines

	increase the maximum number of open file descriptors

	* gftool/config-gfarm/config-gfarm.in:
	merge the following change from the SourceForge subversion repository:

	r3279 | tatebe | 2006-12-15 12:41:23 +0900 (Fri, 15 Dec 2006) | 1 line

	remove redundant directories in search_path

	* ChangeLog: remove unnecessary Carridge Return

2007-01-11  Noriyuki Soda  <soda@sra.co.jp>

	* regress/Makefile:
	bring the following change from the SourceForge subversion repository:

	r3466 | n-soda | 2007-01-11 23:04:12 +0900 (Thu, 11 Jan 2007) | 2 lines

	remove "log" file at "make distclean"

2007-01-10  Noriyuki Soda  <soda@sra.co.jp>

	* gneo_gfextra/Makefile:
	use explicit "echo" instead of "set -x", to remove garbage from daily output

	* regress/config.sh: run gfscramble_param after config-gfarm

	* Makefile.in: forgot to remove some files at "make distclean"

	* include/gfarm/gfarm_config.h.in, configure: regen

	* configure.ac: gfgneo_extra is obsolete

	* regress/gftool/gfarmfs-fuse.sh: New file.

	* regress/README.ja, regress/gftool/gfarmfs-fuse.sh, regress/schedule:
	merge the following change from the SourceForge subversion repository:

	r3450 | n-soda | 2006-12-28 19:29:42 +0900 (Thu, 28 Dec 2006) | 3 lines

	if $REGRESS_GFARMFS_FUSE points the source directory of GfarmFS-FUSE,
	run the testsuite in it.

	* regress/README.ja:
	merge the following changes from the SourceForge subversion repository:


	* regress/config.sh:
	bring the following change from the SourceForge subversion repository:

	r3444 | n-soda | 2006-12-26 07:25:42 +0900 (Tue, 26 Dec 2006) | 7 lines

	make it possible to specify different port numbers
	by the following environment variables:
	$REGRESS_AGENT_PORT
	$REGRESS_BACKEND_PORT
	$REGRESS_GFMD_PORT
	$REGRESS_GFSD_PORT

	* regress/XFAIL, regress/gfs_hook/tool/build/configure_make.sh, doc/README.hook.en, doc/README.hook.ja:
	gfs_hook + configure script doesn't work on GNEO branch

2006-12-19  Takuya Ishibashi  <takuya@soum.co.jp>

	* gneo_gfextra/bin/config-gneo.in:
	cut the limiter of scramble parameters.

2006-11-28  Takuya Ishibashi  <takuya@soum.co.jp>

	* lib/libgfarm/gfarm/gfs_rename.c, regress/README.ja, regress/config.sh, regress/gftool/gfsched/gfsched.sh, regress/gftool/gfstat/gfstat.sh, regress/gftool/gfusage/gfusage.sh, regress/schedule:
	merge changes of gfarm_v1 main trunk on 28 November, 2006.

2006-11-27  Takuya Ishibashi  <takuya@soum.co.jp>

	* lib/libgfarm/gfarm/gfs_chmod.c, lib/libgfarm/gfarm/gfs_pio_scramble.c:
	enable the owner to always read/write spool-files.

	* lib/gfs_hook/hooks_common.c:
	make the difference of main trunk and gneo branch small.

	* lib/libgfarm/gfarm/Makefile: add config.h for gfs_dir.c.

	* lib/gfs_hook/hooks_common.c: add gfs_closedir() in error case.

2006-11-27  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_rename.c:
	gfs_rename() didn't return an error, when a directory rename operation
	failed and it did undo.
	problem pointed out by Ishibashi-san

2006-11-22  Takuya Ishibashi  <takuya@soum.co.jp>

	* util/gfront/Makefile, regress/lib/libgfarm/gfarm/gfs_rmdir/Makefile, regress/lib/libgfarm/gfarm/gfs_rmdir/normal.sh, regress/lib/libgfarm/gfarm/gfs_rmdir/rmdir.c, regress/lib/libgfarm/gfarm/gfs_rmdir/rmdir.sh, regress/lib/libgfarm/gfarm/gfs_stat/Makefile, regress/lib/libgfarm/gfarm/gfs_stat/normal.sh, regress/lib/libgfarm/gfarm/gfs_stat/stat.c, regress/lib/libgfarm/gfarm/gfs_stat/stat.sh, regress/lib/libgfarm/gfarm/gfs_unlink/Makefile, regress/lib/libgfarm/gfarm/gfs_unlink/normal.sh, regress/lib/libgfarm/gfarm/gfs_unlink/unlink.c, regress/lib/libgfarm/gfarm/gfs_unlink/unlink.sh, regress/lib/libgfarm/gfarm/gfs_unlink_section/Makefile, regress/lib/libgfarm/gfarm/gfs_unlink_section/normal.sh, regress/lib/libgfarm/gfarm/gfs_unlink_section/unlink_section.c, regress/lib/libgfarm/gfarm/gfs_unlink_section/unlink_section.sh, regress/lib/libgfarm/gfarm/gfs_utimes/Makefile, regress/lib/libgfarm/gfarm/gfs_utimes/set_current.sh, regress/lib/libgfarm/gfarm/gfs_utimes/specify_time.sh, regress/lib/libgfarm/gfarm/gfs_utimes/utimes.c, regress/lib/libgfarm/gfarm/gfs_utimes/utimes.sh, server/gfmd/gfmd.c, server/gfsd/gfsd.c, regress/lib/libgfarm/gfarm/gfs_pio_sync/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_sync/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_sync/sync.c, regress/lib/libgfarm/gfarm/gfs_pio_truncate/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_truncate/shorter.sh, regress/lib/libgfarm/gfarm/gfs_pio_truncate/truncate.c, regress/lib/libgfarm/gfarm/gfs_pio_truncate/truncate.sh, regress/lib/libgfarm/gfarm/gfs_pio_ungetc/not_follow_getc.sh, regress/lib/libgfarm/gfarm/gfs_pio_write/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_write/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_write/write.c, regress/lib/libgfarm/gfarm/gfs_pio_write/write.sh, regress/lib/libgfarm/gfarm/gfs_readdir/Makefile, regress/lib/libgfarm/gfarm/gfs_readdir/normal.sh, regress/lib/libgfarm/gfarm/gfs_readdir/readdir.c, regress/lib/libgfarm/gfarm/gfs_readdir/readdir.sh, regress/lib/libgfarm/gfarm/gfs_realpath/Makefile, regress/lib/libgfarm/gfarm/gfs_realpath/current.sh, regress/lib/libgfarm/gfarm/gfs_realpath/realpath.c, regress/lib/libgfarm/gfarm/gfs_realpath/realpath.sh, regress/lib/libgfarm/gfarm/gfs_rename/Makefile, regress/lib/libgfarm/gfarm/gfs_rename/file_normal.sh, regress/lib/libgfarm/gfarm/gfs_rename/rename.c, regress/lib/libgfarm/gfarm/gfs_rename/rename.sh, regress/lib/libgfarm/gfarm/gfs_pio_putline/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_puts/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_puts/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_puts/puts.c, regress/lib/libgfarm/gfarm/gfs_pio_puts/puts.sh, regress/lib/libgfarm/gfarm/gfs_pio_read/empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_readdelim/dynamic_alloc_read_empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_readline/dynamic_alloc_read_empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_seek/get_current.sh, regress/lib/libgfarm/gfarm/gfs_pio_seek/nop.sh, regress/lib/libgfarm/gfarm/gfs_pio_set_view_index/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_set_view_index/set_view_index.c, regress/lib/libgfarm/gfarm/gfs_pio_error/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_flush/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_flush/flush.c, regress/lib/libgfarm/gfarm/gfs_pio_flush/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_flush/write_buffered.sh, regress/lib/libgfarm/gfarm/gfs_pio_getc/empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_getline/empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_getline/getline.sh, regress/lib/libgfarm/gfarm/gfs_pio_gets/empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_open/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_putc/normal.sh, regress/lib/libgfarm/gfarm/gfs_mkdir/Makefile, regress/lib/libgfarm/gfarm/gfs_mkdir/mkdir.c, regress/lib/libgfarm/gfarm/gfs_mkdir/mkdir.sh, regress/lib/libgfarm/gfarm/gfs_mkdir/normal.sh, regress/lib/libgfarm/gfarm/gfs_opendir/Makefile, regress/lib/libgfarm/gfarm/gfs_opendir/current.sh, regress/lib/libgfarm/gfarm/gfs_opendir/opendir.c, regress/lib/libgfarm/gfarm/gfs_opendir/opendir.sh, regress/lib/libgfarm/gfarm/gfs_opendir/root.sh, regress/lib/libgfarm/gfarm/gfs_pio_close/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_create/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_datasync/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_datasync/datasync.c, regress/lib/libgfarm/gfarm/gfs_pio_datasync/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_eof/eof.sh, regress/lib/libgfarm/gfarm/gfs_pio_eof/not_eof.sh, regress/lib/libgfarm/gfarm/gfs_pio_eof/pio_eof.c, regress/lib/libgfarm/gfarm/gfarm_stringlist_length/Makefile, regress/lib/libgfarm/gfarm/gfarm_stringlist_length/normal.sh, regress/lib/libgfarm/gfarm/gfarm_stringlist_length/stringlist_length.c, regress/lib/libgfarm/gfarm/gfarm_stringlist_length/stringlist_length.sh, regress/lib/libgfarm/gfarm/gfs_chdir/Makefile, regress/lib/libgfarm/gfarm/gfs_chdir/chdir.c, regress/lib/libgfarm/gfarm/gfs_chdir/chdir.sh, regress/lib/libgfarm/gfarm/gfs_chdir/current.sh, regress/lib/libgfarm/gfarm/gfs_chdir/root.sh, regress/lib/libgfarm/gfarm/gfs_chmod/Makefile, regress/lib/libgfarm/gfarm/gfs_chmod/chmod.c, regress/lib/libgfarm/gfarm/gfs_chmod/chmod.sh, regress/lib/libgfarm/gfarm/gfs_chmod/file_normal.sh, regress/lib/libgfarm/gfarm/gfs_closedir/Makefile, regress/lib/libgfarm/gfarm/gfs_closedir/closedir.c, regress/lib/libgfarm/gfarm/gfs_closedir/closedir.sh, regress/lib/libgfarm/gfarm/gfs_closedir/current.sh, regress/lib/libgfarm/gfarm/gfs_glob/Makefile, regress/lib/libgfarm/gfarm/gfs_glob/glob.c, regress/lib/libgfarm/gfarm/gfs_glob/glob.sh, regress/lib/libgfarm/gfarm/gfs_glob/normal.sh, regress/lib/libgfarm/gfarm/gfs_glob_add/Makefile, regress/lib/libgfarm/gfarm/gfs_glob_add/glob_add.c, regress/lib/libgfarm/gfarm/gfs_glob_add/glob_add.sh, regress/lib/libgfarm/gfarm/gfs_glob_add/normal.sh, regress/lib/libgfarm/gfarm/gfs_glob_init/Makefile, regress/lib/libgfarm/gfarm/gfs_glob_init/glob_init.c, regress/lib/libgfarm/gfarm/gfs_glob_init/glob_init.sh, regress/lib/libgfarm/gfarm/gfs_glob_init/normal.sh, regress/lib/libgfarm/gfarm/GFARM_STRINGLIST_ELEM/Makefile, regress/lib/libgfarm/gfarm/GFARM_STRINGLIST_ELEM/STRINGLIST_ELEM.c, regress/lib/libgfarm/gfarm/GFARM_STRINGLIST_ELEM/STRINGLIST_ELEM.sh, regress/lib/libgfarm/gfarm/GFARM_STRINGLIST_ELEM/normal.sh, regress/lib/libgfarm/gfarm/GFARM_STRINGLIST_STRARRAY/Makefile, regress/lib/libgfarm/gfarm/GFARM_STRINGLIST_STRARRAY/STRINGLIST_STRARRAY.c, regress/lib/libgfarm/gfarm/GFARM_STRINGLIST_STRARRAY/STRINGLIST_STRARRAY.sh, regress/lib/libgfarm/gfarm/GFARM_STRINGLIST_STRARRAY/normal.sh, regress/lib/libgfarm/gfarm/fork-term-init/fti-unlink.c, regress/lib/libgfarm/gfarm/fork-term-init/fti-unlink.sh, regress/lib/libgfarm/gfarm/gfarm_stringlist_add/Makefile, regress/lib/libgfarm/gfarm/gfarm_stringlist_add/normal.sh, regress/lib/libgfarm/gfarm/gfarm_stringlist_add/stringlist_add.c, regress/lib/libgfarm/gfarm/gfarm_stringlist_add/stringlist_add.sh, regress/lib/libgfarm/gfarm/gfarm_stringlist_cat/Makefile, regress/lib/libgfarm/gfarm/gfarm_stringlist_cat/normal.sh, regress/lib/libgfarm/gfarm/gfarm_stringlist_cat/stringlist_cat.c, regress/lib/libgfarm/gfarm/gfarm_stringlist_cat/stringlist_cat.sh, regress/lib/libgfarm/gfarm/gfarm_stringlist_elem/Makefile, regress/lib/libgfarm/gfarm/gfarm_stringlist_elem/normal.sh, regress/lib/libgfarm/gfarm/gfarm_stringlist_elem/stringlist_elem.c, regress/lib/libgfarm/gfarm/gfarm_stringlist_elem/stringlist_elem.sh, regress/lib/libgfarm/gfarm/gfarm_stringlist_init/Makefile, regress/lib/libgfarm/gfarm/gfarm_stringlist_init/normal.sh, regress/lib/libgfarm/gfarm/gfarm_stringlist_init/stringlist_init.c, regress/gftool/gfhost/display.sh, regress/gftool/gfhost/gfhost-l.sh, regress/gftool/gfhost/noopt.sh, regress/gftool/gfimport_text/-H_0byte.sh, regress/gftool/gfimport_text/-H_multilines.sh, regress/gftool/gfimport_text/gfimport_text-H.sh, regress/gftool/gfimport_text/import_text-H_0byte.sh, regress/gftool/gfimport_text/import_text-H_multilines.sh, regress/gftool/gfls/gfls-l.sh, regress/gftool/gfreg/gfreg-D.sh, regress/gftool/gfreg/gfreg-H.sh, regress/gftool/gfreg/gfreg-N-I.sh, regress/gftool/gfreg/gfreg-a.sh, regress/gftool/gfreg/gfreg-r.sh, regress/gftool/gfreg/gfreg-r_dir_to_new_url.sh, regress/gftool/gfreg/gfreg-r_file_to_new_url.sh, regress/gftool/gfreg/gfreg-r_program_to_new_url.sh, regress/gftool/gfrep/gfrep-D.sh, regress/gftool/gfrep/gfrep-D_dir.sh, regress/gftool/gfrep/gfrep-D_exec.sh, regress/gftool/gfrep/gfrep-D_non-exec.sh, regress/gftool/gfrep/gfrep-H.sh, regress/gftool/gfrep/gfrep-H_dir.sh, regress/gftool/gfrep/gfrep-H_exec.sh, regress/gftool/gfrep/gfrep-H_non-exec.sh, regress/gftool/gfrep/gfrep-N2.sh, regress/gftool/gfrep/gfrep-N2_dir.sh, regress/gftool/gfrep/gfrep-N2_exec.sh, regress/gftool/gfrep/gfrep-N2_non-exec.sh, regress/gftool/gfrep/gfrep-d.sh, regress/gftool/gfrep/gfrep-d_dir.sh, regress/gftool/gfrep/gfrep-d_exec.sh, regress/gftool/gfrep/gfrep-d_non-exec.sh, regress/gftool/gfrep/grep-N2_non-exec.sh, regress/gftool/gfrm/gfrm-r.sh, regress/gftool/gfrm/gfrm-r_dir.sh, regress/gftool/gfrm/gfrm-r_file.sh, regress/gfs_hook/tool/build/configure_make.sh, regress/gfs_hook/tool/dd/dd.sh, regress/gfs_hook/tool/gzip/gzip-d.sh, regress/gfs_hook/tool/pax/pax-r.sh, regress/gfs_hook/tool/touch/touch_time.sh, regress/gftool/gfdf/gfdf-H.sh, regress/gftool/gfdf/gfdf-h.sh, regress/gftool/gfdf/gfdf.sh, regress/gftool/gfexport/gfexport.sh, package/freebsd/Makefile, package/freebsd/pkg-plist, package/pkgsrc/Makefile, package/pkgsrc/PLIST, package/redhat/gfarm.spec, package/solaris/build, regress/Makefile, regress/README.ja, regress/XFAIL, regress/account.sh, regress/config.sh, regress/regress.conf, regress/regress.sh, regress/schedule, regress/tst.sh, man/ja/man1/gfarm_agent.1, man/ja/man1/gfrm.1, man/ja/man1/gfrun.1, man/ja/man5/gfarm.conf.5, man/ja/man8/gfmd.8, man/ja/man8/gfsd.8, man/man1/gfarm_agent.1, man/man1/gfdf.1, man/man1/gfexec.1, man/man1/gfhost.1, man/man1/gfkey.1, man/man1/gfps.1, man/man1/gfrcmd.1, man/man1/gfrep.1, man/man1/gfrm.1, man/man1/gfront.1, man/man1/gfrun.1, man/man1/gfsched.1, man/man1/gfstat.1, man/man1/gfusage.1, man/man1/gfwhere.1, man/man1/gfwhoami.1, man/man3/gfs_chmod.3, man/man3/gfs_mkdir.3, man/man3/gfs_pio_create.3, man/man3/gfs_pio_open.3, man/man3/gfs_realpath.3, man/man3/gfs_rename.3, man/man3/gfs_rmdir.3, man/man3/gfs_unlink.3, man/man3/gfs_unlink_section.3, man/man5/gfarm.conf.5, man/man8/gfmd.8, man/man8/gfsd.8, lib/gfs_hook/Makefile, lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_fstat.c, lib/gfs_hook/hooks_stat.c, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/agent_client.c, lib/libgfarm/gfarm/agent_proto.c, lib/libgfarm/gfarm/agent_wrap.c, lib/libgfarm/gfarm/agent_wrap.h, lib/libgfarm/gfarm/auth_client_gsi.c, lib/libgfarm/gfarm/auth_server_gsi.c, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h, lib/libgfarm/gfarm/gfarm_foreach.c, lib/libgfarm/gfarm/gfarm_foreach.h, lib/libgfarm/gfarm/gfarm_list.c, lib/libgfarm/gfarm/gfarm_list.h, lib/libgfarm/gfarm/gfarm_xinfo.c, lib/libgfarm/gfarm/gfarm_xinfo.h, lib/libgfarm/gfarm/gfm_client.c, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_client_rep.c, lib/libgfarm/gfarm/gfs_lock.c, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_proto.h, lib/libgfarm/gfarm/gfs_stat.c, lib/libgfarm/gfarm/gfs_unlink.c, lib/libgfarm/gfarm/glob.c, lib/libgfarm/gfarm/hostcache.c, lib/libgfarm/gfarm/io_fd.c, lib/libgfarm/gfarm/io_fd.h, lib/libgfarm/gfarm/io_gfsl.c, lib/libgfarm/gfarm/metadb_access.h, lib/libgfarm/gfarm/metadb_ldap.c, lib/libgfarm/gfarm/metadb_localfs.c, lib/libgfarm/gfarm/metadb_misc.c, lib/libgfarm/gfarm/metadb_sw.c, lib/libgfarm/gfarm/path_info_cache.c, lib/libgfarm/gfarm/schedule.c, lib/libgfarm/gfarm/schedule.h, lib/libgfarm/gfsl/tcputil.c, lib/libgfarm/gfutil/Makefile, lib/libgfarm/gfutil/alloc.c, lib/libgfarm/gfutil/gfevent.c, lib/libgfarm/gfutil/gfutil.h, lib/libgfarm/gfutil/hash.c, lib/libgfarm/gfutil/logutil.c, lib/libgfarm/gfutil/send_no_sigpipe.c, lib/libgfarm/gfutil/timeval.c, makes/data.mk, makes/html.mk, makes/include.mk, makes/install-doc.in, makes/lib.mk, makes/man.mk, makes/script.mk, gftool/gfrm/Makefile, gftool/gfrm/gfrm.c, gftool/gfsck/gfsck.c, gftool/gfusage/gfusage.c, gftool/gfwhere/Makefile, gftool/gfwhere/gfwhere.c, gftool/gneo/gneo_client.c, gftool/gneo_agent/gneo_agent.c, include/gfarm/gfarm_misc.h, include/gfarm/gfs.h, gfptool/gfsplck/gfsplck.c, gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/gfarm.arch.guess, gftool/example/gfimport_text/gfimport_text.c, gftool/gfarm_agent/agent_thr.c, gftool/gfarm_agent/gfarm_agent.c, gftool/gfls/gfls.c, gftool/gfreg/gfreg.c, gftool/gfrep/gfrep.c, doc/html/ja/ref/man1/gfarm_agent.1.html, doc/html/ja/ref/man1/gfrm.1.html, doc/html/ja/ref/man1/gfrun.1.html, doc/html/ja/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man8/gfmd.8.html, doc/html/ja/ref/man8/gfsd.8.html, doc/html/ja/user/nfs-gfarmfs.html, gfptool/gfrepbe_client/gfrepbe_client.c, gfptool/gfrepbe_server/gfrepbe_server.c, doc/docbook/ja/ref/man8/gfmd.8.docbook, doc/docbook/ja/ref/man8/gfsd.8.docbook, doc/html/en/ref/man1/gfarm_agent.1.html, doc/html/en/ref/man1/gfdf.1.html, doc/html/en/ref/man1/gfexec.1.html, doc/html/en/ref/man1/gfhost.1.html, doc/html/en/ref/man1/gfkey.1.html, doc/html/en/ref/man1/gfps.1.html, doc/html/en/ref/man1/gfrcmd.1.html, doc/html/en/ref/man1/gfrep.1.html, doc/html/en/ref/man1/gfrm.1.html, doc/html/en/ref/man1/gfront.1.html, doc/html/en/ref/man1/gfrun.1.html, doc/html/en/ref/man1/gfsched.1.html, doc/html/en/ref/man1/gfstat.1.html, doc/html/en/ref/man1/gfusage.1.html, doc/html/en/ref/man1/gfwhere.1.html, doc/html/en/ref/man1/gfwhoami.1.html, doc/html/en/ref/man3/gfs_chmod.3.html, doc/html/en/ref/man3/gfs_mkdir.3.html, doc/html/en/ref/man3/gfs_pio_create.3.html, doc/html/en/ref/man3/gfs_pio_open.3.html, doc/html/en/ref/man3/gfs_realpath.3.html, doc/html/en/ref/man3/gfs_rename.3.html, doc/html/en/ref/man3/gfs_rmdir.3.html, doc/html/en/ref/man3/gfs_unlink.3.html, doc/html/en/ref/man3/gfs_unlink_section.3.html, doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/en/ref/man8/gfmd.8.html, doc/html/en/ref/man8/gfsd.8.html, doc/html/en/user/nfs-gfarmfs.html, doc/docbook/ja/ref/man1/gfarm_agent.1.docbook, doc/docbook/ja/ref/man1/gfrm.1.docbook, doc/docbook/ja/ref/man1/gfrun.1.docbook, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook, debian/changelog, doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja, doc/KNOWN_PROBLEMS.en, doc/KNOWN_PROBLEMS.ja, doc/Makefile, doc/README.hook.en, doc/README.hook.ja, doc/SETUP.detail.en, doc/SETUP.detail.ja, doc/docbook/en/ref/man1/gfarm_agent.1.docbook, doc/docbook/en/ref/man1/gfdf.1.docbook, doc/docbook/en/ref/man1/gfexec.1.docbook, doc/docbook/en/ref/man1/gfhost.1.docbook, doc/docbook/en/ref/man1/gfkey.1.docbook, doc/docbook/en/ref/man1/gfps.1.docbook, doc/docbook/en/ref/man1/gfrcmd.1.docbook, doc/docbook/en/ref/man1/gfrep.1.docbook, doc/docbook/en/ref/man1/gfrm.1.docbook, doc/docbook/en/ref/man1/gfront.1.docbook, doc/docbook/en/ref/man1/gfrun.1.docbook, doc/docbook/en/ref/man1/gfsched.1.docbook, doc/docbook/en/ref/man1/gfstat.1.docbook, doc/docbook/en/ref/man1/gfusage.1.docbook, doc/docbook/en/ref/man1/gfwhere.1.docbook, doc/docbook/en/ref/man1/gfwhoami.1.docbook, doc/docbook/en/ref/man3/gfs_chmod.3.docbook, doc/docbook/en/ref/man3/gfs_chown.3.docbook, doc/docbook/en/ref/man3/gfs_mkdir.3.docbook, doc/docbook/en/ref/man3/gfs_pio_create.3.docbook, doc/docbook/en/ref/man3/gfs_pio_open.3.docbook, doc/docbook/en/ref/man3/gfs_realpath.3.docbook, doc/docbook/en/ref/man3/gfs_rename.3.docbook, doc/docbook/en/ref/man3/gfs_rmdir.3.docbook, doc/docbook/en/ref/man3/gfs_unlink.3.docbook, doc/docbook/en/ref/man3/gfs_unlink_section.3.docbook, doc/docbook/en/ref/man5/gfarm.conf.5.docbook, doc/docbook/en/ref/man8/gfmd.8.docbook, doc/docbook/en/ref/man8/gfsd.8.docbook, bench/fsysbench/fsysbench.c, ChangeLog, INSTALL.RPM.en, INSTALL.RPM.ja, INSTALL.en, INSTALL.ja, OVERVIEW.en, OVERVIEW.ja, README.en, README.ja, RELNOTES, SETUP.en, SETUP.ja:
	merge changes of gfarm_v1 main trunk on 20 November, 2006.

	* lib/libgfarm/gfarm/gfs_pio_scramble.c:
	- enable gfs_pio_scramble_chmod() to work.
	- merge changes of gfarm_v1 main trunk on 20 November, 2006.

	* lib/libgfarm/gfarm/gfs_chmod.c:
	change the permission of spool-entries in scramble view too. (bugfix)

2006-11-22  Noriyuki Soda  <soda@sra.co.jp>

	* regress/README.ja, regress/config.sh:
	set characteristics of the test environment to
	$REGRESS_BACKEND, $REGRESS_AUTH and $REGRESS_AGENT.
	Currently $REGRESS_AGENT is used by gftool/gfusage/gfusage.sh.

	Note that each test should run even if these environment variables aren't set.

	* regress/gftool/gfusage/gfusage.sh:
	return $exit_unsupported, if this test runs within "agent_only" environment,
	because gfusage doesn't support such environment.

	* regress/gftool/gfusage/gfusage.sh:
	make this test work in an environment which isn't within "make selfcheck" one.

	XXX this test still has race condition, if another process is running
	    concurrently.

2006-11-21  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule: add  gftool/gfstat/gfstat.sh
	     gftool/gfusage/gfusage.sh
	     gftool/gfsched/gfsched.sh

	* regress/gftool/gfusage/gfusage.sh: test script for "gfusage"

	* regress/gftool/gfstat/gfstat.sh: test script for "gfstat <gfarm-URL>"

	* regress/gftool/gfsched/gfsched.sh:
	test script for "gfsched <gfarm-URL>"

2006-11-20  Takuya Ishibashi  <takuya@soum.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_scramble.h, include/gfarm/gfs.h:
	- export gfs_scramble_make_replica() to gfs.h.
	- export gfs_scramble_param_set() and gfs_scramble_param_get() to gfs.h.

2006-11-17  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule:
	- replace gftool/gfrep/gfrep-D.sh with gftool/gfrep/gfrep-D_{,non}-exec.sh
	- add gftool/gfrep/gfrep-H_dir.sh

	* regress/gftool/gfrep/gfrep-H_dir.sh:
	add removing the gfarm temporary directory missed in the previous revision

	* regress/gftool/gfrep/gfrep-H_dir.sh:
	test script for "gfrep -H <hostfile> <gfarm-URL(directory)>"

	* regress/gftool/gfrep/gfrep-D_non-exec.sh:
	test script for "gfrep -D <destination-domainname> <gfarm-URL(non-executable file)>

	* regress/gftool/gfrep/gfrep-D_exec.sh:
	test script for "gfrep -D <destination-domainname> <gfarm-URL(executable file)>"

	* regress/gftool/gfrep/gfrep-D.sh:
	rewrite to a common script that takes an argument as file

	* doc/Gfarm-FAQ.en, doc/KNOWN_PROBLEMS.en, doc/README.hook.en, doc/SETUP.detail.en, SETUP.en:
	formatting fix

2006-11-16  Noriyuki Soda  <soda@sra.co.jp>

	* README.en, doc/Gfarm-FAQ.en: formatting fix

2006-11-16  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule:
	- replace gftool/gfrep/gfrep-d.sh with gftool/gfrep/gfrep-d_{,non-}exec.sh
	- add gftool/gfdf/gfdf.sh
	      gftool/gfdf/gfdf-H.sh
	      gftool/gfdf/gfdf-h.sh

	* regress/gftool/gfdf/gfdf-h.sh: test script for "gfdf -h <hostname>"

	* regress/gftool/gfdf/gfdf-H.sh: test script for "gfdf -H <hostfile>"

	* regress/gftool/gfdf/gfdf.sh:
	add check on the number of available hosts

	* regress/gftool/gfdf/gfdf.sh: test script for "gfdf"

	* regress/gftool/gfrep/gfrep-d_exec.sh:
	test script for "gfrep -d <destination-node> <gfarm-URL(executable file)>"

	* regress/gftool/gfrep/gfrep-d_non-exec.sh:
	test script for "gfrep -d <destination-node> <gfarm-URL(non-executable file)>"

	* regress/gftool/gfrep/gfrep-d.sh:
	rewrite to a common script that takes an argument as file

2006-11-15  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule:
	- replace gftool/gfrep/gfrep-N2.sh with gftool/gfrep/gfrep-N2_non-exec.sh
	- add gftool/gfrep/gfrep-N2_exec.sh

	* regress/gftool/gfrep/gfrep-N2_non-exec.sh:
	test script for "gfrep -N2 <gfarm-URL(non-executable file)>"

	* regress/gftool/gfrep/gfrep-N2_exec.sh:
	test script for "gfrep -N2 <gfarm-URL(executable file)>"

	* regress/gftool/gfrep/grep-N2_non-exec.sh:
	test script for "gfrep -N2 <hostfile> <gfarm-URL(non-executable file)>

	* regress/gftool/gfrep/gfrep-N2.sh:
	rewrite to a common script that takes an argument as file

	* regress/gftool/gfrep/gfrep-D.sh, regress/gftool/gfrep/gfrep-N2.sh, regress/gftool/gfrep/gfrep-N2_dir.sh, regress/gftool/gfrep/gfrep-d.sh, regress/gftool/gfrep/gfrep-d_dir.sh:
	add check on the number of available hosts

	* regress/schedule:
	replace gftool/gfrep/gfrep-H.sh with gftool/gfrep/gfrep-H_non-exec.sh

	* regress/gftool/gfrep/gfrep-H_exec.sh:
	call the common script, gfrep-H.sh

	* regress/gftool/gfrep/gfrep-H_non-exec.sh:
	test script for "gfrep -H <hostfile> <gfarm-URL(non-executable file>)

	* regress/gftool/gfrep/gfrep-H.sh:
	rewrite to a common script that takes an argument as file

2006-11-14  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec:
	provide every gfarm-SUBPACKAGE-%{ver}-%{rel} virtual package in GSI case.
	since gfarm-devel-%{ver}-%{rel} is requested by Ishibashi-san
	in [gfarm-developers:02256]

2006-11-14  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule: add gftool/gfrep/gfrep-H_exec.sh

2006-11-13  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gftool/gfrep/gfrep-H_exec.sh:
	test script for "gfrep -H <hostfile> <gfarm-URL(program)>"

2006-11-13  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* ChangeLog: Catched up with the current ChangeLog.

2006-11-13  Noriyuki Soda  <soda@sra.co.jp>

	* doc/KNOWN_PROBLEMS.ja: fix te-ni-wo-ha

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja, doc/KNOWN_PROBLEMS.en, doc/KNOWN_PROBLEMS.ja:
	describe more detailed condtion of the nss_ldap problem:
	system-supplied pthread library is the cause.

2006-11-12  Noriyuki Soda  <soda@sra.co.jp>

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja, doc/KNOWN_PROBLEMS.en, doc/KNOWN_PROBLEMS.ja:
	clarify the nss_ldap problem,
	from [gfarm-developers:02236] and [gfarm-developers:02238]

	* INSTALL.en, INSTALL.ja:
	describe conflicts between OpenLDAP and Globus on FreeBSD,
	as reported in [gfarm-developers:02236]

	* doc/README.hook.en, doc/README.hook.ja:
	add limitations found in [gfarm-developers:02231]

	* doc/README.hook.en: recover changes which were lost in revision 1.48

	* man/ja/man1/gfrun.1, man/man1/gfrun.1, doc/html/en/ref/man1/gfrun.1.html, doc/html/ja/ref/man1/gfrun.1.html:
	regen

2006-11-12  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/Gfarm-FAQ.en, doc/KNOWN_PROBLEMS.en, doc/README.hook.en, doc/SETUP.detail.en:
	change `file system' to `filesystem' for uniformity

2006-11-12  Noriyuki Soda  <soda@sra.co.jp>

	* doc/docbook/en/ref/man1/gfrun.1.docbook, doc/docbook/ja/ref/man1/gfrun.1.docbook:
	add the answer for question 2) which was asked in the recent Gfarm seminar.
	from [gfarm-developers:02122]

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	add answers for question 1) and 6) which were asked in the recent Gfarm seminar

2006-11-12  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/Gfarm-FAQ.en, doc/KNOWN_PROBLEMS.en, doc/README.hook.en, doc/SETUP.detail.en:
	correct errors pointed out in native checked file "doc-RewrittenNov06.doc"
	attached to [gfarm-developers:02171]

	* INSTALL.RPM.en, OVERVIEW.en, SETUP.en:
	change `file system' to `filesystem' for uniformity

	* doc/html/en/ref/man1/gfarm_agent.1.html, doc/html/en/ref/man1/gfdf.1.html, doc/html/en/ref/man1/gfexec.1.html, doc/html/en/ref/man1/gfhost.1.html, doc/html/en/ref/man1/gfkey.1.html, doc/html/en/ref/man1/gfps.1.html, doc/html/en/ref/man1/gfrcmd.1.html, doc/html/en/ref/man1/gfrep.1.html, doc/html/en/ref/man1/gfrm.1.html, doc/html/en/ref/man1/gfront.1.html, doc/html/en/ref/man1/gfrun.1.html, doc/html/en/ref/man1/gfsched.1.html, doc/html/en/ref/man1/gfstat.1.html, doc/html/en/ref/man1/gfusage.1.html, doc/html/en/ref/man1/gfwhere.1.html, doc/html/en/ref/man1/gfwhoami.1.html, doc/html/en/ref/man3/gfs_chmod.3.html, doc/html/en/ref/man3/gfs_mkdir.3.html, doc/html/en/ref/man3/gfs_pio_create.3.html, doc/html/en/ref/man3/gfs_pio_open.3.html, doc/html/en/ref/man3/gfs_realpath.3.html, doc/html/en/ref/man3/gfs_rename.3.html, doc/html/en/ref/man3/gfs_rmdir.3.html, doc/html/en/ref/man3/gfs_unlink.3.html, doc/html/en/ref/man3/gfs_unlink_section.3.html, doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/en/ref/man8/gfmd.8.html, doc/html/en/ref/man8/gfsd.8.html, man/man1/gfarm_agent.1, man/man1/gfdf.1, man/man1/gfexec.1, man/man1/gfhost.1, man/man1/gfkey.1, man/man1/gfps.1, man/man1/gfrcmd.1, man/man1/gfrep.1, man/man1/gfrm.1, man/man1/gfront.1, man/man1/gfrun.1, man/man1/gfsched.1, man/man1/gfstat.1, man/man1/gfusage.1, man/man1/gfwhere.1, man/man1/gfwhoami.1, man/man3/gfs_chmod.3, man/man3/gfs_mkdir.3, man/man3/gfs_pio_create.3, man/man3/gfs_pio_open.3, man/man3/gfs_realpath.3, man/man3/gfs_rename.3, man/man3/gfs_rmdir.3, man/man3/gfs_unlink.3, man/man3/gfs_unlink_section.3, man/man5/gfarm.conf.5, man/man8/gfmd.8, man/man8/gfsd.8:
	regen

	* doc/docbook/en/ref/man1/gfarm_agent.1.docbook, doc/docbook/en/ref/man1/gfexec.1.docbook, doc/docbook/en/ref/man1/gfrm.1.docbook, doc/docbook/en/ref/man1/gfront.1.docbook, doc/docbook/en/ref/man1/gfstat.1.docbook, doc/docbook/en/ref/man3/gfs_chmod.3.docbook, doc/docbook/en/ref/man3/gfs_chown.3.docbook, doc/docbook/en/ref/man3/gfs_mkdir.3.docbook, doc/docbook/en/ref/man3/gfs_pio_create.3.docbook, doc/docbook/en/ref/man3/gfs_pio_open.3.docbook, doc/docbook/en/ref/man3/gfs_realpath.3.docbook, doc/docbook/en/ref/man3/gfs_rename.3.docbook, doc/docbook/en/ref/man3/gfs_rmdir.3.docbook, doc/docbook/en/ref/man3/gfs_unlink.3.docbook, doc/docbook/en/ref/man3/gfs_unlink_section.3.docbook:
	change `file system' to `filesystem' for uniformity

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook:
	make corrections missed in previous 2 revisions

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook:
	make corrections missed in previous revision

2006-11-12  Noriyuki Soda  <soda@sra.co.jp>

	* package/freebsd/Makefile:
	add "--without-openldap", if WITH_GLOBUS is specified.
	Without this fix, gfarm binaries dump core, when GSI is used.

2006-11-12  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/docbook/en/ref/man8/gfsd.8.docbook:
	make corrections missed in previous revision

	* doc/docbook/en/ref/man1/gfrun.1.docbook:
	make a correction missed in previous revision

	* doc/docbook/en/ref/man1/gfrep.1.docbook, doc/docbook/en/ref/man1/gfrcmd.1.docbook, doc/docbook/en/ref/man8/gfmd.8.docbook, doc/docbook/en/ref/man1/gfhost.1.docbook:
	make corrections missed in previous revision

	* doc/docbook/en/ref/man1/gfsched.1.docbook, doc/docbook/en/ref/man1/gfstat.1.docbook, doc/docbook/en/ref/man1/gfusage.1.docbook, doc/docbook/en/ref/man1/gfwhere.1.docbook, doc/docbook/en/ref/man1/gfwhoami.1.docbook, doc/docbook/en/ref/man8/gfsd.8.docbook, doc/docbook/en/ref/man1/gfps.1.docbook, doc/docbook/en/ref/man1/gfrcmd.1.docbook, doc/docbook/en/ref/man1/gfrep.1.docbook, doc/docbook/en/ref/man1/gfrm.1.docbook, doc/docbook/en/ref/man1/gfrun.1.docbook, doc/docbook/en/ref/man8/gfmd.8.docbook:
	correct errors pointed out in native checked file "manRewrittenNov06.doc"
	attached to [gfarm-developers:02194]

2006-11-12  Yusuke Tanimura  <yusuke.tanimura@aist.go.jp>

	* RELNOTES: add the bugzilla number

2006-11-12  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/docbook/en/ref/man1/gfhost.1.docbook, doc/docbook/en/ref/man1/gfexec.1.docbook:
	update modified date

	* doc/docbook/en/ref/man1/gfkey.1.docbook:
	correct errors pointed out in native checked file "manRewrittenNov06.doc"
	attached to [gfarm-developers:02194]

	* doc/docbook/en/ref/man1/gfarm_agent.1.docbook, doc/docbook/en/ref/man1/gfdf.1.docbook, doc/docbook/en/ref/man1/gfexec.1.docbook, doc/docbook/en/ref/man1/gfhost.1.docbook:
	correct errors pointed out in native checked file "manRewrittenNov06.doc" attached to [gfarm-developers:02194]

2006-11-12  Noriyuki Soda  <soda@sra.co.jp>

	* regress/README.ja:
	more more tips: how to check a test case with all configurations

	* regress/Makefile:
	record testing mode to "log" file and stderr, instead of stdout

2006-11-11  Noriyuki Soda  <soda@sra.co.jp>

	* regress/Makefile, regress/README.ja, regress/config.sh:
	test gfarm_agent and gsi/gsi_auth authentication

	* regress/lib/libgfarm/gfarm/fork-term-init/fti-unlink.c:
	fix portability problem on Solaris

	* regress/Makefile, regress/README.ja:
	add "make xfail-check" target to see test cases which return "expected failure"
	($exit_xfail), but the rationale isn't documented in file XFAIL.

	* regress/XFAIL: record expected failures ($exit_xfail) here

	* regress/gfs_hook/tool/build/configure_make.sh, regress/gfs_hook/tool/dd/dd.sh, regress/gfs_hook/tool/gzip/gzip-d.sh, regress/gfs_hook/tool/pax/pax-r.sh, regress/gfs_hook/tool/touch/touch_time.sh:
	change the exit code to "expected failure" ($exit_xfail) for test cases
	which have documented known problems.

	* doc/README.hook.en, doc/README.hook.ja:
	note "Bad file descriptor" problem of dd(1) command on Fedora Core 5.
	The cause of this haven't been investigated yet.

	* doc/README.hook.en, doc/README.hook.ja:
	note that pthread programs and using syscalls from async-signal-handlers
	aren't guaranteed to work with gfs_hook.

	* doc/README.hook.en, doc/README.hook.ja:
	clarify touch(2)/futimes(3) problem which occurs on Fedora Core 5

2006-11-11  Yusuke Tanimura  <yusuke.tanimura@aist.go.jp>

	* RELNOTES: fix a typo

2006-11-11  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* RELNOTES: delete unnecessary items.
	improve wording.

2006-11-11  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/html/en/ref/man5/gfarm.conf.5.html, man/man5/gfarm.conf.5: regen

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook:
	correct errors pointed out in native checked file "manRewrittenNov06.doc"

	* SETUP.en: typo

	* INSTALL.RPM.en, INSTALL.en, OVERVIEW.en, README.en, SETUP.en:
	correct errors pointed out in native checked file "GfarmRewrittenNov06.doc"

2006-11-10  Noriyuki Soda  <soda@sra.co.jp>

	* package/solaris/build: postgresql: 8.1.3 -> 8.1.5
	openldap: 2.3.20 -> 2.3.28
	openssl: 0.9.7i -> 0.9.8d

	* package/solaris/build:
	reflect cc and gcc versions of new build machine

	* package/solaris/build: globus is updated from gt-2.4.3 to gt-4.0.3

	* doc/README.hook.en, doc/README.hook.ja:
	note that touch(1) command and futimes(3) function don't work since glibc-2.3.3.

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_fstat.c, lib/gfs_hook/hooks_stat.c:
	preserve `errno', if the system call succeeded.
	this change makes mkdir(1) and rmdir(1) return correct exit code on Solaris.

	* lib/libgfarm/gfarm/schedule.h, include/gfarm/gfarm_misc.h:
	export *_to_write() version of scheduling functions to users,
	because gfarm_schedule_search_idle_acyclic_by_domainname_to_write() is
	necessary for GfarmFS-FUSE.

2006-11-09  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/html/en/ref/man1/gfhost.1.html, doc/html/en/ref/man5/gfarm.conf.5.html, man/man1/gfhost.1, man/man5/gfarm.conf.5:
	regen

	* doc/docbook/en/ref/man1/gfhost.1.docbook, doc/docbook/en/ref/man5/gfarm.conf.5.docbook:
	correct serious errors intdicated by red-letter in native checked file
	"manRewritten Nov06.doc"

	* doc/KNOWN_PROBLEMS.en, doc/README.hook.en, doc/SETUP.detail.en:
	correct according to comments in [gfarm-developers:02197] by Tanaka Yoshio san

	* doc/Gfarm-FAQ.en, doc/KNOWN_PROBLEMS.en, doc/README.hook.en, doc/SETUP.detail.en:
	correct serious errors intdicated by red-letter in native checked file
	doc-RewrittenNov06.doc

	* INSTALL.en, OVERVIEW.en, SETUP.en:
	correct serious errors intdicated by red-letter in native checked file
	GfarmRewrittenNov06.doc

2006-11-08  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* INSTALL.en: fix a typo

	* doc/KNOWN_PROBLEMS.ja: wording

2006-11-08  Yusuke Tanimura  <yusuke.tanimura@aist.go.jp>

	* RELNOTES: Draft release-notes

2006-11-07  Noriyuki Soda  <soda@sra.co.jp>

	* makes/install-doc.in:
	create temporary file in /tmp, instead of current directory,
	because current directory may not be writable by root
	(e.g. in case of NFS home).
	problem reported by Yamamoto-san in [gfarm-developers:02169]

	* lib/libgfarm/gfarm/gfs_pio.c:
	gfs_fstat(): make this return st_atime and st_mtime in GFS_File
	instead of actual file.  This is at least consistent with what
	we are doing now in gfs_pio_close().  Although it is possible
	that the actual file has newer information, e.g. when it was
	modified by another process.

	* lib/libgfarm/gfarm/metadb_ldap.c, lib/libgfarm/gfarm/hostcache.c:
	forgot to change this in previous revision.

	* lib/libgfarm/gfarm/metadb_localfs.c:
	there is no reason to provide two different implementations of
	host_info_free routines any more.

	* lib/libgfarm/gfarm/metadb_sw.c:
	forgot to change this in previous revision.

	* lib/libgfarm/gfarm/agent_wrap.c, lib/libgfarm/gfarm/agent_wrap.h, lib/libgfarm/gfarm/hostcache.c, lib/libgfarm/gfarm/metadb_access.h, lib/libgfarm/gfarm/metadb_sw.c:
	there is no reason to provide two different implementations of
	host_info_free routines any more.

	* lib/libgfarm/gfarm/metadb_sw.c:
	backout previous change, gfarm_strarray_free() must be called even if
	info->nhostaliases == 0, because info->hostaliases itself needs to be freed.

2006-11-07  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/libgfarm/gfarm/agent_proto.c:
	fix memory leak, which is introduced by the revision 1.11 of metadb_sw.c

	* ChangeLog: Catched up with the current ChangeLog.

2006-11-07  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec:
	specify not only version number, but also revision number in "Provides:"

	* package/solaris/build, package/freebsd/Makefile, package/pkgsrc/Makefile, package/redhat/gfarm.spec:
	bump the version number from 1.3.1 to 1.4

	* package/redhat/gfarm.spec: fix syntax error in previous change

2006-11-07  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/changelog: version 1.4

2006-11-07  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec:
	- provide "gfarm-libs" and "gfarm-client" as virtual packages even in GSI case.
	  To use same GfarmFS-FUSE binary package for both GSI and non-GSI version.
	- strictly specify version number of gfarm-libs subpackage that
	  all other gfarm sub-packages depend on.
	  This should fix a problem that gfarm-libs wasn't automatically updated
	  when gfarm-clients was manually updated to newer version.

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook, include/gfarm/gfarm_misc.h, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h:
	- fix st_atime/st_mtime update.
	  now they are updated only when the file is actually read/written.
	- support "record_atime disable" directive in gfarm.conf
	  and gfarm_set_record_atime(0) API, as equivalents to
	  "noatime" mount option of usual filesystems.

	* regress/gfs_hook/tool/touch/touch_time.sh, regress/schedule:
	gfs_hook/tool/touch/touch_time.sh:
	test script to see whether "touch" can change file-modified-time or cannot.

2006-11-07  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule: add gftool/gfrep/gfrep-d_dir.sh

	* regress/gftool/gfrep/gfrep-d_dir.sh:
	test script for "gfrep -d <destination-node>> <gfarm-URL(directory)>"

2006-11-07  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_section.c:
	rename GFS_FILE_MODE_FILE_CREATED to GFS_FILE_MODE_FILE_WAS_CREATED

	* man/man8/gfmd.8, man/man8/gfsd.8, man/ja/man1/gfarm_agent.1, man/ja/man5/gfarm.conf.5, man/ja/man8/gfmd.8, man/ja/man8/gfsd.8, man/man1/gfarm_agent.1, man/man5/gfarm.conf.5:
	regen

	* lib/libgfarm/gfarm/agent_wrap.c:
	revert changes in revision 1.21, 1.23 and 1.24.
	Since gfarm_cache_host_info_*() functions now returns malloc()ed memory,
	we don't need to differentiate between host_info from gfarm_agent and
	host_info from local cache.

	* lib/libgfarm/gfarm/hostcache.c, lib/libgfarm/gfarm/metadb_sw.c:
	merge the following change in the sourceforge subversion repository:
	Revision: 3215
	          http://svn.sourceforge.net/gfarm/?rev=3215&view=rev
	Author:   tatebe
	Date:     2006-11-03 12:47:30 -0800 (Fri, 03 Nov 2006)

	allocate memory for a returned entry in gfarm_cache_host_info_get{,_get_name_alias}() and gfarm_cache_host_info_get_all() to make consistent with API for metadb.

	* gftool/gfrep/gfrep.c:
	make stderr line-buffering, to make writing-to-stderr atomic
	for GfarmFS-FUSE log output.

	* gftool/gfarm_agent/gfarm_agent.c:
	add a comment to describe why gfarm_agent doesn't call exit(2),
	when gfarm_initialize() fails.
	the reason was heard from tatebe-san.

	* doc/html/ja/ref/man1/gfarm_agent.1.html, doc/html/ja/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man8/gfmd.8.html, doc/html/ja/ref/man8/gfsd.8.html, doc/html/en/ref/man1/gfarm_agent.1.html, doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/en/ref/man8/gfmd.8.html, doc/html/en/ref/man8/gfsd.8.html:
	regen

	* doc/docbook/en/ref/man1/gfarm_agent.1.docbook, doc/docbook/ja/ref/man1/gfarm_agent.1.docbook:
	fix a syntax error which existed for a while

	* doc/docbook/en/ref/man1/gfarm_agent.1.docbook, doc/docbook/en/ref/man8/gfmd.8.docbook, doc/docbook/en/ref/man8/gfsd.8.docbook, doc/docbook/ja/ref/man1/gfarm_agent.1.docbook, doc/docbook/ja/ref/man8/gfmd.8.docbook, doc/docbook/ja/ref/man8/gfsd.8.docbook:
	correct syntax errors

	* lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h, lib/libgfarm/gfutil/gfutil.h, lib/libgfarm/gfutil/logutil.c, server/gfmd/gfmd.c, server/gfsd/gfsd.c, doc/docbook/en/ref/man1/gfarm_agent.1.docbook, doc/docbook/en/ref/man5/gfarm.conf.5.docbook, doc/docbook/en/ref/man8/gfmd.8.docbook, doc/docbook/en/ref/man8/gfsd.8.docbook, doc/docbook/ja/ref/man1/gfarm_agent.1.docbook, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man8/gfmd.8.docbook, doc/docbook/ja/ref/man8/gfsd.8.docbook, gftool/gfarm_agent/gfarm_agent.c:
	introduce "log_level" directive to gfarm.conf(5)
	and "-L <log_level>" option to gfarm_agent, gfsd and gfmd.
	Logs, which are inferier to this priority, won't be sent to syslog
	or standard error.

2006-11-06  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/schedule.c, lib/libgfarm/gfarm/schedule.h:
	when a connection error is observed, always remove the host from
	available hosts (i.e. hosts that authentication succeeded).
	so the host won't be choosen from cached available hosts at next scheduling.

	* include/gfarm/gfs.h:
	change the type of gfs_stat:st_ino from "long" to "unsigned long",
	to avoid mistakes like described in [gfarm-developers:01896].
	this shouldn't really break ABI, since its size is same.

	* server/gfsd/gfsd.c:
	SIGCHLD handler should preserve errno, otherwise select(2) and
	other system calls may see ECHILD or other errors from waitpid(2).
	problem pointed out by tatebe-san.

2006-11-04  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* server/gfsd/gfsd.c:
	add sanity check on a spool directory. [Bugzilla-ja #73]

	* lib/libgfarm/gfarm/gfs_pio_global.c: fix the previous change.

2006-11-03  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/libgfarm/gfarm/gfs_pio_global.c:
	allow fchmod in global mode when permitted

	* doc/html/en/ref/man1/gfrm.1.html, doc/html/ja/ref/man1/gfrm.1.html, man/ja/man1/gfrm.1, man/man1/gfrm.1:
	regen

	* doc/docbook/en/ref/man1/gfrm.1.docbook, doc/docbook/ja/ref/man1/gfrm.1.docbook:
	update description for new -D, -H, -N and -j options

2006-11-02  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/agent_wrap.c:
	- update a comment to reflect reality
	- rename a variable

	* lib/libgfarm/gfarm/agent_wrap.c:
	merge the following change in revision 1.23 from the main trunk:

	revise revision 1.21.
	- if host_info isn't acquired via hostcache, keep trying to use gfarm_agent,
	  as suggested by Ishibashi-san in [gfarm-developers:02100].
	- if both hostcache and gfarm_agent are used to acquire host_info,
	  never call the host_info freeing functions, because we don't know
	  which way is used to acquire each host_info.
	  XXX this may cause memory leak, but we have no choice for now.

	* lib/libgfarm/gfarm/agent_wrap.c: revise revision 1.21.
	- if host_info isn't acquired via hostcache, keep trying to use gfarm_agent,
	  as suggested by Ishibashi-san in [gfarm-developers:02100].
	- if both hostcache and gfarm_agent are used to acquire host_info,
	  never call the host_info freeing functions, because we don't know
	  which way is used to acquire each host_info.
	  XXX this may cause memory leak, but we have no choice for now.

	* gftool/gfarm_agent/gfarm_agent.c:
	do not log "file_section_copy_info_set: already exists",
	reported by Ishibashi-san in [gfarm-developers:02066]

2006-11-01  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule: add gftool/gfrep/gfrep-D_dir.sh
	    gftool/gfrep/gfrep-N2_dir.sh

	* regress/gftool/gfrep/gfrep-N2_dir.sh:
	test script for "gfrep -N <num-of-replicas> <gfarm-URL(directory)>"

	* regress/gftool/gfrep/gfrep-D_dir.sh:
	test script for "gfrep -D <destination-domainname>> <gfarm-URL(directory)>"

	* regress/gftool/gfrep/gfrep-H.sh:
	test script for "gfrep -H <hostfile> <gfarm-URL>"

	* regress/schedule: add gftool/gfrep/gfrep-H.sh

2006-10-31  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule: add gftool/gfreg/gfreg-r_dir_to_new_url.sh
	    gftool/gfreg/gfreg-r_program_to_new_url.sh
	    gftool/gfreg/gfreg-r_file_to_new_url.sh

	* lib/libgfarm/gfarm/path_info_cache.c:
	stop warning about unused variable

2006-10-31  Noriyuki Soda  <soda@sra.co.jp>

	* regress/config.sh:
	do not use ephemeral port range (*) for daily test.
	this should fix the test failure in [gfarm-cvs:09151],
	caused by "bind: Address already in use".

	(*)
	  old BSDs		1025 ... 5000
	  Linux until 2.2	1024 ... 4999
	  Linux since 2.4	32768 ... 61000
	  NetBSD & FreeBSD	49152 ... 65535

2006-10-31  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gftool/gfreg/gfreg-r_program_to_new_url.sh:
	test script for "gfreg -r <program> <gfarm-URL(does not exist)>"

	* regress/gftool/gfreg/gfreg-r_file_to_new_url.sh:
	test script for "gfreg -r <localfile> <gfarm-URL(does not exist)>"

	* regress/gftool/gfreg/gfreg-r_file_to_dir_not_exist.sh:
	rename to gfreg-r_file_to_new_url.sh

	* regress/gftool/gfreg/gfreg-r_dir_to_new_url.sh:
	test script for "gfreg -r <directory> <gfarm-URL(does not exist)>"

	* regress/gftool/gfreg/gfreg-r_dir_to_dir_not_exist.sh:
	rename to gfreg-r_dir_to_new_url.sh

	* regress/gftool/gfreg/gfreg-r_file_to_dir_not_exist.sh:
	test script for "gfreg -r <localfile> <gfarm-URL(does not exist)>"

	* regress/gftool/gfreg/gfreg-r_dir_to_dir_not_exist.sh:
	test script for "gfreg -r <directory> <gfarm-URL(does not exist)>"

	* gftool/gfreg/gfreg.c:
	check_arguments(): fix a bug in recursive mode that a new directory cannot be
	registered as new gfarm-URL

2006-10-31  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfrm/Makefile: $(openssl_includes) is needed.

	* lib/libgfarm/gfarm/path_info_cache.c:
	revise previous revision (it was wrong).

	* lib/libgfarm/gfarm/path_info_cache.c:
	check_update_time_interval(): change "while" to "if" to fix
	warning: "end-of-loop code not reached" from Sun Forte C Compiler.

2006-10-30  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gftool/gfreg/gfreg-D.sh:
	forgot to remove temprary file if this script exits in the middle

	* regress/gftool/gfrep/gfrep-D.sh:
	forgot to remove temprary file if exits in the middle of this script

	* regress/gftool/gfrep/gfrep-D.sh: fix a typo

2006-10-27  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule: add gftool/gfrm/gfrm-r_file.sh
	    gftool/gfrm/gfrm-r_dir.sh

	* regress/gftool/gfrm/gfrm-r.sh, regress/gftool/gfrm/gfrm-r_dir.sh, regress/gftool/gfrm/gfrm-r_file.sh:
	test script for "gfrm -r <gfarm-URL>"

	* regress/gftool/gfrep/gfrep-d.sh, regress/gftool/gfrep/gfrep-D.sh:
	remove the selection of awk because it is already selected in regress.conf

2006-10-26  Takuya Ishibashi  <takuya@soum.co.jp>

	* bench/fsysbench/fsysbench.c:
	use creat(2) instead of mknod(2). (for FUSE 2.2)

2006-10-26  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gftool/gfreg/gfreg-N-I.sh:
	correct condition that fails in case that fragments are registerd on 2 hosts

	* regress/schedule: add gftool/gfrep/gfrep-D.sh

2006-10-26  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* README.en, SETUP.en: typo

	* INSTALL.RPM.en, INSTALL.RPM.ja:
	add a note regarding the package name.

2006-10-26  Noriyuki Soda  <soda@sra.co.jp>

	* OVERVIEW.en, OVERVIEW.ja: add overview of authentication methods

	* SETUP.en, SETUP.ja: mention -a option of config-gfarm command,
	add some description about firewall settings.

2006-10-25  Noriyuki Soda  <soda@sra.co.jp>

	* OVERVIEW.ja, SETUP.ja, doc/SETUP.detail.ja:
	convert character code from ISO-2022-JP to EUC-JP like other documents

	* package/freebsd/pkg-plist, package/pkgsrc/PLIST, package/redhat/gfarm.spec, README.en, README.ja, doc/Makefile:
	oops, KNOWN_PROBLEMS.en and KNOWN_PROBLEMS.ja had been forgotten.

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	use "gfarm version 2" instead of "next major release",
	pointed out by Yamamoto-san in [gfarm-developers:01940]

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	mention GfarmFS-FUSE as well as the syscall hook library,
	about a substitute for gfmv.
	pointed out by Yamamoto-san in [gfarm-developers:01940]

	* doc/KNOWN_PROBLEMS.en, doc/KNOWN_PROBLEMS.ja:
	Change the following explanation
		It's not decided whether we will fix this problem in the gfarm
		v1 branch or not.
	to
		Currently, there is no plan to fix this problem in the gfarm v1
		branch.
	pointed out by Yamamoto-san in [gfarm-developers:01940]

	* doc/README.hook.ja, doc/KNOWN_PROBLEMS.en, doc/KNOWN_PROBLEMS.ja, doc/README.hook.en:
	describe the nss_ldap problem on Fedora Core 3 and 5.

	* OVERVIEW.en, OVERVIEW.ja, SETUP.en, SETUP.ja:
	apply comments in [gfarm-developers:01868] from grid-support team

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	add more description about trouble shooting of GSI authentication errors

	* doc/Makefile, doc/SETUP.detail.en, doc/SETUP.detail.ja, package/freebsd/pkg-plist, package/pkgsrc/PLIST, package/redhat/gfarm.spec, INSTALL.RPM.en, INSTALL.RPM.ja, INSTALL.en, INSTALL.ja, OVERVIEW.en, OVERVIEW.ja, README.en, README.ja, SETUP.en, SETUP.ja:
	restructure documents

2006-10-25  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gftool/gfrep/gfrep-D.sh:
	test script for "gfrep -D <destination-domainname> <gfarm-URL>"

2006-10-24  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	add 2.4 It is not possible to create a file replica by 'gfrep' command, due to "text file busy" error.
	It is requested by [bugzilla-ja #60].

2006-10-24  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/config-gfarm/config-gfarm.in:
	do not display any error of stty at trap handler,
	because stdin may not be a tty.

	* regress/account.sh: correct summary message

	* gftool/config-gfarm/gfarm.arch.guess: deal with CentOS:
	convert "CentOS release 4.4 (Final)" in /etc/redhat-release
	to something like "i386-centos4.4-linux"

2006-10-24  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule: add gftool/gfreg/gfreg-D.sh
	    gftool/gfreg/gfreg-a.sh
	    gftool/gfreg/gfreg-N-I.sh
	    gftool/gfreg/gfreg-r.sh

	* regress/gftool/gfreg/gfreg-r.sh: remove a statement for debug

	* regress/gftool/gfreg/gfreg-r.sh:
	test script for "gfreg -r <directory> <gfarm-URL>"

	* regress/gftool/gfreg/gfreg-a.sh:
	test script for "gfreg -a <architecture> <program> <gfarm-URL>"

	* regress/gftool/gfreg/gfreg-N-I.sh:
	test script for "gfreg -N <total-num-of-fragments> -I <fragment-index>
	<localfile> <gfarm_URL>"

	* regress/gftool/gfreg/gfreg-H.sh, regress/gftool/gfreg/gfreg-D.sh:
	change a temporary file's name to concise one

2006-10-23  Noriyuki Soda  <soda@sra.co.jp>

	* regress/Makefile, regress/account.sh, regress/regress.conf, regress/regress.sh, regress/tst.sh:
	print full total at the end of "make selfcheck",
	instead of subtotals of each backend.

2006-10-23  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gftool/gfreg/gfreg-D.sh:
	test script for "gfhost -D <domainname> <local file> <gfarm_URL>"

	* regress/gftool/gfreg/gfreg-H.sh:
	remove a needless temporay file from this script

	* regress/gftool/gfreg/gfreg-H.sh: remove temporary files

	* regress/schedule: add gftool/gfreg/gfreg-H.sh

2006-10-23  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfwhere/gfwhere.c:
	report error message in the recursive case too,
	pointed out by tatebe-san

	* lib/libgfarm/gfarm/schedule.c, lib/libgfarm/gfarm/schedule.h, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_pio_section.c:
	when a gfsd stops to work, retry other gfsd,
	if the gfs_pio is read-only mode, and other replica is available.

2006-10-21  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/libgfarm/gfarm/gfarm_foreach.c: eliminate loop common expression
	use GFARM_MALLOC_ARRAY

2006-10-19  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfwhere/gfwhere.c:
	fix the following problem (introduced in revision 1.13):
	http://datafarm.apgrid.org/bugzilla-ja/show_bug.cgi?id=71
		summary: gfwhere doesn't answer "no such object"

	* lib/libgfarm/gfarm/gfarm_foreach.c:
	gfarm_foreach_directory_hierarchy(): add "/" only if necessary

2006-10-19  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gftool/gfreg/gfreg-H.sh:
	test script for "gfreg -H <hostfile> <localfile> <gfarm-URL>"

	* regress/gftool/gfhost/display.sh: recover a commented out statement

2006-10-18  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule: add gftool/gfhost/gfhost-l.sh
	    gftool/gfls/gfls-l.sh
	rename some scripts

	* regress/gftool/gfls/gfls-l.sh: test script for "gfls -l <file>"

	* regress/gftool/gfexport/gfexport.sh: remove a needless statement

	* regress/gftool/gfimport_text/import_text-H_multilines.sh:
	test script for "gfimport_text -H <hostfile> <input file>"
	rename from -H_multilines.sh

	* regress/gftool/gfimport_text/import_text-H_0byte.sh:
	test script for "gfimport_text -H <hostfile> <input file>"
	rename from -H_0byte.sh

	* regress/gftool/gfhost/noopt.sh: add a comment

	* regress/gftool/gfhost/gfhost-l.sh: test script for "gfhost -l"

	* regress/gftool/gfhost/noopt.sh: use display.sh

	* regress/gftool/gfhost/display.sh: modify noopt.sh for code_sharing

	* regress/schedule: add gftool/gfimport_text/-H_0byte.sh
	    gftool/gfimport_text/-H_multilines.sh

	* regress/gftool/gfimport_text/-H_0byte.sh, regress/gftool/gfimport_text/-H_multilines.sh, regress/gftool/gfimport_text/gfimport_text-H.sh:
	test script for "gfimport_text -H <hostfile> <input file>"

2006-10-17  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_pio_flush/normal.sh
	    lib/libgfarm/gfarm/gfs_pio_sync/normal.sh
	    lib/libgfarm/gfarm/gfs_pio_datasync/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_datasync/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_datasync/datasync.c, regress/lib/libgfarm/gfarm/gfs_pio_datasync/normal.sh:
	build lib/libgfarm/gfarm/gfs_pio_datasync/datasync, and
	test  lib/libgfarm/gfarm/gfs_pio_datasync/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_sync/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_sync/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_sync/sync.c:
	build lib/libgfarm/gfarm/gfs_pio_sync/sync, and
	test  lib/libgfarm/gfarm/gfs_pio_sync/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_flush/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_flush/flush.c, regress/lib/libgfarm/gfarm/gfs_pio_flush/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_flush/write_buffered.sh:
	build lib/libgfarm/gfarm/gfs_pio_flush/flush and
	test  lib/libgfarm/gfarm/gfs_pio_flush/normal.sh

2006-10-16  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/GFARM_STRINGLIST_STRARRAY/normal.sh

	* regress/lib/libgfarm/gfarm/GFARM_STRINGLIST_STRARRAY/Makefile, regress/lib/libgfarm/gfarm/GFARM_STRINGLIST_STRARRAY/STRINGLIST_STRARRAY.c, regress/lib/libgfarm/gfarm/GFARM_STRINGLIST_STRARRAY/STRINGLIST_STRARRAY.sh, regress/lib/libgfarm/gfarm/GFARM_STRINGLIST_STRARRAY/normal.sh:
	build lib/libgfarm/gfarm/GFARM_STRINGLIST_STRARRAY/STRINGLIST_STRARRAY, and
	test  lib/libgfarm/gfarm/GFARM_STRINGLIST_STRARRAY/normal.sh

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/GFARM_STRINGLIST_ELEM/normal.sh

	* regress/lib/libgfarm/gfarm/GFARM_STRINGLIST_ELEM/Makefile, regress/lib/libgfarm/gfarm/GFARM_STRINGLIST_ELEM/STRINGLIST_ELEM.c, regress/lib/libgfarm/gfarm/GFARM_STRINGLIST_ELEM/STRINGLIST_ELEM.sh, regress/lib/libgfarm/gfarm/GFARM_STRINGLIST_ELEM/normal.sh:
	build lib/libgfarm/gfarm/GFARM_STRINGLIST_ELEM/STRINGLIST_ELEM, and
	test  lib/libgfarm/gfarm/GFARM_STRINGLIST_ELEM/normal.sh

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfarm_stringlist_cat/normal.sh

	* regress/lib/libgfarm/gfarm/gfarm_stringlist_cat/Makefile, regress/lib/libgfarm/gfarm/gfarm_stringlist_cat/normal.sh, regress/lib/libgfarm/gfarm/gfarm_stringlist_cat/stringlist_cat.c, regress/lib/libgfarm/gfarm/gfarm_stringlist_cat/stringlist_cat.sh:
	build lib/libgfarm/gfarm/gfarm_stringlist_cat/stringlist_cat, and
	test  lib/libgfarm/gfarm/gfarm_stringlist_cat/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_glob_add/normal.sh:
	remove a needless exit statement

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfarm_stringlist_lenght/normal.sh

	* regress/lib/libgfarm/gfarm/gfarm_stringlist_length/Makefile, regress/lib/libgfarm/gfarm/gfarm_stringlist_length/normal.sh, regress/lib/libgfarm/gfarm/gfarm_stringlist_length/stringlist_length.c, regress/lib/libgfarm/gfarm/gfarm_stringlist_length/stringlist_length.sh:
	build lib/libgfarm/gfarm/gfarm_stringlist_length/stringlist_length, and
	test  lib/libgfarm/gfarm/gfarm_stringlist_length/normal.sh

2006-10-13  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfarm_stringlist_init/normal.sh
	    lib/libgfarm/gfarm/gfarm_stringlist_add/normal.sh
	    lib/libgfarm/gfarm/gfarm_stringlist_elem/normal.sh

	* regress/lib/libgfarm/gfarm/gfarm_stringlist_elem/Makefile, regress/lib/libgfarm/gfarm/gfarm_stringlist_elem/normal.sh, regress/lib/libgfarm/gfarm/gfarm_stringlist_elem/stringlist_elem.c, regress/lib/libgfarm/gfarm/gfarm_stringlist_elem/stringlist_elem.sh:
	build lib/libgfarm/gfarm/gfarm_stringlist_elem/stringlist_elem, and
	test  lib/libgfarm/gfarm/gfarm_stringlist_elem/normal.sh

	* regress/lib/libgfarm/gfarm/gfarm_stringlist_add/stringlist_add.c:
	fix an illegal index of array

	* regress/lib/libgfarm/gfarm/gfarm_stringlist_add/Makefile, regress/lib/libgfarm/gfarm/gfarm_stringlist_add/normal.sh, regress/lib/libgfarm/gfarm/gfarm_stringlist_add/stringlist_add.c, regress/lib/libgfarm/gfarm/gfarm_stringlist_add/stringlist_add.sh:
	build lib/libgfarm/gfarm/gfarm_stringlist_add/stringlist_add, and
	test  lib/libgfarm/gfarm/gfarm_stringlist_add/normal.sh

	* regress/lib/libgfarm/gfarm/gfarm_stringlist_init/Makefile, regress/lib/libgfarm/gfarm/gfarm_stringlist_init/normal.sh, regress/lib/libgfarm/gfarm/gfarm_stringlist_init/stringlist_init.c:
	build lib/libgfarm/gfarm/gfarm_stringlist_init/stringlist_init, and
	test  lib/libgfarm/gfarm/gfarm_stringlist_init/normal.sh

2006-10-12  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_rename/file_normal.sh

	* regress/lib/libgfarm/gfarm/gfs_rename/Makefile, regress/lib/libgfarm/gfarm/gfs_rename/file_normal.sh, regress/lib/libgfarm/gfarm/gfs_rename/rename.c, regress/lib/libgfarm/gfarm/gfs_rename/rename.sh:
	build lib/libgfarm/gfarm/gfs_rename/rename.c, and
	test  lib/libgfarm/gfarm/gfs_rename/file_normal.sh

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_unlink/normal.sh
	    lib/libgfarm/gfarm/gfs_unlink_section/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_unlink_section/Makefile, regress/lib/libgfarm/gfarm/gfs_unlink_section/normal.sh, regress/lib/libgfarm/gfarm/gfs_unlink_section/unlink_section.c, regress/lib/libgfarm/gfarm/gfs_unlink_section/unlink_section.sh:
	build lib/libgfarm/gfarm/gfs_unlink_section/unlink_section, and
	test  lib/libgfarm/gfarm/gfs_unlink_section/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_unlink/Makefile, regress/lib/libgfarm/gfarm/gfs_unlink/normal.sh, regress/lib/libgfarm/gfarm/gfs_unlink/unlink.c, regress/lib/libgfarm/gfarm/gfs_unlink/unlink.sh:
	build lib/libgfarm/gfarm/gfs_unlink/unlink, and
	test  lib/libgfarm/gfarm/gfs_unlink/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_eof/pio_eof.c, regress/lib/libgfarm/gfarm/gfs_pio_puts/puts.c, regress/lib/libgfarm/gfarm/gfs_pio_set_view_index/set_view_index.c:
	shut up a warning

2006-10-11  Takuya Ishibashi  <takuya@soum.co.jp>

	* gftool/gfusage/gfusage.c: add help message of -c option

2006-10-11  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_mkdir/normal.sh
	    lib/libgfarm/gfarm/gfs_rmdir/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_rmdir/Makefile, regress/lib/libgfarm/gfarm/gfs_rmdir/normal.sh, regress/lib/libgfarm/gfarm/gfs_rmdir/rmdir.c, regress/lib/libgfarm/gfarm/gfs_rmdir/rmdir.sh:
	build lib/libgfarm/gfarm/gfs_rmdir/rmdir, and
	test  lib/libgfarm/gfarm/gfs_rmdir/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_mkdir/Makefile, regress/lib/libgfarm/gfarm/gfs_mkdir/mkdir.c, regress/lib/libgfarm/gfarm/gfs_mkdir/mkdir.sh, regress/lib/libgfarm/gfarm/gfs_mkdir/normal.sh:
	build lib/libgfarm/gfarm/gfs_mkdir/mkdir, and
	test  lib/libgfarm/gfarm/gfs_mkdir/normal.sh

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_utimes/set_current.sh
	    lib/libgfarm/gfarm/gfs_utimes/specify_time.sh

	* regress/lib/libgfarm/gfarm/gfs_utimes/Makefile, regress/lib/libgfarm/gfarm/gfs_utimes/set_current.sh, regress/lib/libgfarm/gfarm/gfs_utimes/specify_time.sh, regress/lib/libgfarm/gfarm/gfs_utimes/utimes.c, regress/lib/libgfarm/gfarm/gfs_utimes/utimes.sh:
	build lib/libgfarm/gfarm/gfs_utimes/utimes, and
	test  lib/libgfarm/gfarm/gfs_utimes/{specify_time,set_current}.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_set_view_index/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_truncate/shorter.sh, regress/lib/libgfarm/gfarm/gfs_pio_ungetc/not_follow_getc.sh, regress/lib/libgfarm/gfarm/gfs_pio_write/normal.sh, regress/lib/libgfarm/gfarm/gfs_readdir/normal.sh, regress/lib/libgfarm/gfarm/gfs_realpath/current.sh, regress/lib/libgfarm/gfarm/gfs_stat/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_putc/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_putline/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_puts/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_read/empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_readdelim/dynamic_alloc_read_empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_readline/dynamic_alloc_read_empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_seek/get_current.sh, regress/lib/libgfarm/gfarm/gfs_pio_seek/nop.sh, regress/lib/libgfarm/gfarm/gfs_pio_eof/eof.sh, regress/lib/libgfarm/gfarm/gfs_pio_eof/not_eof.sh, regress/lib/libgfarm/gfarm/gfs_pio_error/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_getc/empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_getline/empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_gets/empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_open/normal.sh, regress/lib/libgfarm/gfarm/fork-term-init/fti-unlink.sh, regress/lib/libgfarm/gfarm/gfs_chdir/current.sh, regress/lib/libgfarm/gfarm/gfs_chdir/root.sh, regress/lib/libgfarm/gfarm/gfs_chmod/file_normal.sh, regress/lib/libgfarm/gfarm/gfs_closedir/current.sh, regress/lib/libgfarm/gfarm/gfs_glob_add/normal.sh, regress/lib/libgfarm/gfarm/gfs_opendir/current.sh, regress/lib/libgfarm/gfarm/gfs_opendir/root.sh, regress/lib/libgfarm/gfarm/gfs_pio_close/normal.sh:
	correct command argument of trap

	* regress/lib/libgfarm/gfarm/gfs_chmod/chmod.c: add gfs_stat_free()

	* regress/lib/libgfarm/gfarm/gfs_pio_create/normal.sh:
	correct command argument of trap

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_chmod/file_normal.sh

	* regress/lib/libgfarm/gfarm/gfs_chmod/Makefile, regress/lib/libgfarm/gfarm/gfs_chmod/chmod.c, regress/lib/libgfarm/gfarm/gfs_chmod/chmod.sh, regress/lib/libgfarm/gfarm/gfs_chmod/file_normal.sh:
	build lib/libgfarm/gfarm/gfs_chmod/chmod, and
	test  lib/libgfarm/gfarm/gfs_glob/file_normal.sh

2006-10-10  Takuya Ishibashi  <takuya@soum.co.jp>

	* doc/html/en/user/nfs-gfarmfs.html, doc/html/ja/user/nfs-gfarmfs.html:
	- mention write_local_priority of gfarm.conf
	- mention README.NFS of FUSE

2006-10-10  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_glob_add/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_glob_add/Makefile, regress/lib/libgfarm/gfarm/gfs_glob_add/glob_add.c, regress/lib/libgfarm/gfarm/gfs_glob_add/glob_add.sh, regress/lib/libgfarm/gfarm/gfs_glob_add/normal.sh:
	build lib/libgfarm/gfarm/gfs_glob_add/glob_add, and
	test  lib/libgfarm/gfarm/gfs_glob/normal.sh

2006-10-06  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_glob_init/normal.sh
	    lib/libgfarm/gfarm/gfs_glob/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_glob/Makefile, regress/lib/libgfarm/gfarm/gfs_glob/glob.c, regress/lib/libgfarm/gfarm/gfs_glob/glob.sh, regress/lib/libgfarm/gfarm/gfs_glob/normal.sh:
	build lib/libgfarm/gfarm/gfs_glob/glob, and
	test  lib/libgfarm/gfarm/gfs_glob/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_glob_init/Makefile, regress/lib/libgfarm/gfarm/gfs_glob_init/glob_init.c, regress/lib/libgfarm/gfarm/gfs_glob_init/glob_init.sh, regress/lib/libgfarm/gfarm/gfs_glob_init/normal.sh:
	build lib/libgfarm/gfarm/gfs_glob_init/glog_init, and
	test  lib/libgfarm/gfarm/gfs_glog_init/normal.sh

2006-10-06  Noriyuki Soda  <soda@sra.co.jp>

	* doc/README.hook.en, doc/README.hook.ja:
	mention that the pthread_cancel() function doesn't always work correctly
	on Linux.

	* gftool/gfrm/gfrm.c:
	<sys/socket.h> is necessary for socklen_t, since gfs_client.h refers this type.

2006-10-06  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* gftool/gfrm/Makefile, gftool/gfrm/gfrm.c:
	merge the following changes in sourceforge svn repository:

2006-10-06  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_readdir/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_readdir/Makefile, regress/lib/libgfarm/gfarm/gfs_readdir/normal.sh, regress/lib/libgfarm/gfarm/gfs_readdir/readdir.c, regress/lib/libgfarm/gfarm/gfs_readdir/readdir.sh:
	build lib/libgfarm/gfarm/gfs_pio_readdir/readdir, and
	test  lib/libgfarm/gfarm/gfs_pio_readdir/normal.sh

2006-10-06  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfls/gfls.c:
	forgot to call gfarm_terminate(), pointed out by tanimura-san

	* lib/libgfarm/gfarm/gfs_client_apply.c:
	back out previous change about potential race condition,
	because metadata access is already fork(2)-safe in recent versions of gfarm.
	pointed out by tatebe-san

	* lib/libgfarm/gfarm/gfs_client_apply.c:
	merge the following changes from the main trunk:

	revision 1.3:
	fix portability problem to FreeBSD 4.11

	revision 1.4:
	fix potential race condition in gfs_client_apply_all_hosts(),
	metadata server might get confused due to simultaneous accesses from children.

	revision 1.5:
	add more comment

	* lib/libgfarm/gfarm/gfs_client_apply.c: add more comment

	* lib/libgfarm/gfarm/gfs_client_apply.c:
	fix potential race condition in gfs_client_apply_all_hosts(),
	metadata server might get confused due to simultaneous accesses from children.

2006-10-05  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_closedir/current.sh

	* regress/lib/libgfarm/gfarm/gfs_closedir/Makefile, regress/lib/libgfarm/gfarm/gfs_closedir/closedir.c, regress/lib/libgfarm/gfarm/gfs_closedir/closedir.sh, regress/lib/libgfarm/gfarm/gfs_closedir/current.sh:
	build lib/libgfarm/gfarm/gfs_closedir/closedir, and
	test  lib/libgfarm/gfarm/gfs_closedir/current.sh

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_opendir/current.sh
	    lib/libgfarm/gfarm/gfs_opendir/root.sh

	* regress/lib/libgfarm/gfarm/gfs_opendir/Makefile, regress/lib/libgfarm/gfarm/gfs_opendir/current.sh, regress/lib/libgfarm/gfarm/gfs_opendir/opendir.c, regress/lib/libgfarm/gfarm/gfs_opendir/opendir.sh, regress/lib/libgfarm/gfarm/gfs_opendir/root.sh:
	build lib/libgfarm/gfarm/gfs_opendir/opendir, and
	test  lib/libgfarm/gfarm/gfs_opendir/{current,root}.sh

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_realpath/current.sh

	* regress/lib/libgfarm/gfarm/gfs_realpath/Makefile, regress/lib/libgfarm/gfarm/gfs_realpath/current.sh, regress/lib/libgfarm/gfarm/gfs_realpath/realpath.c, regress/lib/libgfarm/gfarm/gfs_realpath/realpath.sh:
	build lib/libgfarm/gfarm/gfs_realpath/realpath, and
	test  lib/libgfarm/gfarm/gfs_realpath/current.sh

2006-10-04  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_chdir/current.sh
	    lib/libgfarm/gfarm/gfs_chdir/root.sh

	* regress/lib/libgfarm/gfarm/gfs_chdir/Makefile, regress/lib/libgfarm/gfarm/gfs_chdir/chdir.c, regress/lib/libgfarm/gfarm/gfs_chdir/chdir.sh, regress/lib/libgfarm/gfarm/gfs_chdir/current.sh, regress/lib/libgfarm/gfarm/gfs_chdir/root.sh:
	build lib/libgfarm/gfarm/gfs_chdir_/chdir, and
	test  lib/libgfarm/gfarm/gfs_chdir/{current,root}.sh

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_pio_truncate/shorter.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_truncate/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_truncate/shorter.sh, regress/lib/libgfarm/gfarm/gfs_pio_truncate/truncate.c, regress/lib/libgfarm/gfarm/gfs_pio_truncate/truncate.sh:
	build lib/libgfarm/gfarm/gfs_pio_truncate/truncate, and
	test  lib/libgfarm/gfarm/gfs_pio_truncate/shorter.sh

	* regress/lib/libgfarm/gfarm/gfs_stat/stat.sh: correct indentation

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_stat/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_getline/getline.sh, regress/lib/libgfarm/gfarm/gfs_stat/Makefile, regress/lib/libgfarm/gfarm/gfs_stat/normal.sh, regress/lib/libgfarm/gfarm/gfs_stat/stat.c, regress/lib/libgfarm/gfarm/gfs_stat/stat.sh:
	build lib/libgfarm/gfarm/gfs_stat/stat, and
	test  lib/libgfarm/gfarm/gfs_pio_stat/normal.sh

2006-10-04  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/gfarm_list.c, lib/libgfarm/gfarm/gfarm_list.h, lib/libgfarm/gfarm/gfarm_xinfo.c, lib/libgfarm/gfarm/gfarm_xinfo.h:
	merge the following change in revision 3158 in sourceforge svn repository:
	parallel version of gfrm in OpenMP
	add -P <#thread>, -D <domain>, -H <hostfile>, -N <#replica> and -n options.

2006-10-03  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* gftool/gfrm/Makefile, gftool/gfrm/gfrm.c:
	merge the following changes in revisions 3158, 3159, 3163 and 3194 in sourceforge svn repository:
	Revision 3158
	parallel version of gfrm in OpenMP
	add -P <#thread>, -D <domain>, -H <hostfile>, -N <#replica> and -n options.

	Revision 3159
	display copies to be unlinked in verbose mode

	Revision 3163
	fix automatic force-mode condition and suppress unnecessary error messages.

	Revision 3194
	change -P <#thread> option to -j <#thread>

	* lib/libgfarm/gfarm/gfarm_foreach.c:
	merge the following change in revision 3157 in sourceforge svn repository:
	simplify code using gfarm_foreach_copy

	* gftool/gfwhere/gfwhere.c:
	merge the following change in repository 3156 in sourceforge svn repository:
	simplify code using gfarm_foreach_copy

	* lib/libgfarm/gfarm/gfarm_foreach.c:
	merge the following change in revision 3155 in sourceforge svn repository:
	report GFARM_ERR_NO_FRAGMENT_INFORMATION error

2006-10-03  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/lib/libgfarm/gfarm/gfs_pio_write/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_write/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_write/write.c, regress/lib/libgfarm/gfarm/gfs_pio_write/write.sh:
	build lib/libgfarm/gfarm/gfs_pio_write/write, and
	test  lib/libgfarm/gfarm/gfs_pio_write/normal.sh

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_pio_puts/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_puts/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_puts/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_puts/puts.c, regress/lib/libgfarm/gfarm/gfs_pio_puts/puts.sh:
	build lib/libgfarm/gfarm/gfs_pio_puts/, and
	test  lib/libgfarm/gfarm/gfs_pio_puts/normal.sh

2006-10-02  Shukuko Moriwake  <mori@suri.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_scramble.c: o FIX BUG
	  - fragment checksum check when global_scramble read
	  - set correct gf->length at fragment write when fragment size > 64KB
	  - fix typo

2006-10-01  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/schedule.c:
	merge the following change in revision 1.45 from the main trunk:

	don't treat GFARM_ERR_UNKNOWN_HOST as a fatal error in scheduling functions,
	just ignore the host instead.

	This actually fixes the following problem:
	http://datafarm.apgrid.org/bugzilla/show_bug.cgi?id=20
	(pointed out by tatebe-san)

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja, doc/KNOWN_PROBLEMS.en, doc/KNOWN_PROBLEMS.ja:
	merge changes of gfarm_v1 main trunk on 1 October, 2006.

2006-09-30  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/schedule.c:
	don't treat GFARM_ERR_UNKNOWN_HOST as a fatal error in scheduling functions,
	just ignore the host instead.

	This actually fixes the following problem:
	http://datafarm.apgrid.org/bugzilla/show_bug.cgi?id=20
	(pointed out by tatebe-san)

	* lib/libgfarm/gfarm/gfs_pio_section.c:
	if GFARM_FILE_TRUNC (O_TRUNC in the system call hook case) is specified,
	allow the scheduler to choose a filesystem node which doesn't have a replica.

	This fixes http://datafarm.apgrid.org/bugzilla/show_bug.cgi?id=20

	* regress/lib/libgfarm/gfarm/fork-term-init/fti-unlink.c, regress/lib/libgfarm/gfarm/fork-term-init/fti-unlink.sh:
	make this actually detect coredump of fti-unlink

	* regress/lib/libgfarm/gfarm/gfs_pio_set_local/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_set_local/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_set_local/set_local.c, regress/lib/libgfarm/gfarm/gfs_pio_set_local/set_local.sh, regress/lib/libgfarm/gfarm/gfs_pio_set_view_index/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_set_view_index/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_set_view_index/set_view_index.c, regress/lib/libgfarm/gfarm/gfs_pio_set_view_index/set_view_index.sh, regress/lib/libgfarm/gfarm/gfs_pio_set_view_local/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_set_view_local/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_set_view_local/set_view_local.c, regress/lib/libgfarm/gfarm/gfs_pio_set_view_local/set_view_local.sh, regress/lib/libgfarm/gfarm/gfs_pio_ungetc/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_ungetc/not_follow_getc.sh, regress/lib/libgfarm/gfarm/gfs_pio_ungetc/ungetc.c, regress/lib/libgfarm/gfarm/gfs_pio_ungetc/ungetc.sh, regress/lib/libgfarm/gfarm/gfs_pio_open/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_open/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_open/open.c, regress/lib/libgfarm/gfarm/gfs_pio_open/open.sh, regress/lib/libgfarm/gfarm/gfs_pio_putc/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_putc/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_putc/putc.c, regress/lib/libgfarm/gfarm/gfs_pio_putc/putc.sh, regress/lib/libgfarm/gfarm/gfs_pio_putline/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_putline/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_putline/putline.c, regress/lib/libgfarm/gfarm/gfs_pio_putline/putline.sh, regress/lib/libgfarm/gfarm/gfs_pio_read/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_read/empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_read/read.c, regress/lib/libgfarm/gfarm/gfs_pio_read/read.sh, regress/lib/libgfarm/gfarm/gfs_pio_readdelim/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_readdelim/dynamic_alloc_read_empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_readdelim/readdelim.c, regress/lib/libgfarm/gfarm/gfs_pio_readdelim/readdelim.sh, regress/lib/libgfarm/gfarm/gfs_pio_readline/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_readline/dynamic_alloc_read_empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_readline/readline.c, regress/lib/libgfarm/gfarm/gfs_pio_readline/readline.sh, regress/lib/libgfarm/gfarm/gfs_pio_seek/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_seek/get_current.sh, regress/lib/libgfarm/gfarm/gfs_pio_seek/nop.sh, regress/lib/libgfarm/gfarm/gfs_pio_seek/seek.c, regress/lib/libgfarm/gfarm/gfs_pio_seek/seek.sh, regress/lib/libgfarm/gfarm/gfs_pio_close/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_close/close.c, regress/lib/libgfarm/gfarm/gfs_pio_close/close.sh, regress/lib/libgfarm/gfarm/gfs_pio_close/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_create/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_create/create.c, regress/lib/libgfarm/gfarm/gfs_pio_create/create.sh, regress/lib/libgfarm/gfarm/gfs_pio_create/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_eof/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_eof/eof.sh, regress/lib/libgfarm/gfarm/gfs_pio_eof/not_eof.sh, regress/lib/libgfarm/gfarm/gfs_pio_eof/pio_eof.c, regress/lib/libgfarm/gfarm/gfs_pio_eof/pio_eof.sh, regress/lib/libgfarm/gfarm/gfs_pio_error/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_error/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_error/pio_error.c, regress/lib/libgfarm/gfarm/gfs_pio_error/pio_error.sh, regress/lib/libgfarm/gfarm/gfs_pio_getc/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_getc/empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_getc/getc.c, regress/lib/libgfarm/gfarm/gfs_pio_getc/getc.sh, regress/lib/libgfarm/gfarm/gfs_pio_getline/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_getline/empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_getline/getline.c, regress/lib/libgfarm/gfarm/gfs_pio_getline/getline.sh, regress/lib/libgfarm/gfarm/gfs_pio_gets/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_gets/empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_gets/gets.c, regress/lib/libgfarm/gfarm/gfs_pio_gets/gets.sh, regress/gfs_hook/tool/dd/dd.sh, regress/lib/libgfarm/gfarm/fork-term-init/Makefile, regress/lib/libgfarm/gfarm/fork-term-init/fti-unlink.c, regress/lib/libgfarm/gfarm/fork-term-init/fti-unlink.sh, regress/lib/libgfarm/gfarm/gfarm_initialize/Makefile, regress/lib/libgfarm/gfarm/gfarm_initialize/init.c, regress/lib/libgfarm/gfarm/gfarm_initialize/noarg.sh, regress/gftool/gfreg/0byte.sh, regress/gftool/gfreg/1byte.sh, regress/gftool/gfreg/gfreg-h.sh, regress/gftool/gfrep/gfrep-N2.sh, regress/gftool/gfrep/gfrep-d.sh, regress/gftool/gfrm/0byte.sh, regress/gftool/gfrm/1byte.sh, regress/gftool/gfwhere/noopt.sh, regress/gftool/gfwhere/noopt_+x.sh, regress/gftool/gfwhere/noopt_-x.sh, regress/gfs_hook/tool/mv/0byte.sh, regress/gfs_hook/tool/mv/1byte.sh, regress/gfs_hook/tool/pax/pax-r.sh, regress/gfs_hook/tool/rm/0byte.sh, regress/gfs_hook/tool/rm/1byte.sh, regress/gfs_hook/tool/scp/scp_from_gfarm.sh, regress/gfs_hook/tool/scp/scp_to_gfarm.sh, regress/gfs_hook/tool/sh/umask_000_dir.sh, regress/gfs_hook/tool/sh/umask_000_file.sh, regress/gfs_hook/tool/sh/umask_022_dir.sh, regress/gfs_hook/tool/sh/umask_022_file.sh, regress/gfs_hook/tool/sh/umask_066_file.sh, regress/gfs_hook/tool/sh/umask_077_dir.sh, regress/gftool/gfchmod/gfchmod_644_file.sh, regress/gftool/gfchmod/gfchmod_700_dir.sh, regress/gftool/gfchmod/gfchmod_755_dir.sh, regress/gftool/gfchmod/gfchmod_755_file.sh, regress/gftool/gfexport/0byte.sh, regress/gftool/gfexport/1byte.sh, regress/Makefile, regress/README, regress/README.ja, regress/account.sh, regress/gfs_hook/feature/permission/create_file_in_mode_000_dir.sh, regress/gfs_hook/feature/permission/create_file_in_mode_100_dir.sh, regress/gfs_hook/feature/permission/create_file_in_mode_200_dir.sh, regress/gfs_hook/feature/permission/create_file_in_mode_300_dir.sh, regress/gfs_hook/feature/permission/create_file_in_mode_dir.sh, regress/gfs_hook/feature/permission/make_dir_in_mode_000_dir.sh, regress/gfs_hook/feature/permission/make_dir_in_mode_100_dir.sh, regress/gfs_hook/feature/permission/make_dir_in_mode_200_dir.sh, regress/gfs_hook/feature/permission/make_dir_in_mode_300_dir.sh, regress/gfs_hook/feature/permission/make_dir_in_mode_dir.sh, regress/gfs_hook/feature/permission/open_dir_in_mode_000_dir.sh, regress/gfs_hook/feature/permission/open_dir_in_mode_100_dir.sh, regress/gfs_hook/feature/permission/open_dir_in_mode_dir.sh, regress/gfs_hook/feature/permission/open_file.sh, regress/gfs_hook/feature/permission/open_file_in_mode_000_dir.sh, regress/gfs_hook/feature/permission/open_file_in_mode_100_dir.sh, regress/gfs_hook/feature/permission/open_file_in_mode_dir.sh, regress/gfs_hook/feature/permission/overwrite_000_file.sh, regress/gfs_hook/feature/permission/overwrite_200_file.sh, regress/gfs_hook/feature/permission/overwrite_mode_file.sh, regress/gfs_hook/feature/permission/read_000_dir.sh, regress/gfs_hook/feature/permission/read_000_file.sh, regress/gfs_hook/feature/permission/read_400_dir.sh, regress/gfs_hook/feature/permission/read_400_file.sh, regress/gfs_hook/feature/permission/read_mode_dir.sh, regress/gfs_hook/feature/permission/read_mode_file.sh, regress/gfs_hook/feature/permission/remove_dir_in_mode_000_dir.sh, regress/gfs_hook/feature/permission/remove_dir_in_mode_100_dir.sh, regress/gfs_hook/feature/permission/remove_dir_in_mode_200_dir.sh, regress/gfs_hook/feature/permission/remove_dir_in_mode_300_dir.sh, regress/gfs_hook/feature/permission/remove_dir_in_mode_dir.sh, regress/gfs_hook/feature/permission/remove_file_in_mode_000_dir.sh, regress/gfs_hook/feature/permission/remove_file_in_mode_100_dir.sh, regress/gfs_hook/feature/permission/remove_file_in_mode_200_dir.sh, regress/gfs_hook/feature/permission/remove_file_in_mode_300_dir.sh, regress/gfs_hook/feature/permission/remove_file_in_mode_dir.sh, regress/gfs_hook/feature/permission/rename_file_in_mode_000_dir.sh, regress/gfs_hook/feature/permission/rename_file_in_mode_100_dir.sh, regress/gfs_hook/feature/permission/rename_file_in_mode_200_dir.sh, regress/gfs_hook/feature/permission/rename_file_in_mode_300_dir.sh, regress/gfs_hook/feature/permission/rename_file_in_mode_dir.sh, regress/gfs_hook/feature/permission/virtual_dir.sh, regress/gfs_hook/feature/permission/write_000_dir.sh, regress/gfs_hook/feature/permission/write_000_file.sh, regress/gfs_hook/feature/permission/write_200_dir.sh, regress/gfs_hook/feature/permission/write_200_file.sh, regress/gfs_hook/feature/permission/write_mode_dir.sh, regress/gfs_hook/feature/permission/write_mode_file.sh, regress/gfs_hook/tool/build/configure_make.sh, regress/gfs_hook/tool/cp/0byte.sh, regress/gfs_hook/tool/cp/1byte.sh, regress/gfs_hook/tool/cp/cp.sh, regress/gfs_hook/tool/diff/diff-r.sh, regress/gfs_hook/tool/diff/diff.sh, regress/loop.sh, regress/regress.conf, regress/regress.sh, regress/schedule, regress/tst.sh:
	bring latest regression testsuite from the main trunk

	* lib/libgfarm/gfarm/schedule.c:
	merge the following change in revision 1.44 from the main trunk:
	fix a serious bug that
	gfarm_file_section_host_schedule_with_priority_to_local_to_write() may
	incorrectly schedule local node which doesn't actually have a replica.
	This was caused by the fact that file_section_host_schedule_common()
	indirectly called statfsnode() (via gfarm_is_active_fsnode_to_write())
	and it incorrectly added local node to the candidate list.

	This fixes http://datafarm.apgrid.org/bugzilla-ja/show_bug.cgi?id=66
	(This bug had existed since gfarm-1.3.)

	* lib/libgfarm/gfarm/schedule.c: fix a serious bug that
	gfarm_file_section_host_schedule_with_priority_to_local_to_write() may
	incorrectly schedule local node which doesn't actually have a replica.
	This was caused by the fact that file_section_host_schedule_common()
	indirectly called statfsnode() (via gfarm_is_active_fsnode_to_write())
	and it incorrectly added local node to the candidate list.

	This fixes http://datafarm.apgrid.org/bugzilla-ja/show_bug.cgi?id=66
	(This bug had existed since gfarm-1.3.)

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	note that the host information adminitrators (in 3.3) shouldn't use gfarm_agent.

	* doc/KNOWN_PROBLEMS.en, doc/KNOWN_PROBLEMS.ja:
	note that the entry 3.3 in Gfarm-FAQ.* describes the way for PostgreSQL
	to prevent normal users from changing the host information.

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	note that the description for OpenLDAP version isn't written yet.
	(re: 3.3 How to prevent normal users from changing the host information?)

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	describe the way to make the host information read-only from normal users.
	see http://datafarm.apgrid.org/bugzilla/show_bug.cgi?id=20

2006-09-29  Shukuko Moriwake  <mori@suri.co.jp>

	* gftool/gfarm_agent/gfarm_agent.c, include/gfarm/gfarm_metadb.h, include/gfarm/gfs.h:
	o Support seek/ftruncate/chmod for scramble file
	o Cut syslog output of gfarm_agent, if err is GFARM_ERR_NO_SUCH_OBJECT
	o Optimize scramble file access (reduce meta access, faster random number generation, faster select host etc)

	* doc/scramble-dd-060929.pdf, doc/scramble-dd-060929.ppt: New file.

	* doc/scramble-dd-060929.pdf, doc/scramble-dd-060929.ppt, lib/libgfarm/gfarm/agent_wrap.c, lib/libgfarm/gfarm/gfs_chmod.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_misc.h, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_remote.c, lib/libgfarm/gfarm/gfs_pio_scramble.c, lib/libgfarm/gfarm/gfs_pio_scramble.h, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_stat.c, lib/libgfarm/gfarm/schedule.c:
	o Support seek/ftruncate/chmod for scramble file
	o Cut syslog output of gfarm_agent, if err is GFARM_ERR_NO_SUCH_OBJECT
	o Optimize scramble file access (reduce meta access, faster random number generation, faster select host etc)

2006-09-29  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_pio_putline/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_putline/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_putline/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_putline/putline.c, regress/lib/libgfarm/gfarm/gfs_pio_putline/putline.sh:
	build lib/libgfarm/gfarm/gfs_pio_putline/putline, and
	test  lib/libgfarm/gfarm/gfs_pio_putline/normal.sh

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_pio_readdelim/dynamic_alloc_read_empty.sh
	    lib/libgfarm/gfarm/gfs_pio_putc/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_putc/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_putc/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_putc/putc.c, regress/lib/libgfarm/gfarm/gfs_pio_putc/putc.sh:
	build lib/libgfarm/gfarm/gfs_pio_putc/putc, and
	test  lib/libgfarm/gfarm/gfs_pio_putc/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_gets/gets.c: typo

	* regress/lib/libgfarm/gfarm/gfs_pio_readdelim/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_readdelim/dynamic_alloc_read_empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_readdelim/readdelim.c, regress/lib/libgfarm/gfarm/gfs_pio_readdelim/readdelim.sh:
	build lib/libgfarm/gfarm/gfs_pio_readdelim/readdelim, and
	test  lib/libgfarm/gfarm/gfs_pio_readdelim/dynamic_alloc_read_empty.sh

2006-09-28  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_pio_readline/dynamic_alloc_read_empty.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_readline/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_readline/dynamic_alloc_read_empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_readline/readline.c, regress/lib/libgfarm/gfarm/gfs_pio_readline/readline.sh:
	build lib/libgfarm/gfarm/gfs_pio_readline/, and
	test  lib/libgfarm/gfarm/gfs_pio_readline/dynamic_alloc_read_empty.sh

2006-09-28  Noriyuki Soda  <soda@sra.co.jp>

	* doc/KNOWN_PROBLEMS.en, doc/KNOWN_PROBLEMS.ja:
	mention that if gfarm is linked with Globus, SIGPIPE will be ignored.
	Bugzilla-ja#68: http://datafarm.apgrid.org/bugzilla-ja/show_bug.cgi?id=68

2006-09-26  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_client_apply.c, lib/libgfarm/gfarm/glob.c, lib/libgfarm/gfutil/hash.c, lib/libgfarm/gfutil/logutil.c, regress/lib/libgfarm/gfarm/gfs_pio_seek/seek.c:
	fix portability problem to FreeBSD 4.11

	* gftool/gfarm_agent/gfarm_agent.c, lib/libgfarm/gfarm/agent_client.c, lib/libgfarm/gfarm/auth_client_gsi.c, lib/libgfarm/gfarm/auth_server_gsi.c, lib/libgfarm/gfarm/gfm_client.c, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client_rep.c, lib/libgfarm/gfarm/io_fd.c, lib/libgfarm/gfarm/io_fd.h, lib/libgfarm/gfarm/io_gfsl.c, server/gfmd/gfmd.c, server/gfsd/gfsd.c, gfptool/gfrepbe_client/gfrepbe_client.c, gfptool/gfrepbe_server/gfrepbe_server.c:
	fix a problem introduced by previous SIGPIPE related change.
	i.e. gfrcmd and gfrun don't work on platforms which support MSG_NOSIGNAL
	(e.g. Linux, FreeBSD since 6.x and NetBSD since 4.x), because send(2) only
	works with sockets.

	to resolve this problem, distinguish the iobuffer write operation for sockets
	from the operation for file descriptors, and rename some functions as follows
	to clarify that these only work with sockets:
		xxx_fd_connection_new()	-> xxx_socket_connection_new()
		xxx_connection_set_fd()	-> xxx_connection_set_socket()

	This also removes some unused functions in io_fd.c.

	* gftool/config-gfarm/config-gfarm.postgresql:
	merge the following changes from the main trunk:

	revision 1.9:
	3 seconds aren't enough to wait for postmaster to start up
	on gfm61.apgrid.org (Fedora Core 5).
	increase it to 5 seconds.

	revision 1.10:
	revise previous change:
	even 5 seconds aren't enough on gfm61.apgrid.org (Fedora Core 5),
	increase it to 10 seconds.

	* gftool/config-gfarm/config-gfarm.postgresql: revise previous change:
	even 5 seconds aren't enough on gfm61.apgrid.org (Fedora Core 5),
	increase it to 10 seconds.

	* gftool/config-gfarm/config-gfarm.postgresql:
	3 seconds aren't enough to wait for postmaster to start up
	on gfm61.apgrid.org (Fedora Core 5).
	increase it to 5 seconds.

2006-09-25  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfsl/tcputil.c, lib/libgfarm/gfutil/Makefile, lib/libgfarm/gfutil/gfutil.h, lib/libgfarm/gfutil/send_no_sigpipe.c, lib/libgfarm/gfutil/timeval.c, server/gfmd/gfmd.c, server/gfsd/gfsd.c, gftool/gfarm_agent/agent_thr.c, gftool/gfarm_agent/gfarm_agent.c, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/io_fd.c:
	do not call signal(SIGPIPE, SIG_IGN) in gfarm_initialize(),
	because it makes some programs take long time until finish,
	when standard output of the programs is closed at early stage
	(e.g. "program | head -1").
	The SIG_IGN settings makes write(2) return EPIPE instead of SIGPIPE signal,
	but such programs don't care the return value.

	This should fix Bugzilla-ja #68:
	http://datafarm.apgrid.org/bugzilla-ja/show_bug.cgi?id=68

2006-09-24  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* gftool/gfarm_agent/gfarm_agent.c:
	do not display "no such object" error without -d option since it is too many and not critical.

2006-09-22  Noriyuki Soda  <soda@sra.co.jp>

	* regress/README.ja: revise document structure

	* regress/README.ja:
	mention that scp should work without user interaction

2006-09-21  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_dir.c:
	merge the following change in revision 1.89 from the main trunk:
	do not realloc() the memory which was passed to putenv() once,
	because the memory may be still pointed by environ[], and
	realloc() may break the memory.

	* lib/libgfarm/gfarm/gfs_dir.c:
	do not realloc() the memory which was passed to putenv() once,
	because the memory may be still pointed by environ[], and
	realloc() may break the memory.

2006-09-20  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* doc/KNOWN_PROBLEMS.en, doc/KNOWN_PROBLEMS.ja: typo
	clarify the value of st_ino when multiple processes share the same gfarm_agent.

2006-09-19  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* gftool/gfarm_agent/gfarm_agent.c (log_proto, error_proto):
	use printf(3)-style format for gflog functions.

2006-09-15  Noriyuki Soda  <soda@sra.co.jp>

	* doc/KNOWN_PROBLEMS.en, doc/KNOWN_PROBLEMS.ja:
	add some problems which were pointed out by Ishibashi-san
	in [gfarm-developers:01580]

2006-09-15  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_pio_gets/empty.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_gets/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_gets/empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_gets/gets.c, regress/lib/libgfarm/gfarm/gfs_pio_gets/gets.sh:
	build lib/libgfarm/gfarm/gfs_pio_gets/gets, and
	test  lib/libgfarm/gfarm/gfs_pio_gets/empty.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_set_view_local/normal.sh:
	- return exit code from subshell
	- correct argument to set_view_local.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_set_view_local/set_view_local.c:
	call gfs_pio_set_local() before gfs_pio_set_view_local() and
	call gfs_pio_close() after

	* regress/gfs_hook/feature/permission/read_mode_dir.sh, regress/gfs_hook/feature/permission/write_mode_dir.sh:
	add chmod to trap argmument to remove temporary directory

	* regress/gfs_hook/tool/build/configure_make.sh:
	cd from temporary directory to remove it

	* regress/gfs_hook/feature/permission/read_mode_dir.sh, regress/gfs_hook/feature/permission/write_mode_dir.sh, regress/gftool/gfchmod/gfchmod_644_file.sh, regress/gftool/gfchmod/gfchmod_755_file.sh:
	remove temporary file or directory

	* regress/gfs_hook/tool/build/configure_make.sh:
	remove an ineffective statement

	* regress/lib/libgfarm/gfarm/gfs_pio_seek/get_current.sh, regress/lib/libgfarm/gfarm/gfs_pio_seek/seek.c, regress/lib/libgfarm/gfarm/gfs_pio_seek/seek.sh:
	seek.c, seek.sh: to simplyfy the C program("seek.c"), make it always return position value and shell script("seek.sh") check if speciied by parameter
	get_current.sh: add parameter missed in previous revision

2006-09-11  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfarm_agent/gfarm_agent.c, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/agent_client.c, lib/libgfarm/gfarm/agent_client.h, lib/libgfarm/gfarm/agent_wrap.c, lib/libgfarm/gfarm/agent_wrap.h, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_dir.h:
	merge the following change from the main trunk:
	make GFS_Dir functions work even when the return value of gfarm_agent_check()
	is changed.
	without this change, the functions may dump core.

	Also, make the following changes:
	- implement AGENT_PROTO_DIR_GET_NENTRY protocol
	  to make gfs_dir_get_nentry() work with gfarm_agent
	- make gfs_dir_get_gf() and gfs_dir_set_gf() work with gfarm_agent

	* lib/libgfarm/gfarm/agent_proto.h:
	merge the following changes in revision 1.6 from the main trunk,
	although this is not reservation, but actual implemnetation:

	reserve AGENT_PROTO_DIR_GET_NENTRY protocol for GNEO branch.

	* regress/config.sh: need to specify "-a sharedsecret" explicitly,
	since sharedsecret is not default in GNEO branch.

	* lib/libgfarm/gfarm/gfs_dir.h:
	make GFS_Dir functions work even when the return value of gfarm_agent_check()
	is changed.
	without this change, the functions may dump core.

	* lib/libgfarm/gfarm/agent_proto.h:
	reserve AGENT_PROTO_DIR_GET_NENTRY protocol for GNEO branch.

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/agent_client.c, lib/libgfarm/gfarm/agent_client.h, lib/libgfarm/gfarm/agent_wrap.c, lib/libgfarm/gfarm/gfs_dir.c:
	make GFS_Dir functions work even when the return value of gfarm_agent_check()
	is changed.
	without this change, the functions may dump core.

	* regress/gftool/gfreg/gfreg-h.sh, regress/gftool/gfrep/gfrep-N2.sh, regress/gftool/gfrep/gfrep-d.sh:
	adapt output format changes in gfwhere.c revision 1.12

	* regress/gftool/gfwhere/noopt.sh:
	fix a bug: remove gfarm pathname in the first line of gfwhere output

2006-09-06  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_pio_getline/empty.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_getline/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_getline/empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_getline/getline.c, regress/lib/libgfarm/gfarm/gfs_pio_getline/getline.sh:
	build lib/libgfarm/gfarm/gfs_pio_getline/getline, and
	test  lib/libgfarm/gfarm/gfs_pio_getline/empty.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_read/empty.sh: add a comment

2006-09-04  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* gftool/gfsck/gfsck.c:
	add -f option to force to remove invalid file section

2006-09-02  Noriyuki Soda  <soda@sra.co.jp>

	* doc/KNOWN_PROBLEMS.en, doc/KNOWN_PROBLEMS.ja:
	note that the problem of "renaming while opening" is how serious.

	* doc/KNOWN_PROBLEMS.en, doc/KNOWN_PROBLEMS.ja:
	clarify the problems of st_ino.

2006-09-01  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_pio_getc/empty.sh
	    lib/libgfarm/gfarm/gfs_pio_ungetc/not_follow_ungetc.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_ungetc/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_ungetc/not_follow_getc.sh, regress/lib/libgfarm/gfarm/gfs_pio_ungetc/ungetc.c, regress/lib/libgfarm/gfarm/gfs_pio_ungetc/ungetc.sh:
	build lib/libgfarm/gfarm/gfs_pio_ungetc/ungetc, and
	test  lib/libgfarm/gfarm/gfs_pio_ungetc/not_follow_getc.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_getc/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_getc/empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_getc/getc.c, regress/lib/libgfarm/gfarm/gfs_pio_getc/getc.sh:
	build lib/libgfarm/gfarm/gfs_pio_getc/getc, and
	test  lib/libgfarm/gfarm/gfs_pio_getc/empty.sh

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_pio_seek/nop.sh
	    lib/libgfarm/gfarm/gfs_pio_seek/get_current.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_seek/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_seek/get_current.sh, regress/lib/libgfarm/gfarm/gfs_pio_seek/nop.sh, regress/lib/libgfarm/gfarm/gfs_pio_seek/seek.c, regress/lib/libgfarm/gfarm/gfs_pio_seek/seek.sh:
	build lib/libgfarm/gfarm/gfs_pio_seek/seek, and
	test  lib/libgfarm/gfarm/gfs_pio_seek/{nop,get_current}.sh

2006-09-01  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* gftool/example/gfimport_text/gfimport_text.c: add -N <#host> option

2006-08-31  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* gfptool/gfsplck/gfsplck.c, lib/libgfarm/gfarm/gfs_pio_misc.c:
	unset text busy flag and register the files as requested by [bugzilla-ja #60]

2006-08-31  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_pio_read/empty.sh
	    lib/libgfarm/gfarm/gfs_pio_eof/eof.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_read/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_read/empty.sh, regress/lib/libgfarm/gfarm/gfs_pio_read/read.c, regress/lib/libgfarm/gfarm/gfs_pio_read/read.sh:
	build lib/libgfarm/gfarm/gfs_pio_read/read, and
	test  lib/libgfarm/gfarm/gfs_pio_read/empty.sh

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_pio_error/normal.sh
	    lib/libgfarm/gfarm/gfs_pio_eof/not_eof.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_eof/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_eof/eof.sh, regress/lib/libgfarm/gfarm/gfs_pio_eof/not_eof.sh, regress/lib/libgfarm/gfarm/gfs_pio_eof/pio_eof.c, regress/lib/libgfarm/gfarm/gfs_pio_eof/pio_eof.sh:
	build lib/libgfarm/gfarm/gfs_pio_eof/pio_eof, and
	test  lib/libgfarm/gfarm/gfs_pio_eof/{eof,not_eof}.sh

2006-08-31  Noriyuki Soda  <soda@sra.co.jp>

	* server/gfmd/gfmd.c: describe -d option in usage().
	fix http://datafarm.apgrid.org/bugzilla-ja/show_bug.cgi?id=62
	from Yamamoto-san.

	* server/gfsd/gfsd.c: adjust the messages of usage()

2006-08-31  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/lib/libgfarm/gfarm/gfs_pio_error/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_error/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_error/pio_error.c, regress/lib/libgfarm/gfarm/gfs_pio_error/pio_error.sh:
	build lib/libgfarm/gfarm/gfs_pio_error/pio_error, and
	test  lib/libgfarm/gfarm/gfs_pio_error/normal.sh

2006-08-30  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfrmdir/Makefile, gftool/gfrmdir/gfrmdir.c, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_client_apply.c, lib/libgfarm/gfarm/gfs_misc.h:
	merge the following changes from the main trunk:

	split gfs_client_apply_all_hosts() from gfs_client.c,
	because it really belongs to upper layer instead of the RPC layer.
	(It already calls metadata function, and will call scheduler eventually.)

	gfs_client_apply_all_hosts():
	- use scheduling function to avoid connecting to hosts which are down.
	- to increase concurrency, do not wait all processes synchronously,
	  instead, wait only one process synchronously and wait others
	  asynchronously by specifying WNOHANG.

2006-08-30  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/lib/libgfarm/gfarm/gfs_pio_set_view_index/set_view_index.c:
	correct interface of hostname argument to enable handle NULL

2006-08-30  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/gfs_client_apply.c:
	gfs_client_apply_all_hosts():
	- use scheduling function to avoid connecting to hosts which are down.
	- to increase concurrency, do not wait all processes synchronously,
	  instead, wait only one process synchronously and wait others
	  asynchronously by specifying WNOHANG.

2006-08-30  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/lib/libgfarm/gfarm/gfs_pio_set_view_index/normal.sh:
	returns exit status from subshell

	* regress/lib/libgfarm/gfarm/gfs_pio_close/close.sh:
	correct interface with C test program

	* regress/lib/libgfarm/gfarm/gfs_pio_close/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_open/normal.sh:
	returns exit status from subshell

	* regress/lib/libgfarm/gfarm/gfs_pio_create/create.sh:
	correct a syntax error

	* regress/lib/libgfarm/gfarm/gfs_pio_create/normal.sh:
	returns exit status from subshell

2006-08-30  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfrmdir/Makefile, gftool/gfrmdir/gfrmdir.c, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_client_apply.c, lib/libgfarm/gfarm/gfs_misc.h:
	split gfs_client_apply_all_hosts() from gfs_client.c,
	because it really belongs to upper layer instead of the RPC layer.
	(It already calls metadata function, and will call scheduler eventually.)

	* lib/libgfarm/gfarm/agent_wrap.c:
	merge the following change in revision 1.21 from the main trunk:
	If gfarm_cache_host_info_*() is used once,
	call gfarm_cache_host_info_*() always,
	otherwise hostcache might be freed incorrectly.

	This should fix the problem reported by Ishibashi-san
	in [gfarm-developers:01330]

	* lib/libgfarm/gfarm/agent_wrap.c:
	If gfarm_cache_host_info_*() is used once,
	call gfarm_cache_host_info_*() always,
	otherwise hostcache might be freed incorrectly.

	This should fix the problem reported by Ishibashi-san
	in [gfarm-developers:01330]

2006-08-30  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_pio_close/normal.sh
	    lib/libgfarm/gfarm/gfs_pio_set_view_index/normal.sh
	    lib/libgfarm/gfarm/gfs_pio_set_view_local/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_set_view_local/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_set_view_local/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_set_view_local/set_view_local.c, regress/lib/libgfarm/gfarm/gfs_pio_set_view_local/set_view_local.sh:
	build lib/libgfarm/gfarm/gfs_pio_set_view_local/set_view_local, and
	test  lib/libgfarm/gfarm/gfs_pio_set_view_local/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_set_view_index/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_set_view_index/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_set_view_index/set_view_index.c, regress/lib/libgfarm/gfarm/gfs_pio_set_view_index/set_view_index.sh:
	build lib/libgfarm/gfarm/gfs_pio_set_view_index/set_view_index, and
	test  lib/libgfarm/gfarm/gfs_pio_set_view_index/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_close/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_close/close.c, regress/lib/libgfarm/gfarm/gfs_pio_close/close.sh, regress/lib/libgfarm/gfarm/gfs_pio_close/normal.sh:
	build lib/libgfarm/gfarm/gfs_pio_close/close, and
	test  lib/libgfarm/gfarm/gfs_pio_close/normal.sh

2006-08-30  Noriyuki Soda  <soda@sra.co.jp>

	* regress/lib/libgfarm/gfarm/fork-term-init/fti-unlink.c:
	correct unintended memory leak

	* gftool/gfls/gfls.c:
	merge the following change in revision 1.23 from the main trunk:
	prevent "divide by zero" error,
	when a pathname is wider than the width of the screen.

	* gftool/gfls/gfls.c: prevent "divide by zero" error,
	when a pathname is wider than the width of the screen.

2006-08-29  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_pio_open/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_open/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_open/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_open/open.c, regress/lib/libgfarm/gfarm/gfs_pio_open/open.sh:
	build lib/libgfarm/gfarm/gfs_pio_open/open, and
	test  lib/libgfarm/gfarm/gfs_pio_open/normal.sh

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_pio_create/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_create/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_create/create.c, regress/lib/libgfarm/gfarm/gfs_pio_create/create.sh, regress/lib/libgfarm/gfarm/gfs_pio_create/normal.sh:
	build lib/libgfarm/gfarm/gfs_pio_create/create, and
	test  lib/libgfarm/gfarm/gfs_pio_create/normal.sh

2006-08-28  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/Makefile, regress/schedule:
	add lib/libgfarm/gfarm/gfs_pio_set_local/normal.sh

	* regress/lib/libgfarm/gfarm/gfs_pio_set_local/Makefile, regress/lib/libgfarm/gfarm/gfs_pio_set_local/normal.sh, regress/lib/libgfarm/gfarm/gfs_pio_set_local/set_local.c, regress/lib/libgfarm/gfarm/gfs_pio_set_local/set_local.sh:
	build lib/libgfarm/gfarm/gfs_pio_set_local/set_local, and
	test  lib/libgfarm/gfarm/gfs_pio_set_local/normal.sh

2006-08-25  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* gftool/gfwhere/Makefile, gftool/gfwhere/gfwhere.c, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/gfarm_foreach.c, lib/libgfarm/gfarm/gfarm_foreach.h (gfwhere.c):
	add -r and -R options for recursive listing

	* lib/libgfarm/gfarm/gfs_lock.c:
	use nanosleep(2) instead of usleep(3) since usleep(3) is obsolete.

	* lib/libgfarm/gfarm/gfs_stat.c, lib/libgfarm/gfarm/gfs_unlink.c, lib/libgfarm/gfarm/metadb_misc.c (gfs_unlink):
	fix a bug such that files cannot be deleted if it has no fragment file.
	(gfs_unlink_section_replica): delete path info when there is no fragment file.
	(gfarm_foreach_section): return GFARM_ERR_NO_FRAGMENT_INFORMATION when there is a file that has no fragment file.
	(gfs_stat): initialize st_user and st_group in case of no fragment information to safely call gfs_stat_free(3) afterward since this is a special case.

2006-08-25  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gfs_hook/feature/permission/remove_dir_in_mode_200_dir.sh, regress/gfs_hook/feature/permission/remove_file_in_mode_200_dir.sh:
	remove needless statement

2006-08-25  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* package/redhat/gfarm.spec:
	fix typo... /etc/service should be /sbin/service

2006-08-24  Noriyuki Soda  <soda@sra.co.jp>

	* regress/lib/libgfarm/gfarm/gfarm_initialize/init.c:
	<unistd.h> isn't necessary, since getopt(3) isn't used in this file

	* regress/lib/libgfarm/gfarm/gfarm_initialize/init.c:
	remove unused variables

2006-08-22  Noriyuki Soda  <soda@sra.co.jp>

	* doc/README.hook.en, doc/README.hook.ja:
	fix typo: it's not fstat(2) but fsat(2) that isn't supported on Solaris.

	* regress/gfs_hook/tool/dd/dd.sh, regress/schedule:
	add a test for ``dd'' command, a known bug on Linux.

	* regress/Makefile, regress/lib/libgfarm/gfarm/fork-term-init/Makefile, regress/lib/libgfarm/gfarm/fork-term-init/fti-unlink.c, regress/lib/libgfarm/gfarm/fork-term-init/fti-unlink.sh, regress/schedule:
	add the test program for the fork+gfarm_terminate()+gfarm_initialize() problem,
	originally written by Ishibashi-san in [gfarm-developers:01294],
	to the regress tree, although lib/libgfarm/gfarm/fork-term-init/fti-unlink.sh
	cannot actually detect the problem.
	valgrind is needed to see the invalid access to freed memory.

	* regress/README.ja, regress/gfs_hook/tool/scp/scp_from_gfarm.sh, regress/gfs_hook/tool/scp/scp_to_gfarm.sh, regress/regress.conf:
	correct my misunderstanding:
	use $exit_unsupported instead of $exit_untested,
	when the environment cannot support the test.

	* regress/README.ja: typo

	* regress/README.ja:
	describe common shell variables which are defined in regress.conf

2006-08-22  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule:
	add gfs_hook/feature/permission/rename_file_in_mode_300_dir.sh
	    gfs_hook/feature/permission/rename_file_in_mode_200_dir.sh
	    gfs_hook/feature/permission/rename_file_in_mode_100_dir.sh
	    gfs_hook/feature/permission/rename_file_in_mode_000_dir.sh

	* regress/gfs_hook/feature/permission/rename_file_in_mode_000_dir.sh, regress/gfs_hook/feature/permission/rename_file_in_mode_100_dir.sh, regress/gfs_hook/feature/permission/rename_file_in_mode_200_dir.sh, regress/gfs_hook/feature/permission/rename_file_in_mode_300_dir.sh, regress/gfs_hook/feature/permission/rename_file_in_mode_dir.sh:
	test script for renaming a file in the directory of specific write and execute
	permission

2006-08-22  Noriyuki Soda  <soda@sra.co.jp>

	* regress/gfs_hook/tool/cp/cp.sh: correct missing semicolon

	* regress/tst.sh:
	missed change to support --srcdir option of configure script

2006-08-18  Noriyuki Soda  <soda@sra.co.jp>

	* regress/regress.conf: correct comment

	* regress/README.ja:
	describe some tips, including $GFARM_TEST_DEBUG environment variable.

	* regress/regress.conf:
	automatically turn on debug flag (-x) of $shell,
	if environment variable $GFARM_TEST_DEBUG is set.

	* regress/gfs_hook/tool/rm/0byte.sh, regress/gfs_hook/tool/rm/1byte.sh, regress/gfs_hook/tool/sh/umask_000_dir.sh, regress/gfs_hook/tool/sh/umask_000_file.sh, regress/gfs_hook/tool/sh/umask_022_dir.sh, regress/gfs_hook/tool/sh/umask_022_file.sh, regress/gfs_hook/tool/sh/umask_066_file.sh, regress/gfs_hook/tool/sh/umask_077_dir.sh, regress/gftool/gfchmod/gfchmod_700_dir.sh, regress/gftool/gfchmod/gfchmod_755_dir.sh, regress/gftool/gfexport/0byte.sh, regress/gftool/gfexport/1byte.sh, regress/gftool/gfreg/0byte.sh, regress/gftool/gfreg/1byte.sh, regress/gftool/gfrm/0byte.sh, regress/gftool/gfrm/1byte.sh, regress/gftool/gfwhere/noopt_+x.sh, regress/gftool/gfwhere/noopt_-x.sh, regress/gfs_hook/feature/permission/create_file_in_mode_000_dir.sh, regress/gfs_hook/feature/permission/create_file_in_mode_100_dir.sh, regress/gfs_hook/feature/permission/create_file_in_mode_200_dir.sh, regress/gfs_hook/feature/permission/create_file_in_mode_300_dir.sh, regress/gfs_hook/feature/permission/make_dir_in_mode_000_dir.sh, regress/gfs_hook/feature/permission/make_dir_in_mode_100_dir.sh, regress/gfs_hook/feature/permission/make_dir_in_mode_200_dir.sh, regress/gfs_hook/feature/permission/make_dir_in_mode_300_dir.sh, regress/gfs_hook/feature/permission/open_dir_in_mode_000_dir.sh, regress/gfs_hook/feature/permission/open_dir_in_mode_100_dir.sh, regress/gfs_hook/feature/permission/open_file_in_mode_000_dir.sh, regress/gfs_hook/feature/permission/open_file_in_mode_100_dir.sh, regress/gfs_hook/feature/permission/overwrite_000_file.sh, regress/gfs_hook/feature/permission/overwrite_200_file.sh, regress/gfs_hook/feature/permission/read_000_dir.sh, regress/gfs_hook/feature/permission/read_000_file.sh, regress/gfs_hook/feature/permission/read_400_dir.sh, regress/gfs_hook/feature/permission/read_400_file.sh, regress/gfs_hook/feature/permission/remove_dir_in_mode_000_dir.sh, regress/gfs_hook/feature/permission/remove_dir_in_mode_100_dir.sh, regress/gfs_hook/feature/permission/remove_dir_in_mode_200_dir.sh, regress/gfs_hook/feature/permission/remove_dir_in_mode_300_dir.sh, regress/gfs_hook/feature/permission/remove_file_in_mode_000_dir.sh, regress/gfs_hook/feature/permission/remove_file_in_mode_100_dir.sh, regress/gfs_hook/feature/permission/remove_file_in_mode_200_dir.sh, regress/gfs_hook/feature/permission/remove_file_in_mode_300_dir.sh, regress/gfs_hook/feature/permission/write_000_dir.sh, regress/gfs_hook/feature/permission/write_000_file.sh, regress/gfs_hook/feature/permission/write_200_dir.sh, regress/gfs_hook/feature/permission/write_200_file.sh, regress/gfs_hook/tool/cp/0byte.sh, regress/gfs_hook/tool/cp/1byte.sh, regress/gfs_hook/tool/mv/0byte.sh, regress/gfs_hook/tool/mv/1byte.sh:
	always use "$shell" explicitly,
	instead of "sh" or implicitly relying on "#!/bin/sh",
	because bash is only reliably working shell with gfs_hook,
	and /bin/sh isn't bash except Linux.

	* regress/gfs_hook/feature/permission/make_dir_in_mode_dir.sh, regress/gfs_hook/feature/permission/open_dir_in_mode_dir.sh, regress/gfs_hook/feature/permission/open_file_in_mode_dir.sh, regress/gfs_hook/tool/sh/umask_000_file.sh:
	do not turn on shell debugging flag (-x) by default.

	* regress/gfs_hook/tool/diff/diff-r.sh, regress/gfs_hook/tool/diff/diff.sh, regress/gfs_hook/tool/pax/pax-r.sh, regress/gfs_hook/tool/build/configure_make.sh:
	do not access "./data" or "`pwd`/data" directory, but always access "$data",
	because the directory may not be under current directory,
	when --srcdir option is specified in the configure script.

	* regress/lib/libgfarm/gfarm/gfarm_initialize/Makefile, regress/lib/libgfarm/gfarm/gfarm_initialize/init.c, regress/lib/libgfarm/gfarm/gfarm_initialize/noarg.sh, regress/schedule:
	build lib/libgfarm/gfarm/gfarm_initialize/init, and
	test  lib/libgfarm/gfarm/gfarm_initialize/noarg.sh

	* regress/Makefile, regress/loop.sh, regress/regress.conf, regress/regress.sh, regress/tst.sh:
	- support to build binaries before running tests
	- support --srcdir option of configure script to build binaries

2006-08-18  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule:
	add gfs_hook/feature/permission/overwrite_200_file.sh
	    gfs_hook/feature/permission/overwrite_000_file.sh

	* regress/gfs_hook/feature/permission/overwrite_000_file.sh, regress/gfs_hook/feature/permission/overwrite_mode_file.sh, regress/gfs_hook/feature/permission/overwrite_200_file.sh:
	test script for overwriting a file specific write permission

2006-08-18  Noriyuki Soda  <soda@sra.co.jp>

	* doc/Makefile, lib/gfs_hook/Makefile, makes/data.mk, makes/html.mk, makes/include.mk, makes/lib.mk, makes/man.mk, makes/script.mk, ns/include/gfarm/Makefile, ns/nslib/Makefile.in, util/gfront/Makefile:
	do not output anything to stderr, if there isn't any error or warning.

2006-08-18  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule: add gfs_hook/feature/permission/read_400_file.sh
	    gfs_hook/feature/permission/read_000_file.sh
	    gfs_hook/feature/permission/read_400_dir.sh
	    gfs_hook/feature/permission/read_000_dir.sh
	    gfs_hook/feature/permission/write_200_file.sh
	    gfs_hook/feature/permission/write_000_file.sh
	    gfs_hook/feature/permission/write_200_dir.sh
	    gfs_hook/feature/permission/write_000_dir.sh

	* regress/gfs_hook/feature/permission/write_000_dir.sh, regress/gfs_hook/feature/permission/write_200_dir.sh, regress/gfs_hook/feature/permission/write_mode_dir.sh:
	test script for writing a directory of specific write permission

	* regress/gfs_hook/feature/permission/read_000_dir.sh, regress/gfs_hook/feature/permission/read_400_dir.sh, regress/gfs_hook/feature/permission/read_mode_dir.sh:
	test script for reading a directory of specific read permission

	* regress/gfs_hook/feature/permission/write_000_file.sh, regress/gfs_hook/feature/permission/write_200_file.sh, regress/gfs_hook/feature/permission/write_mode_file.sh:
	test script for writing a file of specific write permission

	* regress/gfs_hook/feature/permission/read_000_file.sh, regress/gfs_hook/feature/permission/read_400_file.sh, regress/gfs_hook/feature/permission/read_mode_file.sh:
	test script for reading a file of specific read permission

	* regress/schedule:
	add gfs_hook/feature/permission/open_file_in_mode_100_dir.sh
	    gfs_hook/feature/permission/open_file_in_mode_000_dir.sh
	    gfs_hook/feature/permission/open_dir_in_mode_100_dir.sh
	    gfs_hook/feature/permission/open_dir_in_mode_000_dir.sh

	* regress/gfs_hook/feature/permission/open_dir_in_mode_000_dir.sh, regress/gfs_hook/feature/permission/open_dir_in_mode_100_dir.sh, regress/gfs_hook/feature/permission/open_dir_in_mode_dir.sh:
	test script for opening a directory in the directory of specific execute
	permission

	* regress/gfs_hook/feature/permission/open_file_in_mode_000_dir.sh, regress/gfs_hook/feature/permission/open_file_in_mode_100_dir.sh, regress/gfs_hook/feature/permission/open_file_in_mode_dir.sh:
	test script for opening a file in the directory of specific execute permission

2006-08-17  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule:
	add gfs_hook/feature/permission/make_dir_in_mode_300_dir.sh
	    gfs_hook/feature/permission/make_dir_in_mode_200_dir.sh
	    gfs_hook/feature/permission/make_dir_in_mode_100_dir.sh
	    gfs_hook/feature/permission/make_dir_in_mode_000_dir.sh
	    gfs_hook/feature/permission/remove_file_in_mode_300_dir.sh
	    gfs_hook/feature/permission/remove_file_in_mode_200_dir.sh
	    gfs_hook/feature/permission/remove_file_in_mode_100_dir.sh
	    gfs_hook/feature/permission/remove_file_in_mode_000_dir.sh
	    gfs_hook/feature/permission/remove_dir_in_mode_300_dir.sh
	    gfs_hook/feature/permission/remove_dir_in_mode_200_dir.sh
	    gfs_hook/feature/permission/remove_dir_in_mode_100_dir.sh
	    gfs_hook/feature/permission/remove_dir_in_mode_000_dir.sh
	    gfs_hook/feature/permission/virtual_dir.sh

	* regress/gfs_hook/feature/permission/create_file_in_mode_dir.sh, regress/gfs_hook/feature/permission/make_dir_in_mode_000_dir.sh, regress/gfs_hook/feature/permission/make_dir_in_mode_100_dir.sh, regress/gfs_hook/feature/permission/make_dir_in_mode_200_dir.sh, regress/gfs_hook/feature/permission/make_dir_in_mode_300_dir.sh, regress/gfs_hook/feature/permission/make_dir_in_mode_dir.sh:
	test script for making a directory in the directory of specific write and
	execute permission

	* regress/gfs_hook/feature/permission/create_file_in_mode_dir.sh:
	remove -x option for /bin/sh

	* regress/gfs_hook/feature/permission/remove_dir_in_mode_000_dir.sh, regress/gfs_hook/feature/permission/remove_dir_in_mode_100_dir.sh, regress/gfs_hook/feature/permission/remove_dir_in_mode_200_dir.sh, regress/gfs_hook/feature/permission/remove_dir_in_mode_300_dir.sh, regress/gfs_hook/feature/permission/remove_dir_in_mode_dir.sh:
	test script for removing a directory in the directory of specific write and execute permission

	* regress/gfs_hook/feature/permission/remove_file_in_mode_000_dir.sh, regress/gfs_hook/feature/permission/remove_file_in_mode_100_dir.sh, regress/gfs_hook/feature/permission/remove_file_in_mode_200_dir.sh, regress/gfs_hook/feature/permission/remove_file_in_mode_300_dir.sh, regress/gfs_hook/feature/permission/remove_file_in_mode_dir.sh:
	test script for removing a file in the directory of specific write and execute
	permission

2006-08-16  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_client.c:
	merge the following change in revision 1.62 from the main trunk:
	do not forget to remove connections from connection_list
	at gfs_client_terminate().
	otherwise some calling sequence (e.g. gfs_client_terminate() + fork()
	+ gfs_client_initialize() + some gfarm API) dumps core.
	problem reported by Ishibashi-san [gfarm-developers:01294]

	* lib/libgfarm/gfarm/gfs_client.c:
	do not forget to remove connections from connection_list
	at gfs_client_terminate().
	otherwise some calling sequence (e.g. gfs_client_terminate() + fork()
	+ gfs_client_initialize() + some gfarm API) dumps core.
	problem reported by Ishibashi-san [gfarm-developers:01294]

2006-08-11  Noriyuki Soda  <soda@sra.co.jp>

	* doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man5/gfarm.conf.5.html, man/ja/man5/gfarm.conf.5, man/man5/gfarm.conf.5:
	regen

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h, lib/libgfarm/gfarm/gfs_pio_section.c:
	support "write_target_domain" directive in gfarm.conf,
	as well as GFARM_WRITE_TARGET_DOMAIN environment variable.
	requested by http://datafarm.apgrid.org/bugzilla-ja/show_bug.cgi?id=57

	* include/gfarm/gfs.h: export gfs_client_connection_gc()

2006-08-11  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gfs_hook/feature/permission/virtual_dir.sh:
	test case to confirm the problem that virtually existing file or directory
	cannot be replicated if write permission of its parent dropped.
	this problem is described in doc/KNOWN_PROBLEMS.{en,ja} in detail.

	* gftool/gfrep/gfrep.c:
	replicate_files_to_domain(): fix a bug that retruns 'error happened' though it succeeds

	* doc/KNOWN_PROBLEMS.en: typo

2006-08-10  Noriyuki Soda  <soda@sra.co.jp>

	* server/gfsd/gfsd.c, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_proto.h:
	add sync protocol to gfsd.
	will be used by gfs_pio_sync() implementation of scramble mode.

	* lib/libgfarm/gfarm/auth_config.c:
	merge the following change between revision 1.7 and 1.8 from the main trunk:
	make credential related configuration directives work again.
	{metadb,spool}_server_cred_{type,service,name} directives had been broken
	since previous revision (gfarm-1.3.1).

	* lib/libgfarm/gfarm/auth_config.c:
	make credential related configuration directives work again.
	{metadb,spool}_server_cred_{type,service,name} directives had been broken
	since previous revision (gfarm-1.3.1).

2006-08-09  Noriyuki Soda  <soda@sra.co.jp>

	* doc/KNOWN_PROBLEMS.en, doc/KNOWN_PROBLEMS.ja:
	add new entry: There is no way to stop a replication process.

2006-08-09  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfrep/gfrep.c:
	replicate_files_to_domain(): reduce memory usage used for file section infos

2006-08-09  Noriyuki Soda  <soda@sra.co.jp>

	* doc/KNOWN_PROBLEMS.en, doc/KNOWN_PROBLEMS.ja:
	mention the problem of http://datafarm.apgrid.org/bugzilla/show_bug.cgi?id=19

	* lib/libgfarm/gfarm/gfs_pio.c:
	bring the following change from the main trunk:
	revision 1.52:
	consider the contents of in-core dirty buffer
	in filesize calculation of gfs_fstat().

2006-08-09  Takuya Ishibashi  <takuya@soum.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_global_scramble.c, lib/libgfarm/gfarm/gfs_pio_scramble.c, gftool/gfdump/gfdump.c:
	shut up gcc warining

2006-08-09  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_proto.h: reserve GFS_PROTO_SYNC protocol

	* lib/libgfarm/gfarm/gfs_pio.c:
	consider the contents of in-core dirty buffer
	in filesize calculation of gfs_fstat().

2006-08-09  Takuya Ishibashi  <takuya@soum.co.jp>

	* lib/libgfarm/gfarm/gfs_pio.h: delete unused gfs_*_time

2006-08-09  Noriyuki Soda  <soda@sra.co.jp>

	* regress/gfs_hook/tool/scp/scp_from_gfarm.sh, regress/gfs_hook/tool/scp/scp_to_gfarm.sh:
	exclude localhost from the host to access via ssh/scp,
	because its host key may not match.
	(when another host was already accessed as localhost via ssh/scp)

2006-08-09  Takuya Ishibashi  <takuya@soum.co.jp>

	* gftool/gfusage/gfusage.c: use GFARM_*ALLOC_ARRAY

	* include/gfarm/gfarm_misc.h: add GFARM_CALLOC_ARRAY

	* lib/libgfarm/gfarm/metadb_localfs.c: use GFARM_CALLOC_ARRAY

	* lib/libgfarm/gfutil/alloc.c:
	add gfarm_calloc_array() to check integer overflow of calloc() arguments.

2006-08-08  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfutil/gfevent.c: more check against integer overflow,
	pointed out by Ishibashi-san in [gfarm-developers:01178]

2006-08-08  Takuya Ishibashi  <takuya@soum.co.jp>

	* regress/gftool/gfrun/gfrun.sh, server/gfmd/gfmd.c, server/gfsd/gfsd.c, server/gfsd/statfs.c, regress/gfs_hook/tool/mv/dir.sh, regress/gfs_hook/tool/mv/empty-dir.sh, regress/gfs_hook/tool/scp/scp_from_gfarm.sh, regress/gfs_hook/tool/scp/scp_to_gfarm.sh, regress/gfs_hook/tool/sh/source.sh, regress/gfs_hook/tool/sh/test-d.sh, regress/gfs_hook/tool/sh/test-e.sh, regress/gfs_hook/tool/sh/test-f.sh, regress/gfs_hook/tool/sh/test-r.sh, regress/gfs_hook/tool/sh/test-s.sh, regress/gfs_hook/tool/sh/test-w.sh, regress/gfs_hook/tool/sh/test-x.sh, regress/gfs_hook/tool/sh/test_mode.sh, regress/gfs_hook/tool/sh/umask_000_dir.sh, regress/gfs_hook/tool/sh/umask_000_file.sh, regress/gfs_hook/tool/sh/umask_022_dir.sh, regress/gfs_hook/tool/sh/umask_022_file.sh, regress/gfs_hook/tool/sh/umask_066_file.sh, regress/gfs_hook/tool/sh/umask_077_dir.sh, regress/gfs_hook/tool/sh/umask_dir.sh, regress/gfs_hook/tool/sh/umask_file.sh, regress/gfs_hook/tool/touch/touch_create.sh, regress/gftool/gfchmod/gfchmod_644_file.sh, regress/gftool/gfchmod/gfchmod_700_dir.sh, regress/gftool/gfchmod/gfchmod_755_dir.sh, regress/gftool/gfchmod/gfchmod_755_file.sh, regress/gftool/gfchmod/gfchmod_dir.sh, regress/gftool/gfkey/gfkey-cl.sh, regress/gftool/gfps/gfps.sh, regress/Makefile, regress/README.ja, regress/config.sh, regress/data/ok.sh, regress/gfs_hook.sh, regress/gfs_hook/feature/permission/open_file.sh, regress/gfs_hook/tool/build/configure.sh, regress/gfs_hook/tool/build/configure_make.sh, regress/gfs_hook/tool/grep/grep.sh, regress/regress.sh, regress/schedule, regress/tst.sh, man/man1/gfarm_agent.1, man/man1/gfrep.1, man/man1/gfusage.1, man/man5/gfarm.conf.5, package/freebsd/Makefile, package/freebsd/pkg-plist, package/pkgsrc/Makefile, package/pkgsrc/PLIST, package/redhat/gfarm.spec, package/solaris/build, package/solaris/gfarm-server.files, lib/libgfarm/gfsl/Makefile, lib/libgfarm/gfsl/auth.c, lib/libgfarm/gfsl/gsi.c, lib/libgfarm/gfsl/scsub.c, lib/libgfarm/gfsl/session.c, lib/libgfarm/gfutil/Makefile, lib/libgfarm/gfutil/alloc.c, lib/libgfarm/gfutil/gfevent.c, lib/libgfarm/gfutil/gfutil.h, lib/libgfarm/gfutil/hash.c, lib/libgfarm/gfutil/logutil_th.c, man/ja/man1/gfarm_agent.1, man/ja/man1/gfrep.1, man/ja/man1/gfusage.1, man/ja/man5/gfarm.conf.5, include/gfarm/gfarm_config.h.in, include/gfarm/gfarm_error.h, include/gfarm/gfarm_misc.h, lib/gfs_hook/Makefile, lib/gfs_hook/getcwd.c, lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/agent_client.c, lib/libgfarm/gfarm/agent_proto.c, lib/libgfarm/gfarm/auth_client.c, lib/libgfarm/gfarm/auth_client_gsi.c, lib/libgfarm/gfarm/auth_common.c, lib/libgfarm/gfarm/auth_config.c, lib/libgfarm/gfarm/auth_server.c, lib/libgfarm/gfarm/auth_server_gsi.c, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h, lib/libgfarm/gfarm/conn_hash.c, lib/libgfarm/gfarm/conn_hash.h, lib/libgfarm/gfarm/error.c, lib/libgfarm/gfarm/gfm_client.c, lib/libgfarm/gfarm/gfs_chmod.c, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_client_dir.c, lib/libgfarm/gfarm/gfs_client_rep.c, lib/libgfarm/gfarm/gfs_client_udp.c, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_exec.c, lib/libgfarm/gfarm/gfs_lock.c, lib/libgfarm/gfarm/gfs_misc.h, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_global_scramble.c, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_remote.c, lib/libgfarm/gfarm/gfs_pio_scramble.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_rename.c, lib/libgfarm/gfarm/gfs_replicate.c, lib/libgfarm/gfarm/gfs_stat.c, lib/libgfarm/gfarm/gfs_unlink.c, lib/libgfarm/gfarm/glob.c, lib/libgfarm/gfarm/host.c, lib/libgfarm/gfarm/hostcache.c, lib/libgfarm/gfarm/hostspec.c, lib/libgfarm/gfarm/import_help.c, lib/libgfarm/gfarm/io_gfsl.c, lib/libgfarm/gfarm/iobuffer.c, lib/libgfarm/gfarm/metadb_ldap.c, lib/libgfarm/gfarm/metadb_localfs.c, lib/libgfarm/gfarm/metadb_misc.c, lib/libgfarm/gfarm/metadb_pgsql.c, lib/libgfarm/gfarm/param.c, lib/libgfarm/gfarm/path_info_cache.c, lib/libgfarm/gfarm/schedule.c, lib/libgfarm/gfarm/stringlist.c, lib/libgfarm/gfarm/url.c, lib/libgfarm/gfarm/xxx_proto.c, gftool/gfrep/gfrep.c, gftool/gfrm/gfrm.c, gftool/gfrmdir/gfrmdir.c, gftool/gfrun/gfrun.c, gftool/gfsched/gfsched.c, gftool/gfsck/gfsck.c, gftool/gfhost/gfhost.c, gftool/gfkey/gfkey.c, gftool/gfls/gfls.c, gftool/gfmpirun/gfmpirun.c, gftool/gfps/gfps.c, gftool/gfrcmd/gfrcmd.c, gftool/gfreg/gfreg.c, gftool/example/gfimport_fixed/gfimport_fixed.c, gftool/gfarm_agent/agent_ptable.c, gftool/gfarm_agent/gfarm_agent.c, gftool/gfdump/gfdump.c, gftool/gfexec/Makefile, gftool/gfexec/gfexec.c, doc/html/ja/ref/index.html, doc/html/ja/ref/man1/gfarm_agent.1.html, doc/html/ja/ref/man1/gfrep.1.html, doc/html/ja/ref/man1/gfusage.1.html, doc/html/ja/ref/man5/gfarm.conf.5.html, gfptool/gfrepbe_client/gfrepbe_client.c, gfptool/gfrepbe_server/gfrepbe_server.c, gfptool/gfsplck/Makefile, gfptool/gfsplck/gfsplck.c, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook, doc/html/en/ref/index.html, doc/html/en/ref/man1/gfarm_agent.1.html, doc/html/en/ref/man1/gfrep.1.html, doc/html/en/ref/man1/gfusage.1.html, doc/html/en/ref/man5/gfarm.conf.5.html, bench/nconnect/nconnect.c, debian/changelog, debian/gfmd.install, debian/gfmd.manpages, doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja, doc/KNOWN_PROBLEMS.en, doc/KNOWN_PROBLEMS.ja, doc/README.hook.en, doc/README.hook.ja, doc/docbook/en/ref/man1/Makefile.inc, doc/docbook/en/ref/man1/gfarm_agent.1.docbook, doc/docbook/en/ref/man1/gfrep.1.docbook, doc/docbook/en/ref/man1/gfusage.1.docbook, doc/docbook/en/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man1/Makefile.inc, doc/docbook/ja/ref/man1/gfarm_agent.1.docbook, doc/docbook/ja/ref/man1/gfrep.1.docbook, doc/docbook/ja/ref/man1/gfusage.1.docbook, configure.ac, INSTALL.RPM.en, INSTALL.RPM.ja, INSTALL.en, INSTALL.ja, LICENSE, RELNOTES, configure, ChangeLog:
	merge changes of gfarm_v1 main trunk on 7 August, 2006.

2006-08-08  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfrep/gfrep.c: get_hosts_have_replica(): pluged memory leak

2006-08-08  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec: correct syntax error

	* package/redhat/gfarm.spec: bump the package release from 0 to 1

	* package/redhat/gfarm.spec:
	restart gfsd, gfmd and gfarm_agent at update, if they are already running.

	* package/redhat/gfarm.spec:
	don't display "run config-SOMETHING", if /etc/gfarm.conf already exists

2006-08-08  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule: add gfs_hook/tool/scp/scp_from_gfarm.sh
	    gfs_hook/tool/scp/scp_to_gfarm.sh

	* regress/gfs_hook/tool/scp/scp_from_gfarm.sh, regress/gfs_hook/tool/scp/scp_to_gfarm.sh:
	to avoid waiting for key-in, exit if ssh-agent doesn't work or has no identity

2006-08-07  Noriyuki Soda  <soda@sra.co.jp>

	* regress/account.sh, regress/regress.conf, regress/regress.sh, regress/tst.sh:
	add more exit codes: XPASS, XFAIL, UNRESOLVED, UNTESTED, UNSUPPORTED.
	from dejagnu:
		http://www.gnu.org/software/dejagnu/manual/x397.html
	 and POSIX 1003.3 standard for test frameworks:
		http://www.gnu.org/software/dejagnu/manual/x47.html#posix

	* regress/README: remove resolved issues

2006-08-07  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule: add some scripts and reorder

	* regress/regress.sh, regress/tst.sh:
	enable to display longer path of test script

	* regress/gfs_hook/feature/permission/create_file_in_mode_000_dir.sh, regress/gfs_hook/feature/permission/create_file_in_mode_100_dir.sh, regress/gfs_hook/feature/permission/create_file_in_mode_200_dir.sh, regress/gfs_hook/feature/permission/create_file_in_mode_300_dir.sh, regress/gfs_hook/feature/permission/create_file_in_mode_dir.sh, regress/gfs_hook/feature/permission/open_file.sh:
	replace "open_file_sh" with "create_file_in_mode_*_dir.sh"

2006-08-06  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* RELNOTES:
	mention management of cached connections not to exhaust the file
	descriptors and 'gfsd_connection_cache' directive.

	* doc/README.hook.en, doc/README.hook.ja: typo

2006-08-05  Noriyuki Soda  <soda@sra.co.jp>

	* doc/html/en/ref/man1/gfrep.1.html, doc/html/ja/ref/man1/gfrep.1.html, man/ja/man1/gfrep.1, man/man1/gfrep.1:
	regen

	* doc/docbook/en/ref/man1/gfrep.1.docbook, doc/docbook/ja/ref/man1/gfrep.1.docbook:
	apply the comment by Yamamoto-san in [gfarm-developers:01142]

	* server/gfsd/gfsd.c:
	Yet another workaround for the specification bug of bash,
	this is necessary to make bash read ~/.bashrc on Solaris 9,
	when it's invoked by "gfrcmd -n".

	NOTE:
	This symptom doesn't always happen. It depends on the timing
	when the opposite side of the socketpair is closed.

	* doc/html/en/ref/man5/gfarm.conf.5.html, man/man5/gfarm.conf.5: regen

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook: sync more

	* doc/html/en/ref/man5/gfarm.conf.5.html, man/man5/gfarm.conf.5: regen

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook: wording

	* man/man5/gfarm.conf.5, doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man5/gfarm.conf.5.html, man/ja/man5/gfarm.conf.5:
	regen

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook:
	an example of PostgreSQL

	* doc/html/ja/ref/man5/gfarm.conf.5.html, man/ja/man5/gfarm.conf.5, man/man5/gfarm.conf.5, doc/html/en/ref/man5/gfarm.conf.5.html:
	regen

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook:
	describe "write_local_priority" and "gfsd_connection_cache"

	* lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h, lib/libgfarm/gfarm/gfs_client.c:
	add "gfsd_connection_cache" parameter to gfarm.conf.
	this specifies maximum number of cached gfsd connections.
	also, increase the default value from 10 to 16.

	* lib/libgfarm/gfutil/logutil_th.c: more English correction

	* lib/libgfarm/gfutil/logutil_th.c: English correction in comments.

	* lib/libgfarm/gfutil/logutil_th.c:
	leave a comment why this is not race condition in spite of its appearance.
	Although it's obvious from what it is actually doing.

	* lib/libgfarm/gfutil/logutil_th.c: back out previous change.
	It's my misunderstanding which is just same with revision 1.2. ;-/

2006-08-04  Noriyuki Soda  <soda@sra.co.jp>

	* doc/html/en/ref/man1/gfrep.1.html, man/man1/gfrep.1: regen

	* doc/docbook/en/ref/man1/gfrep.1.docbook: more English corrections

	* doc/html/en/ref/man1/gfrep.1.html, man/man1/gfrep.1: regen

	* doc/docbook/en/ref/man1/gfrep.1.docbook: minor english correction

	* man/ja/man1/gfrep.1, man/man1/gfrep.1, doc/html/en/ref/man1/gfrep.1.html, doc/html/ja/ref/man1/gfrep.1.html:
	regen

	* doc/docbook/ja/ref/man1/gfrep.1.docbook, doc/docbook/en/ref/man1/gfrep.1.docbook:
	refine synopsis

	* doc/README.hook.en, doc/README.hook.ja:
	mention the dd command problem on Linux. (It works on NetBSD and Solaris.)

	* doc/html/en/ref/man1/gfrep.1.html, doc/html/ja/ref/man1/gfrep.1.html, man/ja/man1/gfrep.1, man/man1/gfrep.1:
	regen

	* doc/docbook/en/ref/man1/gfrep.1.docbook: fix syntax errors

	* doc/docbook/en/ref/man1/gfrep.1.docbook, doc/docbook/ja/ref/man1/gfrep.1.docbook:
	nearly totally restructured, since many descriptions were obsolete.

2006-08-04  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* doc/KNOWN_PROBLEMS.en: improve the wording

2006-08-04  Noriyuki Soda  <soda@sra.co.jp>

	* doc/html/en/ref/index.html, doc/html/ja/ref/index.html:
	add missing link to gfsetdir(1)

	* doc/KNOWN_PROBLEMS.en, doc/KNOWN_PROBLEMS.ja:
	reflect the comments by Tanimura-san in [gfarm-developers:01117]

2006-08-04  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* ChangeLog, RELNOTES: updated relnotes for the version 1.3.1

2006-08-04  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule: add gfs_hook/tool/sh/umask_022_dir.sh
	    gfs_hook/tool/sh/umask_077_dir.sh
	    gfs_hook/tool/sh/umask_000_dir.sh
	    gfs_hook/feature/permission/open_file.sh

	* regress/gfs_hook/feature/permission/open_file.sh:
	script to test correspondence between permission of opening a file and execution bit of its parent directory

2006-08-04  Noriyuki Soda  <soda@sra.co.jp>

	* man/ja/man1/gfrep.1, man/man1/gfrep.1, doc/html/en/ref/man1/gfrep.1.html, doc/html/ja/ref/man1/gfrep.1.html:
	regen

	* doc/docbook/en/ref/man1/gfrep.1.docbook, doc/docbook/ja/ref/man1/gfrep.1.docbook:
	forgot to mention the behavior of combination of "-s" option and "-D" option

2006-08-04  Yusuke Tanimura  <yusuke.tanimura@aist.go.jp>

	* RELNOTES: *** empty log message ***

2006-08-04  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gfs_hook/tool/sh/umask_000_dir.sh, regress/gfs_hook/tool/sh/umask_022_dir.sh, regress/gfs_hook/tool/sh/umask_077_dir.sh, regress/gfs_hook/tool/sh/umask_dir.sh:
	test script for "umask" and directory permission.
	this script sets umask, makes a directory, and checks its permisson.

	* regress/schedule: add gfs_hook/tool/touch/touch_create.sh
	    gfs_hook/tool/sh/umask_022_file.sh
	    gfs_hook/tool/sh/umask_066_file.sh
	    gfs_hook/tool/sh/umask_000_file.sh

	* regress/gfs_hook/tool/sh/umask_000_file.sh, regress/gfs_hook/tool/sh/umask_022_file.sh, regress/gfs_hook/tool/sh/umask_066_file.sh:
	test script for "umask".
	this script sets umask, creates a file, and checks its permisson.

	* regress/gfs_hook/tool/touch/touch_create.sh:
	test script for "touch" to create a file

2006-08-04  Yusuke Tanimura  <yusuke.tanimura@aist.go.jp>

	* RELNOTES: a draft release notes for gfarm 1.3.1

2006-08-04  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gfs_hook/tool/sh/umask_file.sh:
	test script for "`umask' and check permission of file"

2006-08-04  Noriyuki Soda  <soda@sra.co.jp>

	* doc/README.hook.en, doc/README.hook.ja:
	document that gfsd may hangs in nss_ldap module, when you invoke gfsd
	with LD_PRELOAD setting for syscall-hooking. This happens only when
	ldap is specified in /etc/nsswitch.conf, of course.
	XXX The reason why this problem happens isn't determined yet.

	* doc/README.hook.ja: fix punctuations

	* doc/README.hook.ja, doc/README.hook.en:
	document "test -d <pathname>" problem on Solaris

2006-08-04  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule: add gftool/gfps/gfps.sh

	* regress/gftool/gfps/gfps.sh: test script for "gfps"

2006-08-04  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/error.c:
	protect gfarm_errlist_hashtab_initialize() from multiple call,
	because gfarm_initialize() + gfarm_terminate() pair may be called
	multiple times, and that makes gfarm_errlist_hashtab_initialize()
	called multiple times too.

2006-08-03  Noriyuki Soda  <soda@sra.co.jp>

	* server/gfsd/gfsd.c:
	add a feature to make a gfsd read-only, by creating ".readonly" file
	on spool root directory.
	XXX this doesn't work with some operations which don't use scheduling.
	    e.g. "gfrep -d <host> <file>...."

	* regress/gfs_hook/tool/sh/test-r.sh, regress/gfs_hook/tool/sh/test-w.sh, regress/gfs_hook/tool/sh/test-x.sh, regress/regress.sh:
	use bash instead of /bin/sh, because /bin/sh on Solaris 9 dumps core
	with test-d.sh test in gfs_hook/tool/sh/ and similar tests.
	XXX It's desirable that /bin/sh just works.

2006-08-03  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule: - add some test scripts
	- replace gfs_hook/tool/build/configure.sh with
	  gfs_hook/tool/build/configure_make.sh

	* regress/gfs_hook/tool/build/configure.sh, regress/gfs_hook/tool/build/configure_make.sh:
	replace configure.sh with configure_make.sh

	* regress/gfs_hook/tool/grep/grep.sh:
	test script for "grep pattern <file>"

	* regress/gfs_hook/tool/sh/source.sh: test script for "source <file>"

	* regress/gfs_hook/tool/sh/test-s.sh: test script for "test -s <file>"

	* regress/gfs_hook/tool/sh/test-f.sh: test script for "test -f <file>"

	* regress/gfs_hook/tool/sh/test-e.sh: test script for "test -e <file>"

	* regress/gfs_hook/tool/sh/test-d.sh:
	test script for "test -d <directory>"

	* regress/gfs_hook/tool/sh/test-x.sh: test script for "test -x <file>"

	* regress/gfs_hook/tool/sh/test-w.sh: test script for "test -w <file>"

	* regress/gfs_hook/tool/sh/test-r.sh: test script for "test -r <file>"

	* regress/gfs_hook/tool/sh/test_mode.sh:
	test script for "test -[rwx] <file>"

	* regress/gftool/gfchmod/gfchmod_755_dir.sh:
	test script for "gfchmod 755 <directory>"

	* regress/gftool/gfchmod/gfchmod_700_dir.sh:
	test script for "gfchmod 700 <directory>"

	* regress/gftool/gfchmod/gfchmod_dir.sh:
	test script for "gfchmod <mode> <directory>"

2006-08-03  Noriyuki Soda  <soda@sra.co.jp>

	* regress/Makefile: Do not try another backend, if one backend failed.

	* regress/Makefile: fix bug about $PATH setting

2006-08-03  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* gftool/gfarm_agent/gfarm_agent.c: add -m option in usage

	* doc/html/ja/ref/man1/gfarm_agent.1.html, doc/html/en/ref/man1/gfarm_agent.1.html, man/ja/man1/gfarm_agent.1, man/man1/gfarm_agent.1:
	regen

	* doc/docbook/ja/ref/man1/gfarm_agent.1.docbook, doc/docbook/en/ref/man1/gfarm_agent.1.docbook:
	add description about -m option

	* gftool/gfarm_agent/gfarm_agent.c:
	add -m option for master mode.  In this mode, set timeout of path info
	cache to 1 min, otherwise, do not use path info cache.

2006-08-03  Noriyuki Soda  <soda@sra.co.jp>

	* ChangeLog:
	$GFARM_GSI_MAPFILE environment variable doesn't exist on main trunk

2006-08-03  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* ChangeLog: Catched up with the current ChangeLog.

2006-08-02  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec: revert previous change,
	because documents of gfusage haven't merged into GNEO branch yet.

	* package/redhat/gfarm.spec: add documents of gfusage

	* package/redhat/gfarm.spec: add gfusage

	* package/redhat/gfarm.spec: one missed change in previous commit

	* package/redhat/gfarm.spec:
	use "gneo-gfarm" instead of "gfarm" as RPM package name and source tarball name

	* regress/Makefile:
	set "LANG=C", otherwise the result of sort command may differ.
	from [gfarm-developers:01083]

	* regress/config.sh: wait 3 seconds before invoking config-gfsd,
	because "FATAL:  the database system is starting up" error happend
	with PostgreSQL backend in [gfarm-developers:01080]

	* package/redhat/gfarm.spec: add commands under gneo_gfextra

	* regress/config.sh:
	shell function ABORT is needed to use config-gfarm.$BACKEND_TYPE and
	config-gfarm.sysdep, from error message in [gfarm-developers:01074]

	* doc/README.hook.en, doc/README.hook.ja:
	mention that OS-supplied "tar" command and "pax" command don't work
	on Solaris, because of lack of fsat(2) system call hook.

	* lib/gfs_hook/hooks_subr.c: fix typo in previous commit

	* lib/gfs_hook/hooks_subr.c:
	Do not break `errno' in gfs_hook_is_url() function,
	if it returns 0 (i.e. not gfarm hook, but native system call case).
	This fixes a problem that mkdir(1) on Solaris 9 return 2 as its exit code,
	even if the mkdir(2) call succeed.
	The mkdir(1) command is checking `errno' variable after its mkdir(2) call
	regardless whether mkdir(2) return -1 or not.

	* regress/Makefile:
	add $(TEST_TARGET) variable to specify which case will be tested.

	* regress/Makefile, regress/README.ja:
	add "make selfcheck-postgresql" and "make selfcheck-ldap" targets
	to test particular backend only.

	* regress/config.sh, regress/gfs_hook.sh:
	split gfs_hook environment settings into independent script (gfs_hook.sh)

	* regress/config.sh:
	libresolv.so is necessary on Solaris, as written in README.hook.*

	* gftool/config-gfarm/sysdep/solaris/config-gfarm.sysdep, gftool/config-gfarm/sysdep/freebsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/freebsd/gfsd.in, gftool/config-gfarm/sysdep/hpux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/linux/debian/gfsd.in, gftool/config-gfarm/sysdep/linux/redhat/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/redhat/gfarm_agent.in, gftool/config-gfarm/sysdep/linux/redhat/gfmd.in, gftool/config-gfarm/sysdep/linux/redhat/gfsd.in, gftool/config-gfarm/sysdep/linux/suse/gfsd.in, gftool/config-gfarm/sysdep/netbsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/netbsd/gfsd.in, gftool/config-gfarm/sysdep/osf1/config-gfarm.sysdep, gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/config-gfarm.ldap, gftool/config-gfarm/config-gfarm.postgresql, gftool/config-gfarm/config-gfsd.in, gftool/config-gfarm/gfarm.conf-ldap.in, gftool/config-gfarm/gfarm.conf-postgresql.in, gftool/config-gfarm/sysdep/aix/config-gfarm.sysdep, gftool/config-gfarm/sysdep/default/config-gfarm.sysdep, gftool/config-gfarm/sysdep/default/gfsd.in:
	merge changes of gfarm_v1 main trunk on 02 August, 2006.

	* regress/README.ja: mention glibc-not-hidden package on Linux

	* regress/config.sh: make "-k" option actually work

2006-07-31  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfutil/logutil_th.c:
	fix race condition about calling pthread_setspecific()

	* server/gfsd/statfs.c:
	fix disk space calculation of statvfs() on filesystems
	which fragment size != block size, e.g. FFS on *BSDs.

	* server/gfsd/gfsd.c:
	workaround gcc warning: might be used uninitialized

	* server/gfsd/gfsd.c: fix memory leak
	(not really fatal, because this only happens when gfsd is invoked from gfrcmd)

2006-07-28  Noriyuki Soda  <soda@sra.co.jp>

	* regress/config.sh:
	add $PATH before system paths, to use dynamically linked binaries
	on FreeBSD before 5 and NetBSD before 2

	* lib/libgfarm/gfarm/gfs_client_dir.c:
	FreeBSD-4.11 needs <sys/types.h> before including <sys/socket.h>

2006-07-28  Takuya Ishibashi  <takuya@soum.co.jp>

	* server/gfsd/gfsd.c (gfs_server_readex): correct iosize for O_DIRECT.

2006-07-28  Noriyuki Soda  <soda@sra.co.jp>

	* package/freebsd/Makefile, package/pkgsrc/Makefile, package/redhat/gfarm.spec, package/solaris/build:
	change gfarm version form 1.3 to 1.3.1

	* lib/libgfarm/gfarm/gfs_replicate.c:
	fix portability problem: <sys/stat.h> is needed.
	found on FreeBSD

	* doc/KNOWN_PROBLEMS.en, doc/KNOWN_PROBLEMS.ja:
	filesystem case insensitivity isn't a problem in gfarm v2,
	pointed out by Yamamoto-san in [gfarm-developers:01046]

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja: there is gfchmod command now.

	* doc/Gfarm-FAQ.ja, doc/Gfarm-FAQ.en: add "sockopt keepalive"

	* doc/KNOWN_PROBLEMS.ja: wording

	* doc/KNOWN_PROBLEMS.en, doc/KNOWN_PROBLEMS.ja:
	replace "libgfarm" by "gfarm library"

2006-07-27  Noriyuki Soda  <soda@sra.co.jp>

	* regress/README.ja:
	record the way to use "make selfcheck" target and "config.sh" command,
	from [gfarm-developers:00995] and [gfarm-developers:00997]

	* gftool/config-gfarm/sysdep/linux/redhat/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/redhat/gfarm_agent.in, gftool/config-gfarm/sysdep/linux/redhat/gfmd.in, gftool/config-gfarm/sysdep/linux/redhat/gfsd.in:
	don't use "initlog" command if /etc/init.d/functions doesn't used it.
	this suppress the following messages since Fedora Core 4:
	WARNING: initlog is deprecated and will be removed in a future release

2006-07-27  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/changelog: updated to 1.3.1

2006-07-26  Noriyuki Soda  <soda@sra.co.jp>

	* LICENSE: fix about singular vs plural about license exceptions

	* doc/KNOWN_PROBLEMS.en: more fix about the problem in previous commit

	* doc/KNOWN_PROBLEMS.en: point README.hook.en instead of README.hook.ja

	* doc/KNOWN_PROBLEMS.en: add missed entry in the translation

	* doc/KNOWN_PROBLEMS.en: translate KNOWN_PROBLEMS into English.

	* doc/KNOWN_PROBLEMS.ja:
	- change some plans of fix in gfarm v1 from "not decided" to "no plan"
	- modify expression about per-user basis protection of metadata
	- clarify description about a problem of remove operation vs. garbage files
	- add FAT and NTFS to the description about case insensitive filesystem problem
	- modify description about "fork safe" problem, by reflecting the comment
	  by tatebe-san in [gfarm-cvs:08217] and [gfarm-cvs:08219]
	- add description about sharedsecret authentication failure
	  from [gfarm-developers:00806] ... [gfarm-developers:00816] by Yamamoto-san
	  and [gfarm-developers:00836] from Tatebe-san

2006-07-25  Noriyuki Soda  <soda@sra.co.jp>

	* regress/config.sh: typo

	* regress/config.sh: don't do same thing twice

	* regress/config.sh: need to set $FQ_HOSTNAME to make LDAP backend work

	* regress/Makefile: forgot to remove temporary option

	* regress/Makefile: test LDAP as well as PostgreSQL

	* regress/config.sh: add various options

	* regress/Makefile, regress/config.sh:
	add "make selfcheck" target which configures self test environment, and invokes
	regression tests.

	But the self test environment assumes that ~/.bashrc, ~/.zshrc or ~/.cshrc
	does the following settings:
	- set $PATH environment variable so that "gfexec" command of the tested
	  binary image can be found.
	- set $GFARM_CONFIG_FILE environment variable to "/var/tmp/`whoami`/gfarm.conf"

	* gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/config-gfarm.ldap, gftool/config-gfarm/config-gfarm.postgresql:
	provide "service_stop_$BACKEND" for regression test

	* INSTALL.RPM.en, INSTALL.RPM.ja, gftool/config-gfarm/sysdep/linux/redhat/gfsd.in, gftool/config-gfarm/sysdep/linux/suse/gfsd.in, gftool/config-gfarm/sysdep/netbsd/gfsd.in, gftool/config-gfarm/config-gfsd.in, gftool/config-gfarm/sysdep/default/gfsd.in, gftool/config-gfarm/sysdep/freebsd/gfsd.in, gftool/config-gfarm/sysdep/linux/debian/gfsd.in:
	changes for "make selfcheck" target of regression test as follows:
	- support -l option which specifies listen address
	- do not rewrite gfarm.conf, and use -r option of gfsd top specify spool root.

	* gftool/config-gfarm/sysdep/osf1/config-gfarm.sysdep, gftool/config-gfarm/sysdep/solaris/config-gfarm.sysdep, gftool/config-gfarm/sysdep/aix/config-gfarm.sysdep, gftool/config-gfarm/sysdep/default/config-gfarm.sysdep, gftool/config-gfarm/sysdep/freebsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/hpux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/netbsd/config-gfarm.sysdep:
	do not display warning message, when hostname cannot be resolved by DNS.

	* gftool/config-gfarm/config-gfarm.in:
	load backend-dependent functions after shell type detection,
	instead of before.

	* lib/libgfarm/gfarm/gfs_stat.c:
	<sys/time.h> is necessary to use gettimeofday(),
	from Yamamoto-san in [gfarm-developers:00973]

	* lib/libgfarm/gfarm/metadb_pgsql.c: fix LP64 portability problem,
	from Yamamoto-san in [gfarm-developers:00973]

2006-07-25  Takuya Ishibashi  <takuya@soum.co.jp>

	* debian/gfmd.manpages, debian/gfmd.install, package/freebsd/pkg-plist, package/pkgsrc/PLIST, package/redhat/gfarm.spec, package/solaris/gfarm-server.files:
	add gfusage

	* man/ja/man1/gfusage.1, man/man1/gfusage.1:
	gfusage - display Gfarm filesystem space usage

	* doc/html/ja/ref/index.html, doc/html/ja/ref/man1/gfusage.1.html, doc/html/en/ref/index.html, doc/html/en/ref/man1/gfusage.1.html:
	add gfusage

	* doc/docbook/ja/ref/man1/Makefile.inc, doc/docbook/ja/ref/man1/gfusage.1.docbook, doc/docbook/en/ref/man1/Makefile.inc, doc/docbook/en/ref/man1/gfusage.1.docbook:
	gfusage - display Gfarm filesystem space usage

2006-07-24  Noriyuki Soda  <soda@sra.co.jp>

	* gfptool/gfsplck/Makefile, gfptool/gfsplck/gfsplck.c, gftool/gfexec/Makefile, gftool/gfexec/gfexec.c, lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_subr.c, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h, lib/libgfarm/gfarm/gfs_chmod.c, lib/libgfarm/gfarm/gfs_exec.c, lib/libgfarm/gfarm/gfs_misc.h, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_rename.c, lib/libgfarm/gfarm/gfs_replicate.c, lib/libgfarm/gfarm/gfs_stat.c, lib/libgfarm/gfarm/gfs_unlink.c, lib/libgfarm/gfarm/metadb_misc.c, lib/libgfarm/gfarm/url.c:
	gfs_pio.h is really private header among gfs_pio_{global,section}.c,
	gfs_pio_{local,remote}.c and gfs_pio.c.
	thus, don't let other modules include gfs_pio.h.
	instead, move interface definitions from gfs_pio.h to config.h and gfs_misc.h.

	also, move some functions to more appropriate place as follows:
	gfs_display_timer(): gfs_pio.c -> config.c
	gfarm_redirect_file(): config.c -> gfs_pio_section.c
	gfs_fchmod(): gfs_chmod.c -> gfs_pio.c
	gfs_check_section_{checksum_unknown,busy}*(): gfs_pio_section.c -> metadb_misc.c
		those functions are renamed to
		gfs_file_section{,_info}_{check,set}_{checksum_unknown,busy}().
	gfarm_foreach_copy(), gfarm_foreach_section(): gfs_unlink.c -> metadb_misc.c

	* doc/KNOWN_PROBLEMS.ja: clarify what trouble will happen with fork(2)

	* gftool/config-gfarm/gfarm.conf-ldap.in, gftool/config-gfarm/gfarm.conf-postgresql.in:
	enable "setsockopt keepalive" by default, discussed in the meeting today

	* lib/libgfarm/gfarm/path_info_cache.c:
	include "path_info_cache.h" to check function prototype consistency

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/gfs_unlink.c, lib/libgfarm/gfarm/metadb_misc.c:
	move gfarm_url_fragment_cleanup() from metadb_misc.c to gfs_unlink.c,
	because the latter is more appropriate place.

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/gfs_misc.h, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_replicate.c, lib/libgfarm/gfarm/gfs_stat.c:
	- move gfs_stat() and related functions from gfs_pio_misc.c to gfs_stat.c
	- move replication related functions from gfs_pio_misc.c to gfs_replicate.c

	* lib/libgfarm/gfarm/gfs_misc.h, lib/libgfarm/gfarm/gfs_rename.c:
	remove unused functions

	* lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_rename.c:
	move gfs_rename_old() from gfs_pio_misc.c to gfs_rename.c

2006-07-23  Noriyuki Soda  <soda@sra.co.jp>

	* regress/schedule, regress/gfs_hook/tool/mv/dir.sh, regress/gfs_hook/tool/mv/empty-dir.sh:
	add simple test cases to move a directory

	* lib/libgfarm/gfarm/gfs_client_udp.c:
	this file hasn't been used since 2003-08-12 when parallel authentication was
	implemented.

2006-07-21  Noriyuki Soda  <soda@sra.co.jp>

	* server/gfsd/gfsd.c, server/gfmd/gfmd.c:
	report error code of xxx_connection_free(). i.e. xxx_proto_flush() and close().

2006-07-21  Takuya Ishibashi  <takuya@soum.co.jp>

	* gftool/Makefile, gftool/gfusage/Makefile, gftool/gfusage/gfusage.c:
	bring gfusage from main trunk

	* gftool/gfusage/Makefile: add hash.h

	* gftool/Makefile: add gfusage

	* gftool/gfusage/gfusage.c: add Id

	* gftool/gfusage/Makefile, gftool/gfusage/gfusage.c:
	display gfarm space usage

2006-07-20  Noriyuki Soda  <soda@sra.co.jp>

	* INSTALL.RPM.ja, INSTALL.en, INSTALL.ja, INSTALL.RPM.en:
	spool-directory argument of config-gfsd is now optional,
	and the default value is /var/gfarm-spool.

	* gftool/config-gfarm/config-gfsd.in:
	make spool-directory argument optional

	* gftool/config-gfarm/sysdep/linux/redhat/gfarm_agent.in, gftool/config-gfarm/sysdep/linux/redhat/gfmd.in, gftool/config-gfarm/sysdep/linux/redhat/gfsd.in:
	reduce difference between main trunk and GNEO

	* gftool/config-gfarm/config-gfarm.postgresql:
	reduce difference between main trunk and GNEO by
	- prevent PostgreSQL 7.4 from asking password
	  by removing "-w" option of pg_ctl, if the version is 7.4.
	- make pg_hba.conf use netmask instead of CIDR bit length,
	  to make it actually work with PostgreSQL 7.4
	  (handling of CIDR bits == 0 is broken in 7.4?)

	* gftool/config-gfarm/sysdep/linux/suse/gfarm-pgsql.in, gftool/config-gfarm/sysdep/netbsd/gfarm-pgsql.in, gftool/config-gfarm/sysdep/default/gfarm-pgsql.in, gftool/config-gfarm/sysdep/freebsd/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/debian/gfarm-pgsql.in:
	prevent PostgreSQL 7.4 from asking password
	by removing "-w" option of pg_ctl, if the version is 7.4.

	* gftool/config-gfarm/sysdep/linux/redhat/gfarm-pgsql.in:
	- reduce difference between main trunk and GNEO.
	- prevent PostgreSQL 7.4 from asking password
	  by removing "-w" option of pg_ctl, if the version is 7.4.

	* gftool/config-gfarm/sysdep/linux/redhat/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/redhat/gfarm_agent.in, gftool/config-gfarm/sysdep/linux/redhat/gfmd.in, gftool/config-gfarm/sysdep/linux/redhat/gfsd.in:
	- reduce difference between main trunk and GNEO.
	- don't use "daemon" function in /etc/init.d/functions,
	  because it may refer /var/run/${FILE}.pid
	  instead of $CONFIG_PREFIX/var/run/${FILE}.pid

	* gftool/config-gfarm/config-gfsd.in:
	reduce difference between main trunk and GNEO by
	- don't "restart" the service, but "start" it,
	  if pid file for the service doesn't exist.
	- add --help option
	- add "g" option to sed in config()

	* gftool/config-gfarm/config-gfarm.ldap, gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep:
	reduce difference between main trunk and GNEO

	* gftool/config-gfarm/config-agent.in, gftool/config-gfarm/config-gfarm.in:
	- don't "restart" the service, but "start" it,
	  if pid file for the service doesn't exist.
	- add --help option

	* gftool/config-gfarm/sysdep/linux/redhat/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/redhat/gfarm-slapd.in:
	add a comment

	* gftool/config-gfarm/config-gfsd.in:
	fix typo about $GLOBUS_LOCATION setting

	* gftool/config-gfarm/config-gfarm.postgresql:
	sync comment with main trunk

2006-07-19  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/libgfarm/gfarm/schedule.c (gfarm_schedule_random_host_init):
	plug memory leak in error case

2006-07-19  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gftool/gfchmod/gfchmod_755_file.sh:
	test script for "gfchmod 755 <file>"

	* regress/gftool/gfchmod/gfchmod_644_file.sh:
	test script for "gfchmod 644 <file>"

2006-07-19  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/libgfarm/gfarm/gfs_proto.h:
	reserve the protocol number of GFS_PROTO_READEX

	* lib/libgfarm/gfarm/gfs_proto.h:
	re-number the protocol number of GFS_PROTO_READEX

2006-07-19  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gfs_hook/tool/scp/scp_to_gfarm.sh:
	test script for "scp host:file /gfarm/foo/file"

	* regress/gfs_hook/tool/scp/scp_from_gfarm.sh:
	use 'cmp -s' for comparison of files as other scripts

	* regress/gfs_hook/tool/scp/scp_from_gfarm.sh:
	test script for "scp /gfarm/foo/file host:file"

2006-07-18  Noriyuki Soda  <soda@sra.co.jp>

	* configure: regen

	* Makefile.in, configure.ac:
	use config-gfarm, config-agent and config-gfsd,
	instead of gneo_gfextra/configure

	* gftool/config-gfarm/config-agent.in, gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/config-gfsd.in:
	show --help option in usage

	* gftool/config-gfarm/config-gfsd.in:
	- don't "restart" the service, but "start" it,
	  if pid file for the service doesn't exist.
	- add --help option

	add the following features for GNEO:
	- support to mount loopback filesystem (by --lofs-size, optional)
	  with passphrase (by --crypt, optional)
	- support --grid-mapfile option to set $GFARM_GSI_MAPFILE

	* gftool/config-gfarm/gfarm.conf-ldap.in, gftool/config-gfarm/gfarm.conf-postgresql.in:
	add the following feature for GNEO:
	- add --gfmd-type, --gfsd-type, --gfmd-service and --gfsd-service options
	  to configure GSI credential type and service.

	* gftool/config-gfarm/config-agent.in:
	- don't "restart" the service, but "start" it,
	  if pid file for the service doesn't exist.
	- add --help option

	* gftool/config-gfarm/config-gfarm.postgresql:
	- prevent PostgreSQL 7.4 from asking password
	  by removing "-w" option of pg_ctl, if the version is 7.4.
	- make pg_hba.conf use netmask instead of CIDR bit length,
	  to make it actually work with PostgreSQL 7.4
	  (handling of CIDR bits == 0 is broken in 7.4?)

	add the following feature for GNEO:
	- support to mount loopback filesystem (by --lofs-size, optional)
	  with passphrase (by --crypt, optional)

	* gftool/config-gfarm/config-gfarm.in:
	- don't "restart" the service, but "start" it,
	  if pid file for the service doesn't exist.
	- add --usage option

	add the following features for GNEO:
	- change default authentication type from "sharedsecret" to "gsi_auth"
	- support to mount loopback filesystem (by --lofs-size, optional)
	  with passphrase (by --crypt, optional)
	- support --grid-mapfile option to set $GFARM_GSI_MAPFILE
	- add --gfmd-type, --gfsd-type, --gfmd-service and --gfsd-service options
	  to configure GSI credential type and service.

	* gftool/config-gfarm/config-gfarm.ldap:
	add the following feature for GNEO
	- support to mount loopback filesystem (by --lofs-size, optional)
	  with passphrase (by --crypt, optional)

	* gftool/config-gfarm/sysdep/default/gfarm-pgsql.in, gftool/config-gfarm/sysdep/freebsd/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/debian/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/suse/gfarm-pgsql.in, gftool/config-gfarm/sysdep/netbsd/gfarm-pgsql.in:
	prevent PostgreSQL 7.4 from asking password
	by removing "-w" option of pg_ctl, if the version is 7.4.

	* gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep:
	support to mount loopback filesystem with passphrase (optional) for GNEO

	* gftool/config-gfarm/sysdep/linux/redhat/gfarm-pgsql.in:
	- don't use "daemon" function in /etc/init.d/functions,
	  because it may refer /var/run/${FILE}.pid
	  instead of $CONFIG_PREFIX/var/run/${FILE}.pid
	- support to mount loopback filesystem with passphrase (optional) for GNEO
	- prevent PostgreSQL 7.4 from asking password
	  by removing "-w" option of pg_ctl, if the version is 7.4.

	* gftool/config-gfarm/sysdep/linux/redhat/gfarm-slapd.in:
	- don't use "daemon" function in /etc/init.d/functions,
	  because it may refer /var/run/${FILE}.pid
	  instead of $CONFIG_PREFIX/var/run/${FILE}.pid
	- support to mount loopback filesystem with passphrase (optional) for GNEO

	* gftool/config-gfarm/sysdep/linux/redhat/gfsd.in:
	- don't use "daemon" function in /etc/init.d/functions,
	  because it may refer /var/run/${FILE}.pid
	  instead of $CONFIG_PREFIX/var/run/${FILE}.pid
	- set $GFARM_GSI_MAPFILE for GNEO
	- support to mount loopback filesystem with passphrase (optional) for GNEO

	* gftool/config-gfarm/sysdep/linux/redhat/gfmd.in:
	- don't use "daemon" function in /etc/init.d/functions,
	  because it may refer /var/run/${FILE}.pid
	  instead of $CONFIG_PREFIX/var/run/${FILE}.pid
	- set $GFARM_GSI_MAPFILE for GNEO

	* gftool/config-gfarm/sysdep/linux/redhat/gfarm_agent.in:
	don't use "daemon" function in /etc/init.d/functions,
	because it may refer /var/run/${FILE}.pid
	instead of $CONFIG_PREFIX/var/run/${FILE}.pid

	* gftool/config-gfarm/sysdep/linux/gneo_gfspool:
	set $IFS and $PATH at first, due to security reason.
	XXX - but invoking this script from sudo is still fundamentally insecure.

2006-07-15  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/config-gfarm/sysdep/linux/gneo_gfspool:
	- do not do "chmod 1777" at mount time
	- add "-mode <mode>" and "-owner <owner>" option to mkfs

2006-07-14  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/config-gfarm/config-gfarm.postgresql: modify comment

	* gftool/config-gfarm/sysdep/linux/redhat/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/redhat/gfarm-slapd.in:
	fix typo, as the result, these scripts return correct exit code now.

2006-07-13  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec: add gneo_gfspool to libs subpackage,
	because it will be invoked from both server and fsnode subpackages.

	* gftool/config-gfarm/config-gfarm.ldap, gftool/config-gfarm/config-gfarm.postgresql:
	bring the following fix from gfarm v1 main trunk:
	shell function needs to have at least one statement with bash.
	(Although empty function does work with ash.)

	* gftool/config-gfarm/config-gfarm.ldap, gftool/config-gfarm/config-gfarm.postgresql:
	shell function needs to have at least one statement with bash.
	(Although empty function does work with ash.)

	* gftool/config-gfarm/gfarm.conf-ldap.in, gftool/config-gfarm/gfarm.conf-postgresql.in:
	GNEO always uses host credential, even if server side is invoked with
	non-root user privilege.

	* package/redhat/gfarm.spec, package/solaris/gfarm-server.files, INSTALL.RPM.en, INSTALL.RPM.ja, debian/gfmd.install, gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/config-gfarm.ldap, gftool/config-gfarm/config-gfarm.postgresql, gftool/config-gfarm/gfarm.conf-ldap.in, gftool/config-gfarm/gfarm.conf-postgresql.in, package/freebsd/pkg-plist, package/pkgsrc/PLIST:
	merge changes of gfarm_v1 main trunk on 13 July, 2006.

	* package/redhat/gfarm.spec, package/solaris/gfarm-server.files, debian/gfmd.install, package/freebsd/pkg-plist, package/pkgsrc/PLIST:
	reflect recent changes in config-gfarm

2006-07-13  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* server/gfsd/gfsd.c, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/glob.c, lib/libgfarm/gfarm/metadb_ldap.c, lib/libgfarm/gfarm/xxx_proto.c, lib/libgfarm/gfutil/hash.c, server/gfmd/gfmd.c:
	remvoe needless assignment to errno in integer overflow checking

2006-07-13  Noriyuki Soda  <soda@sra.co.jp>

	* INSTALL.RPM.en, INSTALL.RPM.ja: - update output of config-gfarm
	- correct option to specify backend type ("-d" -> "-b")

	* gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/config-gfarm.ldap, gftool/config-gfarm/config-gfarm.postgresql:
	move $BACKEND_DATA_DIR and $BACKEND_LOG_DIR output
	from display_params to display_backend_params_$BACKEND_TYPE

	* gftool/config-gfarm/config-gfarm.in:
	correct message about $BACKEND_LOG_DIR

	* gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/gfarm.conf-ldap.in, gftool/config-gfarm/gfarm.conf-postgresql.in:
	add "-a <auth_type>" option to config-gfarm to specify authentication type,
	as discussed in the meeting on 2006-07-11

	* gftool/gfkey/gfkey.c:
	print warning, if both -c and -f option are specified.

2006-07-13  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* server/gfmd/gfmd.c, server/gfsd/gfsd.c:
	add initialization missed in previous revision

	* lib/libgfarm/gfarm/metadb_ldap.c:
	fix missing result of checking integer overflow

2006-07-13  Noriyuki Soda  <soda@sra.co.jp>

	* server/gfsd/gfsd.c:
	fix warning: implicit declaration of function `getloadavg'
	on Solaris, reported by Yamamoto-san in [gfarm-developers:00845]

	* configure, include/gfarm/gfarm_config.h.in: regen

	* configure.ac: check <sys/loadavg.h> for Solaris

	* ns/nslib/Makefile.in, ns/nslib/bswap.c, ns/nslib/bswap.h, ns/nslib/comm.c, ns/nslib/file.c, ns/nslib/gflib.c, ns/nslib/nsclnt.c, ns/nslib/nsexec.c, ns/nslib/soc-lxdr.c, ns/nslib/soc.c, ns/nstool/Makefile, ns/nstool/file/Makefile.in, ns/nstool/file/get.c, ns/nstool/file/ns_get.c, ns/nstool/file/ns_lstat.c, ns/nstool/file/ns_mkdir.c, ns/nstool/file/ns_put.c, ns/nstool/file/ns_readdir.c, ns/nstool/file/ns_readlink.c, ns/nstool/file/ns_rename.c, ns/nstool/file/ns_stat.c, ns/nstool/file/ns_symlink.c, ns/nstool/file/ns_unlink.c, ns/nstool/file/ns_unlink_dir.c, ns/nstool/file/put.c, ns/nstool/file/stat.c, ns/Makefile, ns/gfarm/Makefile, ns/gfarm/cmd.h, ns/gfarm/cmd.l, ns/gfarm/cmd.y, ns/gfarm/gfarm.c, ns/gfarmd/Makefile.in, ns/gfarmd/gfarmd.c, ns/gfarmd/gfarmd.h, ns/gfarmd/gfd_auth.c, ns/gfarmd/gfd_cmd.h, ns/gfarmd/gfd_cmd.l, ns/gfarmd/gfd_cmd.y, ns/gfarmd/gfd_file.c, ns/gfarmd/gfd_parse.c, ns/gfarmd/symtab.c, ns/gfarmd/symtab.h, ns/gfarmd/yyerror.c, ns/include/gfarm/Makefile, ns/include/gfarm/comm.h, ns/include/gfarm/debug.h, ns/include/gfarm/gflib.h, ns/include/gfarm/ns.h, ns/include/gfarm/nsclnt.h, ns/include/gfarm/nscom.h, ns/include/gfarm/nsexec.h, ns/include/gfarm/soc-lxdr.h, ns/include/gfarm/soc.h, ns/include/gfarm/type.h:
	remove ns from GNEO branch, consensus made at meeting on 2006-07-11

	* doc/README.hook.en, doc/README.hook.ja:
	mention file/directory owner problem,
	from [gfarm-developers:00844] by Yamamoto-san

2006-07-12  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/getcwd.c, lib/gfs_hook/hooks.c, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/glob.c, lib/libgfarm/gfarm/host.c, lib/libgfarm/gfarm/import_help.c, lib/libgfarm/gfarm/stringlist.c, lib/libgfarm/gfsl/gsi.c, gftool/gfexec/gfexec.c, gftool/gfhost/gfhost.c, gftool/gfrep/gfrep.c:
	replace realloc() with GFARM_REALLOC_ARRAY() to check integer overflow

	* include/gfarm/gfarm_misc.h, lib/libgfarm/gfutil/alloc.c:
	add GFARM_REALLOC_ARRAY(dst, src, number) to check integer overflow of
	realloc() arguments

2006-07-11  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* doc/KNOWN_PROBLEMS.ja: remove gfarm-ptool

	* doc/KNOWN_PROBLEMS.ja: add item about the super-user

2006-07-11  Noriyuki Soda  <soda@sra.co.jp>

	* doc/KNOWN_PROBLEMS.ja: remove already fixed problems

	* include/gfarm/gfarm_error.h:
	define gfarm_error_t as "char *" instead of "const char *" in gfarm v1 for now,
	because the latter causes too much warnings.

	* gftool/config-gfarm/sysdep/linux/gneo_gfspool: fix typo in comment

	* gftool/config-gfarm/sysdep/linux/gneo_gfspool: New file.

	* gftool/config-gfarm/sysdep/linux/Makefile, gftool/config-gfarm/sysdep/linux/gneo_gfspool:
	move gneo_gfextra/bin/gneo_gfspool to gftool/config-gfarm/sysdep/linux/

	* gftool/config-gfarm/gfarm.schema:
	move gneo_gfextra/template/gfarm.schema to gftool/config-gfarm/

2006-07-11  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* server/gfmd/gfmd.c, server/gfsd/gfsd.c, gftool/gfsched/gfsched.c, gftool/gfsck/gfsck.c, lib/gfs_hook/Makefile, lib/gfs_hook/getcwd.c, lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_subr.c, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/agent_client.c, lib/libgfarm/gfarm/agent_proto.c, lib/libgfarm/gfarm/auth_client.c, lib/libgfarm/gfarm/auth_client_gsi.c, lib/libgfarm/gfarm/auth_common.c, lib/libgfarm/gfarm/auth_config.c, lib/libgfarm/gfarm/auth_server.c, lib/libgfarm/gfarm/auth_server_gsi.c, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/gfm_client.c, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client_rep.c, lib/libgfarm/gfarm/gfs_client_udp.c, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_lock.c, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_unlink.c, lib/libgfarm/gfarm/glob.c, lib/libgfarm/gfarm/host.c, lib/libgfarm/gfarm/hostcache.c, lib/libgfarm/gfarm/hostspec.c, lib/libgfarm/gfarm/import_help.c, lib/libgfarm/gfarm/io_gfsl.c, lib/libgfarm/gfarm/iobuffer.c, lib/libgfarm/gfarm/metadb_ldap.c, lib/libgfarm/gfarm/metadb_localfs.c, lib/libgfarm/gfarm/metadb_pgsql.c, lib/libgfarm/gfarm/param.c, lib/libgfarm/gfarm/schedule.c, lib/libgfarm/gfarm/stringlist.c, lib/libgfarm/gfarm/url.c, lib/libgfarm/gfarm/xxx_proto.c, lib/libgfarm/gfsl/Makefile, lib/libgfarm/gfsl/auth.c, lib/libgfarm/gfsl/gsi.c, lib/libgfarm/gfsl/scsub.c, lib/libgfarm/gfsl/session.c, lib/libgfarm/gfutil/Makefile, lib/libgfarm/gfutil/gfevent.c, lib/libgfarm/gfutil/hash.c, lib/libgfarm/gfutil/logutil_th.c, gftool/gfmpirun/gfmpirun.c, gftool/gfps/gfps.c, gftool/gfrcmd/gfrcmd.c, gftool/gfreg/gfreg.c, gftool/gfrep/gfrep.c, gftool/gfrm/gfrm.c, gftool/gfrun/gfrun.c, gftool/gfarm_agent/agent_ptable.c, gftool/gfarm_agent/gfarm_agent.c, gftool/gfdump/gfdump.c, gftool/gfexec/gfexec.c, gftool/gfhost/gfhost.c, gftool/gfls/gfls.c, gfptool/gfrepbe_client/gfrepbe_client.c, gfptool/gfrepbe_server/gfrepbe_server.c, gfptool/gfsplck/gfsplck.c, gftool/example/gfimport_fixed/gfimport_fixed.c:
	replace malloc() with GFARM_MALLOC()/GFARM_MALLOC_ARRAY() and
	use gfarm_size_add() and gfarm_size_mul() to check integer overflow

2006-07-11  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/config-gfarm/Makefile, gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/config-gfarm.ldap, gftool/config-gfarm/config-gfarm.postgresql, gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep:
	merge changes of gfarm_v1 main trunk on 11 July, 2006.

	* gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/config-gfarm.ldap, gftool/config-gfarm/config-gfarm.postgresql:
	make it possible to put database logging files on different partition
	(for performance and recovery reasons).
	this feature is from GNEO, but implementation is different.

	* gftool/config-gfarm/config-gfarm.postgresql:
	suppress verbose output of PostgreSQL initialization as far as possible

	* gftool/config-gfarm/Makefile, gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/config-gfarm.ldap, gftool/config-gfarm/config-gfarm.postgresql:
	split backend specific part of config-gfarm into independent modules
	(i.e. config-gfarm.postgresql and config-gfarm.ldap)

2006-07-10  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec:
	add GNEO specific commands from Ikezoe Hiroyuki-san @ good-day
	with the following modification:
	- gfscramble_param is moved to server subpackage
	- gneo_agent and gneo_agent.sh is moved to agent subpackage

	* package/redhat/gfarm.spec:
	merge changes of gfarm_v1 main trunk on 10 July, 2006.

	* package/redhat/gfarm.spec:
	- specify %defattr to make gfarm RPM buildable by non-root user
	- add missing include/gfarm/con.h (%{have_ns} case only) and bin/gfchmod
	from Ikezoe Hiroyuki-san @ good-day

2006-07-07  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep:
	remove dead code, it's dead because it should be $BACKEND_DATA_DIR
	instead of $LDAP_DATADIRECTORY.

	the dead code was trying to use $CONFIG_PREFIX/var/gfarm-ldap on Debian,
	instead of $CONFIG_PREFIX/var/lib/gfarm-ldap on other operating systems.

	* lib/libgfarm/gfarm/gfs_client.c:
	add more comments about the following correspondence:
		gfs_client_connect()		<-> gfs_client_disconnect()
		gfs_client_connection_acquire()	<-> gfs_client_connection_free()

	* lib/libgfarm/gfarm/gfs_pio_misc.c:
	really the fix problem in revision 1.36.2.6, pointed out by tatebe-san

	* lib/libgfarm/gfarm/gfs_pio_misc.c:
	fix merge botch in revision 1.36.2.4,
	pointed out by Ikezoe Hiroyuki-san @ good-day in [gfarm-developers:00791]

	* regress/regress.sh, regress/tst.sh: print test name before running it

	* regress/gftool/gfkey/gfkey-cl.sh:
	- do not remove ~/.gfarm_shared_key, and describe the reason
	- deal with symbolic link ("-L" option for ls)

2006-07-05  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_client.c:
	fix revision 1.56 differently, by splitting gfs_client_connection_dispose()
	from gfs_client_disconnect().

	* lib/libgfarm/gfarm/gfs_client.c:
	- add a comment about previous change
	- make gfs_client_connect_request_multiplexed() use gfs_client_disconnect() too

2006-07-05  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/libgfarm/gfarm/gfs_client.c (gfs_client_connection_alloc):
	hash_entry needs to be initialized to call gfs_client_connection_is_cached().

2006-07-05  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/config-gfarm/config-agent.in:
	correct usage, from Ikezoe Hiroyuki-san @ good-day

2006-07-03  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/libgfarm/gfarm/gfs_client.c:
	need to decrement 'free_connections' to terminate connection_gc_internal() correctly.

	* package/redhat/gfarm.spec: add dependency on %{package_name}-libs

2006-07-01  Noriyuki Soda  <soda@sra.co.jp>

	* doc/KNOWN_PROBLEMS.ja: update status of reconnection handling

	* lib/libgfarm/gfarm/gfs_client.c:
	- split struct gfs_connection from gfarm_hash_entry_data
	  and make it independent object in cached case (as well as uncached case),
	  to make gfs_client_purge_from_cache() actually work.
	  this fixes coredump of gfreg on AIST Gfarm Cluster.
	- fix file descriptor leak which was introduced in previous my commit.
	- general cleanup

2006-07-01  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/libgfarm/gfarm/gfs_pio_global_scramble.c, lib/libgfarm/gfarm/gfs_pio_scramble.c:
	add chmod function entry, although it is not supported

	* lib/libgfarm/gfsl/session.c: new format in gflog functions

2006-07-01  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/conn_hash.c:
	- fix memory leak in gfp_conn_hash_lookup(), when no entry is found
	- reduce number of malloc() calls

2006-06-30  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfreg/gfreg.c:
	display error at gfs_pio_close(), this is especially important for smaller
	files which contents are only written to a disk at closing time.

	* lib/libgfarm/gfarm/gfs_client.c:
	workaround gcc warning: `sock' might be used uninitialized in this function

	* lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/gfs_chmod.c, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_client_dir.c, lib/libgfarm/gfarm/gfs_misc.h, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_remote.c, lib/libgfarm/gfarm/gfs_rename.c, lib/libgfarm/gfarm/gfs_unlink.c, lib/libgfarm/gfarm/metadb_misc.c, lib/libgfarm/gfarm/schedule.c:
	support gfsd restart

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/conn_hash.c, lib/libgfarm/gfarm/conn_hash.h, lib/libgfarm/gfarm/gfs_chmod.c, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_remote.c, lib/libgfarm/gfarm/gfs_rename.c, lib/libgfarm/gfarm/gfs_unlink.c, lib/libgfarm/gfarm/metadb_misc.c, lib/libgfarm/gfarm/schedule.c:
	replace gfs_client_connection() API by
	gfs_client_connection_acquire() & gfs_client_connection_free()
	from gfarm v2 branch, as a preparation to support gfsd restart.

	* regress/gfs_hook/tool/build/configure.sh:
	need to specify CONFIG_SHELL=bash on platforms where /bin/sh isn't bash

	* gftool/Makefile:
	build gneo_agent before gneo commmand, otherwise NetBSD's make command
	cannot resolve ../gneo_agent/gneo_ops.o in gftool/gneo/Makefile.

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/gfs_client_dir.c, lib/libgfarm/gfarm/gfs_misc.h, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_remote.c, lib/libgfarm/gfarm/gfs_rename.c:
	rename gfs_pio_remote_mkdir_parent_canonical_path()
	to gfs_client_mk_parent_dir(),
	and move it from gfs_pio_remote.c to gfs_client_dir.c

	* doc/KNOWN_PROBLEMS.ja:
	mention that ":" in file/directory names may not work correctly.

2006-06-28  Noriyuki Soda  <soda@sra.co.jp>

	* doc/KNOWN_PROBLEMS.ja:
	mention when the problems, which were added in previous revision,
	will be fixed. The answer is "not determined yet", though.

	* doc/KNOWN_PROBLEMS.ja:
	use EUC-JP like other Japanese documents, instead of ISO-2022-JP

	* doc/KNOWN_PROBLEMS.ja:
	mention problems which were described in [gfarm-developers:00733]

	* gftool/gfchmod/Makefile, gftool/gfchmod/gfchmod.c, gftool/Makefile:
	bring gfchmod from main trunk

	* lib/libgfarm/gfarm/error.c, include/gfarm/gfarm_error.h:
	move "gfarm_v1_gneo_nbase" tag for error handling to the HEAD of main trunk

	* lib/libgfarm/gfarm/gfs_pio_scramble.c:
	fix portability problem: <sys/socket.h> is needed to use socklen_t

	* doc/KNOWN_PROBLEMS.ja: mention missing man page of gfchmod

	* gftool/Makefile: build gfchmod

	* gftool/gfchmod/gfchmod.c: support wildcard

	* include/gfarm/gfarm_error.h:
	add gfarm_error_string() for compatibility with gfarm v2

	* include/gfarm/gfarm_error.h, lib/libgfarm/gfarm/error.c:
	correct definition of GFARM_ERR_NO_ERROR

	* gftool/gfchmod/Makefile, gftool/gfchmod/gfchmod.c:
	bring gfchmod from gfarm v2 branch

2006-06-27  Noriyuki Soda  <soda@sra.co.jp>

	* doc/KNOWN_PROBLEMS.ja: correct inaccurate description

	* doc/KNOWN_PROBLEMS.ja: wording

	* doc/KNOWN_PROBLEMS.ja: wording fix

	* doc/KNOWN_PROBLEMS.ja: mention missing manpages

	* doc/KNOWN_PROBLEMS.ja: initial draft

	* lib/libgfarm/gfutil/alloc.c, lib/libgfarm/gfutil/gfutil.h:
	add gfarm_size_add() and gfarm_size_mul() to check integer overflow of
	malloc() arguments.

	* bench/nconnect/nconnect.c: fix gcc warning

	* doc/html/ja/ref/man1/gfrep.1.html, man/ja/man1/gfrep.1: regen

	* doc/docbook/ja/ref/man1/gfrep.1.docbook: change date

	* doc/docbook/ja/ref/man1/gfrep.1.docbook:
	-P option doesn't take "-" as its argument

2006-06-26  Takuya Ishibashi  <takuya@soum.co.jp>

	* lib/libgfarm/gfarm/agent_proto.c:
	enable gfarm_agent to work for GNEO extension.

	* gftool/gfdump/gfdump.c: enable gfdump to work for GNEO extension.

2006-06-24  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* gftool/gfreg/gfreg.c, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/url.c, gftool/gfrmdir/gfrmdir.c:
	accept path without gfarm prefix

2006-06-22  Takuya Ishibashi  <takuya@soum.co.jp>

	* lib/libgfarm/gfarm/path_info_cache.c: add GNEO extension.

	* lib/libgfarm/gfarm/metadb_localfs.c:
	enable metadb_localfs to work for GNEO extension.

	* gftool/config-gfarm/gfarm.sql, lib/libgfarm/gfarm/metadb_pgsql.c:
	enable metadb_pgsql to work for GNEO extension.

2006-06-21  Noriyuki Soda  <soda@sra.co.jp>

	* regress/gfs_hook/tool/build/configure.sh:
	use $shell instead of sh, because only bash can run configure script
	of autoconf for now.

	* regress/data/ok.sh, regress/gftool/gfrun/gfrun.sh:
	add data/ok.sh and use it, instead of creating the script on the fly.

2006-06-20  Takuya Ishibashi  <takuya@soum.co.jp>

	* util/ptool/Makefile, util/ptool/gfarm-pcp, util/ptool/gfarm-prun, util/ptool/gfarm-ptool, util/ptool/pcat, util/ptool/pcp, util/ptool/pdel, util/ptool/pdiff, util/ptool/pdist, util/ptool/preplace, util/ptool/prun, regress/gftool/gfrm/0byte.sh, regress/gftool/gfrm/1byte.sh, regress/gftool/gfrm/gfrm.sh, regress/gftool/gfrmdir/rmdir.sh, regress/gftool/gfrun/gfrun-u.sh, regress/gftool/gfrun/gfrun.sh, regress/gftool/gfsched/gfsched-N.sh, regress/gftool/gfwhere/noopt.sh, regress/gftool/gfwhere/noopt_+x.sh, regress/gftool/gfwhere/noopt_-x.sh, server/gfmd/gfmd.c, server/gfsd/gfsd.c, server/gfsd/gfsd_subr.h, server/gfsd/loadavg.c, regress/gftool/gfls/notexist.out, regress/gftool/gfls/notexist.sh, regress/gftool/gfls/root.out, regress/gftool/gfls/root.sh, regress/gftool/gfmkdir/mkdir.sh, regress/gftool/gfmv/dir.sh, regress/gftool/gfmv/file.sh, regress/gftool/gfpwd/gfpwd.sh, regress/gftool/gfrcmd/gfrcmd.sh, regress/gftool/gfreg/0byte.sh, regress/gftool/gfreg/1byte.sh, regress/gftool/gfreg/gfreg-h.sh, regress/gftool/gfreg/gfreg.sh, regress/gftool/gfrep/gfrep-N2.sh, regress/gftool/gfrep/gfrep-d.sh, regress/gfs_hook/tool/mv/0byte.sh, regress/gfs_hook/tool/mv/1byte.sh, regress/gfs_hook/tool/mv/mv.sh, regress/gfs_hook/tool/pax/pax-r.sh, regress/gfs_hook/tool/pwd/pwd.sh, regress/gfs_hook/tool/rm/0byte.sh, regress/gfs_hook/tool/rm/1byte.sh, regress/gfs_hook/tool/rm/rm.sh, regress/gfs_hook/tool/rmdir/rmdir.sh, regress/gftool/gfexport/0byte.sh, regress/gftool/gfexport/1byte.sh, regress/gftool/gfexport/gfexport.sh, regress/gftool/gfhost/noopt.sh, regress/gftool/gfkey/gfkey-cl.sh, regress/gfs_hook/tool/cd/cd.sh, regress/gfs_hook/tool/chmod/chmod_644_file.sh, regress/gfs_hook/tool/chmod/chmod_755_file.sh, regress/gfs_hook/tool/cp/0byte.sh, regress/gfs_hook/tool/cp/1byte.sh, regress/gfs_hook/tool/cp/cp.sh, regress/gfs_hook/tool/cp/mode755.sh, regress/gfs_hook/tool/diff/diff-r.sh, regress/gfs_hook/tool/diff/diff.sh, regress/gfs_hook/tool/gzip/gzip-cd.sh, regress/gfs_hook/tool/gzip/gzip-d.sh, regress/gfs_hook/tool/ls/notexist.sh, regress/gfs_hook/tool/ls/root-gfarm.sh, regress/gfs_hook/tool/mkdir/mkdir-p.sh, regress/gfs_hook/tool/mkdir/mkdir.sh, package/solaris/build, package/solaris/gfarm-agent.files, package/solaris/gfarm-client.files, package/solaris/gfarm-server.files, regress/Makefile, regress/README, regress/README.ja, regress/data/0byte, regress/data/1byte, regress/data/gftest-0.0.tar.gz, regress/gfs_hook/tool/build/configure.sh, regress/loop.sh, regress/regress.conf, regress/regress.sh, regress/schedule, regress/tst.sh, man/man1/gfarm_agent.1, man/man1/gfreg.1, man/man5/gfarm.conf.5, man/man8/gfmd.8, man/man8/gfsd.8, ns/nstool/file/stat.c, package/freebsd/Makefile, package/freebsd/pkg-plist, package/pkgsrc/Makefile, package/pkgsrc/PLIST, package/redhat/gfarm.spec, package/redhat/gfmd.in, package/redhat/gfsd.in, lib/libgfarm/gfarm/host.c, lib/libgfarm/gfarm/host.h, lib/libgfarm/gfarm/hostcache.c, lib/libgfarm/gfarm/hostspec.c, lib/libgfarm/gfarm/metadb_access.h, lib/libgfarm/gfarm/metadb_ldap.c, lib/libgfarm/gfarm/metadb_localfs.c, lib/libgfarm/gfarm/metadb_none.c, lib/libgfarm/gfarm/metadb_pgsql.c, lib/libgfarm/gfarm/metadb_sw.c, lib/libgfarm/gfarm/metadb_sw.h, lib/libgfarm/gfarm/path_info_cache.c, lib/libgfarm/gfarm/path_info_cache.h, lib/libgfarm/gfarm/schedule.c, lib/libgfarm/gfarm/schedule.h, lib/libgfarm/gfarm/url.c, lib/libgfarm/gfsl/Makefile, lib/libgfarm/gfutil/Makefile, lib/libgfarm/gfutil/gfutil.h, lib/libgfarm/gfutil/logutil.c, lib/libgfarm/gfutil/logutil.h, lib/libgfarm/gfutil/logutil_th.c, lib/libgfarm/gfutil/timer.h, lib/libgfarm/gfutil/tree.h, makes/config.mk.in, makes/var.mk, man/ja/man1/gfarm_agent.1, man/ja/man1/gfreg.1, man/ja/man1/gfrep.1, man/ja/man5/gfarm.conf.5, man/ja/man8/gfmd.8, man/ja/man8/gfsd.8, lib/gfs_hook/sysdep/solaris/i386/SYS.h, lib/gfs_hook/sysdep/solaris/sparc/SYS.h, lib/gfs_hook/sysdep/solaris/sparcv9/SYS.h, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/agent_client.c, lib/libgfarm/gfarm/agent_client.h, lib/libgfarm/gfarm/agent_proto.c, lib/libgfarm/gfarm/agent_wrap.c, lib/libgfarm/gfarm/agent_wrap.h, lib/libgfarm/gfarm/auth_common_gsi.c, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h, lib/libgfarm/gfarm/error.c, lib/libgfarm/gfarm/gfm_client.c, lib/libgfarm/gfarm/gfpath.h, lib/libgfarm/gfarm/gfs_chmod.c, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_exec.c, lib/libgfarm/gfarm/gfs_misc.h, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_remote.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_proto.h, lib/libgfarm/gfarm/gfs_rename.c, lib/libgfarm/gfarm/gfs_unlink.c, include/gfarm/gfarm_config.h.in, include/gfarm/gfarm_error.h, include/gfarm/gfarm_misc.h, include/gfarm/gfs.h, lib/Makefile, lib/gfs_hook/getcwd.c, lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_64.c, lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_fstat.c, lib/gfs_hook/hooks_stat.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h, lib/gfs_hook/lseek64.c, lib/gfs_hook/sysdep/solaris/Makefile, lib/gfs_hook/sysdep/solaris/OPENSOLARIS.LICENSE, lib/gfs_hook/sysdep/solaris/amd64/SYS.h, lib/gfs_hook/sysdep/solaris/llseek.S, gftool/gfrep/Makefile, gftool/gfrep/gfrep.c, gftool/gfrm/gfrm.c, gftool/gfsched/Makefile, gftool/gfsched/gfsched.c, gftool/gfstat/gfstat.c, gftool/gfdf/gfdf.c, gftool/gfdump/Makefile, gftool/gfdump/gfdump.c, gftool/gfexec/gfexec.c, gftool/gfhost/gfhost.c, gftool/gfls/gfls.c, gftool/gfrcmd/gfrcmd.c, gftool/gfreg/Makefile, gftool/gfreg/gfreg.c, gftool/config-gfarm/sysdep/linux/default/Makefile, gftool/config-gfarm/sysdep/linux/redhat/Makefile, gftool/config-gfarm/sysdep/linux/redhat/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/redhat/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/redhat/gfarm_agent.in, gftool/config-gfarm/sysdep/linux/redhat/gfmd.in, gftool/config-gfarm/sysdep/linux/redhat/gfsd.in, gftool/config-gfarm/sysdep/linux/suse/Makefile, gftool/config-gfarm/sysdep/linux/suse/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/suse/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/suse/gfarm_agent.in, gftool/config-gfarm/sysdep/netbsd/Makefile, gftool/config-gfarm/sysdep/netbsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/netbsd/gfarm-pgsql.in, gftool/config-gfarm/sysdep/netbsd/gfarm-slapd.in, gftool/config-gfarm/sysdep/netbsd/gfarm_agent.in, gftool/config-gfarm/sysdep/osf1/Makefile, gftool/config-gfarm/sysdep/osf1/config-gfarm.sysdep, gftool/config-gfarm/sysdep/solaris/Makefile, gftool/config-gfarm/sysdep/solaris/config-gfarm.sysdep, gftool/gfarm_agent/Makefile, gftool/gfarm_agent/agent_ptable.c, gftool/gfarm_agent/gfarm_agent.c, gftool/config-gfarm/Makefile, gftool/config-gfarm/config-agent.in, gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/config-gfsd.in, gftool/config-gfarm/gfarm.conf-ldap.in, gftool/config-gfarm/gfarm.conf-postgresql.in, gftool/config-gfarm/gfarm.conf.in, gftool/config-gfarm/initial.ldif.in, gftool/config-gfarm/slapd.conf-2.0.in, gftool/config-gfarm/slapd.conf-2.1.in, gftool/config-gfarm/sysdep/aix/Makefile, gftool/config-gfarm/sysdep/aix/config-gfarm.sysdep, gftool/config-gfarm/sysdep/default/Makefile, gftool/config-gfarm/sysdep/default/config-gfarm.sysdep, gftool/config-gfarm/sysdep/default/gfarm-pgsql.in, gftool/config-gfarm/sysdep/default/gfarm-slapd.in, gftool/config-gfarm/sysdep/default/gfarm_agent.in, gftool/config-gfarm/sysdep/freebsd/Makefile, gftool/config-gfarm/sysdep/freebsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/freebsd/gfarm-pgsql.in, gftool/config-gfarm/sysdep/freebsd/gfarm-slapd.in, gftool/config-gfarm/sysdep/freebsd/gfarm_agent.in, gftool/config-gfarm/sysdep/hpux/Makefile, gftool/config-gfarm/sysdep/hpux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/linux/debian/Makefile, gftool/config-gfarm/sysdep/linux/debian/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/debian/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/debian/gfarm_agent.in, doc/html/en/user/Makefile, doc/html/en/user/index.html, doc/html/en/user/nfs-gfarmfs.html, doc/html/ja/ref/man1/gfarm_agent.1.html, doc/html/ja/ref/man1/gfreg.1.html, doc/html/ja/ref/man1/gfrep.1.html, doc/html/ja/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man8/gfmd.8.html, doc/html/ja/ref/man8/gfsd.8.html, doc/html/ja/user/nfs-gfarmfs.html, doc/html/ja/user/smboverssh.html, gfptool/Makefile, gftool/Makefile, doc/docbook/ja/ref/man8/gfmd.8.docbook, doc/docbook/ja/ref/man8/gfsd.8.docbook, doc/html/en/ref/man1/gfarm_agent.1.html, doc/html/en/ref/man1/gfreg.1.html, doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/en/ref/man8/gfmd.8.html, doc/html/en/ref/man8/gfsd.8.html, debian/changelog, debian/control, debian/control.gsi, debian/control.non-gsi, debian/gfarm-agent.install, debian/gfarm-agent.manpages, debian/gfarm-client.install, debian/gfarm-client.manpages, debian/gfmd.install, debian/gfmd.postinst, debian/gfsd.postinst, debian/libgfarm-dev.install, debian/libgfarm.install, debian/rules, doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja, doc/README.hook.en, doc/README.hook.ja, doc/docbook/en/ref/man1/gfarm_agent.1.docbook, doc/docbook/en/ref/man1/gfreg.1.docbook, doc/docbook/en/ref/man5/gfarm.conf.5.docbook, doc/docbook/en/ref/man8/gfmd.8.docbook, doc/docbook/en/ref/man8/gfsd.8.docbook, doc/docbook/ja/ref/man1/gfarm_agent.1.docbook, doc/docbook/ja/ref/man1/gfreg.1.docbook, doc/docbook/ja/ref/man1/gfrep.1.docbook, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook, bench/fsysbench/Makefile, bench/fsysbench/fsysbench.c, configure.ac, INSTALL.RPM.en, INSTALL.RPM.ja, INSTALL.en, INSTALL.ja, LICENSE, Makefile.in, RELNOTES, configure, ChangeLog:
	merge changes of gfarm_v1 main trunk on 15 June, 2006.

2006-06-20  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_subr.h:
	gfs_hook_syscall_pread()/_pwrite(): correct type of return value

	* lib/libgfarm/gfarm/agent_client.c:
	use va_copy() to fix portability problem to x86_64

	* lib/libgfarm/gfarm/xxx_proto.c: remove unnecessary va_copy() call

2006-06-19  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/schedule.c:
	fix stupid mistake made in revision 1.36:
	write_mode and priority_to_local parameters were always ignored. ;-/

2006-06-15  Noriyuki Soda  <soda@sra.co.jp>

	* include/gfarm/gfarm_misc.h, lib/libgfarm/gfutil/Makefile, lib/libgfarm/gfutil/alloc.c:
	introduce GFARM_MALLOC(ptr) and GFARM_MALLOC_ARRAY(ptr, number)
	as a preparation of countermeasure against integer overflow attack

2006-06-14  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/libgfarm/gfarm/agent_client.c:
	restore state when re-connecting to the agent.  this solves the problem reported by Ishibashi-kun in [gfarm-developers:00572]

2006-06-14  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/error.c, include/gfarm/gfarm_error.h:
	define gfarm_error_t and GFARM_ERR_NO_ERROR to share application source code
	(esp. regression test cases) between gfarm v1 and v2.

	* package/freebsd/Makefile:
	libpq major version is changed from 3 to 4 at upgrade of PostgreSQL to 8.0.2,
	thus, FreeBSD-5.x since 5.5 and FreeBSD-6.x since 6.1 now use libpq.4.

	* package/pkgsrc/Makefile:
	openldap is split into openldap-server and openldap-client in pkgsrc-current

	* include/gfarm/gfs.h:
	reserve 0x20000000 of gfs_pio_open()/create() flag, to keep ABI compatibility
	with software derived from gfarm-1.x

2006-06-14  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule: add gfs_hook/tool/rmdir/rmdir.sh

	* regress/gfs_hook/tool/rmdir/rmdir.sh:
	test script for "rmdir <directory>"

	* regress/schedule: add gfs_hook/tool/build/configure.sh

	* regress/tst.sh:
	protect standard input of this test harness from test case as regress.sh revision 1.4

2006-06-14  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/libgfarm/gfarm/agent_wrap.c (gfarm_terminate):
	do not call gfarm_agent_check().  it is not necessary rather harmful when the connection is already disconnected.

	* gftool/gfexec/gfexec.c: add existence check for a local file

	* lib/gfs_hook/hooks_subr.c (gfs_hook_init):
	check gfarm_initialized() also.
	(gfs_hook_get_cwd_is_gfarm): call gfs_hook_init() in case that gfarm_terminate() has been already called.  this may happen in gfexec.

	* gftool/gfarm_agent/gfarm_agent.c, include/gfarm/gfarm_misc.h, lib/libgfarm/gfarm/config.c:
	introduce gfarm_initialized() to determine whether the initialization has been successfully done or not.

	* lib/libgfarm/gfarm/agent_wrap.c (gfarm_initialize):
	do not call gfarm_agent_connect(). it is meaningless since the config file is not read.

2006-06-13  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gfs_hook/tool/build/configure.sh:
	uncomment line which removes temporary directory

	* regress/gfs_hook/tool/build/configure.sh:
	test script for "sh configure".
	this works on a file system node but fails on a client.

	* regress/schedule: add gfs_hook/tool/cp/mode755.sh
	    gfs_hook/tool/mkdir/mkdir.sh
	    gfs_hook/tool/mkdir/mkdir-p.sh
	    gfs_hook/tool/diff/diff.sh
	    gfs_hook/tool/diff/diff-r.sh
	    gfs_hook/tool/pax/pax-r.sh

	* regress/gfs_hook/tool/pax/pax-r.sh: test script for "pax -r"

	* regress/gfs_hook/tool/diff/diff-r.sh:
	test script for "diff -r <fromdir> <todir>"

	* regress/gfs_hook/tool/diff/diff.sh:
	test script for "diff <fromfile> <tofile>"

	* regress/gfs_hook/tool/mkdir/mkdir.sh, regress/gfs_hook/tool/mkdir/mkdir-p.sh:
	test script for "mkdir <directory>"

2006-06-12  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/hostspec.c:
	make '*' in hostspec match with hosts which name cannot be resolvable by
	gethostbyname(3).
	from Ishibashi-san in [gfarm-developers:00529]

2006-06-12  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/libgfarm/gfarm/agent_wrap.c:
	plug memory leak reported by Ishibashi-kun in [gfarm-developers:00520].

2006-06-12  Noriyuki Soda  <soda@sra.co.jp>

	* doc/README.hook.en, doc/README.hook.ja:
	describe some know limitation about system-call hooking library

	* gftool/gfarm_agent/gfarm_agent.c: fix LP64 portability problem

	* lib/gfs_hook/hooks_subr.c:
	disable gfs_hook before calling gfarm_terminate() from gfs_hook_terminate(),
	otherwise bad things may happen, if a function in atexit() hook calls
	file related system calls.

	this fixes core dump in last stage of configure script on NetBSD,
	when CONFIG_SHELL=..../bash isn't specified. i.e. when /bin/sh was used.
	CONFIG_SHELL needs to be bash anyway, though.

	* lib/libgfarm/gfarm/gfs_dir.c:
	fix "Syscall param write(buf) points to uninitialised byte(s)" from valgrind,
	reported by Ishibashi-san in [gfarm-developers:00520]

	* lib/libgfarm/gfarm/agent_client.c, lib/libgfarm/gfarm/agent_proto.c:
	fix LP64 portability problem

2006-06-12  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* ChangeLog, RELNOTES: update the release note for version 1.3

2006-06-11  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_global.c:
	fix memory leak which was caused by previous my change

	* lib/libgfarm/gfarm/gfs_pio_global.c:
	gfs_pio_truncate() for global view:
	update path_info in struct gfs_pio before changing st_nsection,
	otherwise incorrect st_mode may be written (because st_mode may
	be already updated by gfs_chmod() during the file is opened),
	and such erroneous st_mode may make future gfs_chmod() not correctly work
	(because gfs_chmod() does nothing, if old mode and new mode is same).

	this fixes EACCES error in gfs_pio_set_view_index(),
	reported by Ishibashi-san in [gfarm-developers:00504] ... [:0508]
	In this case, the file is created as mode 0644 at first.
	then gfs_pio_open() is called,
	then gfs_chmod() changes the mode to 0200.
	then gfs_pio_truncate() erroneously update the metadata to 0644.
	Thus, subsequent gfs_pio_open(, GFARM_FILE_RDONLY, ) succeeds,
	but gfs_pio_set_view_index() fails, because the mode of the file
	in gfsd spool is actually 0200.

2006-06-11  Takuya Ishibashi  <takuya@soum.co.jp>

	* lib/libgfarm/gfarm/metadb_localfs.c:
	check that path_info and section_info is valid.

2006-06-11  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_global.c:
	fix the following infinite recursive call:
		gfs_pio_close() -> gfs_pio_check_view_default()
		-> gfs_pio_set_view_global() -> gfs_pio_view_global_move_to()
		-> gfs_pio_close()
	caused by [gfarm-cvs:07721].
	problem reported by Ishibashi-san in [gfarm-developers:00500] ... [:00503]

2006-06-10  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio.c:
	correct a problem in previous change, and mention such case in a comment.

	* lib/libgfarm/gfarm/gfs_pio.c:
	fix longstanding bug that the resources of view won't be freed,
	if gfs_pio_error() != NULL before gfs_pio_close() is called.
	problem reported by Ishibashi-san in [gfarm-developers:00460] and
	[gfarm-developers:00494]

	* lib/libgfarm/gfarm/schedule.c:
	don't access uninitialised variable, although it wasn't actually harmful
	(because the availability of the variable would be checked later anyway),
	reported by Ishibashi-san in [gfarm-developers:00495]

	* lib/libgfarm/gfarm/gfs_pio_misc.c: fix invalid free() about dir_list
	reported by Ishibashi-san in [gfarm-developers:00494]

2006-06-09  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_misc.c: fix multiple free()

	* lib/libgfarm/gfarm/gfs_pio_misc.c:
	really fix memory leaks (hopefully)

2006-06-09  Noriyuki Soda  <soda@sra.co.jp>

	* server/gfsd/loadavg.c:
	<gfarm/gfarm_misc.h> is needed for gfarm_int32_t in "gfsd_subr.h"

	* lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/metadb_pgsql.c, ns/nstool/file/stat.c, server/gfsd/gfsd.c, server/gfsd/gfsd_subr.h, server/gfsd/loadavg.c, gftool/gfarm_agent/gfarm_agent.c:
	Fix warnings on Solaris 10/opteron
	reported by Yamamoto-san in [gfarm-developers:00470]

	* lib/libgfarm/gfarm/metadb_pgsql.c:
	be more tolerant about non-fatal conditions

2006-06-09  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_misc.c:
	traverse_file_tree(), get_infos_by_file(), get_meta_data(), set_meta_data,
	rename_dir(): plug memory leaks

2006-06-09  Noriyuki Soda  <soda@sra.co.jp>

	* doc/README.hook.en, doc/README.hook.ja:
	mention that Solaris binary distribution needs /usr/lib/libresov.so in
	$LD_PRELOAD_32 for now.

2006-06-08  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/config-gfarm/config-gfarm.in:
	fix previous my change (argument order)

	* gftool/config-gfarm/config-gfarm.in:
	Don't ask the following question on PostgreSQL 8.1 or later:
	Shall the new role be allowed to create more new roles? (y/n)

	* lib/libgfarm/gfarm/metadb_pgsql.c:
	more fixes to unaligned memory accesss to deal with coredump on Solaris/sparc

	* lib/libgfarm/gfarm/gfs_pio_section.c:
	call EVP_DigestFinal() in some error cases to free memory,
	reported by Ishibashi-san in 3rd case of [gfarm-developers:00461]

	* lib/libgfarm/gfarm/metadb_pgsql.c:
	gfarm_pgsql_path_info_get_all_foreach():
	- more strict sanity check
	- fix memory leak (hopefully)

	* lib/libgfarm/gfarm/metadb_pgsql.c:
	recover NULL field check, which is lost by previous my change

	* lib/libgfarm/gfarm/metadb_pgsql.c:
	more strict sanity check for COPY BINARY

	* lib/libgfarm/gfarm/metadb_pgsql.c:
	use memcpy() instead of word acccess like "*(uint32_t *)pointer",
	because the latter causes SIGBUS on RISC processors which don't allow
	unaligned memory accesss.
	This fixes core dump problem of gfs_hook'ed programs on Solaris/sparc.

2006-06-08  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/libgfarm/gfarm/gfs_dir.c:
	we cannot use RB_FOREACH since a node needed to compute the next node by RB_NEXT can be free'ed by free_node() or other functions.  This causes a segmentation fault in sweep_nodes().

2006-06-08  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/sysdep/solaris/amd64/SYS.h, lib/gfs_hook/sysdep/solaris/i386/SYS.h, lib/gfs_hook/sysdep/solaris/llseek.S, lib/gfs_hook/sysdep/solaris/sparc/SYS.h, lib/gfs_hook/sysdep/solaris/sparcv9/SYS.h:
	make these compilable by gcc

	* lib/gfs_hook/hooks.c:
	partially implement acl(2) system call hook on Solaris,
	to make the following regression tests work on Solaris 9:
		gfs_hook/tool/mv/0byte.sh
		gfs_hook/tool/mv/1byte.sh

	* regress/gfs_hook/tool/cd/cd.sh, regress/gfs_hook/tool/pwd/pwd.sh, regress/regress.conf:
	define bash as $shell, and use it appropriately.
	e.g. "cd" & "pwd" of gfs_hook
	Because /bin/sh on Solaris 9 doesn't work with gfs_hook.
	/bin/sh on *BSD (i.e. ash) does pass these tests,
	but fails to pass configure test.

	* regress/gfs_hook/tool/ls/notexist.sh:
	exit code of ls on Solaris 9 is not 1 but 2, when specified file doesn't exist.

	* LICENSE: add CDDL Version 1.0 for lib/gfs_hook/sysdep/solaris/

	* lib/gfs_hook/sysdep/solaris/sparc/SYS.h, lib/gfs_hook/sysdep/solaris/sparcv9/SYS.h, makes/var.mk, lib/gfs_hook/lseek64.c, lib/gfs_hook/sysdep/solaris/Makefile, lib/gfs_hook/sysdep/solaris/amd64/SYS.h, lib/gfs_hook/sysdep/solaris/i386/SYS.h, lib/gfs_hook/sysdep/solaris/llseek.S:
	correct return value of gfs_hook_syscall_lseek64() on Solaris 9 / sparc
	(32bit mode).  this fixes the following failures under regress with
	`cmp' command in GNU diffutils, when gfs_hook is specified by LD_PRELOAD_32:

	gftool/gfls/root.sh                                ... FAIL
	gftool/gfls/notexist.sh                            ... FAIL
	gfs_hook/tool/gzip/gzip-d.sh                       ... FAIL

	* lib/gfs_hook/sysdep/solaris/OPENSOLARIS.LICENSE, lib/gfs_hook/sysdep/solaris/amd64/SYS.h, lib/gfs_hook/sysdep/solaris/i386/SYS.h, lib/gfs_hook/sysdep/solaris/llseek.S, lib/gfs_hook/sysdep/solaris/sparc/SYS.h, lib/gfs_hook/sysdep/solaris/sparcv9/SYS.h:
	New file.

	* lib/gfs_hook/sysdep/solaris/OPENSOLARIS.LICENSE, lib/gfs_hook/sysdep/solaris/amd64/SYS.h, lib/gfs_hook/sysdep/solaris/i386/SYS.h, lib/gfs_hook/sysdep/solaris/llseek.S, lib/gfs_hook/sysdep/solaris/sparc/SYS.h, lib/gfs_hook/sysdep/solaris/sparcv9/SYS.h:
	from OpenSolaris 2005/06/12:

	OPENSOLARIS.LICENSE
	lib/libc/amd64/inc/SYS.h
	lib/libc/i386/inc/SYS.h
	lib/libc/sparc/inc/SYS.h
	lib/libc/sparcv9/inc/SYS.h
	lib/libc/common/sys/llseek.s

	* lib/gfs_hook/hooks.c:
	implement system call hooks for lutimes() and lchmod()
	to make tar command work on NetBSD.

2006-06-08  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gfs_hook/tool/cp/mode755.sh:
	test script for cp(1) an executable file.
	this fails on a client of which default architecture is not defined
	in any configuration files

2006-06-08  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/hooks.c:
	mknod: if (mode & S_IFMT) == 0, treat it as S_IFREG on Solaris and Linux.
	problem reported by ishibashi-san in [gfarm-developers:00450]

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_64.c:
	define OS_SOLARIS and use defined(OS_SOLARIS) instead of:
	defined(sun) && (defined(__svr4__) || defined(__SVR4))

2006-06-08  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule: add gfs_hook/tool/gzip/gzip-cd.sh

	* regress/gfs_hook/tool/gzip/gzip-cd.sh:
	test script for "gzip -cd <file>"

	* regress/gfs_hook/tool/gzip/gzip-d.sh:
	correct an error which leaves temporay file

	* regress/schedule: add gfs_hook/tool/cd/cd.sh
	    gfs_hook/tool/pwd/pwd.sh
	    gfs_hook/tool/gzip/gzip-d.sh
	    gfs_hook/tool/chmod/chmod_644_file.sh
	    gfs_hook/tool/chmod/chmod_755_file.sh

2006-06-08  Takuya Ishibashi  <takuya@soum.co.jp>

	* bench/fsysbench/fsysbench.c: check all return values.

2006-06-08  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/README.ja:
	add checking user's working directory to preperation

2006-06-08  Takuya Ishibashi  <takuya@soum.co.jp>

	* lib/libgfarm/gfarm/path_info_cache.c (gfarm_path_info_dup):
	use pathname instead of src->pathname.

2006-06-07  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/hooks.c: fix truncate() and ftruncate() on *BSD.

	* lib/gfs_hook/hooks.c: fix pread()/pwrite() on *BSD.

	* regress/gftool/gfrep/gfrep-d.sh:
	use nawk on Solaris, otherwise this fails.

	* regress/tst.sh, regress/regress.sh:
	make this work with /bin/sh on Solaris

	* package/freebsd/Makefile, package/pkgsrc/Makefile:
	add explicit dependency on PostgreSQL

2006-06-07  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* gftool/config-gfarm/sysdep/linux/suse/gfarm-pgsql.in, gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/sysdep/linux/debian/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/redhat/gfarm-pgsql.in:
	user 'runuser' instead of 'su' for SELinux

2006-06-07  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/sysdep/default/gfarm-pgsql.in, gftool/config-gfarm/sysdep/netbsd/gfarm-pgsql.in:
	don't use "su -", but use "su" for PostgreSQL on some platforms, because
	on Solaris and HP-UX:
		"su -" displays /etc/motd, and it's annoying.
		(Tru64 doesn't, though....)
	on NetBSD and DragonFly:
		pkgsrc doesn't create home directory of pgsql by default,
		thus, "su -" fails.
	Other platforms continue to use "su -", the rationale from tatebe-san is:
		- avoid to inherit unnecessary environment variables.
		- use some environment variables which are set by postgres' dot files.
		- system supplied rc script for PostgreSQL is using "su -l".

	XXX TODO:
		maybe we should use "/sbin/runuser -l" on SE Linux platforms.
		(from tatebe-san too)

2006-06-07  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gfs_hook/tool/gzip/gzip-d.sh: "gftmp" -> "hooktmp"

2006-06-07  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/config-gfarm/config-gfarm.in:
	- make $BACKEND_PRIVILEGE honor -U option too
	- check existence of $BACKEND_ADMIN_USER, if there is /usr/bin/getent
	- on *BSD, use "pgsql" instead of "postgres" as default PostgreSQL user account

2006-06-07  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gfs_hook/tool/gzip/gzip-d.sh:
	test script for "gzip -d <file>"

	* regress/gfs_hook/tool/pwd/pwd.sh, regress/gfs_hook/tool/cd/cd.sh:
	simplify

2006-06-07  Noriyuki Soda  <soda@sra.co.jp>

	* package/pkgsrc/PLIST: correct mistake in previous my change

2006-06-07  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/README.ja: how to use Gfarm regression test suite

2006-06-07  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/config-gfarm/config-gfarm.in: actually implement -U and -u

2006-06-07  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_global.c: correct a compile error

2006-06-06  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/libgfarm/gfarm/gfs_pio_global.c:
	fix a bug when accessing program introduced by the previous commit

2006-06-06  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/url.c: fix memory leak in gfarm_path_dir()

	* lib/libgfarm/gfarm/url.c: simplify, by removing micro optimization

	* lib/libgfarm/gfarm/url.c: remove unnecessary condition

	* server/gfsd/gfsd.c, lib/libgfarm/gfarm/gfs_misc.h, lib/libgfarm/gfarm/gfs_pio_remote.c, lib/libgfarm/gfarm/url.c:
	introduce gfarm_path_dir() to avoid portability problem of dirname(3)

2006-06-06  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/gfs_hook/hooks_common.c, lib/libgfarm/gfarm/gfs_exec.c, lib/libgfarm/gfarm/gfs_pio_global.c:
	if file does not have a section of requested architecture, try "noarch"

	* gftool/gfreg/gfreg.c: gfreg does not need to take care about "noarch"

	* lib/libgfarm/gfarm/host.c:
	if architecture is not determined, return "noarch"

	* lib/gfs_hook/hooks.c: revert to the revision 1.108

2006-06-06  Takuya Ishibashi  <takuya@soum.co.jp>

	* lib/libgfarm/gfarm/metadb_localfs.c:
	confirm whether there is path_info when section_info is added.

2006-06-06  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* server/gfsd/gfsd.c:
	chdir(2) should be called after gfarm_daemon(0, 0).  Otherwise, cwd is /

2006-06-06  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfutil/logutil_th.c:
	add workaround for a problem on Solaris 9

	* INSTALL.RPM.en, INSTALL.RPM.ja: update output example of config-gfarm

	* INSTALL.en:
	- some notes about port number and postgresql user account.
	- add installation step 7 and step 11, from INSTALL.ja

	* INSTALL.ja: some notes about port number and postgresql user account.

2006-06-06  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/gfs_hook/hooks.c (unlink):
	when architecture is not known, use "noarch"

2006-06-06  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/config-gfarm/config-gfarm.in:
	change default port number of backend server again, to 10602/tcp this time.
	because PostgreSQL doesn't work with 602/tcp.
	(it's invoked by normal user privilege, thus cannot bind port less than 1024)

	* gftool/config-gfarm/config-gfarm.in: needs to use nawk on Solaris

	* gftool/config-gfarm/sysdep/default/gfarm-pgsql.in:
	make this actually work

2006-06-06  Yusuke Tanimura  <yusuke.tanimura@aist.go.jp>

	* INSTALL.en: removed multi-bytes characters

2006-06-06  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* doc/README.hook.en, doc/README.hook.ja:
	Solaris is now supported, but AIX is not.

2006-06-05  Noriyuki Soda  <soda@sra.co.jp>

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja: correct wording and some mistakes

	* doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man5/gfarm.conf.5.html, man/ja/man5/gfarm.conf.5, man/man5/gfarm.conf.5:
	regen

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook:
	describe "ldap_bind_dn" and "ldap_bind_password" statements.

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja: update FAQ entry about security

	* gftool/config-gfarm/config-gfarm.in:
	remove spaces from root DN and base DN to make OpenLDAP-2.0.* happy

	* gftool/config-gfarm/slapd.conf-2.0.in:
	make openldap-2.0.* authenticate clients, too

	* package/solaris/gfarm-server.files, package/freebsd/pkg-plist, package/pkgsrc/PLIST:
	support PostgreSQL

2006-06-05  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	remove Section 4.2 since it is obsolete

2006-06-05  Noriyuki Soda  <soda@sra.co.jp>

	* package/freebsd/Makefile, package/pkgsrc/Makefile:
	gfarm-1.2pl4 -> gfarm-1.3

2006-06-05  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* man/man5/gfarm.conf.5, man/man8/gfmd.8, man/man8/gfsd.8, doc/html/ja/ref/man1/gfarm_agent.1.html, doc/html/ja/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man8/gfmd.8.html, doc/html/ja/ref/man8/gfsd.8.html, man/ja/man1/gfarm_agent.1, man/ja/man5/gfarm.conf.5, man/ja/man8/gfmd.8, man/ja/man8/gfsd.8, man/man1/gfarm_agent.1, doc/html/en/ref/man1/gfarm_agent.1.html, doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/en/ref/man8/gfmd.8.html, doc/html/en/ref/man8/gfsd.8.html:
	regen

2006-06-05  Noriyuki Soda  <soda@sra.co.jp>

	* package/solaris/build, package/solaris/gfarm-agent.files, package/solaris/gfarm-client.files:
	split gfarm_agent into its own subpackage

2006-06-05  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* RELNOTES: add compatibility note

	* gftool/gfarm_agent/gfarm_agent.c, server/gfsd/gfsd.c: update usage()

	* doc/docbook/en/ref/man8/gfmd.8.docbook, doc/docbook/en/ref/man8/gfsd.8.docbook, doc/docbook/ja/ref/man8/gfmd.8.docbook, doc/docbook/ja/ref/man8/gfsd.8.docbook:
	typo

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook:
	add description about agent and postgresql related directives

	* doc/docbook/en/ref/man1/gfarm_agent.1.docbook, doc/docbook/ja/ref/man1/gfarm_agent.1.docbook:
	update description for metadata cache server via ip connection

	* server/gfsd/gfsd.c:
	add sanity check for spool directory based on suggestion of soda-san.
	add input/output error check.

2006-06-05  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gfs_hook/tool/chmod/chmod_755_file.sh:
	test script for "chmod 755 <file>"

	* regress/gfs_hook/tool/chmod/chmod_644_file.sh:
	test script for "chmod 644 file"

2006-06-05  Noriyuki Soda  <soda@sra.co.jp>

	* regress/regress.conf:
	make $hooktop point working directory, instead of /gfarm,
	no functional change.

	* regress/gfs_hook/tool/cp/cp.sh, regress/gfs_hook/tool/ls/notexist.sh, regress/gfs_hook/tool/ls/root-gfarm.sh, regress/gfs_hook/tool/mv/mv.sh, regress/gfs_hook/tool/pwd/pwd.sh, regress/gfs_hook/tool/rm/rm.sh, regress/gfs_hook/tool/cd/cd.sh, regress/regress.conf:
	use $hooktop and $hooktmp instead of /gfarm and hardcoded names in the scripts,
	to make this regression test runnable on multiple hosts at once.

	* regress/data/gftest-0.0.tar.gz:
	tar archive which will be used for regression tests

2006-06-05  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* ChangeLog, LICENSE, RELNOTES:
	Release note for the version 1.3 (and 1.2.9).

2006-06-05  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gfs_hook/tool/pwd/pwd.sh: test script for "pwd"

	* regress/gfs_hook/tool/cd/cd.sh: test script for "cd /gfarm"

	* regress/schedule: add gfs_hook/tool/mv/{0,1}byte.sh

	* regress/gfs_hook/tool/mv/1byte.sh:
	test script for rename non-empty file

	* regress/gfs_hook/tool/mv/0byte.sh: test script for rename empty file

	* regress/gfs_hook/tool/mv/mv.sh:
	test script for "mv(rename) <source file> <dest>"

	* regress/schedule: add gfs_hook/tool/rm/{0,1}byte.sh

	* regress/gfs_hook/tool/rm/1byte.sh:
	test script for rm(1) non-empty file

	* regress/gfs_hook/tool/rm/0byte.sh: test script for rm(1) empty file

	* regress/gfs_hook/tool/rm/rm.sh: test script for "rm <file>"

	* regress/schedule: add gftool/gfpwd/gfpwd.sh
	    gfs_hook/tool/ls/root-gfarm.sh
	    gfs_hook/tool/ls/notexist.sh
	    gfs_hook/tool/cp/0byte.sh
	    gfs_hook/tool/cp/1byte.sh

	* regress/gfs_hook/tool/cp/0byte.sh: test script for cp(1) empty file

	* regress/gfs_hook/tool/cp/1byte.sh:
	test script for cp(1) non-empty file

	* regress/gfs_hook/tool/cp/cp.sh:
	test script for "cp <source file> <dest> "

	* regress/gfs_hook/tool/ls/notexist.sh:
	test script for "ls <not exist file>"

	* regress/gfs_hook/tool/ls/root-gfarm.sh:
	test script for "ls -d /gfarm"

2006-06-05  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio_misc.c (gfs_fstat):
	need to call gfs_pio_check_view_default()

	* lib/libgfarm/gfarm/gfs_pio_section.c:
	return correct file size by gfs_fstat(3) in section mode.

2006-06-05  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gftool/gfpwd/gfpwd.sh, regress/schedule:
	test script for "gfpwd"

	* regress/schedule: add gftool/gfkey/gfkey-cl.sh

	* regress/gftool/gfkey/gfkey-cl.sh: test script for "gfkey -cl"

2006-06-03  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/gfarm-agent.install, debian/gfsd.install, debian/libgfarm-dev.install, debian/libgfarm.install:
	moved config-gfarm.sysdep to libgfarm package

2006-06-03  Takuya Ishibashi  <takuya@soum.co.jp>

	* lib/libgfarm/gfarm/path_info_cache.c: delete useless conditions

2006-06-02  Noriyuki Soda  <soda@sra.co.jp>

	* configure, include/gfarm/gfarm_config.h.in: regen

	* gftool/gfexec/gfexec.c, lib/gfs_hook/hooks.c, server/gfsd/gfsd.c, server/gfsd/loadavg.c, configure.ac:
	changes for AIX 5.2, from Kentaro Wakatsuki @ hitachisoft
	in Matsuda-lab @ osaka-u, via [gfarm-developers:00219]
	with some modifications by me.
	These changes plus --without-gfshook option of configure script should make
	gfarm buildable on AIX 5.2, although aren't actually tested.
	(shouldn't harm anything, because all changes are protected by defined(_AIX))

	* lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_pio.c:
	make gfs_pio_create() and gfs_mkdir() ignore mode bits except bits in
	GFARM_S_ALLPERM, because Solaris 9, HP-UX 11i v2, Tru64 UNIX V5.1B,
	Fedora Core 4 Linux-2.6.11, FreeBSD 4.11 and NetBSD 3.0 all ignore these bits.
	(gfs_chmod() and gfs_fchmod() already ignore these bits, too.)
	problem pointed out by Ishibashi-san in [gfarm-developers:00343]

	* configure.ac:
	HP-UX doesn't have seteuid()/setegid() in libc, but in libcext.

	* include/gfarm/gfs.h:
	change tv_nsec of struct gfarm_timespec from "unsigned int" to "int",
	otherwise lib/libgfarm/gfarm/path_info_cache.c:gfarm_timespec_normalize()
	cannot handle negative value of tv_nsec.
	problem found by C compiler on HP-UX.
	NOTE: this doesn't actually change ABI, because its size is same.

2006-06-02  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gftool/gfrun/gfrun.sh:
	register script file instead of binary to run on a client node which isn't a
	file system node

2006-06-02  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/libgfarm/gfarm/gfs_dir.c (gfs_dircache_enter_path):
	should give priority to use pathname not info->pathname.  This solves a dircache problem in gfs_rename(3) pointed out by Ishibashi-kun.

2006-06-02  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gftool/gfsched/gfsched-N.sh, regress/schedule:
	test script for "gfsched -N <number of hosts>"

2006-06-02  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* gftool/gfarm_agent/gfarm_agent.c:
	do not display environment variables when using inet

	* lib/libgfarm/gfarm/gfs_dir.c:
	cancel the previous commit.  it is not necessary

2006-06-02  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gftool/gfrcmd/gfrcmd.sh:
	do not use '==' for string comparison operator because this dosen't work
	in Bourne shell

2006-06-02  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/libgfarm/gfarm/gfs_dir.c: check consistency in gfs_opendir

	* lib/libgfarm/gfarm/gfs_rename.c:
	fix a bug such that gfs_rename(3) fails when the target physical file illegally remains without the corresponding metadata.

2006-06-01  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfm_client.c:
	gfarm_host_get_canonical_self_name() may return GFARM_ERR_NO_SUCH_OBJECT too,
	if the host is not a filesystem node, but a client host.
	this fixes the problem of "regress/gftool/gfrun/gfrun-u.sh".

	* regress/README: some notes

	* regress/gftool/gfrun/gfrun-u.sh, regress/schedule:
	test script for "gfrun -u <command>".
	this currently works on a filesystem node, but doesn't on a client host.

	* configure: regen

	* configure.ac:
	better way to see whether libc supplies weak symbols for pthread or not.
	this version works with FreeBSD-4.* and NetBSD-2.*, as well as third party
	pthread libraries.

	(FreeBSD since 5.* and NetBSD since 3.* supply the weak symbols,
	 so this change doesn't affect those OSes.)

2006-06-01  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule:
	add gftool/gfrcmd/gfrcmd.sh and gftool/gfrun/gfrun.sh

2006-06-01  Noriyuki Soda  <soda@sra.co.jp>

	* regress/regress.sh:
	protect standard input of this test harness from test cases

2006-06-01  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gftool/gfrun/gfrun.sh: initial revision

	* regress/gftool/gfrcmd/gfrcmd.sh: remove an unnecessary comment

2006-06-01  Noriyuki Soda  <soda@sra.co.jp>

	* configure.ac: remove trailing spaces

2006-06-01  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gftool/gfrcmd/gfrcmd.sh: initial revision

2006-06-01  Noriyuki Soda  <soda@sra.co.jp>

	* configure: regen

	* configure.ac: OpenLDAP may need OpenSSL due to its SSL/TLS support.
	All Makefiles already have $(openssl_libs), if $(ldap_libs) is specified.
	But this configure script didn't have it.

2006-06-01  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gftool/gfrep/gfrep-N2.sh: remove gfarm temporary file

	* regress/schedule: add gftool/gfrep/gfrep-N2.sh

	* regress/gftool/gfrep/gfrep-N2.sh: initial revision

2006-06-01  Noriyuki Soda  <soda@sra.co.jp>

	* regress/gftool/gfwhere/noopt.sh:
	- remove $gftmp, when test is passed.
	- reduce number of temporary files.

	* lib/libgfarm/gfarm/metadb_none.c, lib/libgfarm/gfarm/metadb_sw.c:
	make gfarm buildable with configure --without-postgresql --without-openldap

2006-06-01  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gftool/gfreg/gfreg-h.sh: simplify quatation

2006-06-01  Noriyuki Soda  <soda@sra.co.jp>

	* regress/regress.sh:
	use "test -f" instead of "test -x" to see whether the test exists or not.

2006-06-01  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule: add gftool/gfrep/gfrep-d.sh

	* regress/gftool/gfrep/gfrep-d.sh: initial revision

	* regress/schedule: add gftool/gfreg/gfreg-h.sh

	* regress/gftool/gfreg/gfreg-h.sh: initial revision

2006-06-01  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/metadb_pgsql.c:
	<sys/types.h> is needed for types like uint8_t on FreeBSD.

	* server/gfsd/gfsd.c, lib/libgfarm/gfarm/gfs_client.c:
	portability fix: FreeBSD needs <sys/uio.h> for struct iovec

	* package/solaris/build: changes for gfarm-1.3
	- plum is dead, use pine instead
	- use PostgreSQL
	more changes are coming...

2006-06-01  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule: add gftool/gfwhere/noopt_{+,-}x.sh

	* regress/gftool/gfwhere/noopt_+x.sh, regress/gftool/gfwhere/noopt_-x.sh:
	initial revision

	* regress/gftool/gfwhere/noopt.sh:
	add case that this script runs on a client host not registered in metadata

2006-05-31  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfarm_agent/gfarm_agent.c: back out previous my change.
	gfarm_agent isn't using select(2), thus the change is not necessary,
	but even harmful.
	pointed out by tatebe-san

2006-05-31  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/gftool/gfwhere/noopt.sh: initial revision

2006-05-31  Noriyuki Soda  <soda@sra.co.jp>

	* regress/gftool/gfhost/noopt.sh: previous my change had mistake

	* regress/gftool/gfhost/noopt.sh:
	output of "gfhost -M" is not guaranteed to be sorted

2006-05-31  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* regress/schedule: add gftool/gfhost/noopt.sh

	* regress/gftool/gfhost/noopt.sh: initial revision

	* regress/gftool/gfexport/gfexport.sh, regress/gftool/gfls/notexist.sh, regress/gftool/gfls/root.sh, regress/regress.conf:
	move definition of local temprary file from 'regress.conf' file to scripts

2006-05-31  Noriyuki Soda  <soda@sra.co.jp>

	* regress/gftool/gfrm/0byte.sh, regress/gftool/gfrm/1byte.sh:
	forgot to remove debug option

	* regress/README: fix comment.
	"gfarm:/tmp" doesn't have to be exist with gfarm v1 to run this test,
	because this testsuite uses user's home directory for temporary files with v1.

	* regress/gftool/gfreg/0byte.sh, regress/gftool/gfreg/1byte.sh, regress/gftool/gfreg/gfreg.sh, regress/gftool/gfrm/0byte.sh, regress/gftool/gfrm/1byte.sh, regress/gftool/gfrm/gfrm.sh, regress/gftool/gfrmdir/rmdir.sh, regress/Makefile, regress/README, regress/data/0byte, regress/data/1byte, regress/gftool/gfexport/0byte.sh, regress/gftool/gfexport/1byte.sh, regress/gftool/gfexport/gfexport.sh, regress/gftool/gfls/notexist.out, regress/gftool/gfls/notexist.sh, regress/gftool/gfls/root.out, regress/gftool/gfls/root.sh, regress/gftool/gfmkdir/mkdir.sh, regress/gftool/gfmv/dir.sh, regress/gftool/gfmv/file.sh, regress/loop.sh, regress/regress.conf, regress/regress.sh, regress/schedule, regress/tst.sh:
	bring simple and tiny regression testsuite from gfarm v2 branch

	* regress/loop.sh:
	make this able to be killed with bash-3.00.16 on Fedora Core 4

	* regress/regress.sh: typo

	* regress/gftool/gfrm/gfrm.sh, regress/gftool/gfrmdir/rmdir.sh, regress/gftool/gfexport/gfexport.sh, regress/gftool/gfls/notexist.sh, regress/gftool/gfls/root.sh, regress/gftool/gfmkdir/mkdir.sh, regress/gftool/gfmv/dir.sh, regress/gftool/gfmv/file.sh, regress/gftool/gfreg/gfreg.sh:
	do not use "trap '...' 0", because the processing will be invoked
	after $trap_sigs processing with bash-3.00.16 on Fedora Core 4

	* regress/regress.sh: check exit code more strictly

	* regress/Makefile: there isn't current directory in $PATH

	* regress/gftool/gfmv/dir.sh:
	confirm that moved directory is removable.
	XXX - current v2 fails in this test.

	* regress/gftool/gfexport/gfexport.sh:
	- don't have to test result of gfreg, because this is not a test for gfreg,
	  but gfexport.
	- check the exit code of gfexport

	* regress/gftool/gfexport/gfexport.sh, regress/gftool/gfreg/gfreg.sh:
	correctly remove temporary file

	* regress/gftool/gfexport/gfexport.sh: New file.

	* regress/gftool/gfexport/0byte.sh, regress/gftool/gfexport/1byte.sh, regress/gftool/gfexport/gfexport-and-cmp.sh, regress/gftool/gfexport/gfexport.sh:
	rename gfexport-and-cmp.sh to gfexport.sh

	* regress/tst.sh: New file.

	* regress/tst.sh: script to display exit-code of single test script

	* regress/gftool/gfexport/gfexport-and-cmp.sh, regress/gftool/gfreg/gfreg.sh, regress/gftool/gfrm/gfrm.sh:
	New file.

	* regress/gftool/gfexport/gfexport-and-cmp.sh, regress/gftool/gfreg/gfreg.sh, regress/gftool/gfrm/gfrm.sh:
	factoring out common code

	* regress/gftool/gfexport/0byte.sh, regress/gftool/gfexport/1byte.sh, regress/gftool/gfls/notexist.sh, regress/gftool/gfls/root.sh, regress/gftool/gfmkdir/mkdir.sh, regress/gftool/gfmv/dir.sh, regress/gftool/gfmv/file.sh, regress/gftool/gfreg/0byte.sh, regress/gftool/gfreg/1byte.sh, regress/gftool/gfrm/0byte.sh, regress/gftool/gfrm/1byte.sh, regress/gftool/gfrmdir/rmdir.sh, regress/regress.conf, regress/regress.sh:
	move cleanup trap statement from regress.conf to each test script.
	rename shell variables to clarify the intentions.

	* regress/loop.sh: forgot to rewrite $$ to $

	* regress/loop.sh: New file.

	* regress/Makefile, regress/loop.sh:
	split "make loop" target into loop.sh

	* regress/schedule: enable disable gftool/gfmv/dir.sh again

2006-05-31  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* package/redhat/gfarm.spec:
	do not return error when chkconfig gf[sm]d --del fails.  It prevents uninstallation of binary packages.  This action is not really needed here but added for administrator's convenience since /etc/init.d/gf[sm]d is not installed by rpm install script but config-gf{arm,sd}.

	* lib/libgfarm/gfarm/agent_wrap.c, lib/libgfarm/gfarm/gfs_dir.c:
	fix access control bug in opendir.  It should be done by a client not an agent.

2006-05-30  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/libgfarm/gfarm/gfs_unlink.c:
	return error when specified path is a directory

2006-05-30  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/metadb_localfs.c: shut up stupid gcc warning

	* gftool/gfstat/gfstat.c:
	make time_t handling more portable to fix the following warning
	from gcc on Fedora Core 5, reported by Ishibashi-san:
	warning: dereferencing type-punned pointer will break strict-aliasing rules

	* lib/libgfarm/gfarm/gfs_client.c:
	cancel previous change, because it was just wrong.

	* package/redhat/gfarm.spec:
	create user "_gfarmfs" on metadata server as well

	* regress/schedule: disable gftool/gfmv/dir.sh test for now

	* regress/gftool/gfmkdir/mkdir.sh, regress/gftool/gfmv/dir.sh, regress/gftool/gfmv/file.sh, regress/gftool/gfreg/0byte.sh, regress/gftool/gfreg/1byte.sh, regress/gftool/gfrm/0byte.sh, regress/gftool/gfrm/1byte.sh, regress/gftool/gfrmdir/rmdir.sh:
	New file.

	* regress/gftool/gfmkdir/mkdir.sh, regress/gftool/gfmv/dir.sh, regress/gftool/gfmv/file.sh, regress/gftool/gfreg/0byte.sh, regress/gftool/gfreg/1byte.sh, regress/gftool/gfrm/0byte.sh, regress/gftool/gfrm/1byte.sh, regress/gftool/gfrmdir/rmdir.sh:
	very simple and tiny regression testsuite

	* regress/Makefile, regress/README, regress/data/0byte, regress/data/1byte, regress/gftool/gfexport/0byte.sh, regress/gftool/gfexport/1byte.sh, regress/gftool/gfls/notexist.out, regress/gftool/gfls/notexist.sh, regress/gftool/gfls/root.out, regress/gftool/gfls/root.sh, regress/regress.conf, regress/regress.sh, regress/schedule:
	New file.

	* regress/Makefile, regress/README, regress/data/0byte, regress/data/1byte, regress/gftool/gfexport/0byte.sh, regress/gftool/gfexport/1byte.sh, regress/gftool/gfls/notexist.out, regress/gftool/gfls/notexist.sh, regress/gftool/gfls/root.out, regress/gftool/gfls/root.sh, regress/regress.conf, regress/regress.sh, regress/schedule:
	very simple and tiny regression testsuite

2006-05-29  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec:
	mention /etc/init.d/gfarm-slapd at uninstallation

	* package/redhat/gfarm.spec: add gfchgrp too

	* package/redhat/gfarm.spec: add gfchmod and gfchown

	* include/gfarm/gfs.h: correct prototype of gfs_chown()

	* doc/docbook/ja/ref/man1/gfhost.1.docbook:
	add <command> ... </command> tag

	* server/gfmd/fs.c: fix permission check of FCHMOD protocol

	* gftool/gfmkdir/gfmkdir.c, gftool/gfreg/gfreg_simple.c, gftool/gfrm/gfrm_simple.c, gftool/gfrmdir/gfrmdir.c:
	correct the return value of getopt(): it's not EOF but -1.

	* lib/libgfarm/gfarm/gfm_client.c:
	gfm_client_fchown_request(): cope with NULL argument of string parameters

	* lib/libgfarm/gfarm/gfs_chown.c: New file.

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/gfs_chmod.c, lib/libgfarm/gfarm/gfs_chown.c:
	add gfs_chmod() and gfs_chown()

	* gftool/Makefile: add gfchmod and gfchown

	* server/gfmd/gfmd.c: treat db_initialize() failure as fatal

2006-05-29  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/changelog, debian/control, debian/control.gsi, debian/control.non-gsi, debian/gfarm-agent.install, debian/gfarm-agent.manpages, debian/gfarm-client.install, debian/gfarm-client.manpages, debian/gfmd.postinst, debian/gfsd.install, debian/gfsd.postinst, debian/rules:
	update for 1.3
	added gfarm-agent package

2006-05-29  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfarm_agent/gfarm_agent.c, server/gfmd/gfmd.c, server/gfsd/gfsd.c:
	use nonblocking socket for accept(2) to avoid race condition,
	from section 16.6 of "UNIX NETWORK PROGRAMMING, Volume1, Third Edition"
	by W. Richard Stevens

	* server/gfmd/gfmd.c: fix comment

	* lib/libgfarm/gfarm/metadb_pgsql.c: fix indentation and typo

	* lib/libgfarm/gfarm/gfs_client.c: plug memory leak

	* gftool/gfdf/gfdf.c: rewrite by using gfs_statfsnode()

2006-05-29  Takuya Ishibashi  <takuya@soum.co.jp>

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h, lib/libgfarm/gfarm/metadb_access.h, lib/libgfarm/gfarm/metadb_localfs.c, lib/libgfarm/gfarm/metadb_localfsdb.c, lib/libgfarm/gfarm/metadb_sw.c, lib/libgfarm/gfarm/metadb_sw.h:
	"localfsdb" is renamed to "localfs".

2006-05-29  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* Makefile.in: remove config-agent by make distclean

2006-05-29  Noriyuki Soda  <soda@sra.co.jp>

	* server/gfmd/inode.c: remove debug printf

	* server/gfmd/gfmd.c:
	ignore spurious signal (signal number=8195840) in sigwait(2),
	this is observed on Fedora Core 4 (linux-2.6.11).

	* server/gfmd/gfmd.c: print signal number, when terminating

	* package/redhat/gfarm.spec: make this actually work

	* gftool/config-gfarm/config-gfarm.in:
	make gfmd.conf unreadable by normal users

	* server/gfmd/group.c: fix a bug which accesses freed memory

	* lib/libgfarm/gfutil/logutil.c: remove debug tip

	* package/redhat/gfarm.spec: for gfarm v2

	* include/gfarm/Makefile: install v2 headers

	* gftool/Makefile: build gfmv as well

	* gftool/Makefile: build config-gfarm

	* server/gfmd/fs.c: correct type: gfarm_int32_t -> size_t

	* lib/libgfarm/gfarm/auth_common.c, server/gfmd/fs.c, server/gfmd/group.c, server/gfmd/host.c, server/gfmd/user.c:
	fix some warning from gcc-4.0 on Fedora Core 4

	* server/gfsd/gfsd.c: gfarm v2 alpha

	* lib/libgfarm/gfarm/gfs_remove.c, lib/libgfarm/gfarm/gfs_rmdir.c, lib/libgfarm/gfarm/metadb_common.h, server/gfmd/README, server/gfmd/db_access.c, server/gfmd/db_access.h, server/gfmd/db_common.c, server/gfmd/db_common.h, server/gfmd/db_ldap.c, server/gfmd/db_none.c, server/gfmd/db_ops.h, server/gfmd/db_pgsql.c:
	New file.

	* lib/libgfarm/Makefile, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/auth.h, lib/libgfarm/gfarm/auth_client.c, lib/libgfarm/gfarm/auth_config.c, lib/libgfarm/gfarm/auth_server.c, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h, lib/libgfarm/gfarm/config_client.c, lib/libgfarm/gfarm/config_server.c, lib/libgfarm/gfarm/conn_hash.c, lib/libgfarm/gfarm/conn_hash.h, lib/libgfarm/gfarm/gfm_client.c, lib/libgfarm/gfarm/gfm_client.h, lib/libgfarm/gfarm/gfm_proto.h, lib/libgfarm/gfarm/gfp_xdr.c, lib/libgfarm/gfarm/gfpath.h, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_io.c, lib/libgfarm/gfarm/gfs_mkdir.c, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_remove.c, lib/libgfarm/gfarm/gfs_rename.c, lib/libgfarm/gfarm/gfs_rmdir.c, lib/libgfarm/gfarm/gfs_stat.c, lib/libgfarm/gfarm/gfs_unlink.c, lib/libgfarm/gfarm/glob.c, lib/libgfarm/gfarm/host.c, lib/libgfarm/gfarm/host.h, lib/libgfarm/gfarm/liberror.c, lib/libgfarm/gfarm/liberror.h, lib/libgfarm/gfarm/lookup.c, lib/libgfarm/gfarm/metadb_common.c, lib/libgfarm/gfarm/metadb_common.h, lib/libgfarm/gfarm/metadb_server.c, lib/libgfarm/gfarm/schedule.c, lib/libgfarm/gfarm/schedule.h, lib/libgfarm/gfarm/url.c, lib/libgfarm/gfutil/logutil.c, server/gfmd/Makefile, server/gfmd/README, server/gfmd/db_access.c, server/gfmd/db_access.h, server/gfmd/db_common.c, server/gfmd/db_common.h, server/gfmd/db_ldap.c, server/gfmd/db_none.c, server/gfmd/db_ops.h, server/gfmd/db_pgsql.c, server/gfmd/dir.c, server/gfmd/fs.c, server/gfmd/gfmd.c, server/gfmd/group.c, server/gfmd/group.h, server/gfmd/host.c, server/gfmd/host.h, server/gfmd/inode.c, server/gfmd/inode.h, server/gfmd/metadb_if.c, server/gfmd/peer.c, server/gfmd/peer.h, server/gfmd/process.c, server/gfmd/subr.c, server/gfmd/subr.h, server/gfmd/user.c, server/gfmd/user.h:
	gfarm v2 alpha

	* gftool/gfreg/gfreg_simple.c, gftool/gfrm/gfrm_simple.c: New file.

	* gftool/gfmkdir/Makefile, gftool/gfmkdir/gfmkdir.c, gftool/gfreg/Makefile, gftool/gfreg/gfreg_simple.c, gftool/gfrm/Makefile, gftool/gfrm/gfrm_simple.c, gftool/gfrmdir/Makefile, gftool/gfrmdir/gfrmdir.c, include/gfarm/gfs.h, include/gfarm/gfs_glob.h, include/gfarm/group_info.h, include/gfarm/host_info.h, include/gfarm/user_info.h, gftool/config-gfarm/sysdep/linux/debian/gfmd.in, gftool/config-gfarm/sysdep/linux/redhat/gfmd.in, gftool/config-gfarm/sysdep/netbsd/gfmd.in, gftool/gfexport/gfexport.c, gftool/gfhost/gfhost.c, gftool/gfkey/gfkey.c, gftool/gfls/Makefile, gftool/gfls/gfls.c, doc/docbook/en/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man1/gfhost.1.docbook, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook, gftool/Makefile, gftool/config-gfarm/Makefile, gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/config-gfsd.in, gftool/config-gfarm/gfarm.conf-ldap.in, gftool/config-gfarm/gfarm.conf-postgresql.in, gftool/config-gfarm/gfarm.conf.in, gftool/config-gfarm/gfarm.schema, gftool/config-gfarm/gfarm.sql, gftool/config-gfarm/sysdep/default/gfmd.in, gftool/config-gfarm/sysdep/freebsd/gfmd.in, Makefile.in, doc/docbook/en/ref/man1/gfhost.1.docbook:
	gfarm v2 alpha

2006-05-28  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/schedule.h: bring latest schedule.h to v2 branch

	* lib/libgfarm/gfarm/schedule.c: bring latest schedule.c to v2 branch

	* gftool/gfhost/gfhost.c: bring latest gfhost.c to v2 branch

2006-05-25  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* configure: regen

	* configure.ac, package/redhat/gfarm.spec, package/redhat/gfmd.in, package/redhat/gfsd.in:
	remove package/redhat/gf[ms]d.in

	* INSTALL.RPM.en, INSTALL.RPM.ja, INSTALL.en, INSTALL.ja:
	introduce gfarm_agent metadata cache server

2006-05-19  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* server/gfsd/gfsd.c:
	fix a bug such that gfsd cannot be restarted due to the error of address already in use.
	note that dirname(3) modifies the argument.

2006-05-18  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/linux/debian/Makefile, gftool/config-gfarm/sysdep/linux/debian/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/debian/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/default/Makefile, gftool/config-gfarm/sysdep/linux/redhat/Makefile, gftool/config-gfarm/sysdep/linux/redhat/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/redhat/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/redhat/gfmd.in, gftool/config-gfarm/sysdep/linux/redhat/gfsd.in, gftool/config-gfarm/sysdep/linux/suse/Makefile, gftool/config-gfarm/sysdep/linux/suse/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/suse/gfarm-slapd.in, gftool/config-gfarm/sysdep/netbsd/Makefile, gftool/config-gfarm/sysdep/netbsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/netbsd/gfarm-pgsql.in, gftool/config-gfarm/sysdep/netbsd/gfarm-slapd.in, gftool/config-gfarm/sysdep/osf1/Makefile, gftool/config-gfarm/sysdep/osf1/config-gfarm.sysdep, gftool/config-gfarm/sysdep/solaris/Makefile, gftool/config-gfarm/sysdep/solaris/config-gfarm.sysdep, gftool/config-gfarm/Makefile, gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/config-gfsd.in, gftool/config-gfarm/gfarm.conf-ldap.in, gftool/config-gfarm/gfarm.conf-postgresql.in, gftool/config-gfarm/gfarm.conf.in, gftool/config-gfarm/gfarm.schema, gftool/config-gfarm/gfarm.sql, gftool/config-gfarm/initial.ldif.in, gftool/config-gfarm/slapd.conf-2.0.in, gftool/config-gfarm/slapd.conf-2.1.in, gftool/config-gfarm/sysdep/aix/Makefile, gftool/config-gfarm/sysdep/aix/config-gfarm.sysdep, gftool/config-gfarm/sysdep/default/Makefile, gftool/config-gfarm/sysdep/default/config-gfarm.sysdep, gftool/config-gfarm/sysdep/default/gfarm-pgsql.in, gftool/config-gfarm/sysdep/default/gfarm-slapd.in, gftool/config-gfarm/sysdep/freebsd/Makefile, gftool/config-gfarm/sysdep/freebsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/freebsd/gfarm-pgsql.in, gftool/config-gfarm/sysdep/freebsd/gfarm-slapd.in, gftool/config-gfarm/sysdep/hpux/Makefile, gftool/config-gfarm/sysdep/hpux/config-gfarm.sysdep:
	bring PostgreSQL support into v2 branch

2006-05-17  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/libgfarm/gfsl/Makefile:
	do not build sample programs in 'all' target

	* configure: regen

	* configure.ac, gfptool/Makefile, lib/Makefile, makes/config.mk.in:
	add --without-gfshook option in configure to disable to build syscall hooking library

2006-05-15  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/gfs_hook/hooks.c (opendir):
	check HAVE_FDOPENDIR also for Solaris 9 or later

	* configure, include/gfarm/gfarm_config.h.in: regen

	* configure.ac: *** empty log message ***

	* package/freebsd/pkg-plist, package/pkgsrc/PLIST, package/redhat/gfarm.spec:
	add config-agent
	release 1.3

	* lib/gfs_hook/hooks.c:
	add opendir entry for Solaris 9.  Courtesy of Wakatsuki-san @ HitachiSoft

	* lib/gfs_hook/hooks_stat.c: memchr(3) should be memset(3)!!

	* gftool/gfrcmd/gfrcmd.c, lib/libgfarm/gfarm/config.c:
	should cast void not void*

	* gftool/config-gfarm/sysdep/linux/debian/gfarm_agent.in, gftool/config-gfarm/sysdep/linux/redhat/gfarm_agent.in, gftool/config-gfarm/sysdep/linux/suse/gfarm_agent.in, gftool/config-gfarm/sysdep/netbsd/gfarm_agent.in, gftool/config-gfarm/config-agent.in, gftool/config-gfarm/sysdep/default/gfarm_agent.in, gftool/config-gfarm/sysdep/freebsd/gfarm_agent.in:
	add config-agent to configure gfarm_agent metadata cache server

2006-05-14  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/gfs_misc.h, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_rename.c, lib/libgfarm/gfarm/gfs_unlink.c:
	re-factor gfs_rename() for a file for easy maintenance
	access control for gfs_rename

	* configure: regen

	* configure.ac, gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/linux/debian/Makefile, gftool/config-gfarm/sysdep/linux/default/Makefile, gftool/config-gfarm/sysdep/linux/redhat/Makefile, gftool/config-gfarm/sysdep/linux/suse/Makefile, gftool/config-gfarm/sysdep/netbsd/Makefile, gftool/config-gfarm/sysdep/osf1/Makefile, gftool/config-gfarm/sysdep/solaris/Makefile, gftool/config-gfarm/Makefile, gftool/config-gfarm/sysdep/aix/Makefile, gftool/config-gfarm/sysdep/default/Makefile, gftool/config-gfarm/sysdep/freebsd/Makefile, gftool/config-gfarm/sysdep/hpux/Makefile:
	add config-agent to configure gfarm_agent metadata cache server

	* gftool/gfarm_agent/gfarm_agent.c, lib/libgfarm/gfarm/agent_wrap.c, lib/libgfarm/gfarm/agent_wrap.h:
	honor agent_serverport in a config file.

	* lib/libgfarm/gfsl/Makefile: do not make sample programs by default

2006-05-09  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/config-gfarm/config-gfarm.in:
	don't use default port number for LDAP and PostgreSQL, use port 602 instead,
	to avoid conflict with system default service.
	suggested by tatebe-san

	* server/gfsd/gfsd.c:
	really support running multiple gfsd on single host,
	to use multiple spool directories.
	(previous change had several problems.)

	* lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_proto.h:
	support running multiple gfsd on single host, to use multiple spool directories.

	* gftool/config-gfarm/config-gfarm.in:
	improve wording about previous change

	* gftool/config-gfarm/config-gfsd.in, gftool/config-gfarm/config-gfarm.in:
	suggest -h option, if local hostname cannot be automatically determined

	* lib/libgfarm/gfutil/gfutil.h, lib/libgfarm/gfutil/logutil.c:
	from v2 branch:
	export gflog_vmessage(), if GFLOG_USE_STDARG is defined.

2006-05-09  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* lib/libgfarm/gfarm/schedule.c:
	(gfarm_schedule_random_host_{init,fini}) skip host cache to obtain
	random_hosts_info since it should not be expired.  Otherwise,
	segmentation fault occurs when it expires (10 minutes).

2006-05-09  Noriyuki Soda  <soda@sra.co.jp>

	* include/gfarm/gfs.h, lib/libgfarm/gfarm/schedule.c, lib/libgfarm/gfarm/schedule.h:
	export gfs_statfsnode() and gfs_statfsnode_cached(),
	since Gfarm-FUSE needs these functions.

	* lib/libgfarm/gfarm/config.h, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/schedule.c:
	rename GFARM_WRITE_LOCAL_PRIOR and write_local_prior
	to GFARM_WRITE_LOCAL_PRIORITY and write_local_priority.

	* gftool/gfls/gfls.c:
	don't call gfs_stat_free(), if gfs_stat() failed. pointed out by tatebe-san.

	* server/gfmd/gfmd.c:
	deal with more errors which are described insection 15.6 of
	"UNIX NETWORK PROGRAMMING, Volume1, Second Edition" by W. Richard Stevens

	* lib/libgfarm/gfarm/schedule.h:
	- check minimum_free_disk_space at scheduling for writing
	- implement gfs_statfsnode() and gfs_statfsnode_cached()
	  to acquire disk free space

	* lib/libgfarm/gfarm/schedule.c:
	- check minimum_free_disk_space at scheduling for writing
	- fix comments to reflect reality
	- implement gfs_statfsnode() and gfs_statfsnode_cached()
	  to acquire disk free space
	- initialize `ongoing' member correctly, this fixes the bug
	  that makes scheduling goes into infinite loop, if there are
	  multiple networks (bug found by Ishibashi-san)

	* lib/libgfarm/gfarm/gfs_pio_section.c:
	- check minimum_free_disk_space at scheduling for writing
	- implement "$GFARM_WRITE_LOCAL_PRIOR" environment variable and
	  "write_local_prior" directive in gfarm.conf/.gfarmrc.
	- implement "$GFARM_WRITE_TARGET_DOMAIN" environment variable

	* lib/libgfarm/gfarm/gfs_pio_misc.c:
	- check minimum_free_disk_space at scheduling for writing
	- implement "$GFARM_WRITE_LOCAL_PRIOR" environment variable and
	  "write_local_prior" directive in gfarm.conf/.gfarmrc.

	* lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h:
	implement "$GFARM_WRITE_LOCAL_PRIOR" environment variable and
	"write_local_prior" directive in gfarm.conf/.gfarmrc.

2006-04-27  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfutil/logutil_th.c: minor cleanup, no actual change:
	make gflog_thread_specific_alloc() neutral from pthreads.

	* lib/libgfarm/gfutil/logutil_th.c:
	- back out part of previous change, it was my misunderstanding.
	- more error check

	* lib/libgfarm/gfutil/gfutil.h, lib/libgfarm/gfutil/logutil.c, lib/libgfarm/gfutil/logutil.h, lib/libgfarm/gfutil/logutil_th.c:
	- fix non-portable assumption about pthread_getspecific()
	- make log_identifier, log_use_syslog and authentication_verbose
	  global again instead of thread local,
	  otherwise every thread has to call gflog_syslog_open(),
	  gflog_set_identifier() and gflog_auth_set_verbose(),
	  but that's not intended usage.

	* doc/html/en/ref/man8/gfsd.8.html, doc/html/ja/ref/man8/gfsd.8.html, man/ja/man8/gfsd.8, man/man8/gfsd.8:
	regen

	* doc/docbook/en/ref/man8/gfsd.8.docbook, doc/docbook/ja/ref/man8/gfsd.8.docbook:
	mention -U and -v option

	* server/gfsd/gfsd.c:
	- add new option -U, which makes gfsd not bind UNIX domain socket
	- don't use gfsd specific variable for spool_root,
	  but use gfarm_spool_root instead,
	  because otherwise gfarm_path_localize() and other functions won't work
	  correctly

2006-04-25  Noriyuki Soda  <soda@sra.co.jp>

	* server/gfsd/gfsd.c, lib/libgfarm/gfarm/gfs_client.c:
	fix compilation error on Solaris

	* lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/metadb_access.h, lib/libgfarm/gfarm/metadb_sw.c:
	fix typo: "metab" -> "metadb"

2006-04-25  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/metadb_pgsql.c:
	get_value_from_varchar_copy_binary(): replace strncpy() with memcpy() to copy exact length

	* lib/libgfarm/gfarm/metadb_pgsql.c:
	get_value_from_varchar_copy_binary(): fix a bug

2006-04-24  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/metadb_pgsql.c:
	gfarm_pgsql_path_info_get_all_foreach(): replace magic numbers

	* lib/libgfarm/gfarm/metadb_pgsql.c:
	get_value_from_varchar_copy_binary(): replace strndup() which is a GNU extension with malloc() + strncpy()

	* lib/libgfarm/gfutil/timer.h, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_unlink.c:
	stop gcc compile error on architectures other than i386

2006-04-21  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio.c, include/gfarm/gfs.h:
	make read unbuffered too by GFARM_FILE_UNBUFFERED

2006-04-21  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/metadb_pgsql.c:
	fix bug segmentation faults in case of Path table has no row

2006-04-21  Noriyuki Soda  <soda@sra.co.jp>

	* doc/html/ja/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man8/gfsd.8.html, doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/en/ref/man8/gfsd.8.html, man/man5/gfarm.conf.5, man/man8/gfsd.8, man/ja/man5/gfarm.conf.5, man/ja/man8/gfsd.8:
	regen

	* doc/docbook/ja/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man8/gfsd.8.docbook, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h, server/gfsd/gfsd.c, doc/docbook/en/ref/man8/gfsd.8.docbook, doc/docbook/en/ref/man5/gfarm.conf.5.docbook:
	support running multiple gfsd on single host, to use multiple spool directories.

2006-04-20  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/Makefile: correct an error

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/metadb_pgsql.c:
	gfarm_pgsql_path_info_get_all_foreach(): reimplement with "COPY TO STDOUT" and
	PQgetCopyData() to cut memory usage

2006-04-11  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfrm/gfrm.c: remove_whole_file_or_dir(): fix a bug

	* lib/libgfarm/gfarm/gfs_dir.c:
	recover access control implemented in r1.72 and deleted by mistake in r1.73

2006-04-10  Osamu Tatebe  <tatebe@cs.tsukuba.ac.jp>

	* package/redhat/gfarm.spec: --with-readline is not needed in configure

2006-04-08  Noriyuki Soda  <soda@sra.co.jp>

	* configure: regen

	* configure.ac:
	add ${pthread_libs} to ${LIBS}, if the location of the pthread library
	is not /usr/lib. Otherwise gftool cannot be linked, because libgfarm
	calls pthread functions internally, since gfarm-1.3.
	If the location is /usr/lib (i.e. it's system-supplied pthread library),
	probably libc supplies weak symbols for the pthread functions, thus,
	this problem won't happen.

2006-04-06  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfhost/gfhost.c:
	don't call sort(1) command, but call qsort(3) function,
	since Fedora Core 5 no longer supports traditional options of sort(1).

	* configure: regen

	* lib/libgfarm/gfarm/gfs_client.c, server/gfsd/gfsd.c, configure.ac:
	fix portability problem on Tru64 UNIX V5.1B

	* gftool/config-gfarm/sysdep/default/Makefile: correct $(top_builddir)

	* lib/libgfarm/gfarm/metadb_localfsdb.c:
	fix portability problem on HP-UX 11i/ia64:
	struct dirent doesn't have d_type member

	* lib/libgfarm/gfarm/gfs_client.c, server/gfsd/gfsd.c:
	fix portability problem on HP-UX 11i/ia64:
	adding to (void *) isn't allowed, use (char *) instead.

2006-04-06  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfreg/gfreg.c: check_arguments(): change an error message

2006-04-05  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/html/en/ref/man1/gfreg.1.html, man/man1/gfreg.1: regen

	* doc/docbook/en/ref/man1/gfreg.1.docbook:
	-H and -D are available in all registering modes

	* doc/html/ja/ref/man1/gfreg.1.html, man/ja/man1/gfreg.1: regen

	* doc/docbook/ja/ref/man1/gfreg.1.docbook:
	-H and -D are available in all registering modes

2006-04-04  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/metadb_localfsdb.c:
	portability fix: <limits.h> is necessary to use PATH_MAX

2006-04-04  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfreg/gfreg.c: simplify

2006-03-31  Takuya Ishibashi  <takuya@soum.co.jp>

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h, lib/libgfarm/gfarm/metadb_access.h, lib/libgfarm/gfarm/metadb_localfsdb.c, lib/libgfarm/gfarm/metadb_sw.c, lib/libgfarm/gfarm/metadb_sw.h:
	metadb implementation using local filesystem hierarchy.
	(assume that this is used with "gfarm_agent -p".)

2006-03-31  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_unlink.c:
	shut up gcc-4.0 warning on Fedora Core 4

	* lib/libgfarm/gfarm/gfs_pio.c:
	remove some gcc specific code which is no longer necessary

	* lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/schedule.c:
	shut up gcc-4.0 warning on Fedora Core 4

	* gftool/gfdump/gfdump.c: shut up gcc-4.0 warning on Fedora Core 4:
	pointer targets in passing argument 1 of 'read_int32' differ in signedness

	* configure: regen

	* configure.ac: make both OpenLDAP and PostgreSQL optional, because:
	- with gfarm_agent, client programs don't have to access metadata,
	- filesystem backend database by Ishibashi-san will be imported soon.

	* doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man5/gfarm.conf.5.html, man/ja/man5/gfarm.conf.5, man/man5/gfarm.conf.5:
	regen

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h, lib/libgfarm/gfarm/hostcache.c, lib/libgfarm/gfarm/schedule.c:
	- change `host_cache_timeout' directive from scheduler cache timeout
	  to host metadata cache timeout.
	- add `schdule_cache_timeout' for the scheduler cache timeout

2006-03-30  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_client.c:
	(gfs_client_connect_request_multiplexed) be compatible with old gfsd that does not support GFS_PROTO_OPEN_LOCAL
	do not try to connect a unix domain socket twice.

2006-03-29  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/schedule.c: fix comment

2006-03-29  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/metadb_access.h, lib/libgfarm/gfarm/metadb_none.c, lib/libgfarm/gfarm/metadb_sw.c, lib/libgfarm/gfarm/metadb_sw.h:
	accept the case when neither postgresql nor ldap is specified.  In this case, "no available meta server" error is returned unless agent_serverhost is specified.

2006-03-29  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/schedule.c:
	- remove recently introduced gfarm_schedule_completed()
	- use cached result always until it's expired.
	- ignore `scheduled' member, if enough idle hosts don't exist in neighbor.
	  XXX this is a hack, but otherwise distant hosts will be choosed frequently.
	- sort results correctly in write_mode
	- fix some bugs about merging networks

	* lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/schedule.h:
	remove recently introduced gfarm_schedule_completed(),
	to make scheduling faster by a different way.

2006-03-28  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_misc.h, lib/libgfarm/gfarm/gfs_unlink.c, lib/libgfarm/gfarm/url.c:
	introduce gfarm_path_dirname()
	corrent access permission control for unlink pointed out by Ishibashi-kun.

	* lib/libgfarm/gfarm/gfs_chmod.c:
	do not return error when one of hosts fails to chmod a directory

	* lib/libgfarm/gfarm/gfs_pio_section.c (gfs_pio_view_section_close):
	plug memory leak pointed out by Ishibashi-kun.

	* lib/libgfarm/gfarm/gfs_pio.c (gfs_pio_open_initialize_mode_flags):
	remove an obsolete code

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_section.c:
	introduce gfs_pio_{set,unset,check}_calc_digest

2006-03-27  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_client.c:
	do not request GFS_PROTO_OPEN_LOCAL to an old gfsd to avoid termination of gfsd.

2006-03-27  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/schedule.c, lib/libgfarm/gfarm/schedule.h:
	introduce gfarm_schedule_completed() to notify that scheduled host is
	no longer used.

2006-03-27  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_client.c:
	be compatible with old gfsd that does not support GFS_PROTO_OPEN_LOCAL.

2006-03-27  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/schedule.c:
	- forgot to update network RTT, when a host with shorter RTT is found
	- don't search local network in search_idle_by_rtt_order()
	- comment cleanup

2006-03-26  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/schedule.c:
	revise previouse change, because it made cache-disabled search not work.
	but this change makes elapsed time of a schedule test program
	from 6.4 sec to 45.6 sec / 56.8 sec / 89.9 sec...

	* lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/schedule.c:
	fix the case that same host might be recorded twice or more.
	this should resolve the core dump reported by Ishibashi-san
	in gfarm-cvs:07049 and gfarm-cvs:07053.

2006-03-24  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/schedule.c:
	forgot to re-initialize candidate_list of each network,
	problem reported by Ishibashi-san

	* server/gfsd/gfsd.c:
	don't use umask 0 for a child process, but use umask when gfsd was invoked.

2006-03-24  Takuya Ishibashi  <takuya@soum.co.jp>

	* lib/libgfarm/gfarm/gfs_chmod.c, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio_misc.c:
	update ctime on write, truncate, chmod and rename.

2006-03-24  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfsl/gfarm_gsi.h, lib/libgfarm/gfsl/gsi.c, server/Makefile, server/gfmd/gfmd.c, server/gfsd/gfsd.c:
	gfarm v2 snapshot

	* lib/libgfarm/gfarm/config_client.c, lib/libgfarm/gfarm/gfs_io.c, lib/libgfarm/gfarm/gfs_io.h, lib/libgfarm/gfarm/gfs_mkdir.c, lib/libgfarm/gfarm/gfs_profile.h, lib/libgfarm/gfarm/gfs_stat.c, lib/libgfarm/gfarm/lookup.c, lib/libgfarm/gfarm/lookup.h:
	New file.

	* Makefile.in, include/gfarm/gfs.h, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/auth.h, lib/libgfarm/gfarm/auth_client.c, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h, lib/libgfarm/gfarm/config_client.c, lib/libgfarm/gfarm/gfm_client.c, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_io.c, lib/libgfarm/gfarm/gfs_io.h, lib/libgfarm/gfarm/gfs_mkdir.c, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_remote.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_profile.h, lib/libgfarm/gfarm/gfs_stat.c, lib/libgfarm/gfarm/liberror.c, lib/libgfarm/gfarm/liberror.h, lib/libgfarm/gfarm/lookup.c, lib/libgfarm/gfarm/lookup.h:
	gfarm v2 snapshot

	* lib/libgfarm/gfarm/gfm_client.c, lib/libgfarm/gfarm/metadb_pgsql.c, lib/libgfarm/gfarm/metadb_sw.c, lib/libgfarm/gfarm/metadb_sw.h, lib/libgfarm/gfarm/schedule.c, lib/libgfarm/gfarm/schedule.h:
	add NAREGI copyright notice

	* gftool/gfreg/gfreg.c:
	change function declaration order to fix compilation error on Fedora Core 4

2006-03-23  Noriyuki Soda  <soda@sra.co.jp>

	* doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man5/gfarm.conf.5.html, man/ja/man5/gfarm.conf.5, man/man5/gfarm.conf.5:
	regen

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook:
	correct default value of host_cache_timeout

	* man/ja/man5/gfarm.conf.5, man/man5/gfarm.conf.5, doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man5/gfarm.conf.5.html:
	regen

	* lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/host.c, lib/libgfarm/gfarm/host.h, lib/libgfarm/gfarm/schedule.c, lib/libgfarm/gfarm/schedule.h, gftool/gfreg/gfreg.c, gftool/gfrep/gfrep.c, gftool/gfsched/Makefile, gftool/gfsched/gfsched.c, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_pio_misc.c:
	- implement new scheduling algorithm which uses RTT and disk free space
	- add scheduling functions for writing

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook:
	add the following configuration directives:
		dir_cache_timeout	(default: 86400 secnods)
		host_cache_timeout	(default: 600 seconds)
		minimum_free_disk_space	(default: 128MB)

	* lib/libgfarm/gfarm/gfs_dir.c:
	add the following configuration directives:
		dir_cache_timeout	(default: 86400 secnods)

	* lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h:
	add the following configuration directives:
		dir_cache_timeout	(default: 86400 secnods)
		host_cache_timeout	(default: 600 seconds)
		minimum_free_disk_space	(default: 128MB)

2006-03-20  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/agent_wrap.c, lib/libgfarm/gfarm/agent_wrap.h, lib/libgfarm/gfarm/config.c:
	do not overwrite agent_server{host,port}, and agent_socket_path.

2006-03-17  Takuya Ishibashi  <takuya@soum.co.jp>

	* lib/libgfarm/gfarm/path_info_cache.c:
	- When update_time_interval is zero, check_update_time_interval is canceled immediately.
	- (compare_path_info_except_time): ignore st_ino.

2006-03-17  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfreg/Makefile, gftool/gfreg/gfreg.c, gftool/gfrep/Makefile, gftool/gfrep/gfrep.c, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/host.c, lib/libgfarm/gfarm/host.h:
	gfreg: enable -H and -D in all modes
	gfrep.c: move hosts_in_domain() from gfrep.c to hosts.c:gfarm_hosts_in_domain()

2006-03-16  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfutil/gfutil.h, lib/libgfarm/gfutil/logutil.c:
	export gflog_vmessage()

	* lib/libgfarm/gfarm/metadb_common.c: New file.

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h, lib/libgfarm/gfarm/config_server.c, lib/libgfarm/gfarm/host.c, lib/libgfarm/gfarm/metadb_common.c:
	changes for gfarm v2

	* lib/libgfarm/gfarm/gfs_proto.h: gfsd for gfarm v2.

	* lib/libgfarm/gfarm/gfm_client.c, lib/libgfarm/gfarm/gfm_client.h, lib/libgfarm/gfarm/gfm_proto.h:
	- remove GFM_PROTO_PUSH_FD and GFM_PROTO_SWAP_FD protocol,
	  add GFM_PROTO_GET_FD, GFM_PROTO_PUT_FD, GFM_PROTO_SAVE_FD
	  and GFM_PROTO_RESTORE_FD protocols instead.
	  to resolve resource leak in some error cases.
	- miscellaneous protocol fixes

	* lib/libgfarm/gfarm/metadb_server.c: New file.

	* lib/libgfarm/gfarm/metadb_server.c:
	glue functions to access meta database, used by gfsd
	(and currently libgfarm, XXX this should be corrected in the future)

	* lib/libgfarm/gfarm/metadb_server.h: New file.

	* lib/libgfarm/gfarm/metadb_server.h:
	glue interface to access meta database, used by gfmd and gfsd
	(and currently libgfarm, XXX this should be corrected in the future)

	* lib/libgfarm/gfarm/gfp_xdr.c, lib/libgfarm/gfarm/gfp_xdr.h, lib/libgfarm/gfarm/io_fd.c, lib/libgfarm/gfarm/io_gfsl.c:
	make gfp_xdr_delete_credential() callable from signal handler

	* lib/libgfarm/gfarm/auth_server.c:
	handle GFARM_AUTH_ID_TYPE_SPOOL_HOST for sharedsecret

	* server/gfsd/gfsd.c, server/gfsd/gfsd_subr.h, server/gfsd/statfs.c:
	gfsd for gfarm v2.
	replication and command execution isn't implemented yet.

	* server/gfmd/fs.c, server/gfmd/fs.h, server/gfmd/gfmd.c, server/gfmd/host.c, server/gfmd/host.h, server/gfmd/inode.h, server/gfmd/peer.c, server/gfmd/peer.h, server/gfmd/process.c, server/gfmd/process.h, server/gfmd/subr.c:
	- remove GFM_PROTO_PUSH_FD and GFM_PROTO_SWAP_FD protocol,
	  add GFM_PROTO_GET_FD, GFM_PROTO_PUT_FD, GFM_PROTO_SAVE_FD
	  and GFM_PROTO_RESTORE_FD protocols instead.
	  to resolve resource leak in some error cases.
	- very basic implementation of GFM_PROTO_SCHEDULE_FILE,
	  domain parameter isn't supported yet.

	* server/gfmd/metadb_if.c: New file.

	* server/gfmd/Makefile, server/gfmd/metadb_if.c:
	add metadb_if.c to use some libgfarm functions which access meta data.

	* include/gfarm/gfs.h: tentative changes for gfarm v2.
	notably, GFS_Dir is actually same structure with GFS_File in v2.

	* include/gfarm/gfarm_misc.h:
	remove some functions which are obviously unnecessary in gfarm v2

	* include/gfarm/error.h: indentation change

2006-03-14  Noriyuki Soda  <soda@sra.co.jp>

	* server/gfmd/fs.c, server/gfmd/gfmd.c, server/gfmd/inode.c, server/gfmd/inode.h, server/gfmd/process.c, server/gfmd/process.h, server/gfmd/subr.c, server/gfmd/subr.h, lib/libgfarm/gfarm/gfm_client.c, lib/libgfarm/gfarm/gfm_client.h, lib/libgfarm/gfarm/gfm_proto.h:
	- add GFM_PROTO_BEQUEATH_FD, GFM_PROTO_INHEIRIT_FD and
	  GFM_PROTO_PROCESS_ALLOC_CHILD protocol for current directory handling
	- add flag argument to GFM_PROTO_OPEN_ROOT, GFM_PROTO_OPEN_PARENT
	- add inode generation as a return value of GFM_PROTO_CREATE, GFM_PROTO_OPEN,
	  and GFM_PROTO_REOPEN (XXX more protocols need to be changed.)

2006-03-13  Noriyuki Soda  <soda@sra.co.jp>

	* include/gfarm/gfarm.h:
	include host_info, user_info and group_info as well

2006-03-09  Takuya Ishibashi  <takuya@soum.co.jp>

	* lib/libgfarm/gfarm/metadb_pgsql.c: plug memory leak

2006-03-06  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/hooks_64.c, lib/gfs_hook/hooks_fstat.c, lib/gfs_hook/hooks_stat.c, lib/gfs_hook/hooks.c, lib/gfs_hook/getcwd.c:
	fix portability problem on Solaris 10 / Opteron,
	reported by OHKI Shingo-san @ riken.

2006-03-03  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_chmod.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_unlink.c:
	rename foreach_copy() and foreach_section()
	to gfarm_foreach_copy() and gfarm_foreach_section(),
	to protect user applications from namespace pollution

	* lib/libgfarm/gfarm/gfs_pio_local.c: portability fix

	* lib/libgfarm/gfarm/gfs_pio_section.c, server/gfsd/gfsd.c:
	fix gcc warning

2006-03-02  Noriyuki Soda  <soda@sra.co.jp>

	* server/gfmd/fs.c, server/gfmd/inode.h, server/gfmd/process.c, server/gfmd/process.h:
	implement GFM_PROTO_CKSUM_SET/GET

	* server/gfmd/inode.c: - implement GFM_PROTO_CKSUM_SET/GET
	- make GFM_PROTO_VERIFY_TYPE/TYPE_NOT optional until symbolic link support,
	  by making sure that current descriptor is a directory at GFM_PROTO_OPEN
	  and GFM_PROTO_CREATE

	* lib/libgfarm/gfarm/gfm_proto.h:
	define flags for GFM_PROTO_CKSUM_GET/SET

	* include/gfarm/gfs.h: add more flags for internal use

2006-03-02  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_chmod.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_unlink.c:
	fix a 'chmod +x' bug with openldap backend
	re-factor gfd_chmod (and gfs_unlink) for easy maintenance
	access control for gfs_unlink_section and gfs_unlink_section_replica

2006-02-27  Noriyuki Soda  <soda@sra.co.jp>

	* makes/var.mk: $(metadb_client_libs) is no longer necessary.

	* include/gfarm/gfs.h:
	define GFARM_FILE_CREATE, if GFARM_INTERNAL_USE is specified.

	* include/gfarm/error.h: add GFARM_ERR_NOT_A_SYMBOLIC_LINK

	* server/gfmd/fs.c, server/gfmd/fs.h, server/gfmd/inode.c, server/gfmd/inode.h, server/gfmd/peer.c, server/gfmd/peer.h, server/gfmd/process.c, server/gfmd/process.h:
	correct CREATE and OPEN, CLOSE_READ, CLOSE_WRITE, implement OPEN_ROOT,
	OPEN_PARENT, REOPEN, CLOSE, MKDIR, REMOVE, RENAME and PROCESS_FREE,
	and miscellenenous fixes.

	* server/gfmd/gfmd.c:
	- add OPEN_PARENT protocol, remove RMDIR protocol, and reorder protocol numbers
	- make gfarm_authorize() (sort of) thread safe, currently sharedsecret only

	* server/gfmd/job.c: fix warning

	* lib/libgfarm/gfarm/sockopt.c, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/auth.h, lib/libgfarm/gfarm/auth_client.c, lib/libgfarm/gfarm/auth_common.c, lib/libgfarm/gfarm/auth_server.c, lib/libgfarm/gfarm/auth_server_gsi.c, lib/libgfarm/gfarm/liberror.c, lib/libgfarm/gfarm/schedule.c:
	make gfarm_authorize() (sort of) thread safe, currently sharedsecret only.

	* lib/libgfarm/gfarm/gfm_client.c, lib/libgfarm/gfarm/gfm_proto.h:
	add OPEN_PARENT protocol, remove RMDIR protocol, and reorder protocol numbers

2006-02-27  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfutil/logutil.h: make logutil thread-safe

2006-02-26  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/error.c, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_remote.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_proto.h, include/gfarm/gfarm_error.h, server/gfsd/gfsd.c:
	do not re-calculate checksum in any case
	add GFARM_ERR_CHECKSUM_UNKNOWN
	add fstat in storage operations
	add GFS_PROTO_FSTAT

	* lib/libgfarm/gfarm/gfs_unlink.c:
	fix a bug such that path info remains when unlinking a binary file that does not have the corresponding physical file.
	do not return internal error, i.e. error during deletion of the corresponding physical file.

2006-02-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_unlink.c: access control for unlink

2006-02-24  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfutil/Makefile, lib/libgfarm/gfutil/logutil.c, lib/libgfarm/gfutil/logutil_th.c:
	make logutil thread-safe

2006-02-23  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_proto.h, server/gfsd/gfsd.c:
	add GFS_PROTO_OPEN_LOCAL
	this enables to open a file from localhost which is owned by the same global user but a different local user.

	* lib/libgfarm/gfarm/hostspec.c: Quich hack for AF_UNIX

	* lib/libgfarm/gfarm/host.c, lib/libgfarm/gfarm/host.h: add const

	* lib/libgfarm/gfarm/gfs_dir.c: access control for chdir and opendir

2006-02-22  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/config-gfarm/sysdep/linux/redhat/gfmd.in, gftool/config-gfarm/sysdep/linux/redhat/gfsd.in:
	initlog will be obsolete in Fedora Core 5.

2006-02-21  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfarm_agent/agent_ptable.c: plug memory leak

2006-02-20  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/freebsd/pkg-plist, package/pkgsrc/PLIST, package/redhat/gfarm.spec, package/solaris/gfarm-server.files, debian/gfmd.install:
	add gfdump in server package

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/agent_client.c, lib/libgfarm/gfarm/agent_wrap.c, lib/libgfarm/gfarm/agent_wrap.h:
	reconnection support for an agent server

	* gftool/config-gfarm/config-gfarm.in:
	enable autovacuum if supported (not tested)
	XXX - BACKEND_VERSION is not checked

2006-02-20  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfarm_agent/gfarm_agent.c: portability fix

	* lib/libgfarm/gfarm/path_info_cache.c:
	shut up gcc warning: statement with no effect

2006-02-11  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfdump/gfdump.c:
	skip dircache (and path_info_cache) to restore metadata to avoid
	modification time update of directory.

	* gftool/gfdump/gfdump.c:
	dump all information in section info and section copy info.  Dumped
	data is not structured by the previous commit.

	* gftool/config-gfarm/sysdep/freebsd/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/debian/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/redhat/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/suse/gfarm-pgsql.in, gftool/config-gfarm/sysdep/netbsd/gfarm-pgsql.in, gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/sysdep/default/gfarm-pgsql.in:
	exec $PGSQL_BINDIR/pg_ctl instead of $BACKEND_PREFIX/bin/pg_ctl

2006-02-09  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_chmod.c:
	gfs_chmod_meta_spool(): add cleaning spool files and metadata whose permission
	cannot be changed or whose name cannot be renamed

2006-02-08  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/agent_client.c:
	include sockopt.h

	* lib/libgfarm/gfarm/path_info_cache.c:
	fix compilation error in Solaris cc

	* lib/libgfarm/gfarm/gfs_client.c:
	set 5 sec timeout in connect() to cope with unstable lossy networks

2006-02-07  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfdump/gfdump.c:
	dump section info and section copy info after path info because it is
	not possible to access metadb in callback.
	fix segfault when restoring metadata

	* gftool/gfdump/Makefile, gftool/gfdump/gfdump.c, gftool/Makefile:
	metadata dump and restore tool;
		% gfdump -d -f dumpfile   to dump metadata
		% gfdump -r -f dumpfile   to restore metadata
	Note that host information is dumped by gfhost not by gfdump.

2006-02-06  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/url.c (gfarm_canonical_path_for_creation):
	fix a bug such that '.' and '..'
	can be registered incorrectly in metadata.

	* package/redhat/gfmd.in, package/redhat/gfsd.in:
	initlog will be obsolete in Fedora Core 5.

2006-01-27  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_chmod.c, lib/libgfarm/gfarm/gfs_misc.h, lib/libgfarm/gfarm/gfs_pio_misc.c:
	gfs_chmod_meta_spool(): change order prcoessing spool files and metadata,
	try changing spool file's mode first , then change metadata.
	rename_clean_spool(): is change name to `gfs_clean_spool' shared in
	gfs_rename() and gfs_chmod()

2006-01-26  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/gfs_chmod.c, lib/libgfarm/gfarm/gfs_pio_misc.c:
	separate gfs_chmod(), gfs_fchmod() and their subfunctions from gfs_pio_misc.c

2006-01-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/config-gfarm/config-gfarm.in:
	determine PostgreSQL version using pg_config that does not require to be executed by a non-root user.
	introduce PGSQL_BINDIR

	* gftool/gfarm_agent/gfarm_agent.c, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/agent_wrap.c, lib/libgfarm/gfarm/agent_wrap.h, lib/libgfarm/gfarm/config.c:
	add agent_server{host,port} and agent_socket_path in gfarm.conf to specify gfarm_agent server.

	* gftool/gfarm_agent/Makefile, gftool/gfarm_agent/gfarm_agent.c:
	set timeout 500 msec for path_info cache

	* gftool/config-gfarm/config-gfarm.in: display password prompt

2006-01-24  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfarm_agent/Makefile, gftool/gfarm_agent/gfarm_agent.c, lib/libgfarm/gfarm/agent_client.c, lib/libgfarm/gfarm/agent_client.h, lib/libgfarm/gfarm/agent_wrap.c (gfarm_agent):
	add -p <port> option for ip connection

	* server/gfsd/gfsd.c: remove redundnt include file

	* configure: regen

	* configure.ac: retrieve configuration of PostgreSQL using pg_config

2006-01-24  Takuya Ishibashi  <takuya@soum.co.jp>

	* lib/libgfarm/gfarm/path_info_cache.c:
	fix the wrong usage of cache_path_info_{init,free}().

2006-01-23  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/gfmd.install: merge from gfarm.spec

2006-01-23  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/config-gfarm/config-gfarm.in:
	add /usr/lib/postgresql/bin not /usr/lib/postgresql in search_path

2006-01-23  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/changelog: version 1.2.9

2006-01-20  Noriyuki Soda  <soda@sra.co.jp>

	* configure: regen

	* configure.ac: check existence of PQexecParams(),
	since older PostgreSQL (e.g. 7.2) doesn't have it.

	* lib/libgfarm/gfarm/gfs_pio_section.c:
	fix warning: unused variable `fci'

	* configure: regen

	* configure.ac: previous fix was incomplete

	* configure: regen

	* configure.ac:
	$openssl_includes and $openssl_libs may be evaluated by shell (at configure),
	and those may include $(globus_location) and $(globus_flavor)

	* gftool/config-gfarm/sysdep/freebsd/gfarm-pgsql.in:
	add -D option in OPTIONS to specify PGDATA.  PostgreSQL 8.0 or later seems to ignore PGDATA environment variable

2006-01-20  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/gfarm.spec: spec file for gfarm-1.2.9-0

2006-01-20  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/config-gfarm/config-gfarm.in: disable IPv6 by default

	* gftool/config-gfarm/config-gfarm.in:
	do not use "-A md5" option and "--pwfile=" for initdb command,
	because PostgreSQL-7.4 doesn't have these options.

2006-01-20  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/config-gfarm/sysdep/default/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/redhat/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/suse/gfarm-pgsql.in, gftool/config-gfarm/sysdep/netbsd/gfarm-pgsql.in:
	add -D option in OPTIONS to specify PGDATA.  PostgreSQL 8.0 or later seems to ignore PGDATA environment variable

	* gftool/config-gfarm/config-gfarm.in:
	PGHOST is correct for unix domain socket

2006-01-20  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/config-gfarm/sysdep/freebsd/gfarm-pgsql.in:
	default gfarm-pgsql startup script (not tested)

2006-01-20  Takuya Ishibashi  <takuya@soum.co.jp>

	* lib/libgfarm/gfarm/path_info_cache.c, lib/libgfarm/gfarm/path_info_cache.h:
	- default cache_timeout is 0. (disable path_info_cache)
	- add gfarm_cache_path_info_param_set().
	- delete unused #define.
	- (gfarm_cache_size_set): update cache when sizes are equal.

2006-01-20  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/config-gfarm/config-gfarm.in: make postgresql default backend

2006-01-20  Noriyuki Soda  <soda@sra.co.jp>

	* configure: regen

	* configure.ac: make it possible to build without OpenLDAP

	* configure: regen

	* configure.ac: typo, pointed out by tatebe-san

2006-01-20  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/config-gfarm/config-gfarm.in: PGHOST should be PGDATA

	* lib/libgfarm/gfarm/gfs_unlink.c (gfs_unlink):
	not to call redundant gfarm_file_section_info_get_all_by_file

	* gftool/config-gfarm/sysdep/default/gfarm-pgsql.in:
	default gfarm-pgsql startup script (not tested)

	* gftool/config-gfarm/sysdep/linux/suse/gfarm-pgsql.in: fix typo

	* doc/html/en/user/Makefile: install nfs-gfarmfs.html

	* gftool/config-gfarm/sysdep/linux/suse/gfarm-pgsql.in, gftool/config-gfarm/sysdep/netbsd/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/debian/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/redhat/gfarm-pgsql.in:
	specify PGPORT (and PGDATA) to use a specific port

	* gftool/config-gfarm/config-gfarm.in:
	move postgresql version check code to sanity
	fix postgresql version check in user mode

	* gftool/config-gfarm/config-gfarm.in:
	add /usr/lib/postgresql in search_path

	* gftool/config-gfarm/sysdep/linux/redhat/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/suse/gfarm-pgsql.in, gftool/config-gfarm/sysdep/netbsd/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/debian/gfarm-pgsql.in, gftool/config-gfarm/config-gfarm.in:
	PostgreSQL version 7.4 support

2006-01-19  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/metadb_sw.c: typo

2006-01-18  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/config-gfarm/config-gfarm.in:
	accept only top-level domain name
	execute pg_ctl as a privileged user
	fix run_with_backend_privilege

	* gftool/config-gfarm/config-gfarm.in:
	modify pg_hba.conf in version 8.0.3 format

2006-01-18  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/config-gfarm/gfarm.conf-postgresql.in, gftool/config-gfarm/sysdep/solaris/Makefile, gftool/config-gfarm/sysdep/solaris/config-gfarm.sysdep, gftool/config-gfarm/sysdep/linux/default/Makefile, gftool/config-gfarm/sysdep/linux/redhat/Makefile, gftool/config-gfarm/sysdep/linux/redhat/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/redhat/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/suse/Makefile, gftool/config-gfarm/sysdep/linux/suse/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/suse/gfarm-slapd.in, gftool/config-gfarm/sysdep/netbsd/Makefile, gftool/config-gfarm/sysdep/netbsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/netbsd/gfarm-pgsql.in, gftool/config-gfarm/sysdep/netbsd/gfarm-slapd.in, gftool/config-gfarm/sysdep/osf1/Makefile, gftool/config-gfarm/sysdep/osf1/config-gfarm.sysdep, gftool/config-gfarm/sysdep/default/Makefile, gftool/config-gfarm/sysdep/default/config-gfarm.sysdep, gftool/config-gfarm/sysdep/default/gfarm-slapd.in, gftool/config-gfarm/sysdep/freebsd/Makefile, gftool/config-gfarm/sysdep/freebsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/freebsd/gfarm-slapd.in, gftool/config-gfarm/sysdep/hpux/Makefile, gftool/config-gfarm/sysdep/hpux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/linux/debian/Makefile, gftool/config-gfarm/sysdep/linux/debian/gfarm-pgsql.in, gftool/config-gfarm/sysdep/linux/debian/gfarm-slapd.in, gftool/config-gfarm/Makefile, gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/config-gfsd.in, gftool/config-gfarm/gfarm.conf-ldap.in, gftool/config-gfarm/gfarm.conf.in, gftool/config-gfarm/initial.ldif.in, gftool/config-gfarm/slapd.conf-2.0.in, gftool/config-gfarm/slapd.conf-2.1.in, gftool/config-gfarm/sysdep/aix/Makefile, gftool/config-gfarm/sysdep/aix/config-gfarm.sysdep:
	make config-gfarm support postgresql (by e.g. "-b postgresql" option).

2006-01-17  Takuya Ishibashi  <takuya@soum.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_section.c (gfs_set_section_busy):
	save filesize of the section.
	(gfs_pio_view_section_close): gfarm_file_section_info_set() and gfarm_file_section_copy_info_set() are unnecessary in updating metadata.
	(gfs_pio_set_view_section): gfs_unlink_every_other_replicas() is unnecessary in creating new file.

2006-01-17  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/path_info_cache.c: remove unnecessary parentheses.
	(gfarm_cache_path_info_get): do not insert a garbage entry

2006-01-16  Takuya Ishibashi  <takuya@soum.co.jp>

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/path_info_cache.c, lib/libgfarm/gfarm/path_info_cache.h:
	add path_info cache.
	- GFARM_PATH_INFO_TIMEOUT is the time until expiring path_info cache. (default: 500ms)
	- GFARM_UPDATE_TIME_INTERVAL is the interval to cancel updating mtime/atime/ctime. (default: 500ms)

2006-01-13  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	add a sample script to start up gfarm_agent in csh.

2006-01-12  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfdf/Makefile, gftool/gfdf/gfdf.c, lib/gfs_hook/sysdep/default/Makefile, lib/gfs_hook/sysdep/default/dummy.c, util/gfront/src/gfront/GFWHEREParser2.java, util/gfront/src/gfront/GFront.java, util/gfront/src/gfront/GFrontApp.java, util/gfront/src/gfront/GFrontCommon.java, util/gfront/src/gfront/GFrontConst.java, util/gfront/src/gfront/GfhostList.java, util/gfront/src/gfront/ReadOnlyTableModel.java, util/gfront/src/gfront/RightClickDirTree.java, util/gfront/src/gfront/RightClickTable.java, package/freebsd/Makefile, package/freebsd/files/gfmd.sh, package/freebsd/files/gfsd.sh, package/freebsd/pkg-descr, package/freebsd/pkg-plist, package/pkgsrc/DESCR, package/pkgsrc/Makefile, package/pkgsrc/PLIST, package/pkgsrc/files/gfmd.sh, package/pkgsrc/files/gfsd.sh, util/gfront/src/gfront/ChangeLookAndFeel.java, util/gfront/src/gfront/CommandOutput.java, util/gfront/src/gfront/DirectoryTreeNode.java, util/gfront/src/gfront/FileTableModel.java, util/gfront/src/gfront/FragmentEditor.java, util/gfront/src/gfront/GFAction.java, util/gfront/src/gfront/GFAppConst.java, util/gfront/src/gfront/GFLSParser.java, util/gfront/src/gfront/GFWHEREParser.java, gftool/config-gfarm/sysdep/linux/redhat/Makefile, gftool/config-gfarm/sysdep/linux/redhat/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/redhat/gfmd.in, gftool/config-gfarm/sysdep/linux/redhat/gfsd.in, gftool/config-gfarm/sysdep/linux/suse/Makefile, gftool/config-gfarm/sysdep/linux/suse/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/suse/gfmd.in, gftool/config-gfarm/sysdep/linux/suse/gfsd.in, gftool/config-gfarm/sysdep/netbsd/Makefile, gftool/config-gfarm/sysdep/netbsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/netbsd/gfarm-slapd.in, gftool/config-gfarm/sysdep/netbsd/gfmd.in, gftool/config-gfarm/sysdep/netbsd/gfsd.in, gftool/config-gfarm/sysdep/osf1/Makefile, gftool/config-gfarm/sysdep/osf1/config-gfarm.sysdep, gftool/config-gfarm/sysdep/solaris/Makefile, gftool/config-gfarm/sysdep/solaris/config-gfarm.sysdep, gftool/config-gfarm/sysdep/hpux/Makefile, gftool/config-gfarm/sysdep/hpux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/hpux/getmemsize.c, gftool/config-gfarm/sysdep/linux/Makefile, gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/linux/debian/Makefile, gftool/config-gfarm/sysdep/linux/debian/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/debian/gfmd.in, gftool/config-gfarm/sysdep/linux/debian/gfsd.in, gftool/config-gfarm/sysdep/linux/default/Makefile, bench/fsstress/Makefile, bench/fsstress/README, bench/fsstress/dotest.sample, bench/fsstress/fsstress.c, bench/fsstress/global.h, bench/fsstress/xfscompat.h, gftool/config-gfarm/sysdep/aix/Makefile, gftool/config-gfarm/sysdep/aix/config-gfarm.sysdep, gftool/config-gfarm/sysdep/default/Makefile, gftool/config-gfarm/sysdep/default/config-gfarm.sysdep, gftool/config-gfarm/sysdep/default/gfarm-slapd.in, gftool/config-gfarm/sysdep/default/gfmd.in, gftool/config-gfarm/sysdep/default/gfsd.in, gftool/config-gfarm/sysdep/freebsd/Makefile, gftool/config-gfarm/sysdep/freebsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/freebsd/gfarm-slapd.in, gftool/config-gfarm/sysdep/freebsd/gfmd.in, gftool/config-gfarm/sysdep/freebsd/gfsd.in:
	merge changes in gfarm v1 branch

	* server/gfmd/fs.c, server/gfmd/peer.c, server/gfmd/peer.h, server/gfmd/process.c, server/gfmd/process.h:
	implement GFM_PROTO_PUSH_FD, GFM_PROTO_SWAP_FD,
	and change GFM_PROTO_CLOSE_WRITE, GFM_PROTO_FSTAT, GFM_PROTO_FUTIMES,
	GFM_PROTO_FCHMOD and GFM_PROTO_FCHMOD to new protocol.

	* util/ptool/Makefile, util/ptool/gfarm-pcp, util/ptool/gfarm-prun, util/ptool/gfarm-ptool, util/ptool/pcat, util/ptool/pcp, util/ptool/pdel, util/ptool/pdiff, util/ptool/pdist, util/ptool/preplace, util/ptool/prun, server/gfmd/Makefile, server/gfmd/fs.c, server/gfmd/gfmd.c, server/gfmd/group.c, server/gfmd/host.c, server/gfmd/inode.c, server/gfmd/job.c, server/gfmd/peer.c, server/gfmd/process.c, server/gfmd/subr.c, server/gfsd/Makefile, server/gfsd/gfsd.c, server/gfsd/gfsd_subr.h, server/gfsd/loadavg.c, server/gfsd/statfs.c, util/gfront/Makefile, util/gfront/build.xml, ns/nstool/file/Makefile.in, package/redhat/gfarm-slapd, package/redhat/gfarm.spec, package/redhat/gfmd.in, package/redhat/gfsd.in, package/solaris/build, package/solaris/gfarm-client.files, package/solaris/gfarm-devel.files, package/solaris/gfarm-doc.files, package/solaris/gfarm-fsnode.files, package/solaris/gfarm-gfptool.files, package/solaris/gfarm-gfront.files, package/solaris/gfarm-libs.files, package/solaris/gfarm-server.files, package/solaris/gfmd.in, package/solaris/gfsd.in, server/Makefile, ns/nslib/Makefile.in, ns/nstool/Makefile, man/man8/Makefile, man/man8/gfmd.8, man/man8/gfsd.8, ns/Makefile, ns/gfarm/Makefile, ns/gfarm/gfarm.c, ns/gfarmd/Makefile.in, ns/gfarmd/gfarmd.c, ns/gfarmd/gfd_auth.c, ns/gfarmd/gfd_parse.c, ns/include/gfarm/Makefile, man/ja/man8/Makefile, man/ja/man8/gfmd.8, man/ja/man8/gfsd.8, man/man1/Makefile, man/man1/digest.1, man/man1/gfarm_agent.1, man/man1/gfdf.1, man/man1/gfhost.1, man/man1/gfkey.1, man/man1/gfls.1, man/man1/gfps.1, man/man1/gfreg.1, man/man1/gfrep.1, man/man1/gfrm.1, man/man1/gfrun.1, man/man1/gfwhere.1, man/man3/Makefile, man/man3/gfarm.3, man/man3/gfarm_url_fragments_replicate.3, man/man3/gfarm_url_section_replicate_from_to.3, man/man3/gfarm_url_section_replicate_to.3, man/man3/gfs_chmod.3, man/man3/gfs_pio_create.3, man/man3/gfs_pio_datasync.3, man/man3/gfs_pio_open.3, man/man3/gfs_pio_set_view_index.3, man/man3/gfs_pio_sync.3, man/man3/gfs_pio_truncate.3, man/man3/gfs_rename.3, man/man3/gfs_unlink_section.3, man/man5/Makefile, man/man5/gfarm.conf.5, man/Makefile, man/ja/Makefile, man/ja/man1/Makefile, man/ja/man1/digest.1, man/ja/man1/gfarm_agent.1, man/ja/man1/gfdf.1, man/ja/man1/gfhost.1, man/ja/man1/gfkey.1, man/ja/man1/gfls.1, man/ja/man1/gfps.1, man/ja/man1/gfreg.1, man/ja/man1/gfrep.1, man/ja/man1/gfrm.1, man/ja/man1/gfrun.1, man/ja/man1/gfwhere.1, man/ja/man3/GFARM_STRINGLIST_ELEM.3, man/ja/man3/GFARM_STRINGLIST_STRARRAY.3, man/ja/man3/Makefile, man/ja/man3/gfarm.3, man/ja/man3/gfarm_url_fragments_replicate.3, man/ja/man3/gfarm_url_section_replicate_from_to.3, man/ja/man3/gfarm_url_section_replicate_to.3, man/ja/man3/gfs_chmod.3, man/ja/man3/gfs_pio_create.3, man/ja/man3/gfs_pio_datasync.3, man/ja/man3/gfs_pio_open.3, man/ja/man3/gfs_pio_sync.3, man/ja/man3/gfs_pio_truncate.3, man/ja/man3/gfs_rename.3, man/ja/man3/gfs_unlink_section.3, man/ja/man5/Makefile, man/ja/man5/gfarm.conf.5, lib/libgfarm/gfarm/metadb_misc.c, lib/libgfarm/gfarm/metadb_pgsql.c, lib/libgfarm/gfarm/metadb_sw.c, lib/libgfarm/gfarm/metadb_sw.h, lib/libgfarm/gfarm/schedule.c, lib/libgfarm/gfarm/url.c, lib/libgfarm/gfarm/xxx_proto.c, lib/libgfarm/gfsl/Makefile, lib/libgfarm/gfsl/Makefile.inc, lib/libgfarm/gfsl/README, lib/libgfarm/gfsl/REFERENCE, lib/libgfarm/gfsl/auth.c, lib/libgfarm/gfsl/client.c, lib/libgfarm/gfsl/client2.c, lib/libgfarm/gfsl/gfarm_auth.h, lib/libgfarm/gfsl/gfarm_gsi.h, lib/libgfarm/gfsl/gfarm_secure_session.h, lib/libgfarm/gfsl/gfsl_config.h, lib/libgfarm/gfsl/gsi.c, lib/libgfarm/gfsl/scarg.c, lib/libgfarm/gfsl/scarg.h, lib/libgfarm/gfsl/scsub.c, lib/libgfarm/gfsl/server.c, lib/libgfarm/gfsl/server2.c, lib/libgfarm/gfsl/session.c, lib/libgfarm/gfsl/tcputil.c, lib/libgfarm/gfutil/Makefile, lib/libgfarm/gfutil/Makefile.inc, lib/libgfarm/gfutil/gfutil.h, lib/libgfarm/gfutil/logutil.c, makes/config.guess, makes/config.mk.in, makes/config.sub, makes/data.mk, makes/html.mk, makes/include.mk, makes/install-doc.in, makes/install-sh, makes/lib.mk, makes/ltmain.sh, makes/make.sh, makes/man.mk, makes/mkdirhier, makes/prog.mk, makes/script.mk, makes/subdir.mk, makes/var.mk, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/Makefile.inc, lib/libgfarm/gfarm/agent_client.c, lib/libgfarm/gfarm/agent_client.h, lib/libgfarm/gfarm/agent_proto.c, lib/libgfarm/gfarm/agent_proto.h, lib/libgfarm/gfarm/agent_wrap.c, lib/libgfarm/gfarm/agent_wrap.h, lib/libgfarm/gfarm/auth.h, lib/libgfarm/gfarm/auth_client.c, lib/libgfarm/gfarm/auth_client_gsi.c, lib/libgfarm/gfarm/auth_common.c, lib/libgfarm/gfarm/auth_common_gsi.c, lib/libgfarm/gfarm/auth_config.c, lib/libgfarm/gfarm/auth_gsi.h, lib/libgfarm/gfarm/auth_server.c, lib/libgfarm/gfarm/auth_server_gsi.c, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h, lib/libgfarm/gfarm/gfm_client.c, lib/libgfarm/gfarm/gfm_proto.h, lib/libgfarm/gfarm/gfpath.h, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_client_rep.c, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_exec.c, lib/libgfarm/gfarm/gfs_lock.c, lib/libgfarm/gfarm/gfs_misc.h, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_remote.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_proto.c, lib/libgfarm/gfarm/gfs_proto.h, lib/libgfarm/gfarm/gfs_unlink.c, lib/libgfarm/gfarm/glob.c, lib/libgfarm/gfarm/host.c, lib/libgfarm/gfarm/host.h, lib/libgfarm/gfarm/hostcache.c, lib/libgfarm/gfarm/hostspec.c, lib/libgfarm/gfarm/io_gfsl.c, lib/libgfarm/gfarm/io_gfsl.h, lib/libgfarm/gfarm/liberror.c, lib/libgfarm/gfarm/liberror.h, lib/libgfarm/gfarm/metadb_access.h, lib/libgfarm/gfarm/metadb_ldap.c, include/gfarm/gfarm_config.h.in, include/gfarm/gfarm_metadb.h, include/gfarm/gfarm_misc.h, include/gfarm/gfs.h, lib/Makefile, lib/gfs_hook/Makefile, lib/gfs_hook/Makefile.in, lib/gfs_hook/getcwd.c, lib/gfs_hook/hook_test.c, lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_64.c, lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_fstat.c, lib/gfs_hook/hooks_init.c, lib/gfs_hook/hooks_init_mpi.c, lib/gfs_hook/hooks_stat.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h, lib/gfs_hook/lseek64.c, lib/gfs_hook/sysdep/linux/COPYING.LIB, lib/gfs_hook/sysdep/linux/Makefile, lib/gfs_hook/sysdep/linux/Makefile.in, lib/gfs_hook/sysdep/linux/fxstat.c, lib/gfs_hook/sysdep/linux/fxstat64.c, lib/gfs_hook/sysdep/linux/getdents.c, lib/gfs_hook/sysdep/linux/getdents.h, lib/gfs_hook/sysdep/linux/getdents64.c, lib/gfs_hook/sysdep/linux/getdents_common.c, lib/gfs_hook/sysdep/linux/lxstat.c, lib/gfs_hook/sysdep/linux/lxstat64.c, lib/gfs_hook/sysdep/linux/sysdep.h, lib/gfs_hook/sysdep/linux/xstat.c, lib/gfs_hook/sysdep/linux/xstat64.c, lib/libgfarm/Makefile, gftool/gfsetdir/Makefile, gftool/gfstat/Makefile, gftool/gfwhere/Makefile, gftool/gfwhere/gfwhere.c, gftool/gfwhoami/Makefile, gftool/gfwhoami/gfwhoami.c, include/gfarm/Makefile, include/gfarm/error.h, gftool/gfrm/Makefile, gftool/gfrm/gfrm.c, gftool/gfrmdir/Makefile, gftool/gfrmdir/gfrmdir.c, gftool/gfrun/Makefile, gftool/gfrun/gfrun.c, gftool/gfsched/Makefile, gftool/gfsched/gfsched.c, gftool/gfsck/Makefile, gftool/gfsck/gfsck.c, gftool/gfpwd/Makefile, gftool/gfpwd/gfpwd.c, gftool/gfrcmd/Makefile, gftool/gfrcmd/gfrcmd.c, gftool/gfreg/Makefile, gftool/gfreg/gfreg.c, gftool/gfrep/Makefile, gftool/gfrep/gfrep.c, gftool/gfkey/Makefile, gftool/gfkey/gfkey.c, gftool/gfls/Makefile, gftool/gfls/gfls.c, gftool/gfmkdir/Makefile, gftool/gfmkdir/gfmkdir.c, gftool/gfmpirun/Makefile, gftool/gfmpirun/gfmpirun.c, gftool/gfps/Makefile, gftool/gfps/gfps.c, gftool/example/gfimport_fixed/Makefile, gftool/example/gfimport_fixed/gfimport_fixed.c, gftool/example/gfimport_text/Makefile, gftool/example/gfimport_text/gfimport_text.c, gftool/gfexec/Makefile, gftool/gfexec/gfexec.c, gftool/gfexport/Makefile, gftool/gfexport/gfexport.c, gftool/gfhost/Makefile, gftool/gfhost/gfhost.c, gftool/addpath/Makefile, gftool/config-gfarm/Makefile, gftool/config-gfarm/bdb.DB_CONFIG.in, gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/config-gfsd.in, gftool/config-gfarm/gfarm.arch.guess, gftool/config-gfarm/gfarm.conf.in, gftool/config-gfarm/gfarm.schema, gftool/config-gfarm/gfarm.sql, gftool/config-gfarm/initial.ldif.in, gftool/config-gfarm/slapd.conf-2.0.in, gftool/config-gfarm/slapd.conf-2.1.in, gftool/example/Makefile, gfptool/gfrepbe_server/Makefile, gfptool/gfrepbe_server/gfrepbe_server.c, gfptool/gfsplck/Makefile, gfptool/gfsplck/gfsplck.c, gfptool/gfwc/Makefile, gfptool/util/Makefile, gfptool/util/gfregister.in, gftool/Makefile, gfptool/gfcombine_hook/Makefile, gfptool/gfcp/Makefile, gfptool/gfcp/gfcp.c, gfptool/gfcp_hook/Makefile, gfptool/gfcp_hook/gfcp_hook.c, gfptool/gfgrep/Makefile, gfptool/gfgrep/gfgrep.c, gfptool/gfrepbe_client/Makefile, gfptool/gfrepbe_client/gfrepbe_client.c, doc/html/ja/user/Makefile, doc/html/ja/user/export-gfarm.html, doc/html/ja/user/index.html, doc/html/ja/user/nfs-gfarmfs.html, doc/html/ja/user/samba-gfarmfs.html, doc/html/ja/user/samba-hook.html, doc/html/ja/user/smboverssh.html, doc/html/pic/Makefile, doc/html/pic/gfarm-logo.gif, gfptool/Makefile, gfptool/gfcombine/Makefile, gfptool/gfcombine/gfcombine.c, doc/html/ja/ref/man1/gfarm_agent.1.html, doc/html/ja/ref/man1/gfdf.1.html, doc/html/ja/ref/man1/gfhost.1.html, doc/html/ja/ref/man1/gfkey.1.html, doc/html/ja/ref/man1/gfls.1.html, doc/html/ja/ref/man1/gfps.1.html, doc/html/ja/ref/man1/gfreg.1.html, doc/html/ja/ref/man1/gfrep.1.html, doc/html/ja/ref/man1/gfrm.1.html, doc/html/ja/ref/man1/gfrun.1.html, doc/html/ja/ref/man1/gfwhere.1.html, doc/html/ja/ref/man3/GFARM_STRINGLIST_ELEM.3.html, doc/html/ja/ref/man3/GFARM_STRINGLIST_STRARRAY.3.html, doc/html/ja/ref/man3/Makefile, doc/html/ja/ref/man3/gfarm.3.html, doc/html/ja/ref/man3/gfarm_url_fragments_replicate.3.html, doc/html/ja/ref/man3/gfarm_url_section_replicate_from_to.3.html, doc/html/ja/ref/man3/gfarm_url_section_replicate_to.3.html, doc/html/ja/ref/man3/gfs_chmod.3.html, doc/html/ja/ref/man3/gfs_pio_create.3.html, doc/html/ja/ref/man3/gfs_pio_datasync.3.html, doc/html/ja/ref/man3/gfs_pio_open.3.html, doc/html/ja/ref/man3/gfs_pio_sync.3.html, doc/html/ja/ref/man3/gfs_pio_truncate.3.html, doc/html/ja/ref/man3/gfs_rename.3.html, doc/html/ja/ref/man3/gfs_unlink_section.3.html, doc/html/ja/ref/man5/Makefile, doc/html/ja/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man8/Makefile, doc/html/ja/ref/man8/gfmd.8.html, doc/html/ja/ref/man8/gfsd.8.html, doc/html/en/ref/man5/Makefile, doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/en/ref/man8/Makefile, doc/html/en/ref/man8/gfmd.8.html, doc/html/en/ref/man8/gfsd.8.html, doc/html/en/user/Makefile, doc/html/en/user/index.html, doc/html/en/user/nfs-gfarmfs.html, doc/html/en/user/samba-gfarmfs.html, doc/html/en/user/samba-hook.html, doc/html/ja/ref/Makefile, doc/html/ja/ref/index.html, doc/html/ja/ref/man1/Makefile, doc/html/ja/ref/man1/digest.1.html, doc/html/Makefile, doc/html/en/ref/Makefile, doc/html/en/ref/index.html, doc/html/en/ref/man1/Makefile, doc/html/en/ref/man1/digest.1.html, doc/html/en/ref/man1/gfarm_agent.1.html, doc/html/en/ref/man1/gfdf.1.html, doc/html/en/ref/man1/gfhost.1.html, doc/html/en/ref/man1/gfkey.1.html, doc/html/en/ref/man1/gfls.1.html, doc/html/en/ref/man1/gfps.1.html, doc/html/en/ref/man1/gfreg.1.html, doc/html/en/ref/man1/gfrep.1.html, doc/html/en/ref/man1/gfrm.1.html, doc/html/en/ref/man1/gfrun.1.html, doc/html/en/ref/man1/gfwhere.1.html, doc/html/en/ref/man3/Makefile, doc/html/en/ref/man3/gfarm.3.html, doc/html/en/ref/man3/gfarm_url_fragments_replicate.3.html, doc/html/en/ref/man3/gfarm_url_section_replicate_from_to.3.html, doc/html/en/ref/man3/gfarm_url_section_replicate_to.3.html, doc/html/en/ref/man3/gfs_chmod.3.html, doc/html/en/ref/man3/gfs_pio_create.3.html, doc/html/en/ref/man3/gfs_pio_datasync.3.html, doc/html/en/ref/man3/gfs_pio_open.3.html, doc/html/en/ref/man3/gfs_pio_set_view_index.3.html, doc/html/en/ref/man3/gfs_pio_sync.3.html, doc/html/en/ref/man3/gfs_pio_truncate.3.html, doc/html/en/ref/man3/gfs_rename.3.html, doc/html/en/ref/man3/gfs_unlink_section.3.html, doc/html/index.html, doc/docbook/en/ref/man8/gfsd.8.docbook, doc/docbook/ja/ref/man1/Makefile.inc, doc/docbook/ja/ref/man1/digest.1.docbook, doc/docbook/ja/ref/man1/gfarm_agent.1.docbook, doc/docbook/ja/ref/man1/gfdf.1.docbook, doc/docbook/ja/ref/man1/gfhost.1.docbook, doc/docbook/ja/ref/man1/gfkey.1.docbook, doc/docbook/ja/ref/man1/gfls.1.docbook, doc/docbook/ja/ref/man1/gfps.1.docbook, doc/docbook/ja/ref/man1/gfreg.1.docbook, doc/docbook/ja/ref/man1/gfrep.1.docbook, doc/docbook/ja/ref/man1/gfrm.1.docbook, doc/docbook/ja/ref/man1/gfrun.1.docbook, doc/docbook/ja/ref/man1/gfwhere.1.docbook, doc/docbook/ja/ref/man3/GFARM_STRINGLIST_ELEM.3.docbook, doc/docbook/ja/ref/man3/GFARM_STRINGLIST_STRARRAY.3.docbook, doc/docbook/ja/ref/man3/Makefile.inc, doc/docbook/ja/ref/man3/gfarm.3.docbook, doc/docbook/ja/ref/man3/gfarm_url_fragments_replicate.3.docbook, doc/docbook/ja/ref/man3/gfarm_url_section_replicate_from_to.3.docbook, doc/docbook/ja/ref/man3/gfarm_url_section_replicate_to.3.docbook, doc/docbook/ja/ref/man3/gfs_chmod.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_create.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_datasync.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_open.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_sync.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_truncate.3.docbook, doc/docbook/ja/ref/man3/gfs_rename.3.docbook, doc/docbook/ja/ref/man3/gfs_unlink_section.3.docbook, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man8/gfmd.8.docbook, doc/docbook/ja/ref/man8/gfsd.8.docbook, doc/docbook/en/ref/man1/Makefile.inc, doc/docbook/en/ref/man1/digest.1.docbook, doc/docbook/en/ref/man1/gfarm_agent.1.docbook, doc/docbook/en/ref/man1/gfdf.1.docbook, doc/docbook/en/ref/man1/gfhost.1.docbook, doc/docbook/en/ref/man1/gfkey.1.docbook, doc/docbook/en/ref/man1/gfls.1.docbook, doc/docbook/en/ref/man1/gfps.1.docbook, doc/docbook/en/ref/man1/gfreg.1.docbook, doc/docbook/en/ref/man1/gfrep.1.docbook, doc/docbook/en/ref/man1/gfrm.1.docbook, doc/docbook/en/ref/man1/gfrun.1.docbook, doc/docbook/en/ref/man1/gfwhere.1.docbook, doc/docbook/en/ref/man3/Makefile.inc, doc/docbook/en/ref/man3/gfarm.3.docbook, doc/docbook/en/ref/man3/gfarm_url_fragments_replicate.3.docbook, doc/docbook/en/ref/man3/gfarm_url_section_replicate_from_to.3.docbook, doc/docbook/en/ref/man3/gfarm_url_section_replicate_to.3.docbook, doc/docbook/en/ref/man3/gfs_chmod.3.docbook, doc/docbook/en/ref/man3/gfs_pio_create.3.docbook, doc/docbook/en/ref/man3/gfs_pio_datasync.3.docbook, doc/docbook/en/ref/man3/gfs_pio_open.3.docbook, doc/docbook/en/ref/man3/gfs_pio_set_view_index.3.docbook, doc/docbook/en/ref/man3/gfs_pio_sync.3.docbook, doc/docbook/en/ref/man3/gfs_pio_truncate.3.docbook, doc/docbook/en/ref/man3/gfs_rename.3.docbook, doc/docbook/en/ref/man3/gfs_unlink_section.3.docbook, doc/docbook/en/ref/man5/gfarm.conf.5.docbook, doc/docbook/en/ref/man8/gfmd.8.docbook, debian/README.Debian, debian/changelog, debian/control, debian/control.common, debian/control.gsi, debian/control.non-gsi, debian/copyright, debian/gfarm-client.install, debian/gfarm-client.links, debian/gfarm-client.manpages, debian/gfarm-doc.examples, debian/gfarm-doc.install, debian/gfarm-gfptool.install, debian/gfarm-gfront.manpages, debian/gfarm-slapd.default, debian/gfarm-slapd.init, debian/gfmd-gsi.postinst, debian/gfmd-gsi.postrm, debian/gfmd-gsi.prerm, debian/gfmd.conffiles, debian/gfmd.docs, debian/gfmd.examples, debian/gfmd.init, debian/gfmd.install, debian/gfmd.manpages, debian/gfmd.postinst, debian/gfsd-gsi.postinst, debian/gfsd-gsi.postrm, debian/gfsd-gsi.prerm, debian/gfsd.init, debian/gfsd.install, debian/gfsd.postinst, debian/libgfarm-dev.install, debian/libgfarm-dev.manpages, debian/libgfarm.install, debian/rules, doc/GUIDE.ja, doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja, doc/Makefile, doc/README.hook.en, doc/README.hook.ja, doc/conf/gfarm.schema, bench/thput-fsstripe/Makefile, bench/thput-fsys/Makefile, bench/thput-gfpio/Makefile, bench/thput-gfpio/thput-gfpio.c, bench/thput-pvfs/Makefile, bench/Makefile, bench/bwlat-syscache/Makefile, bench/nconnect/Makefile, configure.ac, configure.in, install-sh, ChangeLog, INSTALL.RPM.en, INSTALL.RPM.ja, INSTALL.en, INSTALL.ja, LICENSE, Makefile.in, RELNOTES, acconfig.h, aclocal.m4, config.guess, config.sub, configure:
	merge changes in gfarm v1 branch

2006-01-06  Noriyuki Soda  <soda@sra.co.jp>

	* include/gfarm/gfarm_config.h.in: forgot to commit regenerated file

2005-12-28  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_dir.c:
	change directory cache implementation from hash to red-black tree

2005-12-28  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_pio_misc.c:
	display verbose warning message using new gflog_warning interface.

2005-12-21  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_misc.c: english change in a comment

2005-12-21  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_misc.h, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_section.c:
	gfs_chmod() changes section name in section view context in case of file's
	executabilty changes

2005-12-21  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/metadb_ldap.c:
	disable KRB5 to avoid possible conflict with GSI (not tested)

	* lib/libgfarm/gfarm/gfs_pio_section.c:
	do not set the path info when the corresponding physical file fails to be opened. [Bugzilla-ja #47]

	* util/ptool/gfarm-ptool:
	allow PRUN_RSH="ssh -t" when stdin is a terminal.

2005-12-16  Noriyuki Soda  <soda@sra.co.jp>

	* configure: regen

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/auth_common_gsi.c, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h, lib/libgfarm/gfarm/gfpath.h, lib/libgfarm/gfarm/metadb_access.h, lib/libgfarm/gfarm/metadb_ldap.c, lib/libgfarm/gfarm/metadb_pgsql.c, lib/libgfarm/gfarm/metadb_sw.c, configure.ac:
	add the following configurations to gfarm.conf
	- PostgreSQL related options
	- SSL options for OpenLDAP (this doesn't really work yet)

2005-12-12  Takuya Ishibashi  <takuya@soum.co.jp>

	* doc/html/ja/user/smboverssh.html:
	modify explanation about IP address.

2005-12-09  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_dir.c: minor cleanup:
	remove "#if 0" which became obsolete by the change in revision 1.31

	* lib/libgfarm/gfarm/gfs_dir.c:
	minor cleanup: don't use "gfarm_inline", but use "inline"

2005-12-08  Takuya Ishibashi  <takuya@soum.co.jp>

	* util/gfront/src/gfront/ChangeLookAndFeel.java, util/gfront/src/gfront/CommandOutput.java, util/gfront/src/gfront/DirectoryTreeNode.java, util/gfront/src/gfront/FileTableModel.java, util/gfront/src/gfront/FragmentEditor.java, util/gfront/src/gfront/GFAction.java, util/gfront/src/gfront/GFAppConst.java, util/gfront/src/gfront/GFLSParser.java, util/gfront/src/gfront/GFWHEREParser.java, util/gfront/src/gfront/GFWHEREParser2.java, util/gfront/src/gfront/GFront.java, util/gfront/src/gfront/GFrontApp.java, util/gfront/src/gfront/GFrontCommon.java, util/gfront/src/gfront/GFrontConst.java, util/gfront/src/gfront/GfhostList.java, util/gfront/src/gfront/ReadOnlyTableModel.java, util/gfront/src/gfront/RightClickDirTree.java, util/gfront/src/gfront/RightClickTable.java, package/solaris/build, package/solaris/gfarm-client.files, package/solaris/gfarm-fsnode.files, package/solaris/gfarm-libs.files, package/solaris/gfarm-server.files, package/solaris/gfmd.in, package/solaris/gfsd.in, server/gfmd/gfmd.c, server/gfsd/gfsd.c, server/gfsd/loadavg.c, util/gfront/Makefile, util/gfront/build.xml, package/freebsd/Makefile, package/freebsd/files/gfmd.sh, package/freebsd/files/gfsd.sh, package/freebsd/pkg-descr, package/freebsd/pkg-plist, package/pkgsrc/DESCR, package/pkgsrc/Makefile, package/pkgsrc/PLIST, package/pkgsrc/files/gfmd.sh, package/pkgsrc/files/gfsd.sh, package/redhat/gfarm-slapd, package/redhat/gfarm.patch, package/redhat/gfarm.spec, package/redhat/gfmd.in, package/redhat/gfsd.in, ns/gfarm/Makefile, ns/gfarm/gfarm.c, ns/gfarmd/Makefile.in, ns/gfarmd/gfarmd.c, ns/gfarmd/gfd_auth.c, ns/gfarmd/gfd_parse.c, ns/nslib/Makefile.in, ns/nstool/file/Makefile.in, man/ja/man8/gfmd.8, man/ja/man8/gfsd.8, man/man1/digest.1, man/man1/gfhost.1, man/man1/gfkey.1, man/man1/gfps.1, man/man1/gfreg.1, man/man1/gfrep.1, man/man1/gfrm.1, man/man3/gfarm.3, man/man3/gfarm_url_fragments_replicate.3, man/man3/gfarm_url_section_replicate_from_to.3, man/man3/gfarm_url_section_replicate_to.3, man/man3/gfs_pio_datasync.3, man/man3/gfs_pio_set_view_index.3, man/man3/gfs_pio_sync.3, man/man3/gfs_unlink_section.3, man/man5/gfarm.conf.5, man/man8/gfmd.8, man/man8/gfsd.8, makes/config.guess, makes/config.mk.in, makes/config.sub, makes/data.mk, makes/html.mk, makes/include.mk, makes/install-doc.in, makes/lib.mk, makes/ltmain.sh, makes/man.mk, makes/mkdirhier, makes/prog.mk, makes/script.mk, makes/var.mk, man/ja/man1/digest.1, man/ja/man1/gfhost.1, man/ja/man1/gfkey.1, man/ja/man1/gfps.1, man/ja/man1/gfreg.1, man/ja/man1/gfrep.1, man/ja/man1/gfrm.1, man/ja/man3/GFARM_STRINGLIST_ELEM.3, man/ja/man3/GFARM_STRINGLIST_STRARRAY.3, man/ja/man3/gfarm.3, man/ja/man3/gfarm_url_fragments_replicate.3, man/ja/man3/gfarm_url_section_replicate_from_to.3, man/ja/man3/gfarm_url_section_replicate_to.3, man/ja/man3/gfs_pio_datasync.3, man/ja/man3/gfs_pio_sync.3, man/ja/man3/gfs_unlink_section.3, man/ja/man5/gfarm.conf.5, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/agent_client.c, lib/libgfarm/gfarm/agent_client.h, lib/libgfarm/gfarm/agent_proto.c, lib/libgfarm/gfarm/agent_proto.h, lib/libgfarm/gfarm/agent_wrap.c, lib/libgfarm/gfarm/agent_wrap.h, lib/libgfarm/gfarm/auth.h, lib/libgfarm/gfarm/auth_client.c, lib/libgfarm/gfarm/auth_client_gsi.c, lib/libgfarm/gfarm/auth_common.c, lib/libgfarm/gfarm/auth_common_gsi.c, lib/libgfarm/gfarm/auth_server.c, lib/libgfarm/gfarm/auth_server_gsi.c, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h, lib/libgfarm/gfarm/dircache.h, lib/libgfarm/gfarm/error.c, lib/libgfarm/gfarm/gfm_client.c, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_client_rep.c, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_exec.c, lib/libgfarm/gfarm/gfs_misc.h, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_global_scramble.c, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_remote.c, lib/libgfarm/gfarm/gfs_pio_scramble.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_proto.h, lib/libgfarm/gfarm/gfs_unlink.c, lib/libgfarm/gfarm/glob.c, lib/libgfarm/gfarm/host.c, lib/libgfarm/gfarm/host.h, lib/libgfarm/gfarm/hostcache.c, lib/libgfarm/gfarm/hostspec.c, lib/libgfarm/gfarm/io_gfsl.c, lib/libgfarm/gfarm/io_gfsl.h, lib/libgfarm/gfarm/metadb_access.h, lib/libgfarm/gfarm/metadb_ldap.c, lib/libgfarm/gfarm/metadb_misc.c, lib/libgfarm/gfarm/metadb_pgsql.c, lib/libgfarm/gfarm/metadb_sw.c, lib/libgfarm/gfarm/metadb_sw.h, lib/libgfarm/gfarm/schedule.c, lib/libgfarm/gfarm/url.c, lib/libgfarm/gfarm/xxx_proto.c, lib/libgfarm/gfsl/Makefile, lib/libgfarm/gfsl/auth.c, lib/libgfarm/gfsl/gfsl_config.h, lib/libgfarm/gfsl/gsi.c, lib/libgfarm/gfsl/server.c, lib/libgfarm/gfsl/server2.c, lib/libgfarm/gfsl/session.c, lib/libgfarm/gfsl/tcputil.c, lib/libgfarm/gfutil/Makefile, lib/libgfarm/gfutil/gfutil.h, lib/libgfarm/gfutil/logutil.c, include/gfarm/gfarm_config.h.in, include/gfarm/gfarm_error.h, include/gfarm/gfarm_metadb.h, include/gfarm/gfarm_misc.h, include/gfarm/gfs.h, lib/gfs_hook/Makefile, lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_64.c, lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_fstat.c, lib/gfs_hook/hooks_init.c, lib/gfs_hook/hooks_stat.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h, lib/gfs_hook/sysdep/linux/COPYING.LIB, lib/gfs_hook/sysdep/linux/Makefile, lib/gfs_hook/sysdep/linux/fxstat64.c, lib/gfs_hook/sysdep/linux/getdents.c, lib/gfs_hook/sysdep/linux/lxstat64.c, lib/gfs_hook/sysdep/linux/xstat64.c, lib/libgfarm/Makefile, gftool/gfrmdir/gfrmdir.c, gftool/gfrun/Makefile, gftool/gfrun/gfrun.c, gftool/gfsck/gfsck.c, gftool/gfwhoami/gfwhoami.c, gftool/gfreg/gfreg.c, gftool/gfrep/Makefile, gftool/gfrep/gfrep.c, gftool/gfrm/gfrm.c, gftool/gfmkdir/gfmkdir.c, gftool/gfmpirun/gfmpirun.c, gftool/gfps/Makefile, gftool/gfps/gfps.c, gftool/gfpwd/gfpwd.c, gftool/gfarm_agent/Makefile, gftool/gfarm_agent/agent_thr.c, gftool/gfarm_agent/gfarm_agent.c, gftool/gfdf/gfdf.c, gftool/gfexec/gfexec.c, gftool/gfkey/gfkey.c, gftool/gfls/gfls.c, gftool/config-gfarm/sysdep/netbsd/Makefile, gftool/config-gfarm/sysdep/netbsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/netbsd/gfarm-slapd.in, gftool/config-gfarm/sysdep/netbsd/gfmd.in, gftool/config-gfarm/sysdep/netbsd/gfsd.in, gftool/config-gfarm/sysdep/osf1/Makefile, gftool/config-gfarm/sysdep/osf1/config-gfarm.sysdep, gftool/config-gfarm/sysdep/solaris/Makefile, gftool/config-gfarm/sysdep/solaris/config-gfarm.sysdep, gftool/config-gfarm/sysdep/linux/Makefile, gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/linux/debian/Makefile, gftool/config-gfarm/sysdep/linux/debian/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/debian/gfmd.in, gftool/config-gfarm/sysdep/linux/debian/gfsd.in, gftool/config-gfarm/sysdep/linux/default/Makefile, gftool/config-gfarm/sysdep/linux/redhat/Makefile, gftool/config-gfarm/sysdep/linux/redhat/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/redhat/gfmd.in, gftool/config-gfarm/sysdep/linux/redhat/gfsd.in, gftool/config-gfarm/sysdep/linux/suse/Makefile, gftool/config-gfarm/sysdep/linux/suse/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/suse/gfmd.in, gftool/config-gfarm/sysdep/linux/suse/gfsd.in, gftool/config-gfarm/Makefile, gftool/config-gfarm/bdb.DB_CONFIG.in, gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/config-gfsd.in, gftool/config-gfarm/gfarm.arch.guess, gftool/config-gfarm/gfarm.conf.in, gftool/config-gfarm/gfarm.schema, gftool/config-gfarm/gfarm.sql, gftool/config-gfarm/initial.ldif.in, gftool/config-gfarm/slapd.conf-2.0.in, gftool/config-gfarm/slapd.conf-2.1.in, gftool/config-gfarm/sysdep/aix/Makefile, gftool/config-gfarm/sysdep/aix/config-gfarm.sysdep, gftool/config-gfarm/sysdep/default/Makefile, gftool/config-gfarm/sysdep/default/config-gfarm.sysdep, gftool/config-gfarm/sysdep/default/gfarm-slapd.in, gftool/config-gfarm/sysdep/default/gfmd.in, gftool/config-gfarm/sysdep/default/gfsd.in, gftool/config-gfarm/sysdep/freebsd/Makefile, gftool/config-gfarm/sysdep/freebsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/freebsd/gfarm-slapd.in, gftool/config-gfarm/sysdep/freebsd/gfmd.in, gftool/config-gfarm/sysdep/freebsd/gfsd.in, gftool/config-gfarm/sysdep/hpux/Makefile, gftool/config-gfarm/sysdep/hpux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/hpux/getmemsize.c, doc/html/pic/Makefile, doc/html/pic/gfarm-logo.gif, gfptool/gfcp_hook/gfcp_hook.c, gfptool/gfrepbe_client/gfrepbe_client.c, gfptool/gfsplck/Makefile, gfptool/gfsplck/gfsplck.c, gftool/Makefile, doc/html/ja/ref/man3/GFARM_STRINGLIST_ELEM.3.html, doc/html/ja/ref/man3/GFARM_STRINGLIST_STRARRAY.3.html, doc/html/ja/ref/man3/gfarm.3.html, doc/html/ja/ref/man3/gfarm_url_fragments_replicate.3.html, doc/html/ja/ref/man3/gfarm_url_section_replicate_from_to.3.html, doc/html/ja/ref/man3/gfarm_url_section_replicate_to.3.html, doc/html/ja/ref/man3/gfs_pio_datasync.3.html, doc/html/ja/ref/man3/gfs_pio_sync.3.html, doc/html/ja/ref/man3/gfs_unlink_section.3.html, doc/html/ja/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man8/gfmd.8.html, doc/html/ja/ref/man8/gfsd.8.html, doc/html/ja/user/Makefile, doc/html/ja/user/export-gfarm.html, doc/html/ja/user/index.html, doc/html/ja/user/nfs-gfarmfs.html, doc/html/ja/user/samba-gfarmfs.html, doc/html/ja/user/samba-hook.html, doc/html/ja/user/smboverssh.html, doc/html/en/ref/man8/gfmd.8.html, doc/html/en/ref/man8/gfsd.8.html, doc/html/en/user/Makefile, doc/html/en/user/index.html, doc/html/en/user/samba-gfarmfs.html, doc/html/en/user/samba-hook.html, doc/html/ja/ref/index.html, doc/html/ja/ref/man1/digest.1.html, doc/html/ja/ref/man1/gfhost.1.html, doc/html/ja/ref/man1/gfkey.1.html, doc/html/ja/ref/man1/gfps.1.html, doc/html/ja/ref/man1/gfreg.1.html, doc/html/ja/ref/man1/gfrep.1.html, doc/html/ja/ref/man1/gfrm.1.html, doc/html/Makefile, doc/html/en/ref/index.html, doc/html/en/ref/man1/digest.1.html, doc/html/en/ref/man1/gfhost.1.html, doc/html/en/ref/man1/gfkey.1.html, doc/html/en/ref/man1/gfps.1.html, doc/html/en/ref/man1/gfreg.1.html, doc/html/en/ref/man1/gfrep.1.html, doc/html/en/ref/man1/gfrm.1.html, doc/html/en/ref/man3/gfarm.3.html, doc/html/en/ref/man3/gfarm_url_fragments_replicate.3.html, doc/html/en/ref/man3/gfarm_url_section_replicate_from_to.3.html, doc/html/en/ref/man3/gfarm_url_section_replicate_to.3.html, doc/html/en/ref/man3/gfs_pio_datasync.3.html, doc/html/en/ref/man3/gfs_pio_set_view_index.3.html, doc/html/en/ref/man3/gfs_pio_sync.3.html, doc/html/en/ref/man3/gfs_unlink_section.3.html, doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/index.html, doc/docbook/en/ref/man8/gfmd.8.docbook, doc/docbook/en/ref/man8/gfsd.8.docbook, doc/docbook/ja/ref/man1/Makefile.inc, doc/docbook/ja/ref/man1/digest.1.docbook, doc/docbook/ja/ref/man1/gfhost.1.docbook, doc/docbook/ja/ref/man1/gfkey.1.docbook, doc/docbook/ja/ref/man1/gfps.1.docbook, doc/docbook/ja/ref/man1/gfreg.1.docbook, doc/docbook/ja/ref/man1/gfrep.1.docbook, doc/docbook/ja/ref/man1/gfrm.1.docbook, doc/docbook/ja/ref/man3/GFARM_STRINGLIST_ELEM.3.docbook, doc/docbook/ja/ref/man3/GFARM_STRINGLIST_STRARRAY.3.docbook, doc/docbook/ja/ref/man3/Makefile.inc, doc/docbook/ja/ref/man3/gfarm.3.docbook, doc/docbook/ja/ref/man3/gfarm_url_fragments_replicate.3.docbook, doc/docbook/ja/ref/man3/gfarm_url_section_replicate_from_to.3.docbook, doc/docbook/ja/ref/man3/gfarm_url_section_replicate_to.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_datasync.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_sync.3.docbook, doc/docbook/ja/ref/man3/gfs_unlink_section.3.docbook, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man8/gfmd.8.docbook, doc/docbook/ja/ref/man8/gfsd.8.docbook, doc/conf/gfarm.schema, doc/docbook/en/ref/man1/Makefile.inc, doc/docbook/en/ref/man1/digest.1.docbook, doc/docbook/en/ref/man1/gfhost.1.docbook, doc/docbook/en/ref/man1/gfkey.1.docbook, doc/docbook/en/ref/man1/gfps.1.docbook, doc/docbook/en/ref/man1/gfreg.1.docbook, doc/docbook/en/ref/man1/gfrep.1.docbook, doc/docbook/en/ref/man1/gfrm.1.docbook, doc/docbook/en/ref/man3/Makefile.inc, doc/docbook/en/ref/man3/gfarm.3.docbook, doc/docbook/en/ref/man3/gfarm_url_fragments_replicate.3.docbook, doc/docbook/en/ref/man3/gfarm_url_section_replicate_from_to.3.docbook, doc/docbook/en/ref/man3/gfarm_url_section_replicate_to.3.docbook, doc/docbook/en/ref/man3/gfs_pio_datasync.3.docbook, doc/docbook/en/ref/man3/gfs_pio_set_view_index.3.docbook, doc/docbook/en/ref/man3/gfs_pio_sync.3.docbook, doc/docbook/en/ref/man3/gfs_unlink_section.3.docbook, doc/docbook/en/ref/man5/gfarm.conf.5.docbook, bench/fsstress/Makefile, bench/fsstress/README, bench/fsstress/dotest.sample, bench/fsstress/fsstress.c, bench/fsstress/global.h, bench/fsstress/xfscompat.h, debian/README.Debian, debian/changelog, debian/config-gfarm, debian/config-gfsd, debian/control, debian/control.common, debian/control.gsi, debian/control.non-gsi, debian/gfarm-client.install, debian/gfarm-client.links, debian/gfarm-client.manpages, debian/gfarm-doc.install, debian/gfarm-slapd.init, debian/gfmd.conffiles, debian/gfmd.init, debian/gfmd.install, debian/gfmd.postinst, debian/gfsd.init, debian/gfsd.install, debian/gfsd.postinst, debian/libgfarm-dev.install, debian/libgfarm-dev.manpages, debian/rules, debian/slapd.conf-2.1.in, doc/GUIDE.ja, doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja, doc/Makefile, doc/README.hook.en, doc/README.hook.ja, configure.ac, ChangeLog, INSTALL.RPM.en, INSTALL.RPM.ja, INSTALL.en, INSTALL.ja, LICENSE, Makefile.in, RELNOTES, aclocal.m4, configure:
	merge changes of gfarm_v1 main trunk on 29 November, 2005.

2005-12-07  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_dir.c: fix bonehead in previous my commit.
	this one should work with USE_HASH=1 (i.e. hash) and 0 (redblack tree).

2005-12-07  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_dir.c:
	revert to 1.64 because compile errors occur if USE_HASH = 1

2005-12-07  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/README.hook.en, doc/README.hook.ja:
	update Solaris section; use LD_PRELOAD_32 for now

2005-12-06  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfutil/tree.h:
	splay tree and red-black tree macro library by Niels Provos, from NetBSD 2.0

	* lib/libgfarm/gfarm/gfs_dir.c:
	add redblack tree version of directory cache implementation.
	currently disabled by default (need to "#define USE_HASH 0" to use this)

2005-12-06  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/gfarm.spec, package/freebsd/pkg-plist, package/pkgsrc/PLIST:
	add en/user/nfs-gfarmfs.html

	* doc/html/ja/user/nfs-gfarmfs.html, doc/html/en/user/index.html, doc/html/en/user/nfs-gfarmfs.html:
	add nfs-gfarmfs in Engligh

2005-12-05  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/html/ja/ref/man1/gfrep.1.html, man/ja/man1/gfrep.1: regen

	* doc/docbook/ja/ref/man1/gfrep.1.docbook:
	correct description of combination -N and -S and/or -D options in -N section

2005-12-02  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfrep/gfrep.c:
	- fix the bug that gfrep -N creates more number of replicas than specified
	  ref. http://datafarm.apgrid.org/bugzilla-ja/show_bug.cgi?id=44
	- replicates to -D(estination) domain which is properly included in
	  -S(ource) domain, this did not works in previous revision
	- selects and sechdules hosts once even if multiple files and/or
	  directories are specified for arguments, while does the number of arguments
	  in previous revision
	- avoid selecting unavailable host as source by scheduling source hosts

2005-12-01  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/solaris/gfarm-client.files, debian/gfarm-client.install, package/freebsd/pkg-plist, package/pkgsrc/PLIST, package/redhat/gfarm.spec:
	add gfarm-{pcp,prun,ptool}
	add smboverssh.html

	* util/ptool/Makefile, util/ptool/gfarm-pcp, util/ptool/gfarm-prun, util/ptool/gfarm-ptool, util/ptool/pcat, util/ptool/pcp, util/ptool/pdel, util/ptool/pdiff, util/ptool/pdist, util/ptool/preplace, util/ptool/prun:
	rename ptools.  now gfarm-prun and gfarm-pcp.
	gfarm-prun: add new option -stdin, which specifies a stdin file.  For example,
		gfarm-prun -stdin input1 -stdin input2 -p "cat > output"
		tar cf - dir1 dir2 | gfarm-prun -stdin - tar xfp -
	This makes pcat, pdel, pdiff, pdist, preplace obsolete.

2005-11-30  Noriyuki Soda  <soda@sra.co.jp>

	* configure, configure.ac: update timestamp of this file

	* configure.ac, configure:
	slightly modify OpenSSL sanity check which was added in previous revision:
	- display "checking openssl..." message at correct timing
	- check OpenSSL before OpenLDAP and PostgreSQL
	  XXX should add ${openssl_libs} option to $LIBS to see OpenLDAP & PostgreSQL?

	* configure: regen

	* configure.ac:
	add sanity check whether OpenSSL is really usable or not

2005-11-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_pio_section.c (gfs_pio_set_view_section):
	update metadata after a physical file is successfully opened. [Bugzilla-ja #47]

	* lib/libgfarm/gfarm/gfs_unlink.c (gfs_unlink_replica):
	do not return error when at least one file replica is unlinked.

2005-11-22  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/hostcache.c: reduce memory consumption

	* lib/gfs_hook/hooks.c: fix typo in debug print

	* lib/libgfarm/gfarm/gfs_client.h:
	delete useless declaration warned by Solaris C compiler

	* lib/libgfarm/gfarm/agent_wrap.c (gfarm_host_info_free):
	fix return value

2005-11-21  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/hostcache.c, gftool/gfarm_agent/gfarm_agent.c, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/agent_wrap.c, lib/libgfarm/gfarm/agent_wrap.h, lib/libgfarm/gfarm/metadb_access.h, lib/libgfarm/gfarm/metadb_ldap.c, lib/libgfarm/gfarm/metadb_sw.c:
	add host information cache
	timeout is 10 min

	* lib/libgfarm/gfarm/host.c (gfarm_host_is_local):
	fix memory corruption

2005-11-06  Takuya Ishibashi  <takuya@soum.co.jp>

	* doc/html/ja/user/Makefile, doc/html/ja/user/index.html, doc/html/ja/user/smboverssh.html (appendix):
	How to access Samba or Windows file sharing over SSH from Windows client.

2005-11-05  Takuya Ishibashi  <takuya@soum.co.jp>

	* doc/html/en/user/samba-hook.html, doc/html/ja/user/samba-hook.html:
	must use Samba version 3.X for samba-hook, because 'kernel change notify' setting is not use on Samba version 2.X.

2005-11-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfptool/gfsplck/gfsplck.c:
	fix a bug such that files with no fragment information cannot be fixed.

2005-11-03  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	add section 2.7 "Operation not permitted" error happens when accessing or creating a file having execution bits.
	change the prompt from '%' to '$'.

2005-11-01  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* INSTALL.ja: add PostgreSQL server setting

2005-10-27  Noriyuki Soda  <soda@sra.co.jp>

	* man/ja/man1/gfrep.1, man/man1/gfrep.1, doc/html/en/ref/man1/gfrep.1.html, doc/html/ja/ref/man1/gfrep.1.html:
	regen

	* doc/docbook/en/ref/man1/gfrep.1.docbook, doc/docbook/ja/ref/man1/gfrep.1.docbook:
	mention -m and -v option

	* gftool/gfrep/gfrep.c: merge changes made in SC2004.
	this adds -m (migrate/move) option to gfrep command,
	but this change is not complete, and limited to only -H/-P/-d operations.

	* lib/libgfarm/gfarm/error.c, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_exec.c, lib/libgfarm/gfarm/gfs_misc.h, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_remote.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/url.c:
	- merge replication related changes made in SC2004,
	  to support netparam at on-demand replication.

	  this makes on-demand replication invoke new gfsd process,
	  instead of replicating by the client process itself.

	  this change integrates similar fault-tolerant processing in
	  gfs_pio_section.c:replicate_section_to_local() and
	  gfarm_url_execfile_replicate_to_local() into
	  gfs_pio_misc.c:lock_local_file_section().

	  this also integrates nearly all st_mode fabrication at non-owner replication
	  into gfarm_fabricate_mode_for_replication() function,
	  except gfptool/gfrepbe_client/gfrepbe_client.c:session().

	- implement GFARM_ERR_INCONSISTENT_RECOVERABLE and retrying on
	  gfarm_url_section_replicate_to(),
	  gfarm_url_section_migrate_to(),
	  gfarm_url_program_deliver(),
	  and gfs_exec().

2005-10-25  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/metadb_pgsql.c: pluged a memory leak

	* lib/libgfarm/gfarm/metadb_pgsql.c: - implement following functions
	    gfarm_pgsql_file_section_copy_info_get
	    gfarm_pgsql_file_section_copy_info_set
	    gfarm_pgsql_file_section_copy_info_remove
	    gfarm_pgsql_file_section_copy_info_get_all_by_file
	    gfarm_pgsql_file_section_copy_info_get_all_by_section
	    gfarm_pgsql_file_section_copy_info_get_all_by_host

	- fix bugs in gfarm_pgsql_*_info_get(_all) don't clear info before set

2005-10-24  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* gftool/gfrep/gfrep.c: added more verbose output

2005-10-24  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/metadb_pgsql.c: implement following functions
	    gfarm_pgsql_path_info_get
	    gfarm_pgsql_path_info_set
	    gfarm_pgsql_path_info_replace
	    gfarm_pgsql_path_info_remove,
	    gfarm_pgsql_path_info_get_all_foreach
	    gfarm_pgsql_file_section_info_get
	    gfarm_pgsql_file_section_info_set
	    gfarm_pgsql_file_section_info_replace
	    gfarm_pgsql_file_section_info_remove
	    gfarm_pgsql_file_section_info_get_all_by_file

2005-10-21  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/control, debian/control.gsi, debian/control.non-gsi:
	added support architecture amd64

2005-10-20  Noriyuki Soda  <soda@sra.co.jp>

	* INSTALL.en: typo

	* INSTALL.en, INSTALL.ja: always use "#" as root prompt

	* INSTALL.en: translate recent changes into English

	* INSTALL.ja: somewhat simplify preivous change,
	because postgresql_user and postgresql_password must be specified
	nearly always, actually.

	* lib/libgfarm/gfarm/agent_wrap.c:
	add sanity check at initialization of agent socket

	* lib/libgfarm/gfarm/metadb_pgsql.c:
	call gfarm_pgsql_check() at every entry point of PostgreSQL interface functions
	to initialize this module.

2005-10-20  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* doc/html/index.html: pointed japanese webpase to index.ja.html

2005-10-19  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/config-gfarm/sysdep/linux/debian/gfarm-slapd.in:
	do not abort, even if /etc/default/gfarm-slapd doesn't exist.
	from Yamamoto Naotaka-san, in [gfarm-cvs:06424]

2005-10-19  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/gfarm-slapd.init:
	don't exit if /etc/default/gfarm-slapd dose not exist

2005-10-14  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* INSTALL.ja:
	revise parameter sepcification in ~/.gfarmrc and gfarm.conf file

	* lib/libgfarm/gfarm/metadb_pgsql.c:
	implement gfarm_pgsql_host_info_replace()

	* lib/libgfarm/gfarm/metadb_pgsql.c:
	implement gfarm_pgsql_host_info_set()

2005-10-13  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/metadb_pgsql.c: implement following functions
	  gfarm_pgsql_host_info_get_by_name_alias
	  gfarm_pgsql_host_info_get_allhost_by_architecture

	* lib/libgfarm/gfarm/metadb_pgsql.c: - implement following functions,
	    gfarm_pgsql_initialize
	    gfarm_pgsql_terminate
	    gfarm_pgsql_host_info_get
	    gfarm_pgsql_host_info_remove_hostaliases
	    gfarm_pgsql_host_info_remove
	    gfarm_pgsql_host_info_get_all()
	  but subfunctions gfarm_hton64() and gfarm_ntoh64() are coded by soda-san.

	- gfarm_pgsql_initialize() defines and sets values to some global variables
	  for unit test.

	* gftool/config-gfarm/gfarm.sql:
	HostAliases: add "REFERENCES Host(hostname) ON DELETE CASCADE" on hostname column

2005-10-11  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* INSTALL.RPM.en, INSTALL.RPM.ja: add librt-not-hidden.so in LD_PRELOAD

2005-10-10  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/html/en/ref/man1/gfps.1.html, doc/html/ja/ref/man1/gfps.1.html, man/ja/man1/gfps.1, man/man1/gfps.1:
	regen

	* doc/docbook/en/ref/man1/gfps.1.docbook, doc/docbook/ja/ref/man1/gfps.1.docbook:
	add -v option

	* gftool/gfps/Makefile, gftool/gfps/gfps.c:
	add -v option to display GSI authentication error

2005-10-07  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/config-gfarm/gfarm.sql:
	HostAliases: add index on hostname column

	* gftool/config-gfarm/gfarm.sql:
	HostAliases: remove UNIQUE constraint from hostname column

2005-10-06  Noriyuki Soda  <soda@sra.co.jp>

	* INSTALL.RPM.en, INSTALL.RPM.ja, INSTALL.en, INSTALL.ja:
	add an example of authentication failure

	* INSTALL.RPM.en, INSTALL.RPM.ja, INSTALL.en, INSTALL.ja:
	use same hostnames between INSTALL.{en,ja} and INSTALL.RPM.{en,ja}

	* INSTALL.en:
	apply the following changes in revision 1.68 and 1.69 of INSTALL.ja:
	- add paramteters in gfarm.conf and ~/.gfarmrc using PostgreSQL
	- add sample PostgreSQL database file directory
	- change sample metadata server host name

	* INSTALL.ja: slight wording change

	* INSTALL.ja:
	- drop OpenLDAP 2.0.x from supported version, and describe the reason
	- change "Gfarm version 1.0.X" to "Gfarm"
	- fix typo

	* INSTALL.en:
	- drop OpenLDAP 2.0.x from supported version, and describe the reason
	- change "Gfarm version 1.0.X" to "Gfarm"

2005-10-06  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* INSTALL.ja: - add sample PostgreSQL database file directory
	- change sample server host name

	* INSTALL.ja:
	add paramteters in gfarm.conf and ~/.gfarmrc using PostgreSQL

2005-10-06  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/metadb_ldap.c, lib/libgfarm/gfarm/metadb_pgsql.c, lib/libgfarm/gfarm/metadb_sw.c, lib/libgfarm/gfarm/metadb_sw.h:
	add a switch for metadb implementation, to support LDAP and PostgreSQL
	as MetaDB backend in same binary.
	add stub functions for PostgreSQL backend. (currently not enabled)

	* lib/libgfarm/gfutil/Makefile, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfsl/Makefile:
	correct header dependency missed at libtool introduction on Aug 2004

2005-10-06  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/config-gfarm/gfarm.sql:
	table definition of gfarm meta data written in PostgreSQL

2005-10-06  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/metadb_ldap.c:
	remove gfarm_metadb_path_info_get_all(),
	because this is not used from anywhere.

2005-10-04  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/metadb_access.h: correct a comment

	* gftool/gfarm_agent/Makefile, gftool/gfarm_agent/gfarm_agent.c, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/agent_wrap.c, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/metadb_access.h, lib/libgfarm/gfarm/metadb_ldap.c, lib/libgfarm/gfarm/metadb_ldap.h:
	Rename metadb_ldap.h to metadb_access.h, because this header doesn't really
	depend on LDAP.
	This change is part PostgreSQL support.

	* include/gfarm/gfarm_metadb.h, lib/libgfarm/gfarm/metadb_ldap.c:
	Commet out metadb functions for file_history by using "#if 0",
	because this feature won't be implemented anytime soon.
	Theoretically, this change should bump the major version of libgfarm
	shared library, but we won't bump it, because we are sure no one is
	using these functions yet.

	* lib/libgfarm/gfarm/metadb_ldap.c, lib/libgfarm/gfarm/metadb_ldap.h:
	make gfarm_metadb_check() private function,
	since this isn't used from anywhere except metadb_ldap.c.

	* configure, include/gfarm/gfarm_config.h.in: regen

	* ns/gfarm/gfarm.c:
	rename USE_READLINE to HAVE_READLINE to conform to autoconf convention,
	and define it in gfarm_config.h instead of a compiler option.

	* lib/libgfarm/gfarm/Makefile:
	make it possible to disable OpenLDAP (although this feature is disabled
	until PostgreSQL support is completed)

	* makes/config.mk.in, makes/var.mk: - add autoconf stuff for PostgreSQL
	- make it possible to disable OpenLDAP (although this feature is disabled
	  until PostgreSQL support is completed)

	* configure.ac: - add autoconf stuff for PostgreSQL
	- make it possible to disable OpenLDAP (although this feature is disabled
	  until PostgreSQL support is completed)
	- if --with-pthread option is specified with a parameter, and it doesn't work,
	  abort auto configuration with diagnostic message, instead of ignoring it.
	- rename USE_READLINE to HAVE_READLINE to conform to autoconf convention,
	  and define it in gfarm_config.h instead of a compiler option.

2005-09-29  Noriyuki Soda  <soda@sra.co.jp>

	* doc/html/en/ref/index.html, doc/html/ja/ref/index.html:
	correct numbering

	* doc/html/ja/ref/index.html, doc/html/en/ref/index.html:
	reduce differences between Japanese version and English version

	* doc/html/en/user/samba-hook.html, doc/html/ja/user/samba-hook.html:
	fix HTML syntax errors reported by htmllint

	* doc/html/ja/user/samba-gfarmfs.html, doc/html/en/user/samba-gfarmfs.html:
	fix HTML syntax errors found in htmllint

	* doc/html/en/user/samba-hook.html:
	correct link pathname to samba-gfarmfs.html

	* doc/html/en/user/samba-gfarmfs.html:
	link to English samba-hook.html instead of Japanese one

	* doc/html/en/user/samba-hook.html:
	- fix HTML syntax problems reported by jweblint
	- change some paragraph order

	* doc/html/ja/user/samba-hook.html: change some paragraph order

	* doc/html/en/user/samba-gfarmfs.html: add links to index pages

2005-09-29  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/html/en/user/samba-hook.html: wording

	* doc/html/en/user/index.html: add link to samba-hook.html

	* doc/html/en/user/samba-hook.html: add link to Japanese edition

	* doc/html/ja/user/samba-hook.html: add link to English edition

	* doc/html/en/user/samba-hook.html: New file.

2005-09-29  Noriyuki Soda  <soda@sra.co.jp>

	* doc/html/ja/user/samba-hook.html:
	- change paragraph structure of the overview section
	- shared_secret -> sharedsecret
	- change wording: read/write filename by using UTF-8
	  -> use UTF-8 as filename character code
	found in the review process of English translation of gfarm-hook.html

	* doc/html/ja/user/samba-gfarmfs.html:
	- fix typo: sahedsecret -> sharedsecret
	- change wording: read/write filename by using UTF-8
	  -> use UTF-8 as filename character code
	both found in the review process of English translation of gfarm-hook.html

2005-09-28  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/auth_client_gsi.c, lib/libgfarm/gfarm/auth_server_gsi.c, lib/libgfarm/gfarm/io_gfsl.c, lib/libgfarm/gfarm/io_gfsl.h:
	deal with GSI credential expiration by always opening new GSI credential
	at every attempt to initiate a connection.

2005-09-28  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_section.c:
	- fix a bug in previous revision.
	Gfs_pio_set_view_section() should return "no such object" if and only if
	(specified file already exists and the file is not truncated) and the
	specified host doesn't have a section copy of the file.
	Not GFARM_FILE_CREATE but GFS_FILE_MODE_FILE_CREATED and
	GFS_FILE_MODE_NSEGMENTS_FIXED indicate parenthesized condition.
	- gfs_pio_set_view_section unlinks other replicas in case of the file is
	  truncated even if it is unwritable.

	these are suggested by Soda-san.

	* lib/libgfarm/gfarm/gfs_pio_section.c:
	gfs_pio_set_view_section(): In previous revision, it returns "no such object"
	if specified host doesn't have specified file section copy. In this revision,
	the function returns "no such object" if this condition is satisfied and
	specified file opened without GFARM_FILE_CREATE.  This correction is for
	"gfreg -f".  Refer to http://datafarm.apgrid.org/bugzilla/show_bug.cgi?id=16
	for detail.

2005-09-28  Noriyuki Soda  <soda@sra.co.jp>

	* makes/install-doc.in:
	- use "gcc32" as %%GLOBUS_FLAVOR%%, if Globus is not configured,
	  because it doesn't make sense to leave the flavor empty in Gfarm documents.
	- remove %%GLOBUS_LOCATION%%, because it's better to use $GLOBUS_LOCATION
	  for documentation.

	* package/freebsd/Makefile, package/pkgsrc/Makefile:
	remove 1 item from TO-DO list (config-gfarm)

	* debian/gfmd.install, debian/gfsd.install, package/redhat/gfarm.spec:
	add rc script templates for SuSE and unknown linux

	* doc/README.hook.en, doc/README.hook.ja:
	- libglobus_gssapi_gcc32.so.0 -> libglobus_gssapi_gsi_gcc32.so.0
	  (missing "_gsi")
	- use %%GLOBUS_FLAVOR%% instead of gcc32, because it may be gcc64
	  on LP64 Linux platforms.
	- some wording change

	* doc/html/ja/user/samba-hook.html: wording

2005-09-28  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* RELNOTES: Release note for the version 1.2 pl4

2005-09-28  Noriyuki Soda  <soda@sra.co.jp>

	* makes/install-doc.in:
	replace %%GLOBUS_LOCATION%% and %%GLOBUS_FLAVOR%%, too

	* package/pkgsrc/Makefile, package/redhat/gfarm.spec, package/freebsd/Makefile:
	add gfarm-1.2-patch4

2005-09-28  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog: Catched up with the current ChangeLog.

2005-09-28  Takuya Ishibashi  <takuya@soum.co.jp>

	* doc/html/ja/user/samba-gfarmfs.html: add 'create mask'.

	* doc/html/ja/user/samba-hook.html:
	add explanation about 'kernel change notify'.

2005-09-27  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/hooks_init.c:
	fix warning introduced in previous change about fprintf/fputs -> gflog_info

	* doc/html/ja/user/samba-hook.html:
	clarify some descriptions, fix some pathnames and punctuations, etc.

	* doc/html/en/ref/index.html, doc/html/en/user/index.html, doc/html/en/user/samba-gfarmfs.html, doc/html/ja/ref/index.html, doc/html/ja/user/export-gfarm.html, doc/html/ja/user/index.html, doc/html/ja/user/nfs-gfarmfs.html, doc/html/ja/user/samba-gfarmfs.html, doc/html/ja/user/samba-hook.html:
	fix HTML syntax errors, found by jweblint.
	NOTE: "lightcyan" isn't a valid color name in the HTML 4.01 specification.

	* doc/html/ja/user/samba-hook.html:
	back out previous change, smb over GSI authentication is actually usable
	with gfs_hook.

2005-09-25  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfutil/gfutil.h, lib/libgfarm/gfutil/logutil.c, ns/gfarmd/gfarmd.c, ns/gfarmd/gfd_auth.c, ns/gfarmd/gfd_parse.c, server/gfmd/gfmd.c, server/gfsd/gfsd.c, gftool/gfarm_agent/agent_thr.c, gftool/gfarm_agent/gfarm_agent.c, lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_64.c, lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_fstat.c, lib/gfs_hook/hooks_init.c, lib/gfs_hook/hooks_stat.c, lib/gfs_hook/hooks_subr.c, lib/libgfarm/gfarm/auth_client_gsi.c, lib/libgfarm/gfarm/auth_common_gsi.c, lib/libgfarm/gfarm/auth_server.c, lib/libgfarm/gfarm/auth_server_gsi.c, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfsl/auth.c, lib/libgfarm/gfsl/gsi.c, lib/libgfarm/gfsl/session.c, lib/libgfarm/gfsl/tcputil.c:
	- use printf(3)-style format for gflog functions.
	  its implementation uses vsnprintf(), since vsnprintf() has been
	  part of C99 and SUS standard, and now exists everywhere.
	- introduce GFARM_SYSLOG_OUTPUT environment variable,
	  to redirect gflog output of gfarm client to syslog.
	- make gfs_hook use gflog_info() instead of fprintf(3)/fputs(3),
	  so, now deamon programs can be traced by using libgfs_hook_debug.so,
	  if one specifies $GFARM_SYSLOG_OUTPUT.

2005-09-22  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/config-gfarm/config-gfarm.in:
	add -xn option for ldapsearch -V because password might be asked.
	XXX - ldapsearch in OpenLDAP-2.0 does not understand -V option...

2005-09-20  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/gfmd.postinst, debian/gfsd.postinst: missed directory name

2005-09-19  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm-slapd:
	remove comment to reduce difference from other rc scripts

	* gftool/config-gfarm/sysdep/linux/suse/Makefile, gftool/config-gfarm/sysdep/linux/suse/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/suse/gfmd.in, gftool/config-gfarm/sysdep/linux/suse/gfsd.in, gftool/config-gfarm/sysdep/default/gfarm-slapd.in, gftool/config-gfarm/sysdep/default/gfmd.in, gftool/config-gfarm/sysdep/default/gfsd.in, gftool/config-gfarm/sysdep/linux/Makefile, gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep:
	add rc scripts for SuSE

	* gftool/config-gfarm/sysdep/linux/redhat/gfarm-slapd.in:
	remove comment to reduce difference from other rc scripts

	* gftool/config-gfarm/sysdep/linux/redhat/gfmd.in, gftool/config-gfarm/sysdep/linux/redhat/gfsd.in, package/redhat/gfmd.in, package/redhat/gfsd.in:
	avoid to refer message catalog in echo command

	* gftool/config-gfarm/sysdep/netbsd/gfarm-slapd.in, gftool/config-gfarm/sysdep/netbsd/gfmd.in, gftool/config-gfarm/sysdep/netbsd/gfsd.in, package/freebsd/files/gfmd.sh, package/freebsd/files/gfsd.sh, package/pkgsrc/files/gfmd.sh, package/pkgsrc/files/gfsd.sh, package/redhat/gfarm-slapd, package/redhat/gfmd.in, package/redhat/gfsd.in, package/solaris/gfmd.in, package/solaris/gfsd.in, gftool/config-gfarm/sysdep/default/gfarm-slapd.in, gftool/config-gfarm/sysdep/default/gfmd.in, gftool/config-gfarm/sysdep/default/gfsd.in, gftool/config-gfarm/sysdep/freebsd/gfarm-slapd.in, gftool/config-gfarm/sysdep/freebsd/gfmd.in, gftool/config-gfarm/sysdep/freebsd/gfsd.in, gftool/config-gfarm/sysdep/linux/debian/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/debian/gfmd.in, gftool/config-gfarm/sysdep/linux/debian/gfsd.in, gftool/config-gfarm/sysdep/linux/redhat/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/redhat/gfmd.in, gftool/config-gfarm/sysdep/linux/redhat/gfsd.in, debian/gfmd.init, debian/gfsd.init, gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/config-gfsd.in:
	- make it easier to run multiple slapd/gfmd/gfsd on same host,
	  by using "$FILE" variable to specify pid and other files.
	- reduce differences between all rc scripts,
	  by e.g. using same variable names (e.g. $PIDFILE, $DAEMON) throughout scripts,
	  if there isn't corresponding system convention.
	- use always same condition and same behavior about $GLOBUS_LOCATION
	- config-gfarm/sysdep/linux/redhat:
	  correct return value of stop function
	  make status function actually work for multiple daemons on same host

	* INSTALL.en, INSTALL.ja: reflect changes of rc order on Solaris

2005-09-19  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_unlink.c: add FT code

	* lib/libgfarm/gfarm/gfs_pio_scramble.c (gfs_pio_scramble_close):
	set section info when file size is zero.

2005-09-16  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/config-gfarm/sysdep/default/gfarm-slapd.in:
	correct filename of pid

	* gftool/config-gfarm/sysdep/default/Makefile, gftool/config-gfarm/sysdep/default/gfarm-slapd.in, gftool/config-gfarm/sysdep/default/gfmd.in, gftool/config-gfarm/sysdep/default/gfsd.in:
	print PID at status

	* gftool/config-gfarm/sysdep/default/gfarm-slapd.in, gftool/config-gfarm/sysdep/default/gfmd.in, gftool/config-gfarm/sysdep/default/gfsd.in:
	Linux doesn't have sh in /sbin

	* gftool/config-gfarm/sysdep/linux/default/Makefile: correct path

	* gftool/config-gfarm/sysdep/linux/Makefile, gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/linux/default/Makefile:
	don't use RedHat's as default rc scripts, instead,
	use sysdep/default/*.in as defaults.

	* gftool/config-gfarm/sysdep/default/gfsd.in:
	- fix command name, the change in revision 1.4 was not enough
	- add comments for chkconfig on Linux, since this script will be used in
	  minor Linux distributions.
	- implement 'status' subcommand
	- print 'restart' subcommand in usage.
	- be more verbose when $PID_FILE or $CONF is missing

	* gftool/config-gfarm/sysdep/default/gfmd.in:
	- remove duplicate loading of $GLOBUS_LOCATION/etc/globus-user-env.sh,
	  added in previous commit
	- add comments for chkconfig on Linux, since this script will be used in
	  minor Linux distributions.
	- implement 'status' subcommand
	- print 'restart' subcommand in usage.
	- be more verbose when $PID_FILE or $CONF is missing

	* gftool/config-gfarm/sysdep/default/gfarm-slapd.in:
	- add comments for chkconfig on Linux, since this script will be used in
	  minor Linux distributions.
	- implement 'status' subcommand
	- print 'restart' subcommand in usage.
	- be more verbose when $PID_FILE or $CONF is missing

	* gftool/config-gfarm/sysdep/default/gfmd.in, gftool/config-gfarm/sysdep/default/gfsd.in, gftool/config-gfarm/sysdep/freebsd/gfmd.in, gftool/config-gfarm/sysdep/freebsd/gfsd.in:
	be more conservative about setting $GLOBUS_LOCATION

	* package/solaris/gfmd.in, package/solaris/gfsd.in:
	Use $GLOBUS_LOCATION/etc/globus-user-env.sh,
	instead of directly setting LD_LIBRARY_PATH, just like FreeBSD version does.
	Although this change is not strictly necessary, since Solaris version
	is currently built with --with-globus-static.

2005-09-14  Noriyuki Soda  <soda@sra.co.jp>

	* ChangeLog: some English corrections

	* doc/README.hook.en, doc/README.hook.ja:
	add some description about MacOS X, HP-UX and Tru64

	* package/solaris/build, package/solaris/gfarm-server.files, INSTALL.en, INSTALL.ja, debian/gfmd.conffiles, debian/gfmd.install, debian/rules, doc/conf/gfarm.schema, package/redhat/gfarm.spec:
	doc/conf/gfarm.schema is no longer needed,
	because config-gfarm now supplies the file.

	* INSTALL.en, INSTALL.ja:
	mention config-gfarm and config-gfsd, because now these commands are
	available for installation from source as well.
	sync slapd.conf with gftools/config-gfarm/slapd.conf*.

2005-09-14  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* RELNOTES: Release note for the version 1.2 pl3

	* doc/README.hook.en, doc/README.hook.ja:
	add Solaris section in Japanese README
	add a note for limitation

	* doc/README.hook.en, doc/README.hook.ja: add limitation section

	* doc/html/ja/user/samba-hook.html:
	delete description about gsi authentication.  it does not work for now.

2005-09-13  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog: Catched up with the current ChangeLog.

2005-09-12  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/config-gfarm/sysdep/default/gfsd.in: careless error

2005-09-11  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/changelog: updated to 1.2-2

2005-09-11  Noriyuki Soda  <soda@sra.co.jp>

	* package/pkgsrc/Makefile, package/redhat/gfarm.spec, package/freebsd/Makefile:
	add gfarm-1.2-patch3.diff

	* gftool/config-gfarm/sysdep/freebsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/netbsd/config-gfarm.sysdep:
	report file creation under /etc/rc.conf.d as well

	* INSTALL.RPM.en, INSTALL.RPM.ja:
	mention what --prefix does and port number restriction in user privilege

	* gftool/config-gfarm/config-gfsd.in:
	load globus-user-env.sh, if available, before calling gfhost

	* gftool/config-gfarm/config-gfsd.in:
	- add sanity check to see that gfhost really exists
	- invoke gfhost by using full pathname
	- invoke gfhost even if --prefix is specified, because we can specify
	  the location of the config file by using $GFARM_CONFIG_FILE now.

	* gftool/config-gfarm/sysdep/freebsd/gfarm-slapd.in, gftool/config-gfarm/sysdep/freebsd/gfmd.in, gftool/config-gfarm/sysdep/freebsd/gfsd.in:
	rc.subr is moved from /usr/local/etc to /etc on FreeBSD-5.X

	* gftool/config-gfarm/config-gfsd.in:
	If --prefix is specified, don't use $CONFIG_PREFIX/$sysconfdir/gfarm.conf,
	rather, just use $CONFIG_PREFIX/etc/gfarm.conf.

	* gftool/config-gfarm/gfarm.arch.guess: move comment

	* gftool/config-gfarm/gfarm.arch.guess: - correct quoting error
	- display something like hppa2.0-hp-hpux11.11 instead of 9000/800-hp-hpux11.11
	- deal with the following variant of /etc/redhat-release:
		Red Hat Enterprise Linux ES release 4 (Nahant Update 1)

	* gftool/config-gfarm/gfarm.arch.guess:
	ignore /etc/lsb-release, which shows LSB (Linux Standard Base) version.

	* gftool/config-gfarm/sysdep/netbsd/config-gfarm.sysdep:
	It is unnecessary to make /etc/rc.conf.d configurable.

	* gftool/config-gfarm/sysdep/freebsd/config-gfarm.sysdep:
	- If --prefix is specified, create rc scripts in $CONFIG_PREFIX/etc/rc.d
	  instead of $CONFIG_PREFIX/usr/local/etc.d.
	- It is unnecessary to make /etc/rc.conf.d configurable.

	* gftool/config-gfarm/config-gfarm.in:
	If --prefix is specified, don't create gfarm.conf in $CONFIG_PREFIX/$sysconfdir,
	rather, create it just in $CONFIG_PREFIX/etc.

	i.e. If sysconfdir=/home/soda/etc, and if --prefix is not specified,
	gfarm.conf will be created in /home/soda/etc.  But if --prefix /var/tmp
	is specified, now it will be created in /var/tmp/etc. It would be created
	in /var/tmp/home/soda/etc before this change.

	* gftool/config-gfarm/sysdep/netbsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/osf1/config-gfarm.sysdep, gftool/config-gfarm/sysdep/solaris/config-gfarm.sysdep, gftool/config-gfarm/sysdep/aix/config-gfarm.sysdep, gftool/config-gfarm/sysdep/default/config-gfarm.sysdep, gftool/config-gfarm/sysdep/freebsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/hpux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep:
	remove redundant or not-straightforward statements

	* gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep, gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/slapd.conf-2.0.in, gftool/config-gfarm/slapd.conf-2.1.in:
	move modulepath & moduleload handling of slapd.conf
	from debian dependent part to system independent part,
	and use the existence of /usr/lib/ldap/back_${SLAPD_DB}.so
	for whether we'll use the modulepath & moduleload feature or not.
	because:
	- other distribution could use same way (actually PLD does).
	- even debian may not use that way (e.g. nimbus.titech.hpcc.jp - woody).

	* Makefile.in:
	remove gftool/config-gfarm/config-{gfarm,gfsd} at make distclean

	* gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep:
	Add modulepath/moduleload to slapd.conf only if the openldap is
	system supplied one (i.e. $OPENLDAP_PREFIX==/usr).
	If openldap is made by a user, it's unlikely using the module feature.

	* gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep, gftool/config-gfarm/config-gfarm.in:
	Give higher priority to $OPENLDAP_PREFIX always over system ldap directory,
	even on Debian (/etc/ldap).
	Otherwise metadata server cannot be installed by non-privileged user,
	if /etc/ldap/schema/core.schema is not installed by super-user of the machine.

	* gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep:
	forgot to rewrite $ldap_prefix to $OPENLDAP_PREFIX here.

	* doc/README.hook.en, doc/README.hook.ja:
	mention how to access executable files (except invocation) on a client node.

	* doc/README.hook.en, doc/README.hook.ja:
	mention that currently readdir(3) on Solaris doesn't work.

	* gftool/gfreg/gfreg.c, gftool/gfrun/gfrun.c, lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_common.c, lib/libgfarm/gfarm/gfs_client_rep.c, lib/libgfarm/gfarm/gfs_pio_misc.c, gftool/gfmpirun/gfmpirun.c:
	fix the following warning which was reported by HP-UX C compiler on IA64:
	warning #2550-D: variable was set but never used

	* lib/libgfarm/gfarm/hostspec.c:
	fix the following warning which was reported by HP-UX C compiler on IA64:
	warning #2068-D: integer conversion resulted in a change of sign

	* gftool/config-gfarm/config-gfarm.in:
	print 2146435072 instead of 2.14644e+09 as memory size on
	a HP-UX machine which has 4094MB physical memory.

	* gftool/config-gfarm/gfarm.arch.guess:
	Do not output garbage on non-RedHat-derived Linux distros.

	* INSTALL.en, INSTALL.ja: mention that GNU make is needed for now.

	* server/gfsd/gfsd.c, server/gfmd/gfmd.c:
	Don't #include <gfarm/gfarm_config.h> before <sys/socket.h>.
	Now socklen_t is defined as "#define socklen_t int" in <gfarm/gfarm_config.h>
	on HP-UX, and this definition breaks <sys/socket.h>, because <sys/socket.h> has
	"typedef size_t socklen_t;" and that will be expanded to "typedef size_t int;"

	* configure: regen

	* configure.ac: Don't use system supplied socklen_t on HP-UX,
	because that makes libgfarm incompatible with third party programs
	which weren't linked against libxnet.
	It seems most programs don't use libxnet.
	(This observation could be wrong, though)

	* server/gfsd/loadavg.c: getloadavg() for HP-UX

	* gftool/config-gfarm/sysdep/hpux/config-gfarm.sysdep:
	automatically detect physical memory size and number of CPUs on HP-UX

	* gftool/config-gfarm/sysdep/hpux/Makefile, gftool/config-gfarm/sysdep/hpux/getmemsize.c:
	progam to detect physical memory size on HP-UX, from hpux-faq

	* configure: regen

	* INSTALL.RPM.en, INSTALL.RPM.ja, configure.ac, gftool/config-gfarm/config-gfarm.in:
	do not embedded openldap prefix at build time, instead, search it at
	config-gfarm runtime, because the former doesn't make sense on some cases.

	e.g.
	Solaris binary distribution currently uses the following path at build time:
	/home/soda/install/SunOS-5.9-SunONEStudio-8/openldap-2.1.30

	* doc/html/en/user/Makefile: fix typo in previous my commit

2005-09-10  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/config-gfarm/sysdep/aix/config-gfarm.sysdep:
	add a way to detect number of CPUs on AIX, not really tested

	* gftool/config-gfarm/sysdep/solaris/config-gfarm.sysdep:
	remove unnecessary spaces from the output of number_of_cpus

	* gftool/config-gfarm/sysdep/osf1/config-gfarm.sysdep: typo

	* INSTALL.RPM.en, INSTALL.RPM.ja:
	update output of "config-gfarm -t" and "config-gfsd -t"

	* gftool/config-gfarm/config-gfarm.in: "echo -n" is not portable

	* debian/slapd.conf-2.1.in:
	now gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep:mkcnf_gfmd_sysdep()
	adds "modulepath" and "moduleload" to slapd.conf on Debian,
	so this file should be unnecessary.

2005-09-09  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/config-gfarm/config-gfsd.in:
	change [ X$VAR = X ] to [ X"$VAR" = X ], because the former doesn't work
	if $VAR includes some spaces.

	* package/solaris/gfmd.in, package/solaris/gfsd.in, gftool/config-gfarm/sysdep/default/gfarm-slapd.in, gftool/config-gfarm/sysdep/default/gfmd.in, gftool/config-gfarm/sysdep/default/gfsd.in:
	support restart command

	* gftool/config-gfarm/sysdep/aix/config-gfarm.sysdep, gftool/config-gfarm/sysdep/default/config-gfarm.sysdep, gftool/config-gfarm/sysdep/hpux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/osf1/config-gfarm.sysdep, gftool/config-gfarm/sysdep/solaris/config-gfarm.sysdep:
	don't abort, when rcN.d directory doesn't exist.
	(e.g. Solaris 9 doesn't have rc4.d)

	* gftool/config-gfarm/sysdep/osf1/config-gfarm.sysdep, gftool/config-gfarm/sysdep/solaris/config-gfarm.sysdep, gftool/config-gfarm/sysdep/hpux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/default/config-gfarm.sysdep, gftool/config-gfarm/sysdep/aix/config-gfarm.sysdep:
	remove rc script, before creating it

	* gftool/config-gfarm/sysdep/solaris/config-gfarm.sysdep, gftool/config-gfarm/sysdep/aix/config-gfarm.sysdep, gftool/config-gfarm/sysdep/default/config-gfarm.sysdep, gftool/config-gfarm/sysdep/freebsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/hpux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/netbsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/osf1/config-gfarm.sysdep:
	"id -u" isn't portable (Solaris doesn't support it),
	so use "[ -w / ]" the check root privilege.

	* gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/config-gfsd.in:
	[ -e "$p" ] isn't supported by Solaris /bin/sh, so don't use it.

	* gftool/config-gfarm/sysdep/solaris/config-gfarm.sysdep, gftool/config-gfarm/sysdep/osf1/config-gfarm.sysdep, gftool/config-gfarm/sysdep/netbsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/hpux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/freebsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/default/config-gfarm.sysdep, gftool/config-gfarm/sysdep/aix/config-gfarm.sysdep, gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/config-gfsd.in:
	"local" statement isn't really portable, so don't use it.
	(e.g. Solaris /bin/sh doesn't support it)

	* gftool/config-gfarm/config-gfarm.in:
	Solaris's sed doesn't allow "sed s/.../___/pg" in this case,
	but it allows "sed s/.../___/gp".

	* gftool/config-gfarm/sysdep/solaris/config-gfarm.sysdep, gftool/config-gfarm/sysdep/osf1/config-gfarm.sysdep, gftool/config-gfarm/sysdep/hpux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/default/config-gfarm.sysdep, gftool/config-gfarm/sysdep/aix/config-gfarm.sysdep:
	bash and Solaris /bin/sh doesn't allow null statement function,
	so add ":" statement as NOP.

	* gftool/config-gfarm/slapd.conf-2.0.in, gftool/config-gfarm/slapd.conf-2.1.in, gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep:
	add "moduleload" setting to slapd.conf on Debian. (missed in previous change)

	* gftool/config-gfarm/config-gfarm.in:
	- add "-c" option to explictly specify berkeley DB cachesize for slapd.
	- add "moduleload" setting to slapd.conf on Debian. (missed in previous change)

	* lib/libgfarm/gfarm/gfs_dir.c:
	gfs_cachedir() should ignore (at least) GFARM_ERR_NO_SUCH_OBJECT
	from gfarm_metadb_path_info_get_all_foreach(). otherwise we cannot
	create any file or directory, if it is fresh empty metadata.

	* gftool/config-gfarm/sysdep/osf1/config-gfarm.sysdep, gftool/config-gfarm/sysdep/solaris/config-gfarm.sysdep:
	forgot to change memory size unit from bytes to mega bytes

	* gftool/config-gfarm/sysdep/freebsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/netbsd/config-gfarm.sysdep:
	just add a comment

	* package/redhat/gfarm.spec: increase RPM release

	* debian/gfsd.install, package/freebsd/pkg-plist, package/pkgsrc/PLIST, package/redhat/gfarm.spec, package/solaris/gfarm-fsnode.files:
	forgot to add bin/gfarm.arch.guess

2005-09-08  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* RELNOTES: move config-gfarm issue to 1.2 from 1.2 RC2

2005-09-08  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec:
	remove reference to obsolete package/redhat/config/

	* package/redhat/gfarm.spec: forgot to enable gfarm-1.2-patch2.diff

	* package/freebsd/Makefile: typo

	* package/freebsd/Makefile, package/pkgsrc/Makefile, package/redhat/gfarm.spec:
	add gfarm-1.2-patch2.diff

	* configure: regen

	* package/freebsd/Makefile, package/freebsd/files/gfmd.sh, package/freebsd/files/gfsd.sh, package/freebsd/pkg-plist, package/pkgsrc/PLIST, package/redhat/gfarm.spec, package/solaris/build, package/solaris/gfarm-fsnode.files, package/solaris/gfarm-libs.files, package/solaris/gfarm-server.files, gftool/config-gfarm/sysdep/linux/Makefile, gftool/config-gfarm/sysdep/linux/config-gfarm.sysdep, gftool/config-gfarm/sysdep/linux/debian/Makefile, gftool/config-gfarm/sysdep/linux/debian/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/debian/gfmd.in, gftool/config-gfarm/sysdep/linux/debian/gfsd.in, gftool/config-gfarm/sysdep/linux/redhat/Makefile, gftool/config-gfarm/sysdep/linux/redhat/gfmd.in, gftool/config-gfarm/sysdep/linux/redhat/gfsd.in, gftool/config-gfarm/sysdep/netbsd/Makefile, gftool/config-gfarm/sysdep/netbsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/netbsd/gfarm-slapd.in, gftool/config-gfarm/sysdep/netbsd/gfmd.in, gftool/config-gfarm/sysdep/netbsd/gfsd.in, gftool/config-gfarm/sysdep/osf1/Makefile, gftool/config-gfarm/sysdep/osf1/config-gfarm.sysdep, gftool/config-gfarm/sysdep/solaris/Makefile, gftool/config-gfarm/sysdep/solaris/config-gfarm.sysdep, makes/config.mk.in, makes/data.mk, doc/html/pic/Makefile, gftool/Makefile, gftool/config-gfarm/Makefile, gftool/config-gfarm/bdb.DB_CONFIG.in, gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/config-gfsd.in, gftool/config-gfarm/gfarm.arch.guess, gftool/config-gfarm/gfarm.conf.in, gftool/config-gfarm/initial.ldif.in, gftool/config-gfarm/slapd.conf-2.0.in, gftool/config-gfarm/slapd.conf-2.1.in, gftool/config-gfarm/sysdep/aix/Makefile, gftool/config-gfarm/sysdep/aix/config-gfarm.sysdep, gftool/config-gfarm/sysdep/default/Makefile, gftool/config-gfarm/sysdep/default/config-gfarm.sysdep, gftool/config-gfarm/sysdep/default/gfarm-slapd.in, gftool/config-gfarm/sysdep/default/gfmd.in, gftool/config-gfarm/sysdep/default/gfsd.in, gftool/config-gfarm/sysdep/freebsd/Makefile, gftool/config-gfarm/sysdep/freebsd/config-gfarm.sysdep, gftool/config-gfarm/sysdep/freebsd/gfarm-slapd.in, gftool/config-gfarm/sysdep/freebsd/gfmd.in, gftool/config-gfarm/sysdep/freebsd/gfsd.in, gftool/config-gfarm/sysdep/hpux/Makefile, gftool/config-gfarm/sysdep/hpux/config-gfarm.sysdep, RELNOTES, configure.ac, debian/config-gfarm, debian/config-gfsd, debian/gfmd.install, debian/gfsd.install, debian/libgfarm-dev.install, debian/rules:
	support config-gfarm and config-gfsd on all platforms

	* gftool/config-gfarm/sysdep/default/gfmd.in, gftool/config-gfarm/sysdep/default/gfsd.in:
	New file.

	* gftool/config-gfarm/sysdep/default/gfmd.in, gftool/config-gfarm/sysdep/default/gfsd.in:
	from gfarm/package/solaris

	* gftool/config-gfarm/sysdep/freebsd/gfmd.in, gftool/config-gfarm/sysdep/freebsd/gfsd.in:
	New file.

	* gftool/config-gfarm/sysdep/freebsd/gfmd.in, gftool/config-gfarm/sysdep/freebsd/gfsd.in:
	from gfarm/package/freebsd/files

	* gftool/config-gfarm/sysdep/netbsd/gfmd.in, gftool/config-gfarm/sysdep/netbsd/gfsd.in:
	New file.

	* gftool/config-gfarm/sysdep/netbsd/gfmd.in, gftool/config-gfarm/sysdep/netbsd/gfsd.in:
	from gfarm/package/pkgsrc/files

	* gftool/config-gfarm/sysdep/linux/redhat/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/redhat/gfmd.in, gftool/config-gfarm/sysdep/linux/redhat/gfsd.in:
	New file.

	* gftool/config-gfarm/sysdep/linux/redhat/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/redhat/gfmd.in, gftool/config-gfarm/sysdep/linux/redhat/gfsd.in:
	from gfarm/package/redhat/config

	* gftool/config-gfarm/gfarm.schema: New file.

	* gftool/config-gfarm/gfarm.schema: from gfarm/doc/conf

	* gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/config-gfsd.in, gftool/config-gfarm/gfarm.conf.in, gftool/config-gfarm/slapd.conf-2.0.in, gftool/config-gfarm/slapd.conf-2.1.in:
	New file.

	* gftool/config-gfarm/config-gfarm.in, gftool/config-gfarm/config-gfsd.in, gftool/config-gfarm/gfarm.conf.in, gftool/config-gfarm/slapd.conf-2.0.in, gftool/config-gfarm/slapd.conf-2.1.in:
	from gfarm/package/redhat/config

	* gftool/config-gfarm/sysdep/linux/debian/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/debian/gfmd.in, gftool/config-gfarm/sysdep/linux/debian/gfsd.in:
	New file.

	* gftool/config-gfarm/sysdep/linux/debian/gfarm-slapd.in, gftool/config-gfarm/sysdep/linux/debian/gfmd.in, gftool/config-gfarm/sysdep/linux/debian/gfsd.in:
	from gfarm/debian

2005-09-08  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog, RELNOTES: release note for the version 1.2

	* lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_section.c (gfs_stat_size_canonical_path):
	return GFARM_ERR_TEXT_FILE_BUSY when one of sections is busy.

2005-09-08  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* RELNOTES: add gfrep -S option

	* doc/html/en/ref/man1/gfrep.1.html, man/man1/gfrep.1: regen

	* doc/docbook/en/ref/man1/gfrep.1.docbook: - new entry of -S option
	- add description to the entries of -D, -N, -d and -s options

	* doc/html/ja/ref/man1/gfrep.1.html, man/ja/man1/gfrep.1: regen

	* doc/docbook/ja/ref/man1/gfrep.1.docbook: - new entry of -S option
	- add description to the entries of -D, -N, -d and -s options

2005-09-08  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/schedule.c:
	Change the behavior of search_idle() at enough_number == 0 or *nohostsp == 0.
	Before this change, the return value of search_idle() depends on whether
	first candidate host is available or not (NULL for the former, GFARM_ERR_NO_HOST
	for the latter).
	After this change, the return value is always GFARM_ERR_NO_HOSTS,
	regardless of the availability of the first candidate host.

	RATIONALE: if enough_number == 0 or *nohostsp == 0, the caller of this function
	probably did "ohosts = malloc(sizeof(*ohosts) * 0);", but the behaivor of
	malloc(0) is implementation dependent. i.e. It's not portable.

2005-09-08  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfrep/gfrep.c:
	- add -S option
	- make 'gfrep -s srchost' automatically select an appropriate
	  destination host, when if -d option isn't specified
	- suppress warning about lack of replica in source host or
	  source domain in case of replicating a directory

	* include/gfarm/gfarm_misc.h, lib/libgfarm/gfarm/schedule.c:
	add gfarm_schedule_search_idle_acyclic_hosts() for 'gfrep -S'

	* gftool/gfrep/Makefile: include "hash.h'

2005-09-07  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec:
	rename the patch filename from gfarm.patch to gfarm-1.2-patch1.diff,
	to make it clear that the patch file is similar to:
	http://datafarm.apgrid.org/software/1.2/gfarm-1.2-patch1.diff.gz

	* package/redhat/gfarm.patch:
	We won't use in-tree patch files any more (just use diff-files between cvs tags)

2005-09-07  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_subr.c (gfs_hook_is_url):
	fix a filename translation for '/gfarm/.filename'
	and '~filename' in Gfarm file system.

2005-09-06  Noriyuki Soda  <soda@sra.co.jp>

	* package/freebsd/Makefile, package/pkgsrc/Makefile:
	apply the following patch:
	http://datafarm.apgrid.org/software/1.2/gfarm-1.2-patch1.diff.gz

	* package/pkgsrc/PLIST: correct a mistake in previous change

	* package/pkgsrc/PLIST: add references for replication in English

2005-09-06  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/gfarm.patch, package/redhat/gfarm.spec: gfarm-1.2-2

	* debian/libgfarm-dev.manpages, package/freebsd/pkg-plist, package/redhat/gfarm.spec, doc/html/en/ref/index.html:
	add references for replication in English

	* man/man3/gfarm_url_fragments_replicate.3, man/man3/gfarm_url_section_replicate_from_to.3, man/man3/gfarm_url_section_replicate_to.3, man/man3/gfs_pio_set_view_index.3, man/ja/man3/gfarm_url_fragments_replicate.3, man/ja/man3/gfarm_url_section_replicate_from_to.3, man/ja/man3/gfarm_url_section_replicate_to.3, doc/html/ja/ref/man3/gfarm_url_fragments_replicate.3.html, doc/html/ja/ref/man3/gfarm_url_section_replicate_from_to.3.html, doc/html/ja/ref/man3/gfarm_url_section_replicate_to.3.html, doc/html/en/ref/man3/gfarm_url_fragments_replicate.3.html, doc/html/en/ref/man3/gfarm_url_section_replicate_from_to.3.html, doc/html/en/ref/man3/gfarm_url_section_replicate_to.3.html, doc/html/en/ref/man3/gfs_pio_set_view_index.3.html:
	regen

	* doc/docbook/en/ref/man3/Makefile.inc, doc/docbook/en/ref/man3/gfarm_url_fragments_replicate.3.docbook, doc/docbook/en/ref/man3/gfarm_url_section_replicate_from_to.3.docbook, doc/docbook/en/ref/man3/gfarm_url_section_replicate_to.3.docbook, doc/docbook/en/ref/man3/gfs_pio_set_view_index.3.docbook, doc/docbook/ja/ref/man3/gfarm_url_fragments_replicate.3.docbook, doc/docbook/ja/ref/man3/gfarm_url_section_replicate_from_to.3.docbook, doc/docbook/ja/ref/man3/gfarm_url_section_replicate_to.3.docbook:
	add GFARM_ERR_NO_SUCH_OBJECT and GFARM_ERR_TEXT_FILE_BUSY.
	add missing manual pages in English.

	* lib/libgfarm/gfarm/gfm_client.c, lib/libgfarm/gfarm/gfs_pio_section.c (gfs_pio_set_view_section):
	gfarm_host_get_canonical_name() may return GFARM_ERR_INVALID_ARGUMENT when using gfarm_agent.
	add XXX in comment

2005-09-05  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfm_client.c (gfarm_user_job_register):
	gfarm_host_get_canonical_host_name may return GFARM_ERR_INVALID_ARGUMENT since both GFARM_ERR_UNKNOWN_HOST and GFARM_ERR_AMBIGUOUS_RESULT map to GFARM_ERR_INVALID_ARGUMENT in gfarm_agent...

	* doc/README.hook.en, doc/README.hook.ja:
	simplify and reorganize the structure
	add issue of possible collision regarding libgssapi

2005-09-02  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_exec.c:
	gfarm_url_execfile_replicate_to_local(): fix references to an uninitialized
	variable

2005-09-01  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/changelog: changed version number

2005-08-31  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfptool/gfsplck/Makefile: add openssl_includes in CFLAGS

	* package/redhat/gfarm.spec: gfarm-1.2-1

2005-08-31  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/config/config-gfarm.in: thinko

	* package/redhat/config/config-gfarm.in:
	- automatically select berkeley DB, if OpenLDAP version >= 2.1
	- automatically generate DB_CONFIG for berkeley DB,
	  and set cachesize to half of physical memory

	* package/redhat/config/slapd.conf-2.0.in, package/redhat/config/slapd.conf-2.1.in:
	- use tab instead of spaces
	- correct/add comments
	no actual change

2005-08-31  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* RELNOTES: reordering

2005-08-31  Noriyuki Soda  <soda@sra.co.jp>

	* RELNOTES: remove reconnection to gfsd (and gfmd) for now

	* lib/libgfarm/gfarm/gfs_client.c:
	back out previous change about reconnection to gfsd.
	the change is too dangerous to use, because it doesn't honor state of
	the connection (e.g. file descriptors, seek position, etc...)

	* package/redhat/gfarm.patch: this file is no longer used

	* makes/data.mk: deal with --srcdir option of configure

2005-08-31  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* RELNOTES: more verbose

	* RELNOTES: add a reference to Bugzilla-ja #38

2005-08-31  Takuya Ishibashi  <takuya@soum.co.jp>

	* doc/html/ja/user/export-gfarm.html:
	modify the explanation so that EnableMMAP and EnableSendfile are required.

	* doc/html/ja/user/export-gfarm.html:
	add an explanation about EnableMMAP Off for httpd with syscall-hooking library.

2005-08-31  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfptool/gfsplck/Makefile, gfptool/gfsplck/gfsplck.c:
	text file busy support

2005-08-31  Takuya Ishibashi  <takuya@soum.co.jp>

	* doc/html/ja/user/export-gfarm.html: add items about httpd.

2005-08-31  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog, RELNOTES: release note for the version 1.2 RC2

	* man/man1/gfrm.1, doc/html/en/ref/man1/gfrm.1.html, doc/html/ja/ref/man1/gfrm.1.html, man/ja/man1/gfrm.1:
	regen

	* doc/docbook/en/ref/man1/gfrm.1.docbook, doc/docbook/ja/ref/man1/gfrm.1.docbook, gftool/gfrm/gfrm.c:
	simplify

2005-08-30  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_misc.c (gfs_pio_open):
	add GFARM_FILE_TRUNC when writing a file with size 0 to avoid re-calculation of checksum on close.
	(gfs_stat_size_canonical_path): added for internal use.

	* lib/libgfarm/gfsl/session.c (gfarmSecSessionInitialize{Acceptor,Initiator,Both}):
	do not return error when conf dir does not exist.  Without this, <prefix>/etc directory is indispensable for GSI authentication (or GFSL) even when it is not necessary.

2005-08-29  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/html/en/ref/man1/gfrm.1.html, doc/html/ja/ref/man1/gfrm.1.html, man/ja/man1/gfrm.1, man/man1/gfrm.1:
	regen

	* doc/docbook/en/ref/man1/gfrm.1.docbook, doc/docbook/ja/ref/man1/gfrm.1.docbook, gftool/gfrm/gfrm.c (gfrm):
	support recursive deletion of (file replicas of) a particular file section.

	* lib/gfs_hook/hooks.c (__unlink):
	unlink a file in case of no fragment information

	* lib/libgfarm/gfarm/gfs_pio_misc.c (gfs_access):
	do not do unnecessary section info check

	* lib/libgfarm/gfarm/gfs_unlink.c (gfs_unlink):
	return NULL in case of no fragment information

	* lib/libgfarm/gfarm/gfs_unlink.c (gfs_unlink_section):
	do not call unnecessary gfarm_path_info_remove when the specified section does not exist, which returns inappropriate error.

	* doc/html/ja/ref/man1/gfkey.1.html, man/ja/man1/gfkey.1, man/man1/gfkey.1, doc/html/en/ref/man1/gfkey.1.html:
	regen

	* doc/docbook/ja/ref/man1/gfkey.1.docbook, gftool/gfkey/gfkey.c, lib/libgfarm/gfarm/auth.h, lib/libgfarm/gfarm/auth_client.c, lib/libgfarm/gfarm/auth_common.c, lib/libgfarm/gfarm/auth_server.c, doc/docbook/en/ref/man1/gfkey.1.docbook (gfkey.c):
	add -p option to specify the term of validity in second.

	* ChangeLog, RELNOTES: release note for the version 1.2

	* gfptool/gfsplck/gfsplck.c:
	add read and write access to enable to delete invalid directories.

	* lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_unlink.c:
	discard the previous 'false warning fix in gcc'.  gcc in Fedora Core 4 should be immature...

	* gftool/gfarm_agent/gfarm_agent.c, lib/libgfarm/gfarm/agent_client.c:
	portability fix for lp64

2005-08-26  Noriyuki Soda  <soda@sra.co.jp>

	* doc/html/pic/Makefile: use data.mk to avoid to use install-doc

	* doc/html/en/user/Makefile: add XXX

2005-08-26  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/html/en/user/Makefile, doc/html/pic/Makefile:
	add missing Makefiles

	* lib/libgfarm/gfarm/error.c: remove unnecessary extern

2005-08-26  Takuya Ishibashi  <takuya@soum.co.jp>

	* doc/html/ja/user/export-gfarm.html, doc/html/ja/user/nfs-gfarmfs.html, doc/html/ja/user/samba-gfarmfs.html:
	add links to parent html files.

2005-08-26  Noriyuki Soda  <soda@sra.co.jp>

	* include/gfarm/gfarm_error.h, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/error.c, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/xxx_proto.c:
	implement gfs_client reconnection to deal with reboot of filesystem node.
	this implementation is not perfect (there are some cases that reconnection
	isn't tried, or even NULL pointer access against gfs_client->conn), but
	probably covers most practical cases.

	* doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man5/gfarm.conf.5.html, man/ja/man5/gfarm.conf.5, man/man5/gfarm.conf.5:
	regen

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook:
	describe $GFARM_CONFIG_FILE, $GFARM_ARCHITECTURE environment variables
	and "client_architecture" configuration directive.

	* lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/gfs_exec.c, lib/libgfarm/gfarm/host.c, lib/libgfarm/gfarm/host.h, lib/libgfarm/gfarm/hostspec.c:
	implement "client_architecture" configuration directive and
	$GFARM_ARCHITECTURE environment variable to specify architecture
	of cilent hosts and current host.

	* lib/libgfarm/gfarm/gfs_pio_misc.c:
	change default executable architecture of "chmod +x",
	the architecture was determined by location of replicas before this change,
	but now it's determined by the architecture of the host that the chmod
	operation was invoked.
	old behavior stil remains for the case that the architecture of the host is
	not known.

	* doc/html/en/user/index.html, doc/html/ja/ref/index.html, doc/html/en/ref/index.html:
	add a link to translation page

	* doc/html/ja/user/samba-hook.html: - add logo
	- add links to paraent html files
	- really add a link to samba-gfarmfs.html

	* doc/html/ja/user/Makefile, doc/html/ja/user/index.html, package/freebsd/pkg-plist, package/pkgsrc/PLIST, package/redhat/gfarm.spec:
	add export-gfarm.html and nfs-gfarmfs.html

	* doc/html/index.html:
	typo fix, add links to http://datafarm.apgrid.org/

2005-08-26  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/url.c:
	add a null check of gfarm_spool_root not to cause segfault.

2005-08-25  Takuya Ishibashi  <takuya@soum.co.jp>

	* doc/html/ja/user/export-gfarm.html:
	Introduction of servers which export Gfarm.

	* doc/html/ja/user/nfs-gfarmfs.html:
	Usage of GfarmFS-FUSE+NFS in Japanese.

2005-08-25  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec, doc/html/Makefile, doc/html/ja/user/Makefile, makes/config.mk.in, makes/data.mk, package/freebsd/pkg-plist, package/pkgsrc/PLIST:
	install recently added HTML and GIF files.
	NOTE: need to rerun "configure" script to refect this change.

	* doc/html/en/user/index.html, doc/html/index.html, doc/html/ja/user/index.html:
	add links to {ja,en}/user/samba-gfarmfs.html

2005-08-25  Takuya Ishibashi  <takuya@soum.co.jp>

	* doc/html/en/user/samba-gfarmfs.html:
	Usage of GfarmFS-FUSE+Samba in English.

	* doc/html/ja/user/samba-gfarmfs.html:
	Usage of GfarmFS+Samba in Japanese.

2005-08-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/html/ja/user/samba-hook.html, doc/html/pic/gfarm-logo.gif:
	add gfarm-logo.gif

	* doc/html/ja/user/samba-hook.html: update a link to gfarm logo

2005-08-23  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfexec/gfexec.c:
	Fix a segfault problem when program is specified by /gfarm/....
	Now, gfexec recognize /gfarm mount point for execution program as well
	as so files.

2005-08-23  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec:
	use "License:" instead of "Copyright:", since the latter is obsolete.
	add "Vendor:" and "URL:", because now "License:" doesn't mention AIST.

	* lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfsl/server.c, lib/libgfarm/gfsl/server2.c, lib/libgfarm/gfsl/tcputil.c, server/gfsd/gfsd.c, gftool/gfmkdir/gfmkdir.c, gftool/gfrep/gfrep.c, gftool/gfrmdir/gfrmdir.c:
	use socklen_t appropriately.
	this fixes warnings from gcc on Fedora Core 4, reported by ishibashi-san.

	* lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_unlink.c, lib/libgfarm/gfarm/schedule.c:
	shut up false warnings (uninitialized variable) from gcc on Fedora Core 4

	* lib/libgfarm/gfarm/config.c:
	fix a bug which refers uninitialized variable,
	found by gcc on Fedora Core 4, reported by ishibashi-san

	* ns/gfarmd/gfd_auth.c:
	fix gcc warning: sgetnam_strcpy is defined but not used

2005-08-23  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/html/ja/user/samba-hook.html:
	add explanation of smb.conf parameters to share Gfarm files

2005-08-22  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfsck/gfsck.c:
	do not display misleading "pathname: deleted" message when pathname is not actually deleted

2005-08-22  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/control, debian/control.common: added blank line

2005-08-22  Noriyuki Soda  <soda@sra.co.jp>

	* package/freebsd/Makefile:
	set ${PERL5LIB} always before calling globus-makefile-header,
	otherwise pre-configure fails.

2005-08-22  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/html/ja/user/samba-hook.html: - convert text to HTML format
	- add some items

2005-08-22  Noriyuki Soda  <soda@sra.co.jp>

	* package/freebsd/pkg-plist, package/pkgsrc/PLIST:
	missing @dirrm share/doc/gfarm/html/ja/user

	* lib/libgfarm/gfarm/metadb_ldap.c:
	fix compilation error on FreeBSD-4.11

	* lib/gfs_hook/sysdep/linux/Makefile, lib/gfs_hook/sysdep/linux/getdents.c:
	use -D_LARGEFILE64_SOURCE `getconf LFS64_CFLAGS`
	and lseek64() instead of __lseek64()
	to remove the following warning:
	warning: implicit declaration of function `__lseek64'

2005-08-22  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_misc.c:
	rename_file_spool(): correct typo in a log message
	check_existence_spool_file(): fix a bug

2005-08-22  Noriyuki Soda  <soda@sra.co.jp>

	* debian/libgfarm-dev.manpages, package/freebsd/pkg-plist, package/pkgsrc/PLIST, package/redhat/gfarm.spec, doc/html/en/ref/index.html, doc/html/ja/ref/index.html:
	remove manual of GFARM_STRINGLIST_ELEM() and GFARM_STRINGLIST_STRARRAY() marco,
	and provide gfarm(3) library man page,
	to support case-insensitive filesystems like HFS+ on MacOS X.

	* man/man3/gfarm.3, man/ja/man3/gfarm.3, doc/html/en/ref/man3/gfarm.3.html, doc/html/ja/ref/man3/gfarm.3.html:
	regen

	* doc/docbook/en/ref/man3/Makefile.inc, doc/docbook/en/ref/man3/gfarm.3.docbook, doc/docbook/ja/ref/man3/GFARM_STRINGLIST_ELEM.3.docbook, doc/docbook/ja/ref/man3/GFARM_STRINGLIST_STRARRAY.3.docbook, doc/docbook/ja/ref/man3/Makefile.inc, doc/docbook/ja/ref/man3/gfarm.3.docbook, doc/html/ja/ref/man3/GFARM_STRINGLIST_ELEM.3.html, doc/html/ja/ref/man3/GFARM_STRINGLIST_STRARRAY.3.html, man/ja/man3/GFARM_STRINGLIST_ELEM.3, man/ja/man3/GFARM_STRINGLIST_STRARRAY.3:
	remove manual of GFARM_STRINGLIST_ELEM() and GFARM_STRINGLIST_STRARRAY() marco,
	and provide gfarm(3) library man page,
	to support case-insensitive filesystems like HFS+ on MacOS X.

2005-08-22  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_stat.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h:
	remove creating file stuff.  It is not necessary any more.

	* lib/libgfarm/gfarm/metadb_ldap.c:
	specify timeout (5 sec) for ldap_bind_s.  Without it, a client possibly waits forever when the metadata server in packet filtered network is down.

2005-08-22  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/changelog: new version of 1.2.0

2005-08-22  Noriyuki Soda  <soda@sra.co.jp>

	* package/freebsd/Makefile, package/pkgsrc/Makefile, package/redhat/gfarm.spec, package/solaris/build:
	gfarm-1.1.2 -> gfarm-1.2

	* package/freebsd/pkg-plist, package/pkgsrc/PLIST, package/redhat/gfarm.spec:
	html/ja/user/samba-hook.html and html/ja/user/index.html are added.

	* doc/html/ja/user/Makefile, doc/html/ja/user/index.html, doc/html/Makefile, doc/html/index.html:
	install and add hyperlink to doc/html/ja/user/samba-hook.html

2005-08-22  Takuya Ishibashi  <takuya@soum.co.jp>

	* lib/libgfarm/gfarm/config.c:
	revise it so that GFARM_CONFIG_FILE specify a Gfarm configuration file justly

2005-08-22  Noriyuki Soda  <soda@sra.co.jp>

	* configure: regen
	(forgot to commit this file, when configure.ac revision 1.23 was committed.)

2005-08-22  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/html/ja/user/samba-hook.html:
	Initial revision, written not in html format but in text yet

	* doc/html/ja/user/samba-hook.ja.html:
	rename from samba-hook.ja.html to samba-hook.html because 'ja' is duplicated
	with directory name

	* doc/html/ja/user/samba-hook.ja.html:
	Initial revision, written not in html format but in text yet.

2005-08-22  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec, package/solaris/build:
	gfarm-1.1.1 -> gfarm-1.1.2 (for RC1)

2005-08-21  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_pio_section.c:
	delete unnecessary code committed by mistake

	* lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_remote.c, lib/libgfarm/gfarm/glob.c, lib/libgfarm/gfarm/url.c:
	return "gfarm library isn't properly initialized" error when gfarm_get_global_username returns NULL.

	* lib/libgfarm/gfarm/config.c:
	introduce GFARM_CONFIG_FILE to specify a Gfarm configuration file
	instead of ~/.gfarmrc

	* lib/libgfarm/gfarm/gfs_pio_section.c (replicate_section_to_local):
	delete redundant section busy check

	* lib/libgfarm/gfarm/gfs_exec.c:
	revert to rev 1.16.  gfs_check_section_busy() is called in
	gfarm_url_section_replicate_to() (gfarm_file_section_transfer_from_to_internal()).

2005-08-20  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfarm_agent/gfarm_agent.c:
	do not re-connect to metadb server.  This is down in metadb_ldap.c

	* lib/libgfarm/gfarm/gfs_dir.c (gfarm_i_path_info_get):
	do not purge path when metadb server is down.

2005-08-19  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/metadb_ldap.c:
	try to re-connect when the connection to slapd is disconnected

2005-08-18  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* include/gfarm/gfarm_error.h, lib/libgfarm/gfarm/error.c, lib/libgfarm/gfarm/gfs_exec.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_section.c:
	introduce GFARM_ERR_TEXT_FILE_BUSY and gfs_check_section_busy() to prevent file replication during file modification.
	register file section copy when creating a file, which makes it possible to do 'tail -f' of the log file, for example.

	* lib/libgfarm/gfarm/gfs_pio_section.c:
	do not check the return status in FT case

	* lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_remote.c (gfs_pio_open_*_section):
	it is not necessary to check the return status in FT case.  Some process might do already.

	* lib/libgfarm/gfarm/gfs_pio_section.c (replicate_section_to_local):
	fix size check bug, although the size check in this function is not so much useful.

2005-08-17  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfsl/gfsl_config.h, lib/libgfarm/gfsl/gsi.c:
	enable to accept level N limited proxy certificate
	possible problem is that limited cert now can execute a remote process via gfsd.

2005-08-17  Noriyuki Soda  <soda@sra.co.jp>

	* configure.ac: be more verbose, if configure failed due to globus.

2005-08-15  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/hooks.c:
	__fdatasync(): fix a varibale name in _gfs_hook_debug_v() as previous commit

2005-08-15  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* lib/gfs_hook/hooks.c:
	fixed some variable names using _gfs_hook_debug_v

	* lib/gfs_hook/hooks.c: added MAC OS X ifdef

2005-08-11  Noriyuki Soda  <soda@sra.co.jp>

	* makes/config.guess, makes/config.sub:
	latest config.guess and config.sub from:
		http://savannah.gnu.org/projects/config/

2005-08-11  Takuya Ishibashi  <takuya@soum.co.jp>

	* util/gfront/build.xml, util/gfront/src/gfront/ChangeLookAndFeel.java, util/gfront/src/gfront/CommandOutput.java, util/gfront/src/gfront/DirectoryTreeNode.java, util/gfront/src/gfront/FileTableModel.java, util/gfront/src/gfront/FragmentEditor.java, util/gfront/src/gfront/GFAction.java, util/gfront/src/gfront/GFAppConst.java, util/gfront/src/gfront/GFLSParser.java, util/gfront/src/gfront/GFWHEREParser.java, util/gfront/src/gfront/GFWHEREParser2.java, util/gfront/src/gfront/GFront.java, util/gfront/src/gfront/GFrontApp.java, util/gfront/src/gfront/GFrontCommon.java, util/gfront/src/gfront/GFrontConst.java, util/gfront/src/gfront/GfhostList.java, util/gfront/src/gfront/ReadOnlyTableModel.java, util/gfront/src/gfront/RightClickDirTree.java, util/gfront/src/gfront/RightClickTable.java:
	rename "GFront/" to "src/".

2005-08-11  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_64.c, lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_subr.h:
	Add pread, pread64, pwrite, pwrite64 hooks for samba-3.0.14a.
	These hooks aren't multithreaded yet.

2005-08-05  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfsl/Makefile:
	add dependency on makes/config.mk for changes about -sysconfdir

2005-08-05  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* Makefile.in (distclean): remove makes/install-doc

2005-08-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrun/gfrun.c: do not free command_url if not necessary.

2005-08-04  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/config.c:
	make gfarm_client_terminate() safe against duplicated call,
	to make this consistent with gfarm_client_initialize().

	* lib/gfs_hook/hooks_subr.c, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h:
	use `gfs_hook_initialized' instead of abusing `gfarm_initialized' to
	see whether gfs_hook is initialized or not, because the latter
	prevented hooked programs, which also call gfarm_initialize(),
	from working.

	* lib/gfs_hook/hooks_subr.c:
	don't pollute system namespace, names which begin with "_" belong to it.

	* lib/gfs_hook/hooks_init.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h:
	introduce gfs_hook_terminate(), and use it for atexit(),
	because number of atexit() entry may be limited.
	this also eliminates two cast operations.

	* lib/libgfarm/gfarm/config.c:
	- report full pathname, if .gfarmrc or gfarm.conf cannot be opened.
	- remove unnecessary newline

2005-07-28  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* package/redhat/gfarm.spec: restore install options for doc and man

2005-07-27  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/sysdep/linux/Makefile:
	add -I$(top_builddir)/include -I$(top_srcdir)/include to $(CFLAGS),
	since hooks_subr.h now requires <gfarm/gfarm_config.h>.
	while we are here, add $(OPTFLAGS) to $(CFLAGS) as well.

2005-07-22  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec, doc/Makefile, package/freebsd/pkg-plist, package/pkgsrc/PLIST:
	forgot to install README.hook.ja

	* package/freebsd/Makefile:
	correct the timing to suggest gpt-postinstall,
	before this fix, it was displayed before
	building globus, if globus was not installed.

2005-07-21  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/config/config-gfsd.in:
	do not display error message when deleting host entry just in case with -f option.

2005-07-20  Noriyuki Soda  <soda@sra.co.jp>

	* package/freebsd/Makefile, package/freebsd/pkg-descr:
	fix most of warnings reported by portlint

	* package/freebsd/Makefile: remove unnecessary comment mark

	* package/freebsd/Makefile, package/freebsd/files/gfmd.sh, package/freebsd/files/gfsd.sh, package/freebsd/pkg-descr:
	enable GSI by linking Globus2, if ${WITH_GLOBUS} is defined.

	* makes/config.mk.in:
	makes/install-doc doesn't belong to srcdir, but builddir

	* package/pkgsrc/files/gfsd.sh, makes/install-doc.in:
	honor --sysconfdir option of configure, to make pkgsrc happy and
	resolve inconsistency about gfarm.conf between package/*/files/*.sh
	and package binaries.
	as a side effect, gfarm.conf is now moved to ${prefix}/etc/gfarm.conf,
	if --sysconfdir option is not specified.

	* configure: regen

	* package/pkgsrc/Makefile, package/pkgsrc/files/gfmd.sh, package/redhat/gfarm.spec, package/solaris/build, man/ja/man5/gfarm.conf.5, man/ja/man8/gfmd.8, man/ja/man8/gfsd.8, man/man1/gfhost.1, man/man5/gfarm.conf.5, man/man8/gfmd.8, man/man8/gfsd.8, package/freebsd/Makefile, package/freebsd/files/gfmd.sh, package/freebsd/files/gfsd.sh, doc/html/ja/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man8/gfmd.8.html, doc/html/ja/ref/man8/gfsd.8.html, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/auth_common_gsi.c, lib/libgfarm/gfsl/Makefile, makes/config.mk.in, makes/html.mk, makes/man.mk, man/ja/man1/gfhost.1, doc/docbook/ja/ref/man1/gfhost.1.docbook, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man8/gfmd.8.docbook, doc/docbook/ja/ref/man8/gfsd.8.docbook, doc/html/en/ref/man1/gfhost.1.html, doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/en/ref/man8/gfmd.8.html, doc/html/en/ref/man8/gfsd.8.html, doc/html/ja/ref/man1/gfhost.1.html, debian/rules, doc/GUIDE.ja, doc/Makefile, doc/README.hook.en, doc/README.hook.ja, doc/docbook/en/ref/man1/gfhost.1.docbook, doc/docbook/en/ref/man5/gfarm.conf.5.docbook, doc/docbook/en/ref/man8/gfmd.8.docbook, doc/docbook/en/ref/man8/gfsd.8.docbook, INSTALL.RPM.en, INSTALL.RPM.ja, INSTALL.en, INSTALL.ja, configure.ac:
	honor --sysconfdir option of configure, to make pkgsrc happy and
	resolve inconsistency about gfarm.conf between package/*/files/*.sh
	and package binaries.
	as a side effect, gfarm.conf is now moved to ${prefix}/etc/gfarm.conf,
	if --sysconfdir option is not specified.

	* configure: regen

	* configure.ac: fix two m4 quoting error

	* doc/README.hook.en, doc/README.hook.ja:
	add description about FreeBSD and NetBSD.
	XXX section structure is now too complicated?

2005-07-19  Noriyuki Soda  <soda@sra.co.jp>

	* package/pkgsrc/DESCR, package/pkgsrc/Makefile, package/pkgsrc/PLIST, package/pkgsrc/files/gfmd.sh, package/pkgsrc/files/gfsd.sh:
	definition for pkgsrc - NetBSD's standard packaging system

	* package/freebsd/Makefile, package/freebsd/files/gfmd.sh, package/freebsd/files/gfsd.sh, package/freebsd/pkg-descr, package/freebsd/pkg-plist:
	definition for ports - FreeBSD's standard packaging system

	* makes/var.mk, lib/gfs_hook/Makefile, lib/libgfarm/Makefile:
	split libtool-dependent options from $(LDFLAGS) into $(LTLDFLAGS),
	to workaround a problem that ports and pkgsrc sometimes mangle ${LDFLAGS}
	by propagating parent directory's $(LDFLAGS) to child directories.

	while we are here, remove the following variables for simplicity:
	$(SHARELIB_LTFLAGS) - not actually used
	$(LTLINK_SHARELIB_IN) - just same with "$(LTLINK) $(LTFLAGS_SHARELIB_IN)"

	* lib/libgfarm/Makefile:
	back out previous change about LT_CURRENT and LT_AGE,
	to workaround broken version handling which is found
	in some versions of libtool on non-linux platforms.

2005-07-15  Noriyuki Soda  <soda@sra.co.jp>

	* configure: regen

	* configure.ac:
	better way to detect pthread options, now this works with NetBSD's pkgsrc.

	* makes/config.mk.in: correct comment.
	XXX - this isn't efficient, but not worse than what gfarm-1.1.1 did,
	and works with *BSD's ports/pkgsrc.

	* makes/config.mk.in: fix a problem on Solaris:
	@INSTALL@ is expanded to "../makes/install-sh -c",
	but the relative pathname doesn't work.

	* lib/libgfarm/gfarm/gfs_pio_global.c: remove unnecessary if statement

2005-07-14  Noriyuki Soda  <soda@sra.co.jp>

	* configure: regen

	* makes/mkdirhier: New file.

	* makes/mkdirhier:
	alternative script for platforms which don't support "mkdir -p",
	from X11R6, to explicitly create installation directories.

	* package/redhat/gfarm.spec: use $(DESTDIR)

	* ns/nslib/Makefile.in, ns/nstool/file/Makefile.in, util/gfront/Makefile, doc/Makefile, gftool/gfrun/Makefile, lib/gfs_hook/Makefile, makes/config.mk.in, makes/html.mk, makes/include.mk, makes/lib.mk, makes/man.mk, makes/prog.mk, makes/script.mk, makes/var.mk, ns/gfarm/Makefile, ns/gfarmd/Makefile.in, configure.ac:
	explicitly create installation directories instead of implicitly
	relying on makes/install-sh to do so, to make *BSD's ports/pkgsrc
	happy, because ports/pkgsrc framework automatically replaces
	$(INSTALL_PROGRAM), $(INSTALL_SCRIPT) and $(INSTALL_DATA).

	support $(DESTDIR), since above change requires looking at all
	uses of $(INSTALL*).

2005-07-13  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfarm_agent/gfarm_agent.c:
	fix a typo in comment which was added in previous commit

	* gftool/gfarm_agent/gfarm_agent.c:
	fix a bug that clients of gfarm_agent just hang on FreeBSD-4.X.

	The reason is __exit() function in the userland thread library (libc_r)
	on FreeBSD-4.X makes all descriptors blocking mode, thus, as soon as
	the parent process calls __exit() via gfarm_daemon(), pthread functions
	in the child process become broken, because the implementation needs
	non-blocking mode, and the descriptor mode is shared between the
	parent and the child.
	So, we move open_accepting_socket() after gfarm_daemon() to workaround
	this problem.
	Fortunately, it's rare that open_accepting_socket() fails, thus I hope
	this workaround is acceptable.

2005-07-11  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h:
	- implement lseek() for directories
	- fill d_type and d_namlen members of struct dirent for *BSDs
	- use symbols instead of defined(OS_NAME)
	- store absolute gfarm_url instead of canonical_path to _gfs_file_buf[fd].u.d
	  to reduce number of memory allocations in fchdir()

	this change makes dynamically-linked ls work on FreeBSD and NetBSD.

	* configure, include/gfarm/gfarm_config.h.in: regen

	* configure.ac:
	- check whether struct dirent has d_off, d_namlen and d_type members or not
	- check whether there is getdents() or not
	- be more cosisitent about "checking..." messages.

	* lib/libgfarm/Makefile:
	increment LT_CURRENT and LT_AGE, due to gfs_seekdir()/gfs_telldir() addtion

	* gftool/gfarm_agent/gfarm_agent.c, include/gfarm/gfs.h, lib/libgfarm/gfarm/agent_client.c, lib/libgfarm/gfarm/agent_client.h, lib/libgfarm/gfarm/agent_proto.h, lib/libgfarm/gfarm/agent_wrap.c, lib/libgfarm/gfarm/agent_wrap.h, lib/libgfarm/gfarm/gfs_dir.c:
	implement gfs_seekdir() and gfs_telldir()

2005-07-08  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/hooks_common.c: more fixes for va_arg() vs mode_t

	* lib/gfs_hook/hooks_common.c:
	add more comment why va_arg(ap, mode_t) isn't appropriate.

2005-07-07  Noriyuki Soda  <soda@sra.co.jp>

	* man/ja/man1/digest.1, man/man1/digest.1, package/redhat/gfarm.spec, package/solaris/gfarm-client.files, doc/html/en/ref/index.html, doc/html/en/ref/man1/digest.1.html, doc/html/ja/ref/index.html, doc/html/ja/ref/man1/digest.1.html, gftool/Makefile, debian/gfarm-client.install, debian/gfarm-client.manpages, doc/docbook/en/ref/man1/Makefile.inc, doc/docbook/en/ref/man1/digest.1.docbook, doc/docbook/ja/ref/man1/Makefile.inc, doc/docbook/ja/ref/man1/digest.1.docbook:
	remove "digest" command, because:
	- This command is not so useful, because "openssl <digest_type> file..."
	  does just same job with "digest <digest_type> file..."
	- More importantly, this command name conflicts with same command in pkgsrc.
	The reason why we had this was only historical nowadays.

	* gftool/Makefile: typo in pthread automatic configuration support

	* lib/gfs_hook/hooks_common.c:
	use int instead of mode_t to stop the following warning on FreeBSD
	when using gcc-3.4.x/gcc-4.x (reported on [gfarm-cvs:05456]):
	./hooks_common.c: In function `__open':
	./hooks_common.c:23: warning: `mode_t' is promoted to `int' when passed through`...'
	./hooks_common.c:23: warning: (so you should pass `int' not `mode_t' to `va_arg')
	./hooks_common.c:23: note: if this code is reached, the program will abort
	./hooks_common.c: In function `_open':

	XXX - this change doesn't work on systems which use 64bit mode_t.
	but I don't know such system for now.

2005-07-07  Kazuaki Anami  <kazuaki@soum.co.jp>

	* doc/conf/gfarm.schema:
	changed SYNTAX of 'pathname' IA5 to Directory String. This change make it
	enable to use UTF-8 within pathname.

	* lib/libgfarm/gfarm/metadb_ldap.c:
	make '=' to be escaped, according to RFC 2253. This change make it enable to
	use '=' within pathname.

2005-07-07  Noriyuki Soda  <soda@sra.co.jp>

	* configure: regen

	* configure.ac: portability fixes:
	- Solaris cc (Sun ONE Studio) doesn't have -pthread option, but have -mt.
	- cc -R doesn't work on some platforms without libtool.

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_common.c:
	more portability fix (Tru64)

	* lib/gfs_hook/hooks.c:
	make fsync(2) and fdatasync(2) hook available on Solaris

2005-07-06  Noriyuki Soda  <soda@sra.co.jp>

	* configure, include/gfarm/gfarm_config.h.in: regen

	* configure.ac, lib/libgfarm/gfarm/metadb_ldap.c:
	check existence of ldap_set_option()

	* configure, include/gfarm/gfarm_config.h.in: regen

	* configure.ac, gftool/Makefile, gftool/gfarm_agent/Makefile, makes/config.mk.in:
	minimum support of automatic configuration for pthread-related options

	* lib/gfs_hook/hooks.c: fix typo of cpp directive in previous commit

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_64.c, lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h:
	add getdirentries() hook for FreeBSD

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_common.c:
	supply missing #ifdef for FreeBSD

	* gfptool/gfcp_hook/gfcp_hook.c, gftool/gfwhoami/gfwhoami.c, gftool/gfls/gfls.c:
	fix unused variable warning

	* gftool/gfdf/gfdf.c:
	FreeBSD-4.X needs <sys/types.h> to include <sys/socket.h>

	* gfptool/gfrepbe_client/gfrepbe_client.c:
	FreeBSD-4.X doesn't have fdatasync(), more changes were needed

	* configure: regen

	* makes/ltmain.sh:
	copied from ${prefix}/share/libtool/ltmain.sh in libtool-1.5.18 + pkgsrc rev.2

	* aclocal.m4:
	copied from ${prefix}/share/aclocal/libtool.m4 in libtool-1.5.18 + pkgsrc rev.2

	* makes/ltmain.sh:
	copied from ${prefix}/share/libtool/ltmain.sh in libtool-1.5.6

	* aclocal.m4:
	copied from ${prefix}/share/aclocal/libtool.m4 in libtool-1.5.6

	* server/gfmd/gfmd.c:
	<sys/time.h> is needed for struct rusage on FreeBSD-4.X,
	otherwise sizeof(struct timeval) is unknown.

	* lib/libgfarm/gfarm/xxx_proto.c:
	<sys/types.h> is needed to include <netinet/in.h> on FreeBSD-4.X

	* lib/gfs_hook/hooks_common.c:
	getdents() prototype is different on FreeBSD-4.X

	* lib/gfs_hook/hooks.c: don't use SYS_creat, and always use SYS_open,
	because SYS_creat may be disabled in kernel configuration,
	and also FreeBSD-4.X doesn't define the symbol at all.

	* lib/libgfarm/gfarm/gfs_client.c:
	<sys/time.h> is needed for struct timeval on FreeBSD-4.X

	* configure, include/gfarm/gfarm_config.h.in: regen

	* lib/libgfarm/gfarm/gfs_client.c:
	- FreeBSD-4.X doesn't have fdatasync()
	- missing #include <gfarm/gfarm_config.h>

	* configure.ac, gfptool/gfrepbe_client/gfrepbe_client.c, lib/gfs_hook/hooks.c, lib/libgfarm/gfarm/gfs_pio_local.c, server/gfsd/gfsd.c:
	FreeBSD-4.X doesn't have fdatasync()

2005-07-06  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/xxx_proto.c:
	'#ifdef va_copy' should be '#ifndef va_copy'...

2005-07-06  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/xxx_proto.c: FreeBSD-4.X doesn't have va_copy()

2005-07-04  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/gfarm-client.install: added gfarm_agent

2005-07-01  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_misc.c:
	get_infos_by_file(): fixed a invalid free()ing similar to one which
	Anami-san fixed in previous revision

2005-06-29  Kazuaki Anami  <kazuaki@soum.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_misc.c:
	fixed a bug, free()ing invalid pointer, in error case.

2005-06-16  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/hooks_fstat.c, lib/gfs_hook/hooks_stat.c, lib/gfs_hook/hooks_subr.h:
	st_blocks calculation which was made today was wrong,
	its unit is not st_blksize, but always 512.

	* lib/gfs_hook/hooks_fstat.c, lib/gfs_hook/hooks_stat.c, lib/gfs_hook/hooks_subr.h:
	set st_nlink to 32000 instead of 1 or 2 for directories.
	this makes an optimization for some directory traversal routine work correctly,
	although this makes the output of ls somewhat uglier.

	* lib/gfs_hook/hooks_fstat.c, lib/gfs_hook/hooks_stat.c:
	fill "st_blocks" field of struct stat to make "du" command work

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_64.c, lib/gfs_hook/hooks_fstat.c, lib/gfs_hook/hooks_stat.c, lib/gfs_hook/hooks_subr.h:
	move the definition of GFS_BLKSIZE from hooks{,_64}.c to hooks_subr.h

	* lib/gfs_hook/hooks_stat.c:
	remove obsolete and unused code in #if 0 for stat()/xstat().

2005-06-10  Noriyuki Soda  <soda@sra.co.jp>

	* bench/fsstress/README, bench/fsstress/dotest.sample:
	re-add these files

	* bench/fsstress/README, bench/fsstress/dotest.sample, bench/fsstress/fsstress.c, bench/fsstress/global.h:
	merge conflicts

	* bench/fsstress/Makefile, bench/fsstress/fsstress.c, bench/fsstress/global.h, bench/fsstress/xfscompat.h:
	latest fsstress in ltp-full-20050505.tgz from ltp.sourceforge.org

	important changes according to:
	http://cvs.sourceforge.net/viewcvs.py/ltp/ltp/testcases/kernel/fs/fsstress/fsstress.c?rev=1.9&view=log

	Revision 1.8:
	Added two options for setting the number of loops to execute and
	whether or not the test should cleanup after itself.

	Revision 1.3:
	This patch was submitted by Andi Kleen, but originated from Andrew Morton.
	Here's the note:

	When I ported fsstress from the XFS testsuite to run standalone I introduced
	a bug which broke some test cases. This patch fixes it. Found by
	Andrew Morton.

	Please apply.

	-Andi

	* LICENSE: mention licence exception about lib/gfs_hook/sysdep/linux/

	* lib/gfs_hook/sysdep/linux/COPYING.LIB: LGPL 2.1 from FSF

	* lib/gfs_hook/sysdep/linux/COPYING.LIB: New file.

2005-06-10  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* bench/fsstress/fsstress.c, bench/fsstress/global.h: port to cygwin

2005-06-10  Noriyuki Soda  <soda@sra.co.jp>

	* bench/fsstress/fsstress.c, bench/fsstress/global.h:
	make this more portable

	* bench/fsstress/Makefile, bench/fsstress/README, bench/fsstress/dotest.sample, bench/fsstress/fsstress.c, bench/fsstress/global.h, bench/fsstress/xfscompat.h:
	New file.

	* bench/fsstress/Makefile, bench/fsstress/README, bench/fsstress/dotest.sample, bench/fsstress/fsstress.c, bench/fsstress/global.h, bench/fsstress/xfscompat.h:
	fsstress-1.00 - a filesystem test program from SGI.
	license: GPL

2005-06-07  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/agent_wrap.c, lib/libgfarm/gfarm/metadb_ldap.c:
	move gfarm_host_info_*(), gfarm_file_section_info_*(), and gfarm_file_section_copy_info_*() except *free() from metadb_ldap.c to agent_wrap.c to prevent unintended metadb access.

	* lib/libgfarm/gfarm/gfs_pio_scramble.c (gfs_scramble_param_set):
	plug memory leak.
	(gfs_pio_scramble_stat): supported.

2005-06-06  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfarm_agent/gfarm_agent.c, lib/libgfarm/gfarm/agent_client.c, lib/libgfarm/gfarm/agent_proto.c, lib/libgfarm/gfarm/agent_proto.h:
	revert backward compatibility of gfarm_agent.
	do not transfer (or do not touch) unused entries.

	* lib/gfs_hook/hooks_fstat.c: set errno in error case.
	display error message in debug mode.

	* gftool/gfarm_agent/gfarm_agent.c, lib/libgfarm/gfarm/agent_client.c, lib/libgfarm/gfarm/agent_proto.c, lib/libgfarm/gfarm/agent_proto.h:
	Introduce common functions to send and receive path information.
	Unfortunately, this breaks the backward compatibility of gfarm_agent.

2005-06-05  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* include/gfarm/gfarm_metadb.h:
	do not define function prototypes of gfarm_metadb_*().

	* lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/config.c:
	do not call gfarm_metadb_{initialize,terminate}().

	* gftool/gfarm_agent/gfarm_agent.c, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/agent_client.c, lib/libgfarm/gfarm/agent_client.h, lib/libgfarm/gfarm/agent_proto.c, lib/libgfarm/gfarm/agent_proto.h, lib/libgfarm/gfarm/agent_wrap.c:
	gfarm_agent takes care all metadata requests.  When using gfarm_agent, client programs do not connect to an LDAP server any more.

	* lib/libgfarm/gfarm/dircache.h, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/metadb_ldap.c, lib/libgfarm/gfarm/metadb_ldap.h:
	rename LDAP related functions to gfarm_metadb_*.
	gfarm_metadb_initialize is assumed to be called in gfarm_ldap_check() on demand.  It is not necessary to be called explicitly.
	metadb_ldap.h defines every gfarm_metadb_* function, which replaces dircache.h.

2005-06-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_client.c (gfs_client_fsync): simplify

	* lib/gfs_hook/hooks.c (__fcntl):
	do not call gfs_pio_truncate() in error case.
	remove unnecessary spaces and tabs at the end of line.

	* lib/gfs_hook/hooks_subr.c (gfs_hook_is_url):
	add 'Bad address' check to prevent segmentation fault when 'path' points to invalid address.

2005-06-03  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_init.c, lib/gfs_hook/hooks_subr.c:
	add debug message in case of error

2005-06-03  Kazuaki Anami  <kazuaki@soum.co.jp>

	* gftool/gfdf/gfdf.c:
	fixed a bug made by previous commit, caught signal 11 when specified -h option.

	* gftool/gfls/gfls.c:
	fixed a bug made by previous commit, caught signal 11 when no arg specified.

2005-06-03  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/hooks.c: __fcntl():
	- chage argument type from `int' to `long', becase int is imcomatible with
	pointer in some architectures
	- comment out fcntl hook if neither F_FREESP nor F_FREESP64 is defined.
	fcntl hook has to support SYS_fcntl64 on Linux (cf. glibc), but for now,
	fcntl hook is needed only for F_FREESP on Solaris.

2005-06-02  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/changelog: for gfarm-1.1.1-2

2005-06-01  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* debian/libgfarm-dev.manpages:
	add manual pages for gfs_pio_datasync(3) and gfs_pio_sync(3)

	* package/redhat/gfarm.spec:
	add manual pages for gfs_pio_datasync(3), gfs_pio_sync(3)

	* doc/html/en/ref/index.html: add gfs_pio_datasync.3, gfs_pio_sync.3

	* doc/html/en/ref/man3/gfs_pio_datasync.3.html, doc/html/en/ref/man3/gfs_pio_sync.3.html, man/man3/gfs_pio_datasync.3, man/man3/gfs_pio_sync.3:
	genereate from docbook

	* doc/docbook/en/ref/man3/Makefile.inc:
	add gfs_pio_datasync.3, gfs_pio_sync.3

	* doc/docbook/en/ref/man3/gfs_pio_datasync.3.docbook, doc/docbook/en/ref/man3/gfs_pio_sync.3.docbook:
	New file.

2005-06-01  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/rules: could not do dh_strip with --with-globus-static option

2005-06-01  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/html/ja/ref/index.html: add gfs_pio_datasync.3, gfs_pio_sync.3

	* doc/html/ja/ref/man3/gfs_pio_datasync.3.html, doc/html/ja/ref/man3/gfs_pio_sync.3.html, man/ja/man3/gfs_pio_datasync.3, man/ja/man3/gfs_pio_sync.3:
	generate from docbook

	* doc/docbook/ja/ref/man3/Makefile.inc:
	add gfs_pio_datasync.3, gfs_pio_sync.3

	* doc/docbook/ja/ref/man3/gfs_pio_datasync.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_sync.3.docbook:
	New file.

2005-05-31  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_local.c:
	gfs_pio_veiw_global_fsync(), gfs_pio_view_local_fsync(): change error number
	according to the convention

	* server/gfsd/gfsd.c:
	gfs_server_fsync(): change EPROTO to EINVAL because EPROTO isn't portable

	* lib/gfs_hook/hooks.c: add fsync() and fdatasync() hooks

	* include/gfarm/gfs.h, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_remote.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_proto.h:
	add gfs_pio_sync(), gfs_pio_datasync() and their sub functions

	* server/gfsd/gfsd.c: add gfs_server_fsync()

2005-05-27  Noriyuki Soda  <soda@sra.co.jp>

	* doc/html/ja/ref/index.html: typo

2005-05-27  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/hooks.c: add fcntl() hook

	* include/gfarm/gfarm_error.h, lib/libgfarm/gfarm/error.c:
	add new error GFARM_ERR_FUNCTION_NOT_IMPLEMENTED

2005-05-26  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/agent_wrap.c (gfarm_agent_disconnect):
	reset agent_server even in error case to fix segmentation fault when using old tcsh.  Old tcsh may close a socket to gfarm_agent, which results in faulure when closing socket in agent_client_disconnect().

	* lib/gfs_hook/hooks.c (__xmknod): remove redundant code

	* lib/libgfarm/gfarm/metadb_ldap.c:
	do not try LDAP_VERSION2, but just use LDAP_VERSION3
	chase referrals
	do not assume ldap_msgfree() does not free NULL pointer.
	plug memory leak related to make_dn.

2005-05-25  Kazuaki Anami  <kazuaki@soum.co.jp>

	* lib/libgfarm/gfarm/metadb_ldap.c: re-fixed memory leak.

2005-05-25  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/rules: brushed up makefile

2005-05-24  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/config/gfarm-slapd.in:
	increase the maximum number of open file descriptors

2005-05-24  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfreg/gfreg.c:
	fix a bug 'gfreg -r path/fromdir gfarm:todir' makes gfarm:todir/path/fromdir,
	in this revision this command makes the right directory gfarm:todir/fromdir

2005-05-24  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/agent_client.c (agent_client_readdir):
	fix error handling.

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	add -s option in gfarm_agent example.

	* gftool/gfsck/gfsck.c: delete metadata in case of no route to host.
	display error message instead of 'invalid metadata'.

2005-05-23  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/glob.c: another memory leak in an error case

2005-05-23  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/gfarm-client.install: removed pcat entry

	* debian/README.Debian: upgraded information for debuild
	added notice for pcat

	* debian/gfmd.conffiles: added files under /etc

	* debian/gfsd.install: removed init.d script from this list

	* debian/gfmd.postinst, debian/gfsd.postinst: added debhelper scripts

2005-05-23  Kazuaki Anami  <kazuaki@soum.co.jp>

	* lib/libgfarm/gfarm/metadb_misc.c, gftool/gfrep/gfrep.c, gftool/gfrun/gfrun.c, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/glob.c, lib/libgfarm/gfarm/metadb_ldap.c, gftool/gfps/gfps.c, gftool/gfpwd/gfpwd.c, gftool/gfls/gfls.c, gftool/gfdf/gfdf.c:
	fixed memory leak.

2005-05-20  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_remote.c (gfs_pio_remote_storage_close):
	do not close remote file from a child process because its open file count is not incremented.  XXX - This behavior is not the same as expected, but better than closing the remote file.

2005-05-20  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/html/ja/ref/man1/gfreg.1.html, man/ja/man1/gfreg.1, man/man1/gfreg.1, doc/html/en/ref/man1/gfreg.1.html:
	regen

	* doc/docbook/en/ref/man1/gfreg.1.docbook, doc/docbook/ja/ref/man1/gfreg.1.docbook:
	-add description of -f option
	-delete description of overwriting gfarm-URL from recursive mode

	* gftool/gfreg/gfreg.c: fix a bug creates the file named `-'.
	this problem was reported by Naotaka Yamamoto-san and is described in
	http://datafarm.apgrid.org/bugzilla-ja/show_bug.cgi?id=35.

2005-05-19  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* debian/libgfarm-dev.manpages:
	add manual page for gfs_unlink_section(3)

	* package/redhat/gfarm.spec: add manual pages for gfs_unlink_section(3)

	* doc/docbook/ja/ref/man3/Makefile.inc, doc/docbook/en/ref/man3/Makefile.inc, doc/html/en/ref/index.html, doc/html/ja/ref/index.html:
	add manual entry for gfs_unlink_section(3)

	* doc/html/en/ref/man3/gfs_unlink_section.3.html, doc/html/ja/ref/man3/gfs_unlink_section.3.html, man/ja/man3/gfs_unlink_section.3, man/man3/gfs_unlink_section.3:
	generate from docbook

	* doc/docbook/ja/ref/man3/gfs_unlink_section.3.docbook, doc/docbook/en/ref/man3/gfs_unlink_section.3.docbook:
	New file.

2005-05-18  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/hooks.c: __unlink(): make unlink(2) hook unlink
	a section, if it's a executable file or current mode is section view.

	* lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_unlink.c, include/gfarm/gfs.h:
	gfs_unlink_section(): make this a public function and change first
	parameter to a gfarm URL.

2005-05-17  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/control, debian/control.common, debian/control.gsi, debian/control.non-gsi, debian/gfarm-client.links, debian/gfarm-doc.install, debian/rules:
	going:
	  debuild ... for normal package
	  debuild -eGLOBUS_PREFIX=$GLOBUS_LOCATION ... for with gsi
	  debuild -eGLOBUS_PREFIX.. -eBUILD_BOTH ... for gsi and non-gsi packages

2005-05-17  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* RELNOTES: gfsplck in bug fix section should be gfsck.
	Never mind.

	* ChangeLog, RELNOTES: merged change of the gfarm_v1 trunk.

	* lib/libgfarm/gfarm/gfs_pio.c, lib/gfs_hook/Makefile:
	merged change of the gfarm_v1 main trunk.

2005-05-16  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfarm_agent/gfarm_agent.c, server/gfsd/gfsd.c:
	fix warning on Solaris

	* gftool/gfreg/gfreg.c: fix compilation error on Solaris

	* gftool/gfarm_agent/gfarm_agent.c:
	add our own mkdtemp(3) implemenation for Solaris

2005-05-16  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/hooks_common.c, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_remote.c, lib/libgfarm/gfarm/gfs_pio_section.c:
	In previous revision, when an executable file exists in gfarm file system
	and you try to do '/bin/cp a-program /gfarm/the-executable-file'
	on a host which is different architecture, cp returns
	"/gfarm/file: no such object" because cp recognizes that the file
	exists, and opens it with O_TRUNC flag, and gfs_pio_set_view_section()
	searches the file section of the architecure of the host.
	gfs_pio_set_view_section(): create new architecure's section of executable
	file in writing mode

2005-05-16  Noriyuki Soda  <soda@sra.co.jp>

	* include/gfarm/gfarm_config.h.in, configure: regen

	* configure.ac: check whether mkdtemp(3) exists or not

	* lib/gfs_hook/hooks.c: fix warning (statement not reached) on Solaris

	* lib/libgfarm/gfarm/agent_client.c: fix warning on Solaris

	* lib/libgfarm/gfarm/agent_wrap.c: fix compilation error on Solaris

	* package/solaris/build: gfarm-1.1.1

	* package/solaris/gfarm-client.files: add gfarm_agent

2005-05-16  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog, RELNOTES: (Updated) release note for the version 1.1.1.

	* package/redhat/gfarm.spec: gfarm-1.1.1-6
	fsnode depends on the client package since config-gfsd requires gfhost.

	* lib/gfs_hook/Makefile: compile hooks_subr.c with largefile_cflags.

	* lib/libgfarm/gfarm/gfs_pio.c (gfs_pio_truncate):
	do not change file pointer.

2005-05-16  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/rules: o rewrote a list of japanese manpages
	o removed unnecessary comments

2005-05-15  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* man/man3/gfs_chmod.3, man/man3/gfs_pio_truncate.3, man/man3/gfs_rename.3, package/redhat/config/config-gfarm.in, package/redhat/config/config-gfsd.in, package/redhat/config/gfarm-slapd.in, package/redhat/config/gfarm.conf.in, package/redhat/config/gfmd.in, package/redhat/config/gfsd.in, package/redhat/config/slapd.conf-2.0.in, package/redhat/config/slapd.conf-2.1.in, package/redhat/gfarm.patch, package/redhat/gfarm.spec, package/solaris/build, makes/var.mk, man/ja/man1/gfarm_agent.1, man/ja/man1/gfreg.1, man/ja/man1/gfrep.1, man/ja/man1/gfrm.1, man/ja/man1/gfrun.1, man/ja/man3/gfs_chmod.3, man/ja/man3/gfs_rename.3, man/man1/gfarm_agent.1, man/man1/gfreg.1, man/man1/gfrep.1, man/man1/gfrm.1, man/man1/gfrun.1, gftool/gfsck/gfsck.c, include/gfarm/gfarm_config.h.in, include/gfarm/gfarm_error.h, include/gfarm/gfarm_metadb.h, include/gfarm/gfs.h, lib/gfs_hook/getcwd.c, lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_init.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/agent_client.c, lib/libgfarm/gfarm/agent_client.h, lib/libgfarm/gfarm/agent_proto.h, lib/libgfarm/gfarm/agent_wrap.c, lib/libgfarm/gfarm/agent_wrap.h, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/error.c, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_unlink.c, lib/libgfarm/gfarm/metadb_ldap.c, lib/libgfarm/gfarm/schedule.c, lib/libgfarm/gfarm/url.c, gftool/gfexec/gfexec.c, gftool/gfreg/gfreg.c, gftool/gfrep/gfrep.c, gftool/gfrm/gfrm.c, gftool/gfrun/gfrun.c, doc/html/ja/ref/man1/gfarm_agent.1.html, doc/html/ja/ref/man1/gfreg.1.html, doc/html/ja/ref/man1/gfrep.1.html, doc/html/ja/ref/man1/gfrm.1.html, doc/html/ja/ref/man1/gfrun.1.html, doc/html/ja/ref/man3/gfs_chmod.3.html, doc/html/ja/ref/man3/gfs_rename.3.html, gfptool/gfsplck/gfsplck.c, gftool/Makefile, gftool/gfarm_agent/Makefile, gftool/gfarm_agent/agent_ptable.c, gftool/gfarm_agent/agent_ptable.h, gftool/gfarm_agent/agent_thr.c, gftool/gfarm_agent/agent_thr.h, gftool/gfarm_agent/gfarm_agent.c, doc/html/en/ref/index.html, doc/html/en/ref/man1/gfarm_agent.1.html, doc/html/en/ref/man1/gfreg.1.html, doc/html/en/ref/man1/gfrep.1.html, doc/html/en/ref/man1/gfrm.1.html, doc/html/en/ref/man1/gfrun.1.html, doc/html/en/ref/man3/gfs_chmod.3.html, doc/html/en/ref/man3/gfs_pio_truncate.3.html, doc/html/en/ref/man3/gfs_rename.3.html, doc/html/ja/ref/index.html, doc/docbook/en/ref/man1/Makefile.inc, doc/docbook/en/ref/man1/gfarm_agent.1.docbook, doc/docbook/en/ref/man1/gfreg.1.docbook, doc/docbook/en/ref/man1/gfrep.1.docbook, doc/docbook/en/ref/man1/gfrm.1.docbook, doc/docbook/en/ref/man1/gfrun.1.docbook, doc/docbook/en/ref/man3/Makefile.inc, doc/docbook/en/ref/man3/gfs_chmod.3.docbook, doc/docbook/en/ref/man3/gfs_pio_truncate.3.docbook, doc/docbook/en/ref/man3/gfs_rename.3.docbook, doc/docbook/ja/ref/man1/Makefile.inc, doc/docbook/ja/ref/man1/gfarm_agent.1.docbook, doc/docbook/ja/ref/man1/gfreg.1.docbook, doc/docbook/ja/ref/man1/gfrep.1.docbook, doc/docbook/ja/ref/man1/gfrm.1.docbook, doc/docbook/ja/ref/man1/gfrun.1.docbook, doc/docbook/ja/ref/man3/Makefile.inc, doc/docbook/ja/ref/man3/gfs_chmod.3.docbook, doc/docbook/ja/ref/man3/gfs_rename.3.docbook, configure.ac, debian/README.Debian, debian/changelog, debian/config-gfarm, debian/config-gfsd, debian/control, debian/copyright, debian/gfarm-client.manpages, debian/gfarm-doc.examples, debian/gfarm-gfront.manpages, debian/gfarm-slapd.default, debian/gfarm-slapd.init, debian/gfmd.docs, debian/gfmd.examples, debian/gfmd.install, debian/gfmd.manpages, debian/gfmd.postinst, debian/gfsd.install, debian/gfsd.postinst, debian/libgfarm-dev.manpages, debian/rules, debian/slapd.conf-2.1.in, doc/GUIDE.ja, doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja, doc/Makefile, doc/README.hook.en, doc/README.hook.ja, ChangeLog, INSTALL.RPM.en, INSTALL.RPM.ja, INSTALL.en, INSTALL.ja, LICENSE, Makefile.in, RELNOTES, configure:
	merged change of the gfarm_v1 main trunk.

2005-05-13  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* INSTALL.ja: refer to README.hook.ja instead of README.hook.en

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	add how to delete invalid metadata when a file system node is crashed.
	add a comment for gfchmod and gfmv.

	* gfptool/gfsplck/gfsplck.c:
	add file size check even when the -a option is not specified.

2005-05-13  Noriyuki Soda  <soda@sra.co.jp>

	* doc/README.hook.en, doc/README.hook.ja:
	mention that /usr/lib/gfarm/librt-not-hidden.so may be needed on some
	distributions like Fedora Core 2.

2005-05-13  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfmkdir/gfmkdir.c: merged change of the gfarm_v1_gneo branch.
	* add error handling

2005-05-13  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/control: missed dependency in previous commit

	* debian/config-gfarm, debian/config-gfsd, debian/control, debian/gfsd.install, debian/gfsd.postinst, debian/rules:
	support config-gfsd

2005-05-13  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/config/config-gfsd.in, package/redhat/config/config-gfarm.in:
	do not add and restart services when DO_NOT_START_SERVICE is set.

2005-05-13  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/config-gfarm, debian/gfarm-slapd.default, debian/gfarm-slapd.init, debian/gfmd.docs, debian/gfmd.install, debian/gfmd.postinst, debian/rules, debian/slapd.conf-2.1.in:
	support config-gfarm script on gfmd package

	* debian/libgfarm-dev.manpages: removed entries

2005-05-12  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/html/en/ref/man1/gfreg.1.html, man/man1/gfreg.1: regen

	* doc/docbook/en/ref/man1/gfreg.1.docbook:
	add description of -p and -i options

	* doc/html/ja/ref/man1/gfreg.1.html, man/ja/man1/gfreg.1: regen

	* doc/docbook/ja/ref/man1/gfreg.1.docbook:
	add description of -p and -i options

	* gftool/gfreg/gfreg.c:
	get_file_mode(): fix bug makes all file's mode 644

2005-05-11  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h:
	- export connection garbage collector as gfs_client_connection_gc()
	- make that function efficient: from O(N**2) to O(N)
	- symbol fd_receive_message() was incorrectly exported. fix it.

2005-05-11  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfreg/gfreg.c:
	- add '-p' option to specify program registration mode explicitly
	- add '-i' option to specify auto index registration mode explicitly
	- if source file is not a regular file, don't use the mode of the
	  source file, but use more appropriate mode to register it as a
	  gfarm file.

2005-05-10  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/Makefile.inc, lib/libgfarm/gfarm/conn_hash.c, lib/libgfarm/gfarm/conn_hash.h, lib/libgfarm/gfarm/gfj_client.h, lib/libgfarm/gfarm/gfm_client.c, lib/libgfarm/gfarm/gfm_client.h, lib/libgfarm/gfarm/gfp_xdr.c, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_proto.c, lib/libgfarm/gfarm/gfs_proto.h, lib/libgfarm/gfarm/host.h, lib/libgfarm/gfarm/liberror.c, lib/libgfarm/gfarm/liberror.h:
	- correct some gfmd protocols and add GFM_PROTO_CKSUM_{GET,SET},
	  GFM_PROTO_REOPEN, GFM_PROTO_REPLICA_ADD{ING,ED},
	- gfsd client side implementation with simple LRU connection cache.
	- use port number and user name as well as hostname for gfm/gfs connection
	  identification.
	etc.

	* lib/libgfarm/gfarm/conn_hash.c, lib/libgfarm/gfarm/conn_hash.h:
	New file.

	* server/gfmd/fs.c, server/gfmd/fs.h, server/gfmd/gfmd.c:
	add stub of GFM_PROTO_CKSUM_{GET,SET}, GFM_PROTO_REOPEN,
	GFM_PROTO_REPLICA_ADD{ING,ED}

	* lib/libgfarm/gfarm/gfm_proto.h:
	add GFM_PROTO_CKSUM_{GET,SET}, GFM_PROTO_REOPEN, GFM_PROTO_REPLICA_ADD{ING,ED}

2005-05-10  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/gfarm.spec: gfarm-1.1.1-5

2005-05-09  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrm/gfrm.c: previous commit does not work...

	* gftool/gfrm/gfrm.c (remove_cwd_entries):
	delete entries that do not have fragment information.

2005-05-08  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/metadb_ldap.c (gfarm_generic_info_get_foreach):
	use asynchronous version of
	ldap_search.  This improves performance dramatically.  For example,
	2 minutes 5 seconds become just 4 seconds in iGAP/Gfarm testbed.

2005-05-06  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_client.c:
	make UDP timeout from ~3sec. to ~7sec.,
	because ~3sec. is too short from Singapore.
	requested by tatebe-san.

2005-05-05  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_dir.c:
	change the default dircache timeout to 1 day.

	* gftool/gfsck/gfsck.c:
	do not return error of subentries, since error message is already displayed.
	fix a bug not to delete invalid metadata that does not have fragment information.

	* gftool/gfexec/gfexec.c: Display hostname in error message

2005-05-03  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/html/ja/ref/man1/gfrm.1.html, doc/html/en/ref/man1/gfrm.1.html, man/ja/man1/gfrm.1, man/man1/gfrm.1:
	regen

	* doc/docbook/ja/ref/man1/gfrm.1.docbook, doc/docbook/en/ref/man1/gfrm.1.docbook:
	update description

	* gftool/gfrm/gfrm.c:
	support recursive deletion of file replicas.  for example, gfrm -h gfm01 -r dir
	plugged memory leak
	do not delete '.' or '..'.

	* include/gfarm/gfs.h, lib/libgfarm/gfarm/gfs_unlink.c (gfs_unlink):
	use gfarm_url_make_path not gfarm_url_make_path_for_creation.
	(gfs_unlink_repilcas_on_host): removed
	(gfs_unlink_replica): added. this replaces gfs_unlink_replicas_on_host.

	* lib/libgfarm/gfarm/gfs_dir.c (gfs_rmdir):
	use gfarm_url_make_path not gfarm_url_make_path_for_creation.

	* lib/gfs_hook/hooks_init.c: eliminate warning

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	Added 4.2 How to execute gfarm_agent automatically only when it is not there?

	* include/gfarm/gfarm_error.h, lib/libgfarm/gfarm/error.c:
	Added GFARM_ERR_NO_REPLICA_ON_HOST.

2005-04-27  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/html/en/ref/man1/gfreg.1.html, man/man1/gfreg.1: regen

	* doc/docbook/en/ref/man1/gfreg.1.docbook:
	add description of recursive mode

2005-04-26  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/gfarm-client.manpages, debian/libgfarm-dev.manpages:
	applied alphabetical sort

2005-04-26  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_misc.c:
	gfs_rename: add missing check for directory paths in case of destination
	does not exist

	* lib/libgfarm/gfarm/gfs_pio_misc.c:
	fix a bug cases segmentation fault when 'mv tt tt-a' is issued

2005-04-24  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/gfarm.spec: Commented out 'Patch:' line.

	* lib/libgfarm/gfarm/gfs_dir.c:
	delay re-cache until opendir time when a new directory is added to
	the directory cache.

2005-04-23  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/gfarm-client.manpages, debian/rules:
	added gfarm_agent manualpage

2005-04-22  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog, RELNOTES: Release note for the version 1.1.1.

	* package/redhat/gfarm.spec: gfarm-1.1.1-4
	add manual page of gfarm_agent

	* doc/html/en/ref/man1/gfarm_agent.1.html, doc/html/ja/ref/man1/gfarm_agent.1.html, man/ja/man1/gfarm_agent.1, man/man1/gfarm_agent.1:
	regen

	* doc/html/en/ref/index.html, doc/html/ja/ref/index.html:
	add gfarm_agent

	* doc/docbook/en/ref/man1/Makefile.inc, doc/docbook/en/ref/man1/gfarm_agent.1.docbook, doc/docbook/ja/ref/man1/Makefile.inc, doc/docbook/ja/ref/man1/gfarm_agent.1.docbook:
	manual page of gfarm_agent

	* INSTALL.RPM.en: Change style of section

	* gftool/gfarm_agent/gfarm_agent.c: do not lock unnecessary long

	* gftool/gfarm_agent/gfarm_agent.c (cleanup):
	'disconnected' is now displayed only in debug mode.

	* lib/libgfarm/gfarm/gfs_dir.c:
	do no recache when a file is specified.  If there is inconsistency, just add to or remove from directory cache.
	when a directory is inconsistent, delay recache until opendir time.

	* lib/libgfarm/gfarm/gfs_dir.c:
	do not re-cache double when a new file created by some other process
	is accessed.

2005-04-21  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* INSTALL.en, INSTALL.ja: add loglevel 0 in sample slapd.conf

	* gftool/gfarm_agent/gfarm_agent.c: add debug message

2005-04-20  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/html/ja/ref/man1/gfreg.1.html, man/ja/man1/gfreg.1: regen

	* doc/docbook/ja/ref/man1/gfreg.1.docbook: fix typo

	* doc/html/ja/ref/man1/gfreg.1.html, man/ja/man1/gfreg.1: regen

	* doc/docbook/ja/ref/man1/gfreg.1.docbook:
	add description of recursive mode

2005-04-20  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/config/slapd.conf-2.0.in, package/redhat/config/slapd.conf-2.1.in:
	disable syslog

2005-04-19  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/gfarm.spec: gfarm-1.1.1-3

	* gftool/gfarm_agent/agent_thr.c, gftool/gfarm_agent/agent_thr.h, gftool/gfarm_agent/gfarm_agent.c:
	fixed a race condition regarding a file descriptor that will be passed to a new thread.  this is pointed out by Soda-san.

	* lib/libgfarm/gfarm/gfs_dir.c:
	change the default dircache timeout to 1 hour.

	* lib/libgfarm/gfarm/gfs_dir.c (gfs_i_realpath_canonical):
	improve the logic to create a candidate of canonical path that will be compared with the metadata entry.  The previous one tends to cause many recaching when long and wrong pathname that includes many slashes is specified.

2005-04-18  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfreg/gfreg.c: add recursive mode

2005-04-18  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/gfarm.spec: gfarm-1.1.1-2

2005-04-15  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/config/config-gfarm.in:
	copy DB_CONFIG when SLAPD_DB is bdb and $GFARM_LDAP/DB_CONFIG exists.

2005-04-15  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/url.c:
	make sure that the parent is really directory,
	when creating a file or a directory.

2005-04-15  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/README.Debian: updated readme for Debian

2005-04-15  Kazuaki Anami  <kazuaki@soum.co.jp>

	* lib/gfs_hook/hooks.c:
	mknod: added new hook entry *mknod. Note: Only S_IFREG is supported. Fail with
	errno EPERM when specified S_IFCHR, S_IFBLK, S_IFIFO and S_IFSOCK.

2005-04-15  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/copyright, debian/rules:
	A new LICENSE file was stored in copyright file due to Debian policy.

2005-04-14  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/config/config-gfsd.in:
	do not abort even when gfhost fails.

	* package/redhat/config/config-gfsd.in:
	delete host entry before adding it when -f option is specified.

	* include/gfarm/gfarm_metadb.h, gftool/gfarm_agent/gfarm_agent.c, lib/libgfarm/gfarm/metadb_ldap.c (gfarm_metadb_share_connection):
	added
	(gfarm_agent.c): share metadb connection.  note that each thread has a different pid in Linux.

	* gftool/gfarm_agent/gfarm_agent.c:
	ignore SIGPIPE not to terminate by Broken Pipe.
	uncache directory cache when gfarm_agent re-connects to the metadata server.

2005-04-14  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/gfarm-gfront.manpages:
	added gfront manpage in gfarm-gfront package

2005-04-13  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/gfarm.spec: gfarm-1.1.1-1

	* lib/libgfarm/gfarm/schedule.c: reverted to the version 1.19.
	do not define USE_SHUFFLED

	* lib/libgfarm/gfarm/schedule.c (search_idle, search_idle_shuffled):
	fixed out of range access.

2005-04-13  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/changelog: for 1.1.1

2005-04-12  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/gfarm.spec:
	Spec file for the version 1.1.1 at this moment.

	* lib/libgfarm/gfarm/url.c (gfarm_canonical_path_for_creation):
	simplify.  need to incorporate to gfs_realpath_canonical_parent().

	* gftool/Makefile: Added gfarm_agent.

	* lib/libgfarm/gfarm/agent_wrap.c:
	use a different connection to the agent when pid is changed.
	cwd is expanded in a client side because it is maintained by each client.

	* lib/gfs_hook/hooks_subr.c (gfs_hook_is_url):
	do not call gfs_uncachedir() when accessing the root directory.  Maybe we need a different path to do.

	* lib/libgfarm/gfarm/gfs_dir.c (gfarm_i_path_info_get):
	return the metadata even in case of root.
	(gfs_i_realpath_canonical): try to canonicalize the parent directory and check the existence in metadata server before uncaching the data when the specified entry is missing in directory cache.

	* gftool/gfarm_agent/Makefile, gftool/gfarm_agent/agent_ptable.c, gftool/gfarm_agent/agent_ptable.h, gftool/gfarm_agent/gfarm_agent.c:
	Pointer table should be a thread-specific data.
	Index of the table begins with 1 not 0 (= NULL).

2005-04-08  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* gftool/gfarm_agent/agent_thr.c, gftool/gfarm_agent/agent_thr.h, gftool/gfarm_agent/gfarm_agent.c (agent_schedule):
	pass a pointer of int instead of int value in the first argument.

2005-04-08  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfarm_agent/gfarm_agent.c: revert to the revision 1.4.

	* gftool/gfarm_agent/gfarm_agent.c:
	do not share client_addr among threads.

	* gftool/gfarm_agent/Makefile, gftool/gfarm_agent/agent_thr.c, gftool/gfarm_agent/agent_thr.h, gftool/gfarm_agent/gfarm_agent.c:
	Multithreaded

	* server/gfmd/fs.c: gfm_server_fstat(): fix typo.

	* gftool/gfarm_agent/gfarm_agent.c: call exit in sigterm_handler().

	* gftool/gfarm_agent/gfarm_agent.c:
	added -s and -c options to specify shell type.  When neither is not specified, it will be guessed by SHELL environment variable.
	unlink the socket when gfarm_agent terminates.

	* gftool/gfarm_agent/Makefile, gftool/gfarm_agent/gfarm_agent.c, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/agent_client.c, lib/libgfarm/gfarm/agent_client.h, lib/libgfarm/gfarm/agent_proto.h, lib/libgfarm/gfarm/agent_wrap.c, lib/libgfarm/gfarm/agent_wrap.h, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/gfs_dir.c:
	gfarm_agent - pathinfo cache agent
		% eval `gfarm_agent`
	agent_wrap.c - interface to wrap the following Gfarm APIs for agent access;
		gfarm_initialize, gfarm_terminate
		gfarm_path_info_{get,set,replace,remove}
		gfs_realpath_canonical, gfs_get_ino
		gfs_opendir, gfs_readdir, gfs_closedir, gfs_dirname, gfs_uncachedir
	config.c - gfarm_{initialize,terminate} are renamed to gfarm_client_{initialize,terminate}, which are not assumed to be called directly.
	gfs_dir.c - the above function names are renamed to gfarm_i_* or gfs_i_* that are not assumed to be called directly again.

2005-04-03  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks.c (chown, lchown, fchown):
	in the case of the file owner, return 0 with no action...

2005-04-01  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* lib/libgfarm/gfarm/schedule.c:
	fixed segmentation fault by search_idle_shuffled.

2005-03-31  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrun/gfrun.c:
	do not call register_stdin_stderr().  It is costly and not necessary.

	* lib/libgfarm/gfarm/schedule.c: enabled shuffled search of hosts.

2005-03-30  Kazuaki Anami  <kazuaki@soum.co.jp>

	* lib/gfs_hook/hooks.c (__link, _link, link):
	added hook entries which fail(errno=EPERM) under GfarmFS.

2005-03-30  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/README.Debian, debian/changelog, debian/gfarm-doc.examples, debian/gfmd.examples, debian/gfmd.manpages, debian/libgfarm-dev.manpages, debian/rules:
	fixed some problems

2005-03-30  Kazuaki Anami  <kazuaki@soum.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_global.c (gfs_pio_view_global_seek):
	fill *resultp only when resultp != NULL.
	This fixes a bug, segmentation fault occur when resultp == NULL.

2005-03-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_pio.c (gfs_pio_close):
	fixed a warning; 'e' might be used uninitialized in this function.

	* lib/gfs_hook/hooks.c (*setxattr):
	set ENOTSUP to errno instead of ENODATA.  At least, libattr in SuSE-8 set this, and this seems to be assumed by 'cp -a'.

2005-03-24  Noriyuki Soda  <soda@sra.co.jp>

	* server/gfmd/fs.c, server/gfmd/fs.h, server/gfmd/gfmd.c, server/gfmd/group.c, server/gfmd/group.h, server/gfmd/host.c, server/gfmd/host.h, server/gfmd/job.c, server/gfmd/job.h, server/gfmd/peer.c, server/gfmd/peer.h, server/gfmd/process.c, server/gfmd/process.h, server/gfmd/subr.c, server/gfmd/subr.h, server/gfmd/user.c, server/gfmd/user.h:
	adapt changes of metadata protocol, implement GFM_PROTO_COMPOUND_*.
	XXX - still far from complete.

	* lib/libgfarm/gfarm/Makefile.inc, lib/libgfarm/gfarm/gfm_client.c, lib/libgfarm/gfarm/gfm_client.h, lib/libgfarm/gfarm/gfm_proto.h:
	metadata client side protocol

	* lib/libgfarm/gfarm/liberror.c: recently added error messages

	* include/gfarm/gfarm_misc.h:
	define gfarm_pid_t here, instead of server/gfmd/process.h

	* include/gfarm/error.h: add GFARM_ERR_IS_A_SYMBOLIC_LINK,
	to deal with symbolic link by using GFM_PROTO_COMPOUND_*

	* include/gfarm/gfs.h: use gfarm_ino_t

	* lib/libgfarm/gfarm/config_server.c: now "config.h" requires "auth.h"

	* lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h:
	add gfarm_{set,get}_auth_id_type()

	* lib/libgfarm/gfarm/gfp_xdr.c:
	add 'S' format for sending, similar to 's',
	but not NUL-terminated and length is specified.

	* configure, include/gfarm/gfarm_config.h.in: regen

	* configure: switch to autoconf-2.59

2005-03-24  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja: Added 2005.

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	Deleted the description about a problem such that files cannot be created by redirection.  It is now supported.

2005-03-23  Kazuaki Anami  <kazuaki@soum.co.jp>

	* lib/gfs_hook/hooks_subr.c (gfs_hook_is_url):
	return 0 when path is NULL or '\0'.

2005-03-14  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/changelog, debian/control: fixed invalid dependencies.
	  o version 1.1.0-2 is based on 1.1.0 source tar ball with this patch

2005-03-11  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/html/en/ref/index.html: fix an oops for a link of gfs_chmod.3.

	* doc/README.hook.en, doc/README.hook.ja: Added Japanese README.hook.

	* lib/gfs_hook/hooks.c (__execve):
	use ENOENT instead of EPERM when the child process fails.  This is needed to execute 'tar zxfp'. XXX - need to obtain errno from the child.

	* package/redhat/config/config-gfsd.in:
	create required directories for gfsd.

2005-03-10  Noriyuki Soda  <soda@sra.co.jp>

	* package/solaris/build: gfarm-1.1.0

2005-03-09  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog, RELNOTES: Release note for the version 1.1.0.

2005-03-08  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/README.hook.en: Added libpthread-not-hidden.so
	Deleted the description about segfault in RH9 and FC1.  Now it does not occur.

	* doc/Makefile, package/redhat/gfarm.spec: Added INSTALL.RPM.en

	* INSTALL.RPM.en, INSTALL.RPM.ja: update the description.

2005-03-08  Kazuaki Anami  <kazuaki@soum.co.jp>

	* lib/gfs_hook/hooks.c:
	Added syscall hook entries, setxattr(2), lsetxattr(2) and fsetxattr(2).

2005-03-07  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_dir.c:
	change the default dircache timeout to 10 minutes.

	* lib/gfs_hook/hooks.c (__execve):
	do not use WEXITSTATUS in case of WIFSIGNALED.

	* include/gfarm/gfs.h, lib/gfs_hook/hooks_subr.c, lib/libgfarm/gfarm/gfs_pio.c:
	added GFARM_FILE_UNBUFFERED for unbuffered write.

	* lib/gfs_hook/hooks.c (__execve):
	do not re-run execve. status needs to be properly set. deliver the signal.
	(__fork, __vfork): deleted. it is not necessary and rather harmful in FC3.
	(__chown, __lchown, __fchown): just added not to display warning by 'cp -p'
	(__getxattr, ...): ifdef HAVE_ATTR_XATTR_H is removed. there is the case such that getxattr is provided even though /usr/include/attr/xattr.h is missing.

	* lib/gfs_hook/hooks_subr.h: eleminate warning

2005-03-06  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_subr.c (gfs_hook_*_all):
	do not execute an unnecessary loop when max_fd = 0.

2005-03-03  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_subr.c (gfs_hook_close_all):
	flush stdio buffers.  this is needed by flex.

	* lib/libgfarm/gfarm/gfs_pio.c (do_write):
	fixed a big big oops when reading and writing the same file.

	* lib/libgfarm/gfarm/gfs_pio.c (gfs_pio_close):
	update/overwrite metadata when i/o succeeds or there is no inconsistency.  The inconsistency may come from the update by other processes or oneself like 'nvi'.

2005-03-02  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/config/config-gfarm.in, package/redhat/config/config-gfsd.in, package/redhat/config/gfarm-slapd.in, package/redhat/config/slapd.conf-2.0.in, package/redhat/config/slapd.conf-2.1.in:
	make it possible to specify prefix of openldap, and backend database via environment variable.

	* lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_pio_misc.c (gfs_realpath_canonical, gfs_get_ino):
	in case of no such object, refresh the directory cache. this fix makes it possible to refresh the directory cache via gfs_stat().

	* lib/gfs_hook/hooks.c (__execve):
	support suspend/background execution (not tested). set errno when exit status is 255.

	* lib/gfs_hook/hooks_subr.c (gfs_hook_*_all):
	slightly improve efficiency
	(gfs_hook_insert_gfs_*): simplify

2005-03-02  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/control:
	removed excessive dependencies for libc, libldap2, libssl0.9.7

2005-03-02  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_dir.c (gfs_chdir_canonical):
	alloc env when GFS_PWD is not defined. 'tcsh'
	always free the space of 'env'.

	* lib/gfs_hook/hooks_init.c:
	back to the revision 1.12.  metadb_ldap.c revision 1.24 does not unbind the ldap connection unless the connection is established by this process.

	* lib/libgfarm/gfarm/metadb_ldap.c (gfarm_metadb_terminate):
	call ldap_unbind only when the ldap connection is established by this process not the parent.

2005-03-01  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_init.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h (__dup2, __dup):
	flush the iobuffer and set digest calc mode. dup'ed file descriptor can be accessed by the child process.
	(__execve): flush the iobuffer.
	(__fork): added
	(__fork, __vfork): flush the iobuffer. buffers in this level should be flushed.
	(gfs_hook_num_gfs_files): the number of opened file descriptors should not be reest even when the process is forked.  revert to the previous commit.
	(hook_initalize): remove the registration of gfarm_terminate().

	* lib/gfs_hook/hooks_init.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h (hook_initialize):
	do not keep file descripters open.
	(hook_initialize): register gfs_hook_close_all() and gfarm_terminate by atexit.
	(hook_insert_*): allocate file descriptor greater than MIN_FD (= 10).

2005-02-28  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/config/config-gfarm.in, package/redhat/config/config-gfsd.in, package/redhat/config/gfarm-slapd.in, package/redhat/config/gfmd.in, package/redhat/config/gfsd.in:
	use killproc instead of killall

	* package/redhat/config/config-gfarm.in, package/redhat/config/config-gfsd, package/redhat/config/config-gfsd.in, package/redhat/config/gfarm-slapd.in, package/redhat/config/gfmd.in, package/redhat/config/gfsd.in, package/redhat/config/slapd.conf-2.0.in, package/redhat/config/slapd.conf-2.1.in, package/redhat/gfarm.spec, Makefile.in, configure, configure.ac:
	change installation directory.  config-{gfarm,gfsd} will be installed in /usr/bin, and template files will be installed in /usr/share/gfarm/config.
	add --prefix option to config-{gfarm,gfsd}.
	create startup script for gfsd and gfmd when config-{gfarm,gfsd} are executed in user mode.

	* lib/libgfarm/gfarm/gfs_pio.c:
	Fixed an oops when seeking beyond the buffer in SEEK_CUR.

	* lib/gfs_hook/hooks_init.c:
	use dup(2) instead of open(2) for efficiency.

2005-02-27  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_init.c:
	Reserve file descriptors up to 6 for applications.  At least, this is required by 'configure'.  tcsh and zsh also seem to require this.

	* lib/gfs_hook/hooks.c (__execve):
	add debug message in the case of fork and exec.

2005-02-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* INSTALL.RPM.ja, package/redhat/config/config-gfarm.in, package/redhat/config/config-gfsd:
	start daemons in a configure script.

	* lib/libgfarm/gfarm/gfs_pio_misc.c (gfs_rename):
	plugged memory leak. use gfarm_url_make_path() for oldpath. allow GFARM_ERR_NO_SUCH_OBJECT for gfs_unlink the destination file to make fault tolerant.

	* lib/gfs_hook/hooks.c:
	Added a sycall hook for symlink although it returns EPERM in Gfarm file system.

	* lib/gfs_hook/hooks_common.c: display flags for open(2) in octal.

	* package/redhat/gfarm.spec: Added INSTALL.RPM.ja.
	Fixed installation problem of config/ directory.

	* package/redhat/config/slapd.conf-2.1.in, INSTALL.RPM.ja, Makefile.in, configure, configure.ac, doc/Makefile, package/redhat/config/config-gfarm.in, package/redhat/config/config-gfsd, package/redhat/config/gfarm-slapd.in, package/redhat/config/gfarm.conf.in, package/redhat/config/slapd.conf-2.0.in, package/redhat/gfarm.spec:
	Added configuration package for Red Hat distribution.
	config-gfarm - set up metadata server and Gfarm configuration file.
	config-gfsd - set up file system node.
	Configuration files such as /etc/gfarm.conf, /etc/gfarm-ldap/slapd.conf, and /etc/init.d/gfarm-slapd, will be created by 'config-gfarm' script.
	For details, see INSTALL.RPM.ja.

	* lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_proto.c:
	removed old special code, unlink + create, to support GFARM_FILE_TRUNC.  Now, we do not need such a special code.

2005-02-24  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_proto.c:
	It is necessary to add O_CREAT when GFARM_FILE_TRUNC is specified in gfs_pio_open() since the opening file is deleted in gfs_pio_set_view_section().
	This fix adds O_CREAT in gfs_open_flags_localize().  Need to figure out the side effect if it exists.

	* gftool/gfexec/gfexec.c:
	Set PWD even in Gfarm file system.  This only works with syscall hook
	library, but harmless without it.

	Now, 'gfrun ls' works as 'gfrun ls gfarm:' not listing contents of a
	physical spool directory.

2005-02-23  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/html/en/ref/man3/gfs_chmod.3.html, man/man3/gfs_chmod.3: regen

	* doc/docbook/en/ref/man3/gfs_chmod.3.docbook:
	add description about execute mode

2005-02-23  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks.c (__execve):
	return -1 and set errno when execve of the child process fails.
	do not modify status.

2005-02-21  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/html/ja/ref/man3/gfs_chmod.3.html, man/ja/man3/gfs_chmod.3: regen

	* doc/docbook/ja/ref/man3/gfs_chmod.3.docbook:
	add description about execute modes

	* doc/html/en/ref/man3/gfs_rename.3.html, doc/html/ja/ref/man3/gfs_rename.3.html:
	generate again from docbook

	* man/ja/man3/gfs_rename.3: genarate again from docbook

	* man/man3/gfs_rename.3: generate again from docbook

	* doc/html/ja/ref/index.html: add gfs_pio_truncate.3 and gfs_rename.3

	* doc/docbook/en/ref/man3/Makefile.inc, doc/docbook/ja/ref/man3/Makefile.inc, doc/html/en/ref/index.html:
	add gfs_rename.3

	* doc/docbook/ja/ref/man3/gfs_rename.3.docbook, doc/docbook/en/ref/man3/gfs_rename.3.docbook:
	add detail description and cheage explanation of some return values

2005-02-18  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h:
	shell redirection support.
	(__execve): close all opened files.

	* lib/gfs_hook/hooks.c (__getcwd): do not call unnecessary strlen().

2005-02-17  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks.c (__chdir):
	call gfs_hook_set_cwd_is_gfarm() only when chdir operation succeeds like __fchdir.

	* lib/libgfarm/gfarm/gfs_dir.c (gfs_chdir_canonical):
	realloc does not work well at least using bash.

	* lib/gfs_hook/getcwd.c (gfs_hook_syscall_getcwd):
	realloc the malloc'ed buffer when specified size is zero.

	* lib/libgfarm/gfarm/gfs_dir.c (gfs_chdir_canonical):
	Fixed the condition to determine whether buffer space for GFS_PWD environment variable is free'ed by some other application or not.  getenv() returns only value part.  Fixed the calculation of env_len in this case.

	* lib/gfs_hook/getcwd.c: Take care of the case that buf is NULL.
	Follows the linux (libc4, libc5, glibc) behavior as an extension to the POSIX.1 standard.

2005-02-17  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/getcwd.c:
	SYS_getcwd returns the length of the cwd, not pointer.

	* lib/libgfarm/gfarm/gfs_dir.c: more simplify

	* lib/libgfarm/gfarm/gfs_dir.c: fix a bug in revision 1.40

	* lib/libgfarm/gfarm/gfs_dir.c: simplify

	* lib/libgfarm/gfarm/gfs_dir.c:
	fix another corner case in previous commit.

	* lib/gfs_hook/hooks_common.c: portability fix for *BSD

	* lib/libgfarm/gfarm/gfs_dir.c:
	deal with applications which reallocate environment variables by itself,
	it seems tcsh realloc's $GFS_PWD.

	* lib/libgfarm/gfarm/gfs_pio_misc.c:
	<limits.h> - portability fix: PATH_MAX needs this.
	get_path_infos() - shut up "uninitialized variable" warning by gcc

2005-02-17  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_misc.c:
	gfs_rename(): implement renaming directory

2005-02-16  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfrep/gfrep.c:
	traverse_file_tree_with_cwd(): call gfs_closedir() missed in previous revision

2005-02-16  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/changelog: Debian changelog file for gfarm-1.1.0

2005-02-16  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/gfarm.spec: spec file for gfarm-1.1.0-0.
	install libraries in %{_libdir} to support 64bit architecture.

2005-02-15  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/docbook/en/ref/man3/Makefile.inc, doc/docbook/ja/ref/man3/Makefile.inc:
	Added gfs_pio_truncate.3

	* INSTALL.en, INSTALL.ja, doc/GUIDE.ja:
	Removed gfregister related description.

	* LICENSE: Added 2005.

2005-02-11  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/html/ja/ref/man1/gfrun.1.html, man/ja/man1/gfrun.1, man/man1/gfrun.1, doc/html/en/ref/man1/gfrun.1.html:
	regen

	* doc/docbook/en/ref/man1/gfrun.1.docbook, doc/docbook/ja/ref/man1/gfrun.1.docbook:
	Updated the description about the -I option.

	* gftool/gfrun/gfrun.c:
	Support the -I <index> option with not only the -G <file> option but
	also the -N <nprocs> option.

2005-02-09  Kazuaki Anami  <kazuaki@soum.co.jp>

	* lib/gfs_hook/hooks.c:
	Make __fchdir() call gfs_hook_set_cwd_is_gfarm() when successfully changed
	directory.

2005-02-01  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_pio_global.c (gfs_pio_view_global_adjust):
	take care of the case that file fragment need to be moved more than one.

2005-01-21  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfsl/session.c:
	GNEO ad-hoc code to use a service certificate in the client side.
	XXX - this is a stopgap code.

	* lib/libgfarm/gfarm/auth_client_gsi.c (gfarm_auth_request_gsi_multiplexed):
	typo in error message.

	* lib/libgfarm/gfsl/session.c (secSessionInitiateRequest):
	cred should be state->cred in gfarmGssInitiateSecurityContextRequest().

	* lib/libgfarm/gfarm/auth_client_gsi.c (gfarm_auth_request_gsi_multiplexed):
	typo in error message.

	* lib/libgfarm/gfsl/session.c (secSessionInitiateRequest):
	cred should be state->cred in gfarmGssInitiateSecurityContextRequest().

2005-01-17  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* Makefile.in: delete gneogfcmd in SUBDIRS.

	* lib/libgfarm/gfarm/gfs_pio_scramble.c, lib/libgfarm/gfarm/gfs_pio_scramble.h:
	declare gfs_scramble_make_replica in gfs_pio_scramble.h.
	make several functions static in gfs_pio_scramble.c.

2005-01-14  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/html/en/ref/man1/gfrep.1.html, man/man1/gfrep.1: regen

	* doc/docbook/en/ref/man1/gfrep.1.docbook:
	- -D option: add description about the case none of the options speceify
	  destination hosts or domain is used
	- add usage -N option
	- -H, -D, -P, -d option: add description in case of Gfarm-URL is a directory

	* doc/html/ja/ref/man1/gfrep.1.html, man/ja/man1/gfrep.1: regen

	* doc/docbook/ja/ref/man1/gfrep.1.docbook:
	add recursive replication description to -P and -d option

2005-01-13  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_pio_scramble.h:
	add function declarations of gfs_pio_{open,close}_v2().
	remove typedefs of uint32_t and uint64_t.  Instead, include stdint.h.

	* lib/libgfarm/gfarm/auth_server_gsi.c:
	Reverted to the revision 1.17.  The revision 1.17.2.1 is committed in
	error, I believe.

2005-01-13  Katsuhiko Ohkubo  <ohkubo-k@suri.co.jp>

	* doc/scramble-dd.pdf, doc/scramble-dd.ppt: New file.

	* doc/scramble-dd.pdf, doc/scramble-dd.ppt:
	detail design of scramble mode

	* doc/scramble-fd.doc, doc/scramble-fd.pdf: New file.

	* doc/scramble-fd.doc, doc/scramble-fd.pdf:
	fundamental design of scramble mode

2005-01-12  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* package/redhat/gfarm.spec:
	add English manual and html file entries of gfs_pio_truncate(3)

	* doc/html/en/ref/index.html: add an entry of gfs_pio_truncate(3)

	* doc/html/en/ref/man3/gfs_pio_truncate.3.html, man/man3/gfs_pio_truncate.3:
	generate from doocbook

	* doc/docbook/en/ref/man3/gfs_pio_truncate.3.docbook: New file.

2005-01-12  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/gfarm.patch:
	Added a patch in makes/var.mk to enable to compile Gfarm with GSI on AIST M Cluster.

	* ChangeLog: Reverted replaced keywords.

	* makes/var.mk:
	Changed the order of $metadb_client_libs and $globus_gssapi_libs in GFARMLIB to properly link Globus gssapi library.
	This avoids the segfault problem when ldap library is linked with another gssapi library.

2005-01-11  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/gfarm.patch, package/redhat/gfarm.spec:
	spec file for gfarm-1.0.4-4.

	* ChangeLog: Fixed an email address of Ohkubo-san.

	* ChangeLog: ChangeLog for gfarm-1.0.4-4

	* doc/html/ja/ref/index.html: Added an entry of gfs_pio_truncate.3.
	English manual is still missing.

2005-01-06  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks.c:
	SuSE SLES-8 does not define SYS_getxattr but have getxattr() if attr package is installed.  However, in this case, we give up calling the original getxattr() via the syscall hook library but just return ENODATA.

2005-01-05  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* configure: regen

	* configure.ac: Added a run script for gneo_agent.

2005-01-05  Katsuhiko Ohkubo  <ohkubo-k@suri.co.jp>

	* lib/libgfarm/gfarm/metadb_ldap.c:
	delete LDAP call timing print for tuning

2004-12-28  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/metadb_ldap.c:
	Merged change of the gfarm_v1 main trunk.

	* lib/libgfarm/gfarm/metadb_ldap.c (gfarm_metadb_terminate):
	Fixed typo.
	(gfarm_metadb_check): Added NULL check.

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_misc.h, lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_unlink.c, lib/libgfarm/gfarm/hostspec.c, lib/libgfarm/gfarm/metadb_ldap.c, lib/libgfarm/gfarm/schedule.c, man/ja/man1/gfrep.1, man/ja/man3/gfs_pio_truncate.3, man/man5/gfarm.conf.5, package/redhat/gfarm.patch, package/redhat/gfarm.spec, gfptool/gfsplck/gfsplck.c, gftool/gfreg/Makefile, gftool/gfreg/gfreg.c, gftool/gfrep/gfrep.c, include/gfarm/gfarm_metadb.h, include/gfarm/gfarm_misc.h, include/gfarm/gfs.h, lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_64.c, lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_stat.c, doc/docbook/ja/ref/man1/gfrep.1.docbook, doc/docbook/ja/ref/man3/Makefile.inc, doc/docbook/ja/ref/man3/gfs_pio_truncate.3.docbook, doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man1/gfrep.1.html, doc/html/ja/ref/man3/gfs_pio_truncate.3.html, doc/docbook/en/ref/man5/gfarm.conf.5.docbook:
	Marged change of the gfarm_v1 main trunk on 28 December, 2004.

	* lib/libgfarm/gfarm/metadb_ldap.c, include/gfarm/gfarm_metadb.h (gfarm_metadb_check):
	added for sanity check of gfarm metadb server (slapd).
	(gfarm_metadb_initialize): call metadb_terminate() when metadb_initialize() fails.

2004-12-27  Katsuhiko Ohkubo  <ohkubo-k@suri.co.jp>

	* server/gfmd/Makefile, server/gfmd/attr.c, server/gfmd/attr.h, server/gfmd/dents.c, server/gfmd/dents.h, server/gfmd/fs.c, server/gfmd/fsattr.c, server/gfmd/fsattr.h, server/gfmd/getdentsplus.c, server/gfmd/gfmd.c, server/gfmd/gneo_proto.h, server/gfmd/inode.c, server/gfmd/inode.h, server/gfmd/process.c, server/gfmd/process.h, server/gfmd/rmdir.c, server/gfmd/xattr.c, server/gfmd/xattr.h, server/gfsd/gfsd.c:
	GNEO extensions for Gfarm v2

	* server/gfmd/attr.c, server/gfmd/attr.h, server/gfmd/dents.c, server/gfmd/dents.h, server/gfmd/fsattr.c, server/gfmd/fsattr.h, server/gfmd/getdentsplus.c, server/gfmd/gneo_proto.h, server/gfmd/rmdir.c, server/gfmd/xattr.c, server/gfmd/xattr.h:
	New file.

	* include/gfarm/error.h, lib/libgfarm/Makefile, lib/libgfarm/gfarm/Makefile.inc, lib/libgfarm/gfarm/gfm_proto.h, lib/libgfarm/gfarm/gfp_fmt.c, lib/libgfarm/gfarm/gfp_fmt.h, lib/libgfarm/gfarm/gfp_xdr.c, lib/libgfarm/gfarm/gfs_pio_global_scramble.c, lib/libgfarm/gfarm/gfs_pio_scramble.c, lib/libgfarm/gfarm/gfs_pio_scramble.h, lib/libgfarm/gfarm/gfs_proto.h, lib/libgfarm/gfarm/pack.c, lib/libgfarm/gfarm/pack.h, lib/libgfarm/gfarm/stailq.c, lib/libgfarm/gfarm/stailq.h, lib/libgfarm/gfarm/vbuf.c, lib/libgfarm/gfarm/vbuf.h:
	GNEO extensions for Gfarm v2

	* lib/libgfarm/gfarm/gfp_fmt.c, lib/libgfarm/gfarm/gfp_fmt.h, lib/libgfarm/gfarm/pack.c, lib/libgfarm/gfarm/pack.h, lib/libgfarm/gfarm/stailq.c, lib/libgfarm/gfarm/stailq.h, lib/libgfarm/gfarm/vbuf.c, lib/libgfarm/gfarm/vbuf.h:
	New file.

	* doc/gfarm_v2_geno.text: GNEO extensions for Gfarm v2

	* doc/gfarm_v2_geno.text: New file.

2004-12-24  Katsuhiko Ohkubo  <ohkubo-k@suri.co.jp>

	* gftool/gfrm/gfrm.c, gftool/gfmkdir/gfmkdir.c, gftool/example/gfimport_text/gfimport_text.c:
	add error handling

	* lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_global_scramble.c, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_scramble.c, lib/libgfarm/gfarm/gfs_pio_scramble.h, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_proto.h, lib/libgfarm/gfarm/gfs_unlink.c, lib/libgfarm/gfarm/metadb_ldap.c, lib/libgfarm/gfarm/schedule.c, lib/libgfarm/gfarm/schedule.h, lib/libgfarm/gfsl/session.c, lib/libgfarm/gfutil/gfevent.c, lib/libgfarm/gfutil/gfevent.h, package/redhat/gfarm-slapd, server/gfsd/gfsd.c:
	GNEO extension for Gfarm v1

	* lib/libgfarm/gfarm/gfs_pio_global_scramble.c, lib/libgfarm/gfarm/gfs_pio_scramble.c, lib/libgfarm/gfarm/gfs_pio_scramble.h:
	New file.

	* include/gfarm/gfs.h, include/gfarm/gfs_hook.h, lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_init.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/auth_server_gsi.c, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, gftool/example/Makefile, Makefile.in, doc/conf/gfarm.schema:
	GNEO extension for Gfarm v1

	* gftool/Makefile: add gneo&gneo_agent to SUBDIRS

2004-12-22  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/hooks_stat.c (__stat):
	Get uid and gid from local user's password entry if possible.

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_64.c, lib/gfs_hook/hooks_common.c:
	Added truncate()/truncate64() hooks.
	Added ftruncate()/ftruncate64() hooks.
	(__getdents/__getdents64): set values to struct dirent{,64}.d_off for user
	level nfsd.

2004-12-21  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/html/en/ref/man5/gfarm.conf.5.html, man/man5/gfarm.conf.5: regen

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook: Fixed trivial typos.

	* lib/libgfarm/gfsl/session.c:
	Fixed a bug such that a service certificate cannot be used when host cert or user proxy cert is not available.

2004-12-15  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfrep/gfrep.c: support recursive replication for -P option

2004-12-09  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_global.c:
	gfs_pio_view_global_ftruncate(): correct a local vaiable's type

	* lib/libgfarm/gfarm/gfs_pio_local.c:
	change the function name gfs_pio_local_storage_truncate to
	gfs_pio_local_storage_ftruncate to make consitent with other functions.

2004-12-08  Noriyuki Soda  <soda@sra.co.jp>

	* server/gfmd/fs.c:
	recover lines which were accidentally removed in revision 1.1.2.5

	* server/gfmd/fs.c: fix two problems in gfm_server_getdirents()
	- update atime
	- fix an error about seek offset

2004-12-07  Noriyuki Soda  <soda@sra.co.jp>

	* server/gfmd/fs.c:
	check negative value, before passing it to malloc(3)

	* lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/gfp_xdr.c, lib/libgfarm/gfarm/hostspec.c, lib/libgfarm/gfarm/io_fd.c, lib/libgfarm/gfarm/iobuffer.c, lib/libgfarm/gfarm/param.c, lib/libgfarm/gfarm/sockopt.c, lib/libgfarm/gfarm/stringlist.c, server/gfmd/dir.c, server/gfmd/fs.c, server/gfmd/host.c, server/gfmd/job.c, server/gfmd/process.c, server/gfmd/user.c:
	fix warnings

	* server/gfmd/Makefile, server/gfmd/dir.c, server/gfmd/dir.h, server/gfmd/fs.c, server/gfmd/fs.h, server/gfmd/gfmd.c, server/gfmd/group.c, server/gfmd/group.h, server/gfmd/inode.c, server/gfmd/inode.h, server/gfmd/process.c, server/gfmd/process.h:
	- make directories be able to be opened from a client,
	  to support system call hook
	  (discussed in a meeting with GNEO team)
	- make directory sorted, by using red-black tree instead of hash table
	  (required for GNEO)
	- backout some changes in the following
	  (sugested by MORIWAKE-san @ suri in [gfarm-cvs:03611]):
		> soda  Tue Aug 10 01:01:01 JST 2004
		>
		> Update of /gfarm/server/gfmd
		> In directory cvs.apgrid.org:/tmp/cvs-serv28263
		>
		> Modified Files:
		>       Tag: gfarm_v2
		>       fs.c gfmd.c inode.c inode.h peer.c process.c process.h
		> Log Message:
		> bug fix - deal with realloc().
		> use internal_ino_t instead of "struct inode *" for long term use
	- implement some more protocols

	* server/gfmd/dir.c, server/gfmd/dir.h: New file.

	* lib/libgfarm/gfarm/gfm_proto.h:
	- make directories be able to be opened from a client,
	  to support system call hook
	  (discussed in a meeting with GNEO team)
	- make directory sorted, by using red-black tree instead of hash table
	  (required for GNEO)
	- backout some changes in the following
	  (sugested by MORIWAKE-san @ suri in [gfarm-cvs:03611]):
		> soda  Tue Aug 10 01:01:01 JST 2004
		>
		> Update of /gfarm/server/gfmd
		> In directory cvs.apgrid.org:/tmp/cvs-serv28263
		>
		> Modified Files:
		>       Tag: gfarm_v2
		>       fs.c gfmd.c inode.c inode.h peer.c process.c process.h
		> Log Message:
		> bug fix - deal with realloc().
		> use internal_ino_t instead of "struct inode *" for long term use
	- implement some more protocols

	* lib/libgfarm/gfutil/tree.h:
	splay tree and red-black tree macro library by Niels Provos, from NetBSD 2.0

	* lib/libgfarm/gfutil/tree.h:
	remove this from main trunk for gfarm v1, for now

	* lib/libgfarm/gfutil/tree.h: New file.

	* lib/libgfarm/gfutil/tree.h:
	splay tree and red-black tree macro library by Niels Provos, from NetBSD 2.0

2004-12-07  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfrep/gfrep.c: travarese_file_tree_with_cwd():
	- move out the same process in a loop
	- add a error check

2004-12-06  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfrep/gfrep.c: support recursive replication for -d option

2004-11-17  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* man/ja/man3/gfs_pio_truncate.3, doc/html/ja/ref/man3/gfs_pio_truncate.3.html:
	generate from gfs_pio_truncate.3.docbook

	* doc/docbook/ja/ref/man3/gfs_pio_truncate.3.docbook: New file.

	* doc/docbook/ja/ref/man3/Makefile.inc: add gfs_pio_truncate.3

2004-11-16  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/gfarm.patch: Removed patches for $Id$ lines.

2004-11-15  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* man/ja/man1/gfrep.1: regen

2004-11-11  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfreg/gfreg.c: forgot to update an argument of getopt(3)

	* gftool/gfreg/Makefile: add dependency

	* gftool/gfreg/gfreg.c:
	deal with the case where nhosts != nfragments in -H option handling

	* gftool/gfreg/gfreg.c: add missing -H option parsing

2004-11-11  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/html/ja/ref/man1/gfrep.1.html, man/ja/man1/gfrep.1: regen

	* doc/docbook/ja/ref/man1/gfrep.1.docbook:
	- -D option: add description about the case none of the options speceify
	  destination hosts or domain is used
	- add usage -N option
	- -H, -D option: add description in case of Gfarm-URL is a directory

2004-11-10  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfrep/gfrep.c:
	- do not print "warning: -s src option is ignored",
	  if "gfrep -s <src> -d <dst> <files>..." is specified.
	- print usage instead of "warning: -N 1 (default) is meaningless",
	  when no argument is specified.
	- be more strict about invalid option.

	* lib/libgfarm/gfarm/gfs_pio_section.c:
	disable on-demand replication, if the host is not an active filesystem node.

2004-11-10  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfrep/gfrep.c:
	implement -N <num-replicas option for a gfarm regular file

2004-11-09  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfrep/gfrep.c:
	-support -N num-replicas option without -D domain option
	-add cheking compatibility between -N and other options

2004-11-08  Noriyuki Soda  <soda@sra.co.jp>

	* include/gfarm/gfs.h, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/gfs_misc.h, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_unlink.c:
	add functions to migrate replicas

	* lib/libgfarm/gfarm/hostspec.c:
	gfarm_host_is_in_domain(): treat null string domain as a special case
		which matches with any hosts

2004-11-08  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/schedule.c:
	gfarm_schedule_search_idle_acyclic_by_domainname(): fix a bug

2004-11-07  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h:
	const'ify

	* gftool/gfrep/gfrep.c: change default number of replicas from 2 to 1

2004-11-07  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/gfarm.patch, package/redhat/gfarm.spec:
	patch file until the change on Nov 7, 2004. (gfarm_schedule_search_idle_acyclic_by_domainname)
	spec file for gfarm-1.0.4-3 to apply the above patch.

2004-11-07  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfrep/gfrep.c:
	implement a option -N <number-of-replicas-per-fragment>

	* lib/libgfarm/gfarm/schedule.c, include/gfarm/gfarm_misc.h:
	add gfarm_schedule_search_idle_acyclic_by_domainname() for gfrep -N #replica

2004-11-07  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrep/gfrep.c: plugged memory leak

2004-11-06  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/metadb_ldap.c:
	guarantee that forked child processes never shared parent's LDAP connection,
	because that not only makes the clients broken, but also makes slapd broken.

2004-11-06  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfptool/gfsplck/gfsplck.c:
	fixed a bug not to register a file that does not have fragment information.

2004-11-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/gfarm.patch, package/redhat/gfarm.spec:
	patch file until the change on Nov 3, 2004
	spec file for gfarm-1.0.4-2 to apply the above patch.

2004-11-04  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfrep/gfrep.c:
	- get_fragment_number_in_domain() -> get_replica_number_in_domain()
	- get_replica_number_in_domain(): plug a memory leak

	* gftool/gfrep/gfrep.c:
	support recursive replication for -H and -D option

2004-11-03  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfptool/gfsplck/gfsplck.c (fixfrag): fixed a termination condition.

	* gfptool/gfsplck/gfsplck.c (fixfrag):
	search sectin part from the last not from the beginning.
	filename may include ':'.

2004-11-02  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_pio_misc.c (gfarm_url_section_replicate_from_to):
	fixed a segfault bug in error case.

2004-11-01  Noriyuki Soda  <soda@sra.co.jp>

	* man/man5/gfarm.conf.5:
	recover truncated description in previous commit

	* gftool/gfhost/gfhost.c:
	fix long standing bug about -i option, when non-default spool_serverport
	is specified in the configuration file.

	* package/redhat/gfarm.spec:
	ldconfig is needed, at least if shlibs are installed to /usr/lib,
	reported by tatebe-san.

	The reason we do this unconditionally (i.e. do not check whether
	the target directory is /usr/lib or not) is because it's harmless,
	even if the target isn't /usr/lib.

	* package/solaris/build, package/solaris/gfarm-client.files, package/solaris/gfarm-devel.files, package/solaris/gfarm-doc.files, package/solaris/gfarm-fsnode.files, package/solaris/gfarm-gfptool.files, package/solaris/gfarm-gfront.files, package/solaris/gfarm-libs.files, package/solaris/gfarm-server.files:
	- forgot to update *.files to reflect the change in revision 1.11 of build
	  script (change the installation directory on Solaris from /usr/grid to
	  /usr/local/gfarm).
	- replace $prefix automatically, instead of hardcoding it in *.files

2004-11-01  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog, RELNOTES: Updated RELNOTES for the version 1.0.4 again.

	* gftool/gfwhere/gfwhere.c (display_section_copies):
	fixed output problem in error case.
	(display_replica_catalog): return the error string of the first
	failure not NULL.

2004-10-31  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfdf/gfdf.c:
	the hostname argument of gfs_client_connection() must be canonical hostname now.

2004-10-31  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/html/en/ref/man1/gfwhere.1.html, doc/html/ja/ref/man1/gfwhere.1.html, man/man1/gfwhere.1, man/ja/man1/gfwhere.1:
	regen

	* doc/docbook/en/ref/man1/gfwhere.1.docbook, doc/docbook/ja/ref/man1/gfwhere.1.docbook:
	Added the description of the -s option that displays the file segment size.

2004-10-31  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfdf/Makefile, gftool/gfdf/gfdf.c, package/redhat/gfarm.spec, package/solaris/gfarm-client.files, doc/html/en/ref/man1/gfdf.1.html, doc/html/ja/ref/index.html, doc/html/ja/ref/man1/gfdf.1.html, gftool/Makefile, man/ja/man1/gfdf.1, man/man1/gfdf.1, debian/gfarm-client.install, debian/gfarm-client.manpages, doc/docbook/en/ref/man1/Makefile.inc, doc/docbook/en/ref/man1/gfdf.1.docbook, doc/docbook/ja/ref/man1/Makefile.inc, doc/docbook/ja/ref/man1/gfdf.1.docbook, doc/html/en/ref/index.html:
	add gfdf command to see the result of GFS_PROTO_STATFS protocol

	* include/gfarm/gfarm_config.h.in, configure: regen

	* configure.ac, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_proto.h, server/gfsd/Makefile, server/gfsd/gfsd.c, server/gfsd/gfsd_subr.h, server/gfsd/statfs.c:
	add GFS_PROTO_STATFS protocol to deal with disk full problem at gfrep

2004-10-31  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfwhere/gfwhere.c:
	added -s option to display each file section size.
	improved readability.

2004-10-30  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/html/en/ref/man3/gfs_pio_create.3.html, doc/html/ja/ref/man3/gfs_pio_create.3.html, man/ja/man3/gfs_pio_create.3, man/man3/gfs_pio_create.3:
	regen

	* doc/docbook/en/ref/man3/gfs_pio_create.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_create.3.docbook:
	uncomment the description about GFARM_ERR_ALREADY_EXISTS.
	improved wording.

2004-10-29  Noriyuki Soda  <soda@sra.co.jp>

	* doc/html/en/ref/man3/gfs_pio_create.3.html, doc/html/ja/ref/man3/gfs_pio_create.3.html, man/ja/man3/gfs_pio_create.3, man/man3/gfs_pio_create.3:
	regen

	* doc/docbook/ja/ref/man3/gfs_pio_create.3.docbook, doc/docbook/en/ref/man3/gfs_pio_create.3.docbook:
	mention that one of GFARM_FILE_RDONLY, GFARM_FILE_WRONLY or GFARM_FILE_RDWR
	flag is needed. suggested by tatebe-san.

	* doc/docbook/en/ref/man3/gfs_pio_open.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_open.3.docbook:
	update date

	* doc/html/en/ref/man3/gfs_pio_create.3.html, doc/html/en/ref/man3/gfs_pio_open.3.html, doc/html/ja/ref/man3/gfs_pio_create.3.html, doc/html/ja/ref/man3/gfs_pio_open.3.html, man/ja/man3/gfs_pio_create.3, man/ja/man3/gfs_pio_open.3, man/man3/gfs_pio_create.3, man/man3/gfs_pio_open.3:
	regen

	* lib/gfs_hook/hooks_subr.c, lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_proto.h, doc/docbook/en/ref/man3/gfs_pio_create.3.docbook, doc/docbook/en/ref/man3/gfs_pio_open.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_create.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_open.3.docbook, include/gfarm/gfs.h:
	do not export GFARM_FILE_CREATE, this flag is for internal use.

	* gftool/gfexec/gfexec.c:
	- fix LP64 problem (sizeof(int) != sizeof(size_t)) in sprintf argument.
	- use strcspn() instead of own loop.

2004-10-29  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* INSTALL.en, INSTALL.ja: Updated the introduction part.
	Updated description about command-line options of configure.
	Added 'mkdir /var/gfarm-ldap' in the 'Create an LDAP database' section.

2004-10-29  Noriyuki Soda  <soda@sra.co.jp>

	* debian/gfarm-gfptool.install, debian/gfsd.install, package/solaris/gfarm-fsnode.files, package/solaris/gfarm-gfptool.files:
	- move gfsplck from gfarm-gfptool package to gfarm-fsnode package,
	- add bench/thput-gfpio to gfarm-fsnode package
	requested by tatebe-san

	* Makefile.in, package/redhat/gfarm.spec:
	add bench/thput-gfpio to gfarm-fsnode package, requested by tatebe-san

	* gfptool/util/gfregister.in, package/redhat/gfarm.spec:
	move gfsplck from gfarm-gfptool package to gfarm-fsnode package,
	requested by tatebe-san

2004-10-28  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec:
	increment release number, because some sites already installed
	gfarm-1.0.4 RC5 as gfarm-*-1.0.4-0.i386.rpm.

	* gftool/gfhost/gfhost.c:
	There was no reason to make opt_use_metadb global.

	* gftool/gfhost/gfhost.c:
	- the hostname argument of gfs_client_connection() must be
	  canonical hostname now, due to requirement of GSI authentication.
	- some cleanup about the case where opt_use_metadb == 0

2004-10-28  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfexec/gfexec.c:
	display errors during replication of so files.

	* lib/libgfarm/gfarm/gfs_exec.c: just removed unnecessary tabs.

	* gftool/gfexec/gfexec.c:
	Introduce systematic handling of naming conversion to gfarm URLs and robust error handling for rewriting LD_LIBRARY_PATH environment variable and replicating .so files.

2004-10-27  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfexec/gfexec.c (replicate_so):
	Fixed a segfault bug when LD_LIBRARY_PATH is not defined.

	* lib/libgfarm/gfarm/gfs_exec.c:
	plugged a memory leak introduced by the previous commit.

2004-10-27  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_proto.h, server/gfsd/gfsd.c:
	add new replication protocol to gfsd,
	to pass both canonical_hostname and if_hostname,
	because the hostname argument of gfs_client_connection() must be
	canonical hostname now, due to requirement of GSI authentication.

	* lib/libgfarm/gfarm/gfs_client_rep.c:
	pass both canonical_hostname and if_hostname to gfrcmd

2004-10-27  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/digest/digest.c, server/gfsd/gfsd.c:
	Replaced SSLeay_add_all_algorithms with OpenSSL_add_all_digests because openssl library in Globus-3.2 does not have it.

2004-10-27  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_section.c:
	the hostname argument of gfs_client_connection() must be canonical hostname now.

	* lib/libgfarm/gfarm/schedule.c:
	note that input hostnames for gfarm_schedule_search_idle_hosts()
	must be all canonical hostnames now.

	* gftool/gfhost/gfhost.c:
	rename some print_*() to request_*(), to reflect reality

	* lib/libgfarm/gfarm/auth_client_gsi.c:
	honor gflog_auth_get_verbose() in multiplexed case,
	to make it possible to enable the verbose flag in a debugger.

2004-10-26  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* include/gfarm/gfs.h, gftool/gfexec/gfexec.c, lib/libgfarm/gfarm/gfs_exec.c:
	gfexec:
	Shared objects in gfarm file system cannot be dynamically linked
	because _dl_*() defined in /lib/ld-linux cannot be hooked.
	So, we replicate shared objects to local machine and rewrite paths in
	LD_LIBRARY_PATH to local spool directories path, for example,
	/gfarm/lib -> /var/spool/gfarm/lib.

2004-10-26  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/hooks_subr.h: provide some function prototypes.
	NOTE: "func()" isn't a prototype, "func(void)" should be used instead.

	* lib/gfs_hook/hooks.c: allow getcwd(NULL, 0), because it's legal.

	* lib/gfs_hook/hooks_subr.c: fix off by one error

	* lib/gfs_hook/hooks_subr.c: provide missing function prototypes

	* lib/gfs_hook/hooks_subr.c: fix infinite recursive call like follows:
	stat64(".", ...") -> gfs_hook_is_url() -> gfs_hook_get_cwd_is_gfarm()
	-> gfs_hook_check_cwd_is_gfarm() -> gfs_hook_is_url()
	-> gfs_hook_initialize() -> gfarm_initialize() -> gfarm_gsi_client_initialize()
	-> gfarmSecSessionInitializeInitiator() -> gfarmGssAcquireCredential()
	-> gss_acquire_cred() -> globus_i_gsi_gss_cred_read()
	-> globus_i_gsi_gss_create_cred() -> globus_i_gsi_gssapi_init_ssl_context()
	-> globus_gsi_sysconfig_get_ca_cert_files_unix() ->
	-> globus_gsi_sysconfig_file_exists_unix(".", ...)
	-> stat64(".", ...) -> gfs_hook_is_url() ...

	this can be be caused by "cd /gfarm; gfpwd".

2004-10-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfexec/gfexec.c, lib/libgfarm/gfarm/config.c:
	config.c (gfarm_config_clear): reset 'config_read'.  This makes it possible to call gfarm_initialize() again.
	gfexec.c: call gfarm_terminate() before execve(2).  This fix basically undoes the change on Aug 24, 2004.

2004-10-25  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/auth_client_gsi.c:
	Do not try next authentication method, if a trial failed during
	GSI authentication, because currently GFSL doesn't guarantee
	further graceful communication on error cases.
	For example, I observed the following scenario with "gfhost -l":
	1. gfarm_authorize_gsi_common() in server side (gfsd) returns
	  GFARM_ERR_AUTHENTICATION, before calling gfarmSecSessionAccept() even,
	  because it failed to acquire a credential.
	2. gfarmGssReceiveToken() in client side ("gfhost -l") returns -1
	  with errno == ECONNRESET, because gfsd disappeared.
	3. gfarmSecSessionInitiateResult() returns an error.
	4. gfarm_auth_result_gsi_multiplexed() returns GFARM_ERR_AUTHENTICATION.
	5. gfarm_auth_request_next_method() adds an event for writing to schedule
	  gfarm_auth_request_loop_ask_method().
	6. gfarm_eventqueue_turn() in gfhost never returns, because the descriptor
	  never becomes writable, since its peer is already dead.

	This fixes a hang during scheduling or gfhost.

	side effect: a failure during GSI authentication now returns
		GFARM_ERR_OPERATION_NOT_PERMITTED

2004-10-23  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfsl/auth.c:
	remove unnecessary newline from warning messages.

	* lib/libgfarm/gfsl/auth.c:
	remove "WARNING: Account doesn't exist. Ignored." message about
	/etc/grid-security/grid-mapfile by default, unless verbose mode is specified.

	* lib/gfs_hook/hooks_common.c:
	special calling convention of getdents() is only necessary on Linux/i386.

	* lib/gfs_hook/sysdep/linux/getdents.c, lib/gfs_hook/sysdep/linux/sysdep.h:
	Eliminate INLINE_SYSCALL() and use syscall() instead, to make this portable.

	Now getdents() hook basically works on IA64 as well, if statically linked.
	Although it's not really usable yet, because it's hard to link a program
	completely statically, thus, getdents() won't be called via readdir().
	The glibc-not-hidden package is need to make it usable.

	* lib/libgfarm/gfarm/hostspec.c: better error message

2004-10-22  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfsl/session.c:
	the change for GFARM_FAKE_GSS_C_NT_USER_NAME_FOR_GLOBUS made
	/etc/grid-security/grid-mapfile mandatory even on an initator side.
	this removes the requirement.

	* lib/libgfarm/gfsl/scarg.c, lib/libgfarm/gfsl/session.c:
	fix type mismatch which aren't usually reported by either gcc or SUNWspro,
	reported by tatebe-san.
	Some of those had existed since the first version.

2004-10-21  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/auth_common_gsi.c:
	- Remove gfarmGssDuplicateName(), because Globus does not implement
	  gss_duplicate_name().
	  As the result, remove a credential name from gfarmSecSession structure,
	  because the member isn't used any more.

	* lib/libgfarm/gfsl/Makefile, lib/libgfarm/gfsl/REFERENCE, lib/libgfarm/gfsl/gfarm_gsi.h, lib/libgfarm/gfsl/gfarm_secure_session.h, lib/libgfarm/gfsl/gsi.c, lib/libgfarm/gfsl/scarg.c, lib/libgfarm/gfsl/scarg.h, lib/libgfarm/gfsl/scsub.c, lib/libgfarm/gfsl/server.c, lib/libgfarm/gfsl/server2.c, lib/libgfarm/gfsl/session.c:
	- Remove gfarmGssDuplicateName(), because Globus does not implement
	  gss_duplicate_name().
	  As the result, remove a credential name from gfarmSecSession structure,
	  because the member isn't used any more.

	scarg.[ch], scsub.c, server{,2}.[ch]:
	- add newStringOfName() and newStringOfCredential() to scarg.c

	* lib/libgfarm/gfarm/auth.h, lib/libgfarm/gfarm/auth_client_gsi.c, lib/libgfarm/gfarm/auth_common_gsi.c, lib/libgfarm/gfarm/auth_config.c, lib/libgfarm/gfarm/auth_gsi.h, lib/libgfarm/gfarm/auth_server_gsi.c:
	auth.h, auth_config.c, auth_common_gsi.c:
	- Implement cred_type "self".
	  This requirement was pointed out by tatebe-san

	auth_gsi.h, auth_common_gsi.c, auth_server_gsi.c, auth_client_gsi.c:
	- Use gss_name_t in the GFSL interface, instead of the pair of
	  GSS_C_NT_* and char *.
	  The reason why this is necessary is because GSS_C_NT_EXPORT_NAME
	  is not always C string (i.e. not always NUL terminated string).
	  Also, change the type of a return value of the following functions
	  from char* (X.509 DN) to gss_name_t, because gss_name_t is more useful:
		gfarmGssNewCredentialName()
		gfarmGssAcquireCredential()
		gfarmGssAcceptSecurityContext()
		gfarmGssInitiateSecurityContext()
		gfarmSecSessionGetInitiatorInitialCredName()
	  gss_name_t can be used as an input argument of gfarmGssAcquireCredential(),
	  gfarmGssInitiateSecurityContext() and gfarmSecSessionInitiate*(),
	  but a DN can not (or, at least such usage is not portable to other GSSAPI).
	  gss_name_t now can be converted to a display name (i.e. X.509 DN in Globus)
	  by using gfarmGssNewDisplayName()
	  discussed with m-hirano san

	auth_client_gsi.c:
	- Pass GSS_C_*_FLAG explicitly in gfarmSecSessionInitiate*() interface.
	  discussed with m-hirano san

	auth_server_gsi.c:
	- remove LDAP access in server side, when cred_type "host" is specified.

	* lib/libgfarm/gfsl/Makefile, lib/libgfarm/gfsl/REFERENCE, lib/libgfarm/gfsl/client.c, lib/libgfarm/gfsl/client2.c, lib/libgfarm/gfsl/gfarm_gsi.h, lib/libgfarm/gfsl/gfarm_secure_session.h, lib/libgfarm/gfsl/gsi.c, lib/libgfarm/gfsl/scarg.c, lib/libgfarm/gfsl/scarg.h, lib/libgfarm/gfsl/scsub.c, lib/libgfarm/gfsl/server.c, lib/libgfarm/gfsl/server2.c, lib/libgfarm/gfsl/session.c:
	- Pass GSS_C_*_FLAG explicitly via gfarmSecSessionInitiate*() interface.
	  discussed with m-hirano san
	- Use gss_name_t in the GFSL interface, instead of the pair of
	  GSS_C_NT_* and char *.
	  The reason why this is necessary is because a Name String for
	  GSS_C_NT_EXPORT_NAME is not always NUL terminated string.
	  Also, change the type of a return value of the following functions
	  from char* (X.509 DN) to gss_name_t, because gss_name_t is more useful:
		gfarmGssNewCredentialName()
		gfarmGssAcquireCredential()
		gfarmGssAcceptSecurityContext()
		gfarmGssInitiateSecurityContext()
		gfarmSecSessionGetInitiatorInitialCredName()
	  gss_name_t can be used as an input argument of gfarmGssAcquireCredential(),
	  gfarmGssInitiateSecurityContext() and gfarmSecSessionInitiate*(),
	  but a DN can not (or, at least such usage is not portable to other GSSAPI).
	  gss_name_t now can be converted to a display name (i.e. X.509 DN in Globus)
	  by using gfarmGssNewDisplayName()
	  discussed with m-hirano san

	gsi.c:
	- Fix state transition problem during GSI parallel authentication.
	  This problem might cause core dump, because released resource
	  might be accessed. This had existed since 2003/08/12.
	- Make gfarmGssAcquireCredential() not rely on "/CN=proxy" handling on Globus.
	  suggested by tatebe-san

	session.c:
	- Fix arguments order of secSessionInitiateRequest(),
	  This bug might cause core dump during GSI parallel authentication
	  This had existed since 2003/08/12.
	- Fix some memory leaks on error cases.
	- Pass GSS_C_*_FLAG explicitly in gfarmSecSessionInitiate*() interface.
	  discussed with m-hirano san

	* gfptool/gfrepbe_server/gfrepbe_server.c, gfptool/gfrepbe_client/gfrepbe_client.c:
	- Implement cred_type "self".
	  This requirement was pointed out by tatebe-san

	* lib/libgfarm/gfarm/gfs_client.c: use NULL for a pointer, instead of 0

	* man/ja/man5/gfarm.conf.5, man/man5/gfarm.conf.5, doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man5/gfarm.conf.5.html:
	regen

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook:
	- describe cred_type "self"
	- mention GSSAPI GSS_C_NT_*

2004-10-20  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_global.c: gfs_pio_view_global_ftruncate():
	save path info accoring to tatebe-san's remark.

2004-10-19  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* server/gfsd/gfsd.c: gfs_server_ftruncate():
	correct an error pointed out by Ohkubo-san(ohkubo-k@suri.co.jp)

	* lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_remote.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_proto.h, server/gfsd/gfsd.c, include/gfarm/gfs.h:
	add gfs_pio_truncate() and its sub functions

2004-10-16  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/config.c:
	make config.c include "gfutil.h" for function prototype of
	gflog_auth_set_verbose()

	* gftool/gfrun/gfrun.c, gftool/gfrcmd/gfrcmd.c:
	add "-N" option to gfrcmd to specify canonical hostname for GSI authentication.

2004-10-15  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/Makefile: do "rm -rf .libs" at post-distclean-hook,
	because libtool sometimes fails to remove the .libs directory.

	* lib/libgfarm/gfsl/session.c: correct error message

	* gftool/gfrcmd/gfrcmd.c:
	call gflog_auth_set_verbose(1) at earlier stage.
	this may make GSI error messages displayed twice,
	but otherwise some error messages (e.g. errors in gfarmAuthInitialize())
	won't be displayed.
	the duplicated message is noisy, but better than nothing.

	* lib/libgfarm/gfsl/auth.c:
	use gflog_auth_warning() instead of gflog_warning() to suppress the following
	noisy warning message by default:

	<username>: WARNING: multiple X.509 Distinguish name for a UNIX user account. Ignored.

	* man/man5/gfarm.conf.5, doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man5/gfarm.conf.5.html, man/ja/man5/gfarm.conf.5:
	regen

	* doc/docbook/ja/ref/man5/gfarm.conf.5.docbook, doc/docbook/en/ref/man5/gfarm.conf.5.docbook:
	add description about credential configuration which is introduce by
	recent SECURITY FIX for GSI authentication.

	* server/gfsd/Makefile, gftool/gfmpirun/Makefile, gftool/gfmpirun/gfmpirun.c, gftool/gfrcmd/Makefile, gftool/gfrun/Makefile, lib/gfs_hook/Makefile, lib/gfs_hook/hooks_subr.c, lib/libgfarm/gfarm/config.h, lib/libgfarm/gfarm/gfs_client_rep.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_remote.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_unlink.c, lib/libgfarm/gfarm/metadb_ldap.c, lib/libgfarm/gfarm/metadb_misc.c, lib/libgfarm/gfarm/url.c, server/gfmd/Makefile, gfptool/gfrepbe_client/Makefile, gfptool/gfrepbe_server/Makefile, gfptool/gfsplck/Makefile, gfptool/gfsplck/gfsplck.c, gftool/gfhost/Makefile, gftool/gfhost/gfhost.c:
	- remove global variables from a public header,
	  as a preparation of gfarm-1.0.4 release which supplies shared objects.

	* lib/libgfarm/gfarm/gfs_client.h:
	- remove global variables and unnecessary enum definition from a public header,
	  as a preparation of gfarm-1.0.4 release which supplies shared objects.

	* gftool/gfrcmd/gfrcmd.c, gftool/gfrun/gfrun.c, include/gfarm/gfarm_misc.h:
	- remove global variables and unnecessary enum definition from a public header,
	  as a preparation of gfarm-1.0.4 release which supplies shared objects.
	  notably, there isn't gfarm_authentication_verbose variable anymore, and
	  newly added gflog_auth_*() functions should be used instead.

	* gfptool/gfrepbe_client/gfrepbe_client.c:
	- SECURITY FIX for GSI authentication:
	  make GFSL Gfarm*Initiate*() functions actually supply a target name for
	  authorization, because these function currently always do delegation.
	  Globus since 3.2.1 requires this, because otherwise malicious remote
	  user can obtain arbitrary proxy credentials by forging an acceptor.
	- Specify the type of a target name, because GFSL now requires it,
	  and gfrepbe_server use a user credential instead of (default)
	  host credential.

	- remove global variables from a public header,
	  as a preparation of gfarm-1.0.4 release which supplies shared objects.

	* gftool/gfsched/gfsched.c, include/gfarm/gfs.h, lib/libgfarm/gfarm/schedule.c:
	- remove unnecessary enum definition from public headers,
	  as a preparation of gfarm-1.0.4 release which supplies shared objects.

	* server/gfmd/gfmd.c, server/gfsd/gfsd.c:
	- SECURITY FIX for GSI authentication:
	  make GFSL Gfarm*Initiate*() functions actually supply a target name for
	  authorization, because these function currently always do delegation.
	  Globus since 3.2.1 requires this, because otherwise malicious remote
	  user can obtain arbitrary proxy credentials by forging an acceptor.

	* gfptool/gfrepbe_server/gfrepbe_server.c:
	- SECURITY FIX for GSI authentication:
	  make GFSL Gfarm*Initiate*() functions actually supply a target name for
	  authorization, because these function currently always do delegation.
	  Globus since 3.2.1 requires this, because otherwise malicious remote
	  user can obtain arbitrary proxy credentials by forging an acceptor.
	- Specify the type of a target name, because GFSL now requires it,
	  and gfrepbe_server use a user credential instead of (default)
	  host credential.

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/gfm_client.c, lib/libgfarm/gfarm/gfs_client.c:
	- SECURITY FIX for GSI authentication:
	  make GFSL Gfarm*Initiate*() functions actually supply a target name for
	  authorization, because these function currently always do delegation.
	  Globus since 3.2.1 requires this, because otherwise malicious remote
	  user can obtain arbitrary proxy credentials by forging an acceptor.
	- as a part of the SECURITY FIX for GSI authentication,
	  introduce "{metadb,spool}_server_cred_{type,service,name}" directives
	  to gfarm.conf, and implement a machinery to represent the server
	  credential namings.

	- remove global variables and unnecessary enum definition from a public header,
	  as a preparation of gfarm-1.0.4 release which supplies shared objects.

	* lib/libgfarm/gfarm/config.c: - SECURITY FIX for GSI authentication:
	  make GFSL Gfarm*Initiate*() functions actually supply a target name for
	  authorization, because these function currently always do delegation.
	  Globus since 3.2.1 requires this, because otherwise malicious remote
	  user can obtain arbitrary proxy credentials by forging an acceptor.
	- as a part of the SECURITY FIX for GSI authentication,
	  introduce "{metadb,spool}_server_cred_{type,service,name}" directives
	  to gfarm.conf, and implement a machinery to represent the server
	  credential namings.

	- remove global variables and unnecessary enum definition from a public header,
	  as a preparation of gfarm-1.0.4 release which supplies shared objects.
	  notably, there isn't gfarm_authentication_verbose variable anymore, and
	  newly added gflog_auth_*() functions should be used instead.

	* lib/libgfarm/gfarm/auth.h, lib/libgfarm/gfarm/auth_client.c, lib/libgfarm/gfarm/auth_client_gsi.c, lib/libgfarm/gfarm/auth_common_gsi.c, lib/libgfarm/gfarm/auth_config.c, lib/libgfarm/gfarm/auth_gsi.h, lib/libgfarm/gfarm/auth_server.c, lib/libgfarm/gfarm/auth_server_gsi.c, lib/libgfarm/gfarm/gfm_proto.h, lib/libgfarm/gfarm/gfs_proto.c, lib/libgfarm/gfarm/gfs_proto.h:
	- SECURITY FIX for GSI authentication:
	  make GFSL Gfarm*Initiate*() functions actually supply a target name for
	  authorization, because these function currently always do delegation.
	  Globus since 3.2.1 requires this, because otherwise malicious remote
	  user can obtain arbitrary proxy credentials by forging an acceptor.
	- as a part of the SECURITY FIX for GSI authentication,
	  introduce "{metadb,spool}_server_cred_{type,service,name}" directives
	  to gfarm.conf, and implement a machinery to represent the server
	  credential namings.

	* lib/libgfarm/gfsl/Makefile:
	- as a part of the SECURITY FIX for GSI authentication,
	  add several options to {server,client}{,2} to specify server credential
	  names, although -U option doesn't work, because Globus GSSAPI does not
	  support GSS_C_NT_STRING_UID_NAME for now.

	* lib/libgfarm/gfsl/client.c, lib/libgfarm/gfsl/client2.c, lib/libgfarm/gfsl/scarg.c, lib/libgfarm/gfsl/scarg.h, lib/libgfarm/gfsl/scsub.c, lib/libgfarm/gfsl/server.c, lib/libgfarm/gfsl/server2.c:
	- SECURITY FIX for GSI authentication:
	  make GFSL Gfarm*Initiate*() functions actually supply a target name for
	  authorization, because these function currently always do delegation.
	  Globus since 3.2.1 requires this, because otherwise malicious remote
	  user can obtain arbitrary proxy credentials by forging an acceptor.
	- as a part of the SECURITY FIX for GSI authentication,
	  add several options to {server,client}{,2} to specify server credential
	  names, although -U option doesn't work, because Globus GSSAPI does not
	  support GSS_C_NT_STRING_UID_NAME for now.

	* lib/libgfarm/gfsl/REFERENCE, lib/libgfarm/gfsl/gfarm_auth.h, lib/libgfarm/gfsl/gfarm_gsi.h, lib/libgfarm/gfsl/gfarm_secure_session.h, lib/libgfarm/gfsl/gfsl_config.h:
	- SECURITY FIX for GSI authentication:
	  make GFSL Gfarm*Initiate*() functions actually supply a target name for
	  authorization, because these function currently always do delegation.
	  Globus since 3.2.1 requires this, because otherwise malicious remote
	  user can obtain arbitrary proxy credentials by forging an acceptor.
	- as a part of the SECURITY FIX for GSI authentication,
	  implement GSS_C_NT_USER_NAME feature of GSSAPI in GFSL layer, because
	  Globus doesn't support the feature for now,
	  this is controled by GFARM_FAKE_GSS_C_NT_USER_NAME_FOR_GLOBUS macro.
	  note that:
		o gfarmAuthMakeThisAlone() will not be called with this macro,
		  because an initiator needs the authentication information
		  in grid-mapfile to use GSS_C_NT_USER_NAME.
		o if there is multiple X.509 Distinguish name for a UNIX user
		  account, GSS_C_NT_USER_NAME may not work.

	* lib/libgfarm/gfsl/session.c: - SECURITY FIX for GSI authentication:
	  make GFSL Gfarm*Initiate*() functions actually supply a target name for
	  authorization, because these function currently always do delegation.
	  Globus since 3.2.1 requires this, because otherwise malicious remote
	  user can obtain arbitrary proxy credentials by forging an acceptor.
	- as a part of the SECURITY FIX for GSI authentication,
	  implement GSS_C_NT_USER_NAME feature of GSSAPI in GFSL layer, because
	  Globus doesn't support the feature for now,
	  this is controled by GFARM_FAKE_GSS_C_NT_USER_NAME_FOR_GLOBUS macro.
	  note that:
		o gfarmAuthMakeThisAlone() will not be called with this macro,
		  because an initiator needs the authentication information
		  in grid-mapfile to use GSS_C_NT_USER_NAME.
		o if there is multiple X.509 Distinguish name for a UNIX user
		  account, GSS_C_NT_USER_NAME may not work.
	- add several calls to gflog_auth_error() for errors which are detected
	  at GFSL layer (not GSSAPI layer), because gfarmGssPrintMinorStatus()
	  cannot produces any useful output for those errors.

	* lib/libgfarm/gfsl/gsi.c: - SECURITY FIX for GSI authentication:
	  make GFSL Gfarm*Initiate*() functions actually supply a target name for
	  authorization, because these function currently always do delegation.
	  Globus since 3.2.1 requires this, because otherwise malicious remote
	  user can obtain arbitrary proxy credentials by forging an acceptor.
	- as a part of the SECURITY FIX for GSI authentication,
	  implement GSS_C_NT_USER_NAME feature of GSSAPI in GFSL layer, because
	  Globus doesn't support the feature for now,
	  this is controled by GFARM_FAKE_GSS_C_NT_USER_NAME_FOR_GLOBUS macro.
	  note that:
		o gfarmAuthMakeThisAlone() will not be called with this macro,
		  because an initiator needs the authentication information
		  in grid-mapfile to use GSS_C_NT_USER_NAME.
		o if there is multiple X.509 Distinguish name for a UNIX user
		  account, GSS_C_NT_USER_NAME may not work.
	- add several calls to gflog_auth_error() for errors which are detected
	  at GFSL layer (not GSSAPI layer), because gfarmGssPrintMinorStatus()
	  cannot produces any useful output for those errors.
	- correct some conditions to exit loop of gss_{accept,init}_sec_context()
	  to make the conditions match with RFC2744

	* lib/libgfarm/gfsl/auth.c: - SECURITY FIX for GSI authentication:
	  make GFSL Gfarm*Initiate*() functions actually supply a target name for
	  authorization, because these function currently always do delegation.
	  Globus since 3.2.1 requires this, because otherwise malicious remote
	  user can obtain arbitrary proxy credentials by forging an acceptor.
	- as a part of the SECURITY FIX for GSI authentication,
	  implement GSS_C_NT_USER_NAME feature of GSSAPI in GFSL layer, because
	  Globus doesn't support the feature for now,
	  this is controled by GFARM_FAKE_GSS_C_NT_USER_NAME_FOR_GLOBUS macro.
	  note that:
		o gfarmAuthMakeThisAlone() will not be called with this macro,
		  because an initiator needs the authentication information
		  in grid-mapfile to use GSS_C_NT_USER_NAME.
		o if there is multiple X.509 Distinguish name for a UNIX user
		  account, GSS_C_NT_USER_NAME may not work.
	- plug some resource leaks

	* lib/libgfarm/gfsl/tcputil.c:
	do not use perror(), but use gflog_error()

	* lib/libgfarm/gfutil/gfutil.h, lib/libgfarm/gfutil/logutil.c:
	remove global variables and unnecessary enum definition from a public header,
	as a preparation of gfarm-1.0.4 release which supplies shared objects.
	notably, there isn't gfarm_authentication_verbose variable anymore, and
	newly added gflog_auth_*() functions should be used instead.

2004-10-13  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/Gfarm-FAQ.ja, doc/Gfarm-FAQ.en:
	Inserted the item 2.4; Is it not possible to access files that should be created.
	Added the subject name change issue between GT2 and GT3.

	* lib/gfs_hook/hooks.c: RH7.2 does not have SYS_getxattr, ....

	* lib/gfs_hook/hooks_subr.c:
	Discard the previous commit, and leave the comment.

2004-10-12  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_subr.c (gfs_hook_is_url):
	add check whether gfarm_initialized is called or
	not in the relative path case from a directory in the Gfarm file
	system.  This may fix a problem such that bash often aborts.

	* gfptool/gfsplck/gfsplck.c:
	display a hostname not only an error message for gfarm_initialize,
	gfarm_is_active..., and gfarm_terminate.

	* gfptool/gfsplck/gfsplck.c:
	do not register a lock file. it will be deleted with the -d
	option. [Bugzilla-ja #18]

2004-10-09  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfptool/gfsplck/gfsplck.c:
	support to check a specific gfarm file such as gfsplck gfarm:file

2004-10-08  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfsl/README:
	correct misspell about the filename "gfarm-usermap".

2004-10-08  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_common.c: just delete unnecessary spaces and tabs.

2004-10-07  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_dir.c:
	refresh the dircache, if there is inconsistency between real metadata
	and the dircache about the result of gfarm_path_info_get().
	this fixes the following problem under gfs_hook'ed bash:
		bash$ echo a > a
		bash$ rm -f a
		bash$ echo a > a
		bash: a: Is a directory
	the problem was reported by tatebe-san.

2004-10-07  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfptool/gfsplck/gfsplck.c: simplify a code.
	plug a memory leak.

	* gfptool/gfsplck/gfsplck.c (fixdir): stat() should be lstat().

2004-10-06  Noriyuki Soda  <soda@sra.co.jp>

	* package/solaris/build:
	change the installation directory on Solaris from /usr/grid to /usr/local/gfarm
	approved by tatebe-san

	* lib/gfs_hook/Makefile:
	gfs_hook.o was broken if it's configured as --disable-shared.
	this fixes the problem by using temporary convenience library.
	problem pointed out by tatebe-san.

	* package/solaris/gfarm-devel.files, package/solaris/gfarm-libs.files:
	add shared object for gfarm-1.0.4 release

	* package/solaris/build:
	- add gfarm-libs subpackage, and "eval" (to expand shell meta-characters)
	- changes for the environment on plum.hpcc.jp
	  XXX	currently gcc packages are disabled and only vendorcc packages are
	  	enabled, because gcc fails to link shared objects.

2004-10-05  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfexport/gfexport.c: report error of gfs_pio_close()

	* lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_remote.c, lib/libgfarm/gfarm/gfs_pio_section.c:
	rename GFS_FILE_MODE_SECTION_CREATED flag to GFS_FILE_MODE_UPDATE_METADATA,
	and revise its usage.
	this recovers gfarm-1.0.3 behavior that sections are only created if
	gfs_pio_create() are called, and also fixes several corner cases,

2004-10-05  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog, RELNOTES: Updated RELNOTES for the version 1.0.4.

	* server/gfsd/gfsd.c (gfs_server_open): plug memory leak in error case.

	* lib/libgfarm/gfarm/gfs_client.c (gfs_client_copyin):
	add missing gfs_client_rpc_result().  this fixes
	a problem of on-demand replication failure that creates a file with
	size 0.

	* lib/libgfarm/gfarm/gfs_dir.c (gfs_chdir_canonical):
	Do not replace 'env' when realloc(3) fails.

2004-10-04  Noriyuki Soda  <soda@sra.co.jp>

	* configure: regen

	* configure.ac:
	make it possible to omit "-llber" for Solaris stock LDAP library.
	this configuration can be compiled fine, but it is not really tested yet.

	* configure: regen

	* configure.ac: correct order to link libsocket and libnsl (on Solaris)

	* gftool/gfexec/Makefile:
	$(openssl_includes) and $(openssl_libs) are needed

	* doc/README.hook.en:
	change the installation directory of libc-not-hidden.so
	from /usr/lib to /usr/lib/gfarm to prevent glibc from
	treating the library as default libc.so.6.

	* configure: regen

	* configure.ac:
	move OpenLDAP handling after the checks of libnsl and libsocket for Solaris

	* lib/libgfarm/Makefile:
	enable $(OPTFLAGS) (e.g. -g) when linking libgfarm library

	* lib/libgfarm/gfarm/gfs_pio_section.c:
	do not create a file section, if the file isn't opened for write,
	problem pointed out by tatebe-san

	* lib/gfs_hook/hooks_common.c: rewrite confusing debug message

	* lib/libgfarm/gfarm/gfs_dir.c:
	use putenv(3) instead of setenv(3) for portability to Solaris,
	problem pointed out by tatebe-san.
	also, do not need to clear env_len on realloc(3) failure,
	because the allocated memory is unchanged even in that case.

2004-10-01  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/docbook/ja/ref/man3/gfs_pio_open.3.docbook, doc/html/en/ref/man3/gfs_pio_open.3.html, doc/html/ja/ref/man3/gfs_pio_open.3.html, doc/docbook/en/ref/man3/gfs_pio_open.3.docbook, man/ja/man3/gfs_pio_open.3, man/man3/gfs_pio_open.3:
	added description about flags.
	XXX - error code is not updated yet.

	* doc/README.hook.en: describes glibc-not-hidden packages.
	deletes description about GFARM_DIRCACHE_TIMEOUT.
	deletes -lldap in compilation examples.

2004-09-30  Noriyuki Soda  <soda@sra.co.jp>

	* doc/html/en/ref/man1/gfls.1.html, doc/html/ja/ref/man1/gfls.1.html, man/ja/man1/gfls.1, man/man1/gfls.1:
	regen

	* doc/docbook/ja/ref/man1/gfls.1.docbook, doc/docbook/en/ref/man1/gfls.1.docbook:
	describe -a and -i option

	* man/ja/man1/gfrm.1, man/man1/gfrm.1, doc/html/en/ref/man1/gfrm.1.html, doc/html/ja/ref/man1/gfrm.1.html:
	regen

	* doc/docbook/en/ref/man1/gfrm.1.docbook, doc/docbook/ja/ref/man1/gfrm.1.docbook:
	describe -r option

	* INSTALL.en, INSTALL.ja: gfs_preload.so -> libgfs_hook.so

2004-09-23  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_lock.c (gfs_i_lock):
	errno of open() should be saved.

2004-09-22  Noriyuki Soda  <soda@sra.co.jp>

	* doc/html/ja/ref/man3/gfs_pio_create.3.html, man/ja/man3/gfs_pio_create.3:
	regen

	* doc/docbook/ja/ref/man3/gfs_pio_create.3.docbook: missing change

2004-09-17  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_section.c:
	make local file creation slightly faster by using
	gfarm_is_active_file_system_node instead of
	connecting to local gfsd each time to see its availability.

2004-09-16  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfls/gfls.c:
	fix pasting error which makes "gfls -lR" core dump

	* lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_remote.c, lib/libgfarm/gfarm/gfs_pio_section.c:
	slightly changed the way how GFARM_FILE_EXCLUSIVE is handled,
	so that the flag can be actually used for locking.

	But with this cange, the GFARM_ERR_ALREADY_EXISTS condition can happen
	at not only gfs_pio_create() time, but also gfs_pio_set_view_*() time.
	This may not be a problem with system call hooks, but may be a problem
	with gfarm native applications.
	XXX - We should revisit this GFARM_FILE_EXCLUSIVE handling.

	* man/ja/man3/gfs_pio_create.3, man/man3/gfs_pio_create.3, doc/html/en/ref/man3/gfs_pio_create.3.html, doc/html/ja/ref/man3/gfs_pio_create.3.html:
	mention the change of GFARM_FILE_TRUNC flag handling of gfs_pio_create()

	* gfptool/gfgrep/gfgrep.c, gftool/example/gfimport_fixed/gfimport_fixed.c, gftool/example/gfimport_text/gfimport_text.c, gftool/gfreg/gfreg.c, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/gfs_pio_misc.c, bench/thput-gfpio/thput-gfpio.c, doc/docbook/en/ref/man3/gfs_pio_create.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_create.3.docbook, gfptool/gfcombine/gfcombine.c, gfptool/gfcp/gfcp.c:
	adapt to the change of gfs_pio_create(): add GFARM_FILE_TRUNC flag

	* include/gfarm/gfs.h, lib/gfs_hook/hooks_subr.c, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_proto.c:
	introduce GFARM_FILE_EXCLUSIVE, and support O_EXCL on system call hooks

	* lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_remote.c, lib/libgfarm/gfarm/gfs_pio_section.c:
	- make gfs_pio_create() not implicitly assume GFARM_FILE_TRUNC,
	  but require it explicitly.
	- support GFARM_FILE_TRUNC with global view
	- calculate checksum when the file is truncated or crated,
	  even if the access mode is read-only.
	- allow changes of number of fragments, when GFARM_FILE_TRUNC is specified.
	- check the file is whether writable or not, when GFARM_FILE_TRUNC is
	  specified, even if the access mode is read-only.
	- introduce GFS_FILE_MODE_FILE_CREATED flag, this shows that the
	  metadata is newly created.
	- introduce GFS_FILE_MODE_SECTION_CREATED flag, this shows that the
	  section will be newly created.

	* server/gfsd/gfsd.c:
	log error codes which cannot be converted to gfsd standard code
	on LOG_INFO level of syslog, to make system administrators be able
	to see what caused GFARM_ERR_UNKNOWN.

	* lib/gfs_hook/hooks_common.c:
	let libgfarm handle most cases on creat() and open(),
	and simplify the implementations of system hooks.

	NOTE: "cp SIMPLE-FILE PARALLEL-FILE" now changes the PARRALE-FILE into
	  a simple file since this change.
	  it caused GFARM_ERR_FRAGMENT_NUMBER_DOES_NOT_MATCH until now.

	* lib/gfs_hook/hooks_subr.c:
	- plug some resource leaks on some error cases.
	- make gfs_hook_is_now_creating() a bit silent.

	* lib/gfs_hook/getcwd.c: make sure to return correct errno

	* lib/libgfarm/gfarm/gfs_unlink.c:
	- make gfs_unlink_every_other_replicas() simpler,
	  so that this can be used when if the host doesn't actually have the replica,
	- do not call gfarm_host_get_canonical_name(), and caller should canonicalize
	  the hostname instead.

	* lib/libgfarm/gfarm/metadb_ldap.c:
	add gfarm_file_section_info_does_exist() which was planned long ago

2004-09-16  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_pio_section.c (replicate_section_to_local_internal):
	do not call gfs_pio_set_fragment_info_local() after replication.  Instead, just set the section copy info.

2004-09-15  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_exec.c, lib/libgfarm/gfarm/gfs_pio_section.c:
	add file size check between metadata and physical file before on-demand replication.

2004-09-14  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfexec/gfexec.c:
	make it possible to execute a shell script without "#!/bin/sh"

	* lib/libgfarm/gfarm/gfs_dir.c: make directory handling more robust:
	there may be directories which don't have path_info,
	e.g. /, or directories which were made by old gfarm.

2004-09-13  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_dir.c:
	make gfs_chdir() fail, if specified path isn't a directory.
	problem noticed by tatebe-san.

	* lib/libgfarm/gfarm/gfs_dir.c, gftool/gfrm/gfrm.c, gftool/gfsck/gfsck.c:
	make gfs_readdir() return "." and "..", and fill d_fileno field.

	* lib/libgfarm/gfarm/glob.c:
	add special handling for initial "." in pathname,
	because now gfs_readdir() returns "." and "..".

	* gftool/gfls/gfls.c:
	make gfs_readdir() return "." and "..", and fill d_fileno field.
	implement "-a" and "-i" option in gfls.

	* lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h:
	make gfs_readdir() return "." and "..", and fill d_fileno field.
	let getdents(2) hook use the fact.

	* include/gfarm/gfs.h:
	change struct gfs_dirent:d_fileno from int to long.
	XXX this should bump the major number of libgfarm on LP64 platforms like amd64.

	* lib/libgfarm/gfarm/gfs_dir.c:
	remember directory-update-time to st_mtime,
	and use it to make directory cache consistent.

	* lib/libgfarm/gfarm/dircache.h, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/metadb_ldap.c:
	cosmetic change:
	do not hook metadb path_info functions to implement dircache,
	instead, provide metadb level interface (gfarm_metadb_path_info_*()),
	and move existing interface (gfarm_path_info_*()) to dircache layer.

2004-09-11  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_dir.c:
	make "rm -r" work again, by adding NODE_FLAG_PURGED to remember removed
	node, even if opendir_count > 0.

	* lib/libgfarm/gfarm/gfs_pio_misc.c:
	correct the condition to allow gfs_utimes():
	write privilege isn't necessary, but the owner must be same with the user.

	* gftool/gfrmdir/gfrmdir.c, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_pio_misc.c:
	add `tolerant' flag, which allows ENOENT and failures on making connection,
	to gfs_client_apply_all_hosts().
	make gfs_rmdir() use this flag, not to return an error on such condition.

	* lib/libgfarm/gfarm/gfs_dir.c:
	It's OK to rmdir, if "." and ".." exist.

2004-09-10  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfptool/gfsplck/gfsplck.c, include/gfarm/gfarm_misc.h, lib/libgfarm/gfarm/config.c:
	added gfarm_is_active_file_system_node to know whether the host is an active file system node or not.
	gfsplck.c: when the host is not a file system node, it exits immediately.

2004-09-09  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_subr.c:
	make '/gfarm' a special point to force to uncache directory cache.
	To uncache directory cache, do 'type -d /gfarm'.

2004-09-09  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/dircache.h, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_unlink.c, lib/libgfarm/gfarm/metadb_ldap.c:
	when a path is created or removed,
	- do not change inode values
	- do not forget directory cache

	* lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_pio_misc.c:
	don't display error messages to chmod directories

2004-09-09  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog, RELNOTES, doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	support of read-write mode and append mode.
	add how to improve the performance of an openldap server using LDBM.

2004-09-06  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_dir.c (gfs_rmdir): gfs_closedir() is missing.

	* lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_subr.c, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_proto.c, include/gfarm/gfs.h:
	Added GFARM_FILE_APPEND.
	XXX - in global file view, neither TRUNC nor APPEND is supported.
	support (read-)write mode without truncation.  In this case, every other file copies except an updated copy will be deleted.  When closing the updated copy, checksum will be re-calculated.  This mode is expected to be used for a small file not a large file.

2004-09-03  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_unlink.c (gfs_unlink_every_other_replicas):
	added for internal use.

	* lib/libgfarm/gfarm/metadb_ldap.c, include/gfarm/gfarm_metadb.h (gfarm_file_section_info_replace):
	added.

	* lib/libgfarm/gfarm/gfs_pio.c (gfs_pio_open):
	Check a condition to set GFS_FILE_MODE_READ.  Added GFS_W_OK check in write mode.

	* lib/libgfarm/gfarm/gfs_pio_section.c (gfs_pio_set_view_section):
	fixed inexact conditions regarding open_flags and mode.

	* lib/libgfarm/gfarm/gfs_unlink.c (gfs_unlink_section):
	added a missing error check.

	* lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h:
	added gfs_hook_open_flags_gfarmize() to convert standard open flags to Gfarm flags.

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	Inserted the item 2.2; We cannot connect to file system nodes and/or a metadata server.

	* doc/README.hook.en:
	Added the description regarding GFARM_DIRCACHE_TIMEOUT and GFARM_FLAGS.

2004-09-02  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja: slight change

2004-09-02  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_misc.c:
	gfs_chmod(): not issue unnecessary error messages.

2004-09-02  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_subr.c (gfs_hook_is_url):
	support a relative path case partially from a local file system.  XXX - Neither '..' nor '.' is properly handled.
	(gfs_hook_is_url): fix a bug such that '/gfarm:section:' is not converted to 'gfarm:/'.

	* lib/libgfarm/gfarm/config.c (gfarm_terminate):
	unset gfarm_initialized.

2004-08-31  Noriyuki Soda  <soda@sra.co.jp>

	* configure: regen (again)

	* configure: regen

	* configure.ac:
	remove --with-globus-shared option (this option is enabled by default now)
	add --with-globus-static option instead

	* makes/config.mk.in: ${globus_shared} isn't needed any more

	* package/redhat/gfarm.spec:
	add ${GFARM_CONFIGURE_OPTION} as an option of configure

2004-08-30  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/README.hook.en: change slightly

2004-08-30  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/gfarm-client.manpages, debian/libgfarm-dev.manpages, debian/rules, debian/control:
	rewrote dependency.
	added manpages

2004-08-28  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_pio_misc.c:
	Replaced TO_UNEXECUTABLE with TO_NONEXECUTABLE.

2004-08-27  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_misc.c:
	gfs_chmod(): change 1-segment file's st_nsecntions 0->1 if all of its
	execution permissions are off, 1->0 if some of them are on.

2004-08-26  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/rules: added new manpages

	* debian/libgfarm-dev.install: forgot lib*.la

2004-08-26  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec:
	move libgfs_hook*_debug.so.* from gfarm-devel to gfarm-libs,
	just like other shared objects.
	discussed in gfarm-cvs.

2004-08-26  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hook_test.c, lib/gfs_hook/hooks.c:
	Replaced 8 spaces with a tab.

	* lib/gfs_hook/hooks.c:
	Added vfork(2) hook entry to call SYS_fork instead of SYS_vfork.
	This seems to be the only workaround to avoid segfault in Linux when calling vfork(2).

2004-08-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_subr.c (gfs_hook_is_url):
	Do not use sizeof_prefix but sizeof_gfarm_prefix to copy the Gfarm prefix in relative path case, although this is not a bug but may be misleading.

2004-08-25  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/control, debian/libgfarm-dev.install, debian/libgfarm.install:
	reconfigured dependency for shared library

	* debian/control, debian/libgfarm-dev.install, debian/rules:
	removed mpi dependency

	* debian/libgfarm.install, debian/rules: fixed misses

	* debian/README.Debian, debian/changelog, debian/control, debian/gfmd-gsi.postinst, debian/gfmd-gsi.postrm, debian/gfmd-gsi.prerm, debian/gfsd-gsi.postinst, debian/gfsd-gsi.postrm, debian/gfsd-gsi.prerm, debian/libgfarm.install, debian/rules:
	update version for 1.0.4
	  * removed unnessary files
	  * added libgfarm.install for shared libray package
	  * added comment for mpich
	  * remove lam dependency

2004-08-24  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/Makefile: fix a typo which caused the following error:
	make[2]: *** No rule to make target `libgfs_hook_mpi.la', needed by `gfs-hooks'.

	problem pointed out by naotaka-san

	* package/solaris/build: change version from 1.0.3.1 to 1.0.4
	XXX shared objects aren't added to *.files, yet.

	* package/redhat/gfarm.spec: change version from 1.0.3.1-1 to 1.0.4

2004-08-24  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_exec.c, gftool/gfexec/gfexec.c:
	Do not call gfarm_terminate() before execve(2).  We need to maintain the LDAP connection when executing a program in a shell such as '% /gfarm/tatebe/hostname' and '% gfexec /gfarm/tatebe/hostname'.

2004-08-23  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_subr.c (gfs_hook_set_current_view_section):
	fixed memory space managemnet.  added one argument to identify a given memory space should be free'ed or not.

	* doc/README.hook.en: replaced gfs_preload.so with libgfs_hook.so.0.

	* lib/gfs_hook/hooks_common.c (FUNC___OPEN):
	set errno just before return.

	* RELNOTES: Added x86_64 support.
	Added the -b option of gfrun.

	* doc/docbook/en/ref/man1/gfrun.1.docbook, doc/docbook/ja/ref/man1/gfrun.1.docbook, doc/html/en/ref/man1/gfrun.1.html, doc/html/ja/ref/man1/gfrun.1.html, man/ja/man1/gfrun.1, man/man1/gfrun.1:
	Described the -b option of gfrun.

	* lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_stat.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h:
	fix for the '-b' option of gfrun to set global file view as a default view.

2004-08-22  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog, RELNOTES: Release note for the version 1.0.4.

2004-08-21  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/auth_client_gsi.c (gfarm_auth_result_gsi_auth_multiplexed):
	fixed a segfault bug during parallel gsi_auth authentications.

	* lib/gfs_hook/hooks.c (__dup2):
	Fixed a bug introduced in the revision 1.48.
	syscall(SYS_dup2) should be called after gfs_hook_set_descriptor().

2004-08-19  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_common.c: LP64 cleanup

	* lib/gfs_hook/lseek64.c: port to linux/x86_64

	* lib/gfs_hook/sysdep/linux/fxstat.c, lib/gfs_hook/sysdep/linux/fxstat64.c, lib/gfs_hook/sysdep/linux/lxstat.c, lib/gfs_hook/sysdep/linux/lxstat64.c, lib/gfs_hook/sysdep/linux/xstat.c, lib/gfs_hook/sysdep/linux/xstat64.c:
	- port to x86_64
	- fix bugs, if 64bit system-calls failed with ENOSYS on i386

	* lib/gfs_hook/sysdep/linux/sysdep.h:
	move machine independent definition to outside of #idef

	* lib/gfs_hook/sysdep/linux/sysdep.h:
	- protect i386 dependent definition by defined(__i386__)
	- add x86_64 dependent definition in defined(__x86_64__) clause.
	  this is copied from glibc-2.3.1/sysdeps/unix/sysv/linux/x86_64/sysdep.h
	- call #error on anything else

	* lib/gfs_hook/sysdep/linux/Makefile, lib/gfs_hook/sysdep/linux/getdents.c, lib/gfs_hook/sysdep/linux/getdents64.c, lib/gfs_hook/sysdep/linux/getdents_common.c:
	rename back getdents_common.c to getdents.c, because previous getdents.c was
	empty, and getdents.c is the original name of this content in glibc-2.3.1.

	* lib/gfs_hook/sysdep/linux/getdents.c, lib/gfs_hook/sysdep/linux/getdents64.c:
	don't define __LINUX_KERNEL_VERSION, because this makes the object more
	portable (i.e. works with more versions of linux kernel.)

	* lib/gfs_hook/sysdep/linux/getdents.h, lib/gfs_hook/sysdep/linux/sysdep.h:
	rename getdents.h to sysdep.h, because sysdep.h is the original name
	in glibc-2.3.1, and more appropriate for this definition

	* lib/gfs_hook/sysdep/linux/Makefile, lib/gfs_hook/sysdep/linux/getdents.c, lib/gfs_hook/sysdep/linux/getdents64.c, lib/gfs_hook/sysdep/linux/getdents_common.c:
	make these files looks more similar to original version in
	glibc-2.3.1/sysdeps/unix/sysv/linux/

	* lib/gfs_hook/Makefile: repair the build for test programs

2004-08-19  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/Makefile: Fix a typo about DEBUG_CFLAGS.
	Delete unnecessary -o target because $(LTLINK) already has it.

2004-08-19  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfls/gfls.c, gftool/gfhost/gfhost.c:
	portability problem on LP64 platforms like x86_64

	* lib/libgfarm/gfarm/xxx_proto.c:
	use va_copy() to fix portability problem to x86_64, powerpoc, ...

	* lib/libgfarm/gfarm/gfs_unlink.c:
	add #include <sys/time.h> for gettimeofday(2)

	* lib/libgfarm/gfarm/gfs_pio_section.c:
	- change 6th argument of gfs_digest_calculate_local() from "unsigned *"
	  to "size_t *" for x86_64
	- add #include <sys/time.h> for gettimeofday(2)

	* lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_proto.c, lib/libgfarm/gfarm/gfs_proto.h, server/gfsd/gfsd.c:
	change 6th argument of gfs_digest_calculate_local() from "unsigned *"
	to "size_t *" for x86_64

	* configure: regen

	* configure.ac: search gcc64* as globus_flavor for x86_64

2004-08-18  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_pio.c (gfs_pio_set_view_default):
	flush the io buffer before closing a file section.
	This fixes a problem reported in [gfarm-discuss:00092].

2004-08-18  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/Makefile: correct a comment.
	this is the result that libgfarm.so now depends on globus gssapi libraries
	by the change of revision 1.9 of lib/libgfarm/Makefile.

	* lib/libgfarm/Makefile:
	remove a hack which makes this library not to depend on $(globus_gssapi_libs),
	if --with-globus-shared is specified.
	because embeding globus objects to libgfarm.so is rather desired in that
	case.

	* makes/config.mk.in:
	back out previous change about $(INSTALL) setting, because /usr/bin/install
	doesn't automatically create parent directories.

2004-08-17  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec: add shared objects.
	add new sub-package "libs" for runtime part.

	* ns/gfarmd/Makefile.in, ns/nslib/Makefile.in, ns/nstool/file/Makefile.in, Makefile.in:
	remove unnecessary $(VPATH) setting (it's done in makes/var.mk now)

	* makes/make.sh: make this work with $(top_srcdir) != $(top_builddir)

	* lib/gfs_hook/Makefile, makes/script.mk, makes/var.mk:
	repair build for $(top_srcdir) != $(top_builddir)

	* configure: regen

	* configure.ac: dynamically search globus flavor

	* makes/include.mk:
	$(EXEC_INCS) must be removed at "make distclean" instead of "make veryclean",
	because it's made at configure time

	* lib/gfs_hook/Makefile:
	don't use -L$(top_builddir)/lib/libgfarm, this prevents libtool from
	accidentally link a static library (libgfarm.a) at installation time.

	* lib/libgfarm/gfsl/session.c: make some private functions static

	* Makefile.in: remove libtool at "make distclean"

	* makes/make.sh: A script to be used as an alternative of "make",
	when $(top_builddir) is different from $(top_srcdir) and
	there isn't Makefile.in the $(srcdir).
	It isn't possible to simply invoke "make" on such directories,
	because there is no Makefile in the directory, although there
	is a Makefile in $(srcdir).

	* ns/gfarm/Makefile, ns/gfarmd/Makefile.in, ns/nslib/Makefile.in, ns/nstool/file/Makefile.in:
	use libtool to build shared libraries

	* lib/libgfarm/gfarm/Makefile, lib/libgfarm/gfarm/Makefile.inc, lib/libgfarm/gfsl/Makefile, lib/libgfarm/gfsl/Makefile.inc, lib/libgfarm/gfutil/Makefile, lib/libgfarm/gfutil/Makefile.inc, lib/Makefile, lib/gfs_hook/Makefile, lib/gfs_hook/Makefile.in, lib/gfs_hook/sysdep/linux/Makefile, lib/gfs_hook/sysdep/linux/Makefile.in, lib/libgfarm/Makefile, makes/var.mk:
	- use libtool to build shared libraries
	- use lib.mk

	* lib/gfs_hook/sysdep/default/Makefile, lib/gfs_hook/sysdep/default/dummy.c:
	- change the way how lib/gfs_hook/sysdep directory is detected
	- use libtool

	* makes/lib.mk: - provide this for libraries
	- use libtool to build shared libraries

	* makes/prog.mk: - use libtool to build shared libraries
	- change the void marker of pathname from "/" to "--"
	- don't show (ignored) error message, if there is no file to remove

	* gfptool/Makefile: rename $(mpi_subdirs) to $(mpi_targets)

	* makes/config.mk.in: - use libtool to build shared libraries
	- move definition of $(exec_includedir) from configure to here
	- refer $(globus_shared)
	- rename {globus,mpi}_subdirs to {globus,mpi}_targets
	- rename $(gfs_hook_lfs64_objs) to largefile64_objs,
	  and define largefile64__{srcs,cflags,targets} as well
	- change the way how lib/gfs_hook/sysdep directory is detected

	* configure, include/gfarm/gfarm_config.h.in: regen

	* configure.ac: - use libtool to build shared libraries
	- move definition of $(exec_includedir) from here to makes/config.mk
	- detect gcc automatically
	- be more verbose about --with-PACKAGE
	- export $(globus_shared)
	- rename {globus,mpi}_subdirs to {globus,mpi}_targets
	- rename $(gfs_hook_lfs64_objs) to $(largefile64_objs),
	  and define largefile64__{srcs,cflags,targets} as well
	- change the way how lib/gfs_hook/sysdep directory is detected
	- change Makefile.in under lib/gfs_hook to Makefile

	* aclocal.m4:
	copied from ${prefix}/share/aclocal/libtool.m4 in libtool-1.5.6

	* makes/ltmain.sh:
	copied from ${prefix}/share/libtool/ltmain.sh in libtool-1.5.6

	* gfptool/util/Makefile, util/gfront/Makefile, util/ptool/Makefile:
	use script.mk

	* makes/script.mk: provide this for scripts installation

	* doc/Makefile: change the void marker of pathname from "/" to "--"

	* makes/html.mk, makes/include.mk, makes/man.mk, makes/subdir.mk:
	- change the void marker of pathname from "/" to "--"
	- don't show (ignored) error message, if there is no file to remove

	* configure, include/gfarm/gfarm_config.h.in: regen

	* Makefile.in, acconfig.h, config.guess, config.sub, configure.ac, configure.in, install-sh, makes/config.guess, makes/config.sub, makes/install-sh:
	switch from autoconf-2.13 to autoconf-2.57

	* util/gfront/Makefile, util/ptool/Makefile: use $(INSTALL_SCRIPT)

	* makes/config.mk.in:
	- use configure generated @INSTALL@ instead of handcrafted one
	- define $(INSTALL_SCRIPT)

	* ns/nslib/Makefile.in: - use "$(MAKE)" instead of "make"
	- fix typo in "install" target

	* server/gfmd/Makefile, server/gfsd/Makefile, util/gfront/Makefile, util/ptool/Makefile, ns/gfarmd/Makefile.in, ns/nstool/Makefile, ns/nstool/file/Makefile.in, server/Makefile, man/ja/man8/Makefile, man/man1/Makefile, man/man3/Makefile, man/man5/Makefile, man/man8/Makefile, ns/Makefile, ns/gfarm/Makefile, lib/libgfarm/gfsl/Makefile, makes/var.mk, man/Makefile, man/ja/Makefile, man/ja/man1/Makefile, man/ja/man3/Makefile, man/ja/man5/Makefile, gftool/gfstat/Makefile, gftool/gfwhere/Makefile, gftool/gfwhoami/Makefile, include/gfarm/Makefile, lib/Makefile, lib/gfs_hook/sysdep/linux/Makefile.in, gftool/gfrep/Makefile, gftool/gfrm/Makefile, gftool/gfrmdir/Makefile, gftool/gfrun/Makefile, gftool/gfsched/Makefile, gftool/gfsck/Makefile, gftool/gfsetdir/Makefile, gftool/gfls/Makefile, gftool/gfmkdir/Makefile, gftool/gfmpirun/Makefile, gftool/gfps/Makefile, gftool/gfpwd/Makefile, gftool/gfrcmd/Makefile, gftool/gfreg/Makefile, gftool/example/Makefile, gftool/example/gfimport_fixed/Makefile, gftool/example/gfimport_text/Makefile, gftool/gfexec/Makefile, gftool/gfexport/Makefile, gftool/gfhost/Makefile, gftool/gfkey/Makefile, gfptool/gfwc/Makefile, gfptool/util/Makefile, gftool/Makefile, gftool/addpath/Makefile, gftool/digest/Makefile, gfptool/gfcp/Makefile, gfptool/gfcp_hook/Makefile, gfptool/gfgrep/Makefile, gfptool/gfrepbe_client/Makefile, gfptool/gfrepbe_server/Makefile, gfptool/gfsplck/Makefile, doc/html/ja/ref/man1/Makefile, doc/html/ja/ref/man3/Makefile, doc/html/ja/ref/man5/Makefile, doc/html/ja/ref/man8/Makefile, gfptool/Makefile, gfptool/gfcombine/Makefile, gfptool/gfcombine_hook/Makefile, doc/html/Makefile, doc/html/en/ref/Makefile, doc/html/en/ref/man1/Makefile, doc/html/en/ref/man3/Makefile, doc/html/en/ref/man5/Makefile, doc/html/en/ref/man8/Makefile, doc/html/ja/ref/Makefile, bench/bwlat-syscache/Makefile, bench/nconnect/Makefile, bench/thput-fsstripe/Makefile, bench/thput-fsys/Makefile, bench/thput-gfpio/Makefile, bench/thput-pvfs/Makefile, doc/Makefile, Makefile.in, bench/Makefile:
	rename "objdir" to "builddir" to conform to the libtool convention

	* lib/gfs_hook/Makefile.in:
	- rename "objdir" to "builddir" to conform to the libtool convention
	- remove unneeded assignments to top_objdir and VPATH

	* ns/include/gfarm/Makefile, ns/nslib/Makefile.in:
	- make this work with relative srcdir
	- rename "objdir" to "builddir" to conform to the libtool convention

	* makes/subdir.mk: make this work with relative srcdir

	* makes/include.mk: use $(INCS) instead of *.h

	* lib/libgfarm/Makefile:
	- don't use ${ldap_srcs}, ${ldap_objs} any more
	- rename "objdir" to "builddir" to conform to the libtool convention

	* lib/libgfarm/gfarm/Makefile.inc:
	don't use ${ldap_srcs}, ${ldap_objs} any more

	* makes/config.mk.in: remove unnecessary variables

	* configure: regen

	* configure.in:
	- reorder to make this mostly conform to the autoconf standard convention
	- remove unnecessary variables

2004-08-13  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/hooks.c:
	corrected typographical errors that using leading spaces instead of tabs.

	* lib/gfs_hook/hooks.c: Added rename hook.

2004-08-12  Noriyuki Soda  <soda@sra.co.jp>

	* server/gfmd/gfmd.c: plug memory leak

	* lib/gfs_hook/hooks.c: make utime(2) hook more portable

	* lib/libgfarm/gfarm/host.c: avoid unnecessary gethostbyname() call

	* lib/libgfarm/gfarm/config.c: off by one error

2004-08-11  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_misc.c:
	gfs_rename_file(): Pluged a memory leak.

	* lib/libgfarm/gfarm/gfs_pio_misc.c:
	Added gfs_rename(), but it does not support directory handling in this
	revision.

	* server/gfsd/gfsd.c, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_proto.h:
	Added GFS_PROTO_LINK protocol and its handlers.

2004-08-10  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfexec/gfexec.c:
	Fixed a buffer overrun bug introduced by the previous commit.

	* lib/libgfarm/gfarm/gfs_pio.h, gftool/gfexec/gfexec.c, gftool/gfrun/gfrun.c, lib/gfs_hook/hooks_init.c, lib/gfs_hook/hooks_init_mpi.c, lib/libgfarm/gfarm/config.c:
	Added the -b option for gfrun to set global file view as a default view for programs that link with Gfarm syscall-hooking library.
	Added the --gfarm_hook_global option for gfexec.

	* doc/html/en/ref/man8/gfmd.8.html, doc/html/en/ref/man8/gfsd.8.html, doc/html/ja/ref/man8/gfmd.8.html, doc/html/ja/ref/man8/gfsd.8.html, man/ja/man8/gfmd.8, man/ja/man8/gfsd.8, man/man8/gfmd.8, man/man8/gfsd.8:
	regen

	* doc/docbook/en/ref/man8/gfmd.8.docbook, doc/docbook/en/ref/man8/gfsd.8.docbook, doc/docbook/ja/ref/man8/gfmd.8.docbook, doc/docbook/ja/ref/man8/gfsd.8.docbook:
	Corrected the description related to gfsd and gfmd running in a user privilege.

	* doc/README.hook.en: Rewrote many sections by introducing LD_PRELOAD.

	* INSTALL.en, INSTALL.ja: Added description related to LD_PRELOAD.
	Updated other sections including the introduction.

2004-08-09  Noriyuki Soda  <soda@sra.co.jp>

	* server/gfmd/inode.c: plug memory leak

	* server/gfmd/fs.c, server/gfmd/gfmd.c, server/gfmd/inode.c, server/gfmd/inode.h, server/gfmd/peer.c, server/gfmd/process.c, server/gfmd/process.h:
	bug fix - deal with realloc().
	use internal_ino_t instead of "struct inode *" for long term use

	* lib/libgfarm/gfarm/Makefile.inc, lib/libgfarm/gfarm/gfs_proto.h, makes/var.mk:
	gfarm v2 initial commit

	* server/gfmd/fs.c, server/gfmd/fs.h, server/gfmd/group.c, server/gfmd/group.h, server/gfmd/host.c, server/gfmd/host.h, server/gfmd/id_table.c, server/gfmd/id_table.h, server/gfmd/inode.c, server/gfmd/inode.h, server/gfmd/job.c, server/gfmd/job.h, server/gfmd/peer.c, server/gfmd/peer.h, server/gfmd/process.c, server/gfmd/process.h, server/gfmd/subr.c, server/gfmd/subr.h, server/gfmd/user.c, server/gfmd/user.h:
	New file.

	* server/gfmd/Makefile, server/gfmd/fs.c, server/gfmd/fs.h, server/gfmd/gfmd.c, server/gfmd/group.c, server/gfmd/group.h, server/gfmd/host.c, server/gfmd/host.h, server/gfmd/id_table.c, server/gfmd/id_table.h, server/gfmd/inode.c, server/gfmd/inode.h, server/gfmd/job.c, server/gfmd/job.h, server/gfmd/peer.c, server/gfmd/peer.h, server/gfmd/process.c, server/gfmd/process.h, server/gfmd/subr.c, server/gfmd/subr.h, server/gfmd/user.c, server/gfmd/user.h, acconfig.h, configure.in:
	gfarm v2 initial commit

	* include/gfarm/error.h, include/gfarm/group_info.h, include/gfarm/host_info.h, include/gfarm/user_info.h:
	New file.

	* include/gfarm/error.h, include/gfarm/gfarm.h, include/gfarm/gfarm_config.h.in, include/gfarm/gfarm_error.h, include/gfarm/gfarm_misc.h, include/gfarm/gfarm_stringlist.h, include/gfarm/gfs.h, include/gfarm/group_info.h, include/gfarm/host_info.h, include/gfarm/user_info.h, lib/libgfarm/gfutil/gfutil.h, lib/libgfarm/gfutil/logutil.c:
	gfarm v2 initial commit

	* lib/libgfarm/gfarm/config.h, lib/libgfarm/gfarm/config_server.c, lib/libgfarm/gfarm/gfm_client.h, lib/libgfarm/gfarm/gfp_xdr.c, lib/libgfarm/gfarm/gfp_xdr.h, lib/libgfarm/gfarm/liberror.c, lib/libgfarm/gfarm/liberror.h:
	New file.

	* lib/libgfarm/gfarm/Makefile.inc, lib/libgfarm/gfarm/auth.h, lib/libgfarm/gfarm/auth_client.c, lib/libgfarm/gfarm/auth_client_gsi.c, lib/libgfarm/gfarm/auth_common.c, lib/libgfarm/gfarm/auth_config.c, lib/libgfarm/gfarm/auth_server.c, lib/libgfarm/gfarm/auth_server_gsi.c, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/config.h, lib/libgfarm/gfarm/config_server.c, lib/libgfarm/gfarm/error.c, lib/libgfarm/gfarm/gfm_client.h, lib/libgfarm/gfarm/gfm_proto.h, lib/libgfarm/gfarm/gfp_xdr.c, lib/libgfarm/gfarm/gfp_xdr.h, lib/libgfarm/gfarm/hostspec.c, lib/libgfarm/gfarm/hostspec.h, lib/libgfarm/gfarm/io_fd.c, lib/libgfarm/gfarm/io_fd.h, lib/libgfarm/gfarm/io_gfsl.c, lib/libgfarm/gfarm/io_gfsl.h, lib/libgfarm/gfarm/iobuffer.c, lib/libgfarm/gfarm/iobuffer.h, lib/libgfarm/gfarm/liberror.c, lib/libgfarm/gfarm/liberror.h, lib/libgfarm/gfarm/param.c, lib/libgfarm/gfarm/param.h, lib/libgfarm/gfarm/sockopt.c, lib/libgfarm/gfarm/sockopt.h, lib/libgfarm/gfarm/stringlist.c:
	gfarm v2 initial commit

2004-08-07  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog: Catched up with the current ChangeLog.

2004-08-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/Makefile.in:
	Added $(openssl_include) in CFLAGS. [Bugzilla-ja #33]

2004-08-04  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfrm/gfrm.c, include/gfarm/gfarm_error.h, lib/libgfarm/gfarm/error.c, lib/libgfarm/gfarm/gfs_pio_misc.c:
	remove_whole_file_or_dir(): unlink files don't have fragment infromation.
	http://datafarm.apgrid.org/bugzilla/show_bug.cgi?id=12

	* lib/libgfarm/gfarm/gfs_pio_misc.c:
	gfs_fchmod(): Implemented gfs_chmod()'s functions in previous revision.

	* lib/libgfarm/gfarm/gfs_pio_misc.c: gfs_chmod():
	- change file section name from index to architecture and vice versa
	  according to file's mode.
	- change mode of file in spool.

	* lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_proto.h, server/gfsd/gfsd.c:
	Added GFS_PROTO_RENAME protocol and its handlers.

2004-08-02  Noriyuki Soda  <soda@sra.co.jp>

	* server/gfmd/gfmd.c:
	always use KEEPALIVE option to deal with reboot or network trouble.
	discussed with tatebe-san.

2004-07-27  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/hooks.c: Added fchmod() hook.

	* lib/libgfarm/gfarm/gfs_dir.c, include/gfarm/gfs.h:
	Added gfs_dirname() returns directory name.

2004-07-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_dir.c (gfs_chdir_canonical):
	change also the environment variable GFS_PWD for shells.

	* lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_local.c (set_view_{local,global}):
	Changed error message to NO_SUCH_OBJECT from OPERATION_NOT_PERMITTED.

2004-07-24  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/gfarm.csh, package/redhat/gfarm.sh:
	Added the option of gfsetdir to specify a shell type explicitly.

	* lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_local.c:
	gfs_pio_set_view_{local,global} set a section of localhost's architecture when it is called for an executable file.

	* gftool/gfrun/gfrun.c:
	Do not select the local host without any inspection.

	* package/redhat/gfarm.csh, package/redhat/gfarm.sh, package/redhat/gfarm.spec:
	Added profile.d/gfarm.{sh,csh} for 'gfcd' in gfarm-client package.

2004-07-23  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	item 2.5 isn't needed, because we always provide the hooks for
	getxattr()/lgetxattr()/fgetxattr()regardless of <attr/xattr.h> existence.

	* lib/gfs_hook/hooks.c: Added getxattr()/lgetxattr()/fgetxattr().

2004-07-22  Noriyuki Soda  <soda@sra.co.jp>

	* INSTALL.en, INSTALL.ja, doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	preparation for getxattr(2) and related hooks:
	mention that libattr package is needed.

	* configure, configure.in, include/gfarm/gfarm_config.h.in:
	preparation for getxattr(2) and related hooks:
	use "#ifdef HAVE_ATTR_XATTR_H" to determine whether <attr/xattr.h>
	can be #included or not.

2004-07-22  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hook_test.c:
	Removed Gfarm related include files and functions.

	* lib/libgfarm/gfarm/config.c (gfarm_config_set_default_spool_on_client):
	Do not rely on the configuration file for the spool root.  It is necessary to be obtained by gfsd always when the client node is also a file system node.

	* lib/libgfarm/gfarm/gfs_pio_section.c (gfs_pio_set_view_section):
	Fixed a bug such that canonical_self_name will be free'ed.

2004-07-21  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_dir.c: make gfs_refreshdir() static

2004-07-21  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_dir.c:
	Added gfs_refreshdir(). This function refreshes directory cache when timeout
	occurs and none of the directories is opened.

2004-07-21  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/schedule.c (gfarm_file_section_host_schedule_with_priority_to_local):
	Fixed a double free bug.

2004-07-15  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_pio_local.c:
	Replaced SSLeay_add_all_algorithms with OpenSSL_add_all_digests because openssl library in Globus-3.2 does not have it.

2004-07-14  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfptool/gfsplck/gfsplck.c:
	delete an invalid file when when it is not a regular file. [Bugzilla-ja #29]

	* lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/schedule.c:
	schedule.c (gfarm_file_section_host_schedule_with_priority_to_local): Even when a local host is included in a host list, make sure gfsd is running or not. [Bugzilla-ja #31]
	gfs_pio_section.c (gfs_pio_set_view_section): likewise.

2004-07-12  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/README.hook.en:
	Mention about segmentation fault when using LDAP authentication in RedHat-8.0 and 7.3.
	use gfs_hook_no_init.o and hooks_init_mpi.c instead of gfs_hook_mpi.o.
	Added gfs_hook_set_default_view_section() and gfs_hook_set_view_section.

	* gfptool/gfcp/gfcp.c: Fixed a segfault problem.

2004-07-08  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* include/gfarm/gfs_hook.h, lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_stat.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h:
	When the section is specified by an extended Gfarm URL, the default view is changed to the section view.
	'sec' argument is now unnecessary in gfs_hook_is_url().  It is specified by _gfs_hook_section.
	Added gfs_hook_set_default_view_section() and gfs_hook_set_view_section().

	* gftool/gfrm/gfrm.c:
	Fixed a segfault bug.  Need to add more error handling.

	* lib/gfs_hook/hooks.c: Added dup(2) syscall hook.

	* lib/gfs_hook/hooks_subr.c:
	'/gfarm/.' specifies the current working directory in Gfarm file system like 'gfarm:'.

2004-07-08  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* include/gfarm/gfs.h, lib/libgfarm/gfarm/gfs_pio_misc.c:
	Added gfs_fchmod().

2004-07-08  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_64.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h:
	'/gfarm' is now translated to 'gfarm:/' not 'gfarm:'.
	Initial cwd is assumed to be 'PWD' if it points to a path in Gfarm file system.
	This assumes 'PWD' is set by bash or tcsh with syscall hooking library.

2004-07-05  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/changelog: new release 1.0.3.1

	* debian/rules: added gfs_chmod man page

	* lib/gfs_hook/Makefile.in: install hooks_init_mpi.c from $(srcdir)

2004-07-05  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/gfarm.spec: Added a manual page for gfs_chmod(3).

	* RELNOTES, package/redhat/gfarm.spec, package/solaris/build:
	Release note for the version 1.0.3.1.

	* doc/html/en/ref/man3/gfs_chmod.3.html, doc/html/ja/ref/man3/gfs_chmod.3.html, man/ja/man3/gfs_chmod.3, man/man3/gfs_chmod.3:
	regen

	* doc/docbook/en/ref/man3/Makefile.inc, doc/docbook/ja/ref/man3/Makefile.inc, doc/html/en/ref/index.html, doc/html/ja/ref/index.html:
	Added manual entry for gfs_chmod(3).

2004-07-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_common.c (FUNC___OPEN): modified a comment.

	* lib/libgfarm/gfarm/gfs_pio_section.c: fixed spellng.

	* lib/libgfarm/gfarm/gfs_pio_section.c (set_view_section):
	just modified a comment in O_TRUNC case.

2004-07-03  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/getcwd.c:
	syscall(SYS_getcwd) results in segfault in RH-8.0 and RH-7.3.  This code is temporary commented out.

	* lib/gfs_hook/hooks.c (__write):
	commented out the debug print that also results in infinite loop.

2004-07-02  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks.c: Added chmod(2) syscall hook entry.

	* doc/README.hook.en:
	Updated the description in extended Gfarm URL section.  mention about '/gfarm'.

	* doc/html/en/ref/man3/gfs_rmdir.3.html, doc/html/ja/ref/man3/gfs_rmdir.3.html, man/ja/man3/gfs_rmdir.3, man/man3/gfs_rmdir.3:
	regen

	* doc/docbook/en/ref/man3/gfs_rmdir.3.docbook, doc/docbook/ja/ref/man3/gfs_rmdir.3.docbook, lib/libgfarm/gfarm/gfs_dir.c (gfs_rmdir):
	Added the permission check of the parent directory.

	* debian/libgfarm-dev.install:
	Added gfs_hook_no_init.o and hooks_init_mpi.c.

	* package/redhat/gfarm.spec: Changed prefix from /usr/grid to /usr.
	Added gfs_hook_no_init.o and hooks_init_mpi.c.

	* lib/gfs_hook/Makefile.in:
	Even though the case without --with-mpi, install gfs_hook_no_init.o and hooks_init_mpi.c to the destination directory to make it possible to link with syscall hook library for MPI application using any MPI compiler.  Note that object code using MPI library does not have object-level compatibility.

	* lib/gfs_hook/hooks_init_mpi.c: Removed gfs_hook dependent code.

	* lib/libgfarm/gfarm/gfs_unlink.c (gfs_unlink):
	plugged memory leak.  measure time even when the error occurs.

2004-07-02  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_misc.c: Added gfs_chmod().

	* lib/libgfarm/gfarm/gfs_unlink.c (gfs_unlink):
	Added check of the parent directory's permisson.

2004-07-02  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_stat.c:
	Fixed a bug such that 'sec' is free'ed twice, introduced by the previous commit.

	* lib/gfs_hook/hooks.c (__utime):
	fixed a bug to set invalid modification time.

	* lib/gfs_hook/Makefile.in, lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_stat.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h:
	hook_stat.c: make the condition to select file view consistent with open(2) syscall hook. [Bugzilla-ja #26]
	hooks_subr.c: added a hash table to maintain files under creation.  This makes stat possible to files that are created by the same process but not close yet.  XXX - this is stopgap implementation for Gfarm v1.

2004-07-01  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_common.c (FNNC___OPEN):
	taken care of parallel write case.

	* lib/gfs_hook/hooks_common.c (FUNC___OPEN):
	stopgap implementation of O_WRONLY/O_RDWR, O_CREAT, and O_TRUNC flags.  When file size is 0, the file can be opened even in write mode.

2004-06-30  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks.c:
	Added new syscall hook entries; mkdir, rmdir, and utime.  Tested using RH-7.3 and glibc-2.2.5-44.

2004-06-28  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_subr.c:
	A home directory in Gfarm file system can be specified by '/gfarm/~username' instead of '/gfarm~username'.

	* lib/gfs_hook/hooks_subr.c (gfs_hook_is_url):
	Fixed a segfault bug introduced by the previous commit.

2004-06-27  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_subr.c:
	Introduced the mount point concept.  Now it is '/gfarm', although the mount point can be specified by a configufation file.
	'/gfarm:' and '/gfarm@' are now obsolete.
	 VS: ----------------------------------------------------------------------

	* gfptool/gfcp_hook/Makefile, gfptool/gfcombine_hook/Makefile:
	Added missing dependency.

2004-06-24  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* include/gfarm/gfs.h, lib/libgfarm/gfarm/gfs_dir.c:
	Added gfs_chdir_canonial(). It changes cwd to the argument without
	canonicalization.

	* gftool/gfrm/gfrm.c:
	Added -r, -R options, remove the contents of directories recursively.

2004-06-21  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog: Catched up with the current ChangeLog.

2004-06-18  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/gfarm.spec:
	Deleted %if !%{globus} ... %endif for gfront.  A new rpm such as version 4.2.1 checks unpackaged file(s).  If there are files installed but unpackaged, RPM build process aborted.

2004-06-15  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	Added one more typical error case in Subsection 2.2 "GSI authentication".

2004-06-02  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/control: removed invalid new lines on woody (debuild error)

2004-06-01  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* INSTALL.ja: Rewrote the overview section for easier understanding.

2004-05-31  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/config.c:
	(map_user) Fixed a bug reported by bugzilla-ja #22.  If user name entry multiply defined in man_user-files described in ~/.gfarmrc and /etc/gfarm.conf, user name is mapped according to ~/.gfarmrc's entry.

2004-05-26  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/config.c: remove warnings

	* lib/libgfarm/gfarm/config.c:
	make previous revision really work (pointed out by the author - tatebe-san)

2004-05-26  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/config.c (gfarm_config_clear):
	fixed a segfault bug in gfarm_terminate().  The memory space of gfarm_spool_root should not free'ed in the default case because it is statically allocated.

2004-05-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	Replaced DB_TXN_NOT_DURABLE with DB_TXN_NOSYNC to flush the log on transaction commit somehow.

	* ChangeLog, RELNOTES: Release note for the version 1.0.3.

2004-05-24  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/url.c:
	check whether parent directory is writable or not at file/directory creation
	(this is not enough, though)

	* lib/libgfarm/gfarm/gfs_client.c: fix again (with comments)

	* lib/libgfarm/gfarm/gfs_client.c: fix obvious mistake again

	* lib/libgfarm/gfarm/gfs_client.c: fix obvious mistake

	* lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h:
	changes for gfhook'ed gsiftpd, based on the patch by Itthichok-san
	- use effective uid for file access
	- make gfarm_initialize()/gfarm_terminate() callable multiple times

2004-05-21  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/html/en/ref/index.html, doc/html/ja/ref/index.html:
	Added a manual entry of gfwhoami in index.html.

	* lib/libgfarm/gfarm/gfs_pio_misc.c (gfs_stat_section):
	revert to the revision 1.17 because there is no way to check whether the specified section is opened or not in the current implementation.

2004-05-20  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_pio.c (gfs_pio_fileno):
	Fixed a segfault bug reported by [Bugzilla-ja #25].
	(gfs_pio_readdelim): Fixed a type mismatch.

2004-05-13  Noriyuki Soda  <soda@sra.co.jp>

	* doc/docbook/ja/ref/man3/Makefile.inc:
	recover a line which was removed by accident

	* package/solaris/build: change version number from 1.0.2 to 1.0.3

	* debian/libgfarm-dev.manpages, debian/rules, package/redhat/gfarm.spec:
	add manual files for newly added functions

	* RELNOTES: mention gfs_pio_readdelim()

	* doc/html/ja/ref/index.html, doc/docbook/en/ref/man3/Makefile.inc, doc/docbook/ja/ref/man3/Makefile.inc, doc/html/en/ref/index.html:
	add links to newly added functions

	* doc/html/en/ref/man3/gfs_pio_gets.3.html, doc/html/en/ref/man3/gfs_pio_readdelim.3.html, doc/html/en/ref/man3/gfs_pio_readline.3.html, doc/html/ja/ref/man3/gfs_pio_gets.3.html, doc/html/ja/ref/man3/gfs_pio_readdelim.3.html, doc/html/ja/ref/man3/gfs_pio_readline.3.html, man/ja/man3/gfs_pio_gets.3, man/ja/man3/gfs_pio_readdelim.3, man/ja/man3/gfs_pio_readline.3, man/man3/gfs_pio_gets.3, man/man3/gfs_pio_readdelim.3, man/man3/gfs_pio_readline.3:
	regen

	* doc/docbook/en/ref/man3/gfs_pio_gets.3.docbook, doc/docbook/en/ref/man3/gfs_pio_readdelim.3.docbook, doc/docbook/en/ref/man3/gfs_pio_readline.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_gets.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_readdelim.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_readline.3.docbook:
	add manual pages of recently added functions

	* include/gfarm/gfs.h, lib/libgfarm/gfarm/gfs_pio.c:
	change some parameters in gfs_pio_gets(), gfs_pio_readline() and
	gfs_pio_readdelim() from int to size_t, because size_t is already
	used in other place in <gfarm/gfs.h>, so no need to worry about
	include extra header like <stddef.h>.
	pointed out by ikegami-san.

2004-05-13  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/changelog: changed version to 1.0.3

2004-05-13  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog, RELNOTES: Release note for the version 1.0.3.

2004-05-13  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* package/redhat/gfarm.spec:
	change version number from 1.0.2.1 to 1.0.3

2004-05-13  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfptool/gfcp_hook/gfcp_hook.c: Deleted Gfarm related APIs.

2004-05-11  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/hooks_fstat.c:
	(__fstat(64)/__fxstat(64)): fixed a bug they refer file type before checking
	whether file/directory is opened.

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h (__close):
	skips gfs_pio_close()/gfs_closedir() it file/dirctory is refered
	by multiple descriptor.

2004-04-30  Noriyuki Soda  <soda@sra.co.jp>

	* include/gfarm/gfs.h, lib/libgfarm/gfarm/gfs_pio.c:
	- add gfs_pio_gets() to make conversion from fgets() easy.
	- add gfs_pio_readline() to deal with the following report:
		http://datafarm.apgrid.org/bugzilla-ja/show_bug.cgi?id=24
	  this implementation may not be completed, because the detail of
	  the function specification is somewhat different from the report
	  in bugzilla.

2004-04-26  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h:
	__dup2() hook duplicates Gfarm directory's descriptor

2004-04-22  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_fstat.c:
	Changed nlink from 1 to 2 for a directory.  It should be at least 2.

	* lib/libgfarm/gfarm/gfs_pio_misc.c (gfs_stat_section):
	fixed a bug not to return NULL when the section is created but not closed yet.

2004-04-22  Noriyuki Soda  <soda@sra.co.jp>

	* doc/html/ja/ref/man1/gfexec.1.html, man/ja/man1/gfexec.1, man/man1/gfexec.1, doc/html/en/ref/man1/gfexec.1.html:
	regen

	* doc/docbook/en/ref/man1/gfexec.1.docbook, doc/docbook/ja/ref/man1/gfexec.1.docbook, gftool/gfexec/gfexec.c:
	- make any child process inherit its parent's node size and rank,
	  as discussed in gfarm-cvs mailing list.
	- add -s, -I, -N option to gfexec to explicitly change node size and rank.

	* lib/libgfarm/gfarm/config.c:
	make any child process inherit its parent's node size and rank,
	as discussed in gfarm-cvs mailing list.

2004-04-20  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_pio_section.c (gfs_pio_view_section_stat):
	fixed a bug not to return NULL when the section is created but not closed yet.  It is also necessary to fix gfs_stat() and gfs_stat_section(), but it is not done yet because we need to figure out the side effect.

2004-04-19  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/changelog: new release version

2004-04-19  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* package/redhat/gfarm.spec:
	change version number from 1.0.2 to 1.0.2.1

2004-04-19  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_init.c (gfs_hook_initialize):
	When gfs_pio_set_local() is not called after gfarm_initialize(), assume gfs_pio_set_local(0, 1).

	* lib/gfs_hook/hooks_init.c (gfs_hook_initialize):
	Fixed oops.  gfs_pio_set_local(0, 1) should not be called here.

2004-04-18  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* debian/libgfarm-dev.manpages, package/redhat/gfarm.spec:
	Added manual pages of gfs_mkdir and gfs_rmdir.

	* lib/libgfarm/gfarm/config.c (gfarm_initialize):
	Fixed a segfault problem especially when using syscall hooking library.

2004-04-16  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* man/ja/man3/gfs_mkdir.3, man/ja/man3/gfs_rmdir.3, man/man3/gfs_mkdir.3, man/man3/gfs_rmdir.3, doc/html/en/ref/index.html, doc/html/en/ref/man3/gfs_mkdir.3.html, doc/html/en/ref/man3/gfs_rmdir.3.html, doc/html/ja/ref/index.html, doc/html/ja/ref/man3/gfs_mkdir.3.html, doc/html/ja/ref/man3/gfs_rmdir.3.html:
	Added gfs_mkdir and gfs_rmdir in index.html.
	regen.

	* doc/docbook/en/ref/man3/Makefile.inc, doc/docbook/en/ref/man3/gfs_mkdir.3.docbook, doc/docbook/en/ref/man3/gfs_rmdir.3.docbook, doc/docbook/ja/ref/man3/Makefile.inc, doc/docbook/ja/ref/man3/gfs_mkdir.3.docbook, doc/docbook/ja/ref/man3/gfs_rmdir.3.docbook:
	Deleted 'NOT SUPPORTED YET'.

	* lib/libgfarm/gfarm/gfs_dir.c (gfs_mkdir): honor umask.

	* gftool/gfstat/gfstat.c:
	Take care of the case of program (not a fragmented file).

	* gftool/gfstat/gfstat.c:
	Display the information of assumed fragment number. [Bugzilla-ja #16]

	* gftool/gfmkdir/gfmkdir.c, gftool/gfrmdir/gfrmdir.c, lib/libgfarm/gfarm/gfs_dir.c:
	Added gfs_mkdir() and gfs_rmdir().
	gfrmdir now does not remove physical directories in spool directories without new '-a' option.

2004-04-16  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/hooks_subr.c:
	do not return real file descriptor for remote GFS_File,
	but return a descriptor of "/dev/null",
	to make select(2) work with this descriptor.
	idea from tatebe-san.

2004-04-16  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* LICENSE: Added 2004.

2004-04-15  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfexec/gfexec.c: if fork() isn't used, call gfarm_terminate().

2004-04-15  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/README.hook.en, doc/GUIDE.ja:
	Deleted the description the option 'u' of gfrun command.  It is obsolete.

	* INSTALL.en, INSTALL.ja:
	Added the reference to README.hook.en regarding syscall-hook library.

	* gftool/gfexec/gfexec.c:
	Take care the case when gfexec is executed without gfarm related options.

2004-04-14  Noriyuki Soda  <soda@sra.co.jp>

	* RELNOTES, gftool/gfexec/gfexec.c, gftool/gfrun/gfrun.c, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/gfs_pio.h:
	change the default way to pass node number and other information to
	a gfarm application. Now those are passed by environment variables by default.
	this change makes gfarm_initialize()/gfarm_terminiate() optional for
	applications which use gfs_hook.

	* include/gfarm/gfs.h, lib/libgfarm/gfarm/gfs_exec.c:
	remove gfs_execve_legacy(), and
	export gfs_execve_replicate_to_local() as gfarm_url_program_get_local_path().

	* gftool/gfsetdir/gfsetdir.c: output newline

2004-04-12  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfrun/gfrun.c:
	rename options->deliver to options->use_gfexec, and reverse the meaning.
	i.e. options->use_gfexec means options->deliver == 0 in old revision.

2004-04-12  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfptool/gfcp/gfcp.c:
	Added -I option to specify a fragment index or an architecture for copying a program.

2004-04-12  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/changelog, debian/gfarm-client.install, debian/gfarm-client.manpages, debian/rules:
	updated for 1.0.2

2004-04-10  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/GUIDE.ja: minor modification

	* doc/README.hook.en:
	Added the limitation of glibc included in Fedora Core 1.

2004-04-09  Noriyuki Soda  <soda@sra.co.jp>

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	mention that older openldap doesn't support case sensitive pathname

	* lib/libgfarm/gfarm/metadb_ldap.c, RELNOTES:
	backout previous change to support case-sensitive pathname,
	because newer openldap (at least since 2.1.25) does support it
	without previous change, and it seems newer version does the right thing.

2004-04-09  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/html/en/ref/man1/gfreg.1.html, doc/html/ja/ref/man1/gfreg.1.html, man/ja/man1/gfreg.1, man/man1/gfreg.1:
	regen

	* doc/docbook/en/ref/man1/gfreg.1.docbook, doc/docbook/ja/ref/man1/gfreg.1.docbook:
	Added -h option for program registration.

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	Updated the description in limitation section regarding case-sensitive issue and meta character issue.

2004-04-09  Noriyuki Soda  <soda@sra.co.jp>

	* RELNOTES:
	mention case sensitive pathname comparison and its side effect

	* package/solaris/build: change version number from 1.0.1 to 1.0.2

	* package/solaris/gfarm-client.files: add gfwhoami

2004-04-09  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/GUIDE.ja:
	Updated the description regarding gfhost, gfrun, and gfrep.

2004-04-09  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/metadb_ldap.c:
	support case sensitive pathnames by using "$xx" (hexdecimal code) as DN.
	uppercase pathnames made before this change are now all treated as
	lowercase pathnames.

2004-04-09  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog, RELNOTES: Release note for the version 1.0.2.

	* doc/README.hook.en:
	Removed the description of source code modification to insert gfarm_initialize() and gfarm_terminate() because it is not necessary now.
	Added the description about semantic change about '/gfarm:'.
	Added how to execute applications.  Applications are needed to be executed with the '-u' option.

	* lib/gfs_hook/hooks_subr.c:
	Fixed a bug to add '/' after '/gfarm:' even in the case of '/gfarm:~'.

2004-04-09  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/metadb_ldap.c:
	remove unneeded check. pointed out by tatebe-san

2004-04-09  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* package/redhat/gfarm.spec:
	- change version number from 1.0.1 to 1.0.2.
	- add gfwhoami and its manuals.

2004-04-09  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/metadb_ldap.c:
	make it possible to have multiple contiguous spaces in pathname.
	XXX - this change breaks backward compatibility, if there are such pathname
	   in the past. (such pathnames were treated as if it had single space)

2004-04-09  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* man/man1/gfrun.1: revert

	* man/man1/gfrun.1, man/man1/gfwhoami.1, doc/html/en/ref/man1/gfwhoami.1.html, doc/html/ja/ref/man1/gfwhoami.1.html, man/ja/man1/gfwhoami.1:
	regen

	* doc/docbook/en/ref/man1/gfwhoami.1.docbook, doc/docbook/ja/ref/man1/gfwhoami.1.docbook:
	Subject DN is not a local user name.

2004-04-02  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* man/ja/man1/gfwhoami.1, man/man1/gfwhoami.1, doc/docbook/en/ref/man1/Makefile.inc, doc/docbook/en/ref/man1/gfwhoami.1.docbook, doc/docbook/ja/ref/man1/Makefile.inc, doc/docbook/ja/ref/man1/gfwhoami.1.docbook, doc/html/en/ref/man1/gfwhoami.1.html, doc/html/ja/ref/man1/gfexec.1.html, doc/html/ja/ref/man1/gfwhoami.1.html:
	new docbook for gfwhoami

2004-04-02  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_misc.c:
	gfs_access() doesn't check fragments of a directory.

2004-03-30  Noriyuki Soda  <soda@sra.co.jp>

	* doc/docbook/ja/ref/man1/gfexec.1.docbook: fix XML constraint error

2004-03-24  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_subr.c:
	Modified semantics of '/gfarm:'.  It is considered to be the root directory in Gfarm file system instead of a current working directory.  Applications do not assume '/gfarm:' indicates a current working directory in Gfarm file system.

2004-03-24  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/getcwd.c: minor clean up

	* lib/gfs_hook/Makefile.in, lib/gfs_hook/getcwd.c, lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_subr.h:
	make getcwd() hook work on solaris

	* lib/gfs_hook/getcwd.c: New file.

	* lib/gfs_hook/getcwd.c: getcwd(3) implemntaion from NetBSD repository

2004-03-24  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/hooks_subr.c:
	getcwd() hook returns prefix chdir() hook received.
	In previous revision, it always returned "gfarm:...".

	* lib/gfs_hook/hooks.c:
	Fixed a bug getcwd returned wrong value if it called syscall.

2004-03-23  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h, lib/libgfarm/gfarm/gfs_dir.c:
	Added getcwd() hook. This works only on Linux for now.

2004-03-19  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_fstat.c, lib/gfs_hook/hooks_stat.c:
	Set st_ino and st_dev when hooking fstat().

	* lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_section.c:
	Set st_ino in gfs_stat_canonical_path() and gfs_stat_section().
	The first argument of gfs_get_ino() is now a canonical pathname not a pathname.

2004-03-17  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h:
	Added fchdir() hook.

2004-03-16  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/glob.c, lib/libgfarm/gfarm/metadb_ldap.c, lib/libgfarm/gfarm/url.c, lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_64.c, lib/gfs_hook/hooks_stat.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h, include/gfarm/gfarm_misc.h, include/gfarm/gfs.h:
	Added chdir(2) hook and enabled to find files in Gfarm filesystem.

2004-03-11  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/hooks_subr.c:
	Fixed a bug in ROOT patch in gfs_hook_is_url().

2004-03-05  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_64.c, lib/gfs_hook/hooks_fstat.c, lib/gfs_hook/hooks_stat.c:
	don't provide xstat(), lxstat() and fxstat() in gfs_hook.
	because libc doesn't these functions even on linux,
	and those function names belong to application namespace.

2004-03-05  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfwhoami/gfwhoami.c:
	Fixed a problem such that the previous version requires GSI to compile.

	* gftool/gfexec/gfexec.c, gftool/gfrun/gfrun.c, include/gfarm/gfs.h, lib/libgfarm/gfarm/gfs_exec.c:
	Added gfs_execve_legacy() that is used to invoke a legacy application linking with the gfarm syscall-hook library but that calls neither gfarm_initialize() nor gfarm_terminate().
	'gfrun -u' (and 'gfexec -u') is now used to invoke such a legacy application.

	* lib/gfs_hook/hooks.c (__execve):
	gfs_execve() only returns if it fails.

	* gftool/Makefile, gftool/gfwhoami/Makefile, gftool/gfwhoami/gfwhoami.c:
	Contributed program by Naotaka Yamamoto.
	Display global user name.

2004-03-01  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/hook_test.c: Retrurned to revision 1.8.

	* lib/gfs_hook/hook_test.c, lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_64.c, lib/gfs_hook/hooks_fstat.c, lib/gfs_hook/hooks_stat.c:
	Fixed a bug caused opendir(3) to return ENOMEM.
	Fxstat()/fxstat64() hooks set nothing to no_blksize field in struct stat
	and opendir() refered it.

2004-02-28  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* include/gfarm/gfarm_metadb.h, include/gfarm/gfarm_misc.h, include/gfarm/gfs.h, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/metadb_ldap.c, lib/libgfarm/gfarm/metadb_misc.c, lib/libgfarm/gfarm/schedule.c:
	Added a 'const' modifier.

	* lib/libgfarm/gfarm/config.c (gfarm_terminate):
	set NULL to gf_stdout and gf_stderr after closing a redirected file.

2004-02-27  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/sysdep/linux/getdents.c, lib/gfs_hook/sysdep/linux/getdents64.c, lib/gfs_hook/sysdep/linux/getdents_common.c:
	Fixed a bug in gfs_hook_syscall_getdents64().

2004-02-26  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_common.c:
	Fixed a segfault problem when opening a file in global file view.
	gfs_pio_set_view_global() needed to be called explicitly after gfs_pio.c revision 1.9.

2004-02-20  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_common.c: Plugged memory leak.

	* lib/gfs_hook/hooks.c (__utimes):
	Fixed a type mismatch in printf() for a debug message.

2004-02-13  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_unlink.c: backout previous change, because:
	- the change makes a invalid path (e.g. a path which doesn't have copy_info)
	  unremovable.
	- the reason of the symptom wasn't openldap-2.1 (it was 2.0), and it seemed
	  to be a race codition bug of slapd.

2004-02-13  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_unlink.c: Fixed oops.

	* lib/libgfarm/gfarm/gfs_unlink.c:
	Do not delete path_info and/or section_info metadata when error happens.
	It seems that openldap-2.1.x can remove a parent entry even when its child entries exist, although I have not confirmed yet.  If it is true, this will fix a problem reported by [gfarm-cvs:02918].

2004-02-12  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/hook_test.c: Returned to revision 1.8.

	* lib/gfs_hook/sysdep/linux/bp-checks.h, lib/gfs_hook/sysdep/linux/getdents.c, lib/gfs_hook/sysdep/linux/getdents.h, lib/gfs_hook/sysdep/linux/getdents64.c, lib/gfs_hook/sysdep/linux/getdents_common.c, lib/gfs_hook/sysdep/linux/kernel-features.h, lib/gfs_hook/hook_test.c, lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_64.c, lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_subr.h, lib/gfs_hook/sysdep/linux/Makefile.in:
	Implemented getdents() and getdents64() hooks for Linux.

2004-02-05  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/hooks_common.c:
	Added file type check to __lseek() and __lseek64() because they still don't
	work it the file descripor reafers to a directory.

	* lib/gfs_hook/hooks.c:
	Added file type check to __read() and __write(). They return error if
	the file descriptor refers to a directory.

2004-02-02  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfwhere/gfwhere.c:
	Fixed a problem such that displayed fragment number is not correct when its section copy info does not exist.

	* lib/libgfarm/gfarm/gfs_pio.c (gfs_pio_check_view_default):
	check file I/O error.
	(gfs_pio_close): Fixed a segfault problem reported by bugzilla-ja #19.

	* gftool/gfsck/gfsck.c:
	Fixed a bug not to inspect the following file fragments when a section copy info is missing.

2004-02-01  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* INSTALL.en, INSTALL.ja, doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	OpenLDAP-2.1.X are now officially supported.
	(Gfarm-FAQ) Added section for performance tuning.

2004-01-27  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/hooks_common.c: - fix the following gcc warning:
	  warning: `bp' might be used uninitialized in this function
	- make this compile on 4.4bsd derived OSes.

2004-01-26  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_64.c, lib/gfs_hook/hooks_common.c:
	-Implemented getdents()/getdents64() for Solaris.
	 They don't work on Linux yet.
	-Added directory operation for open()/open64()/close().

	* lib/gfs_hook/hooks_fstat.c: Added directory operation.

	* lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h:
	Added entry for directory for file descriptor table and interface
	functions.

	* include/gfarm/gfs.h: Added comment about file type GFS_DT_UNKNOWN.

2004-01-23  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_pio.c:
	(gfs_pio_getline) Fixed a compilation error by applying a patch reported by bugzilla-ja #17.

2004-01-18  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/metadb_ldap.c:
	Escaped special characters; ',', '+', '"', '\', '<', '>', and ';', in an attribute value field in distinguishied name.
	This will fix a problem reported by bugzilla-ja #13.

2004-01-15  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/Makefile.inc, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio_default.c, lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_section.c:
	fix problems when I/O is issued without calling gfs_pio_set_view_*().
	in that case, buffer state (gf->p, gf->offset, gf->length) was silently
	abandoned.

	this fixes the following problem:
	http://datafarm.apgrid.org/bugzilla/show_bug.cgi?id=4
	(does not flush in default mode when closing a file)

2004-01-05  Noriyuki Soda  <soda@sra.co.jp>

	* doc/html/ja/ref/man1/gfrun.1.html, man/ja/man1/gfrun.1, man/man1/gfrun.1, doc/html/en/ref/man1/gfrun.1.html:
	regen

	* doc/docbook/en/ref/man1/gfrun.1.docbook, doc/docbook/ja/ref/man1/gfrun.1.docbook:
	make the description of -I option understandable for me...

	* include/gfarm/gfs.h: typo in a comment

2003-12-26  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* INSTALL.en, INSTALL.ja:
	Added an example configuration file for OpenLDAP-2.1.X.

	* lib/libgfarm/gfarm/metadb_ldap.c (gfarm_path_info_get):
	Fixed a bug reported by [gfarm-discuss:00055].
	(gfarm_metadb_initialize): Added a feature to connect to an LDAPv3 server, but still using simple authentication.

2003-12-12  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_pio_section.c (replicate_section_to_local_internal):
	save errno of open(2) during fault tolerance process to return a right error message.

	* lib/libgfarm/gfarm/url.c (gfarm_url_prefix_skip):
	use gfarm_is_url() not memcmp(3).

	* lib/libgfarm/gfarm/gfs_pio_local.c (gfs_pio_open_local_section):
	save errno of open(2) during fault tolerance process to return a right error message.

2003-12-11  Noriyuki Soda  <soda@sra.co.jp>

	* doc/html/en/ref/man1/gfrep.1.html, doc/html/ja/ref/man1/gfrep.1.html, man/ja/man1/gfrep.1, man/man1/gfrep.1:
	regen

	* doc/docbook/ja/ref/man1/gfrep.1.docbook, doc/docbook/en/ref/man1/gfrep.1.docbook:
	reflect current reality

2003-12-09  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/rules:
	added --with-globus-flavor=gcc32dbg at configure options

2003-12-08  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_exec.c (gfs_execve):
	filename starting with 'gfarm:' should be errornous, when it does not exist in a Gfarm file system.  execve() with the filename results in an infinite recursion in syscall hook case.

2003-12-08  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfexec/gfexec.c: <unistd.h> is needed to call execvp(2)

	* lib/libgfarm/gfarm/gfs_pio_section.c:
	fix compilation error on Solaris

	* INSTALL.en, INSTALL.ja:
	add a description about --with-globus-flavor option

	* configure: regen

	* configure.in: change default globus flavor from "gcc32dbg" to "gcc32"

2003-12-08  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* RELNOTES: Fixed bad grammar.

	* ChangeLog, RELNOTES: Release note for the version 1.0.1.

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	Added the item 2.1 such that 'gfls' results in 'no such object'.

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	Added the item 4.4 for special character issue of file names.

	* lib/libgfarm/gfarm/gfs_pio_misc.c (gfs_access, gfs_utimes):
	Plugged a memory leak.

	* lib/libgfarm/gfarm/gfs_exec.c, lib/libgfarm/gfarm/gfs_pio_section.c:
	Rewrote the FT code to use the same FT strategy for both cases; gfexec and on-demand replication mode.

	* gftool/gfexec/gfexec.c:
	Do not call gfarm_terminate() in the main function, because it is already called in gfs_execve().
	When the specified command does not exist in Gfarm file system, execute it in a local file system.

	* lib/libgfarm/gfarm/gfs_exec.c (gfs_execve):
	call gfarm_terminate() also before execve() when the specified url does not exist in Gfarm file system.

	* lib/libgfarm/gfarm/metadb_ldap.c (gfarm_metadb_terminate):
	when the connection has been disconnected, return the error instead of segfault.

	* lib/libgfarm/gfarm/gfs_pio_misc.c (gfarm_url_fragments_replicate):
	Fixed a bug of accessing free'ed memory space.

2003-12-07  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/Makefile.inc, lib/libgfarm/gfarm/gfs_exec.c, lib/libgfarm/gfarm/gfs_lock.c, lib/libgfarm/gfarm/gfs_lock.h, lib/libgfarm/gfarm/gfs_pio_section.c:
	locks in the on-demand replication mode to avoid race condition.

2003-12-06  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_exec.c:
	locks during replication of a program to avoid race condition.

2003-12-05  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/rules:
	there is a mistake for init script for gfsd-gsi and gfmd-gsi
	FIXME ... shouled be enabled auto load init scripts when installing packages

	* debian/gfarm-gfptool.install: changed installed dir

	* debian/rules: supported libexecdir

2003-12-05  Noriyuki Soda  <soda@sra.co.jp>

	* gfptool/util/gfregister.in: fix yet another trivial mistake...

	* gfptool/util/gfregister.in: fix trivial mistake in previous commit

	* gfptool/util/gfregister.in:
	honor --bindir and --libexecdir option of configure

2003-12-05  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/gfmd-gsi.postinst, debian/gfmd-gsi.postrm, debian/gfmd-gsi.prerm, debian/gfsd-gsi.postinst, debian/gfsd-gsi.postrm, debian/gfsd-gsi.prerm:
	supported gfmd-gsi and gfsd-gsi init.d scripts

2003-12-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	Added the item 4.3 for the case-insensitive issue of file names.

	* INSTALL.en:
	Removed the word 'library' in the explanation of command-line arguments of --with-openldap=directory and --with-openssl=directory.

	* INSTALL.ja: Updated the description of overview.

	* lib/libgfarm/gfarm/gfs_dir.c (gfs_getcwd):
	when the current working directory does not exist, return an error.

	* package/redhat/gfsd.in:
	Fixed a wrong option '-p', which should be '-P'.

	* ChangeLog: Catched up with the current ChangeLog.

2003-12-04  Noriyuki Soda  <soda@sra.co.jp>

	* gfptool/gfrepbe_client/gfrepbe_client.c, server/gfmd/gfmd.c, server/gfsd/gfsd.c:
	fix gcc-3.3 warnings on Solaris 8

	* lib/libgfarm/gfarm/auth_client_gsi.c, lib/libgfarm/gfarm/auth_server_gsi.c, lib/libgfarm/gfarm/io_gfsl.c, lib/libgfarm/gfsl/REFERENCE, lib/libgfarm/gfsl/client.c, lib/libgfarm/gfsl/client2.c, lib/libgfarm/gfsl/gfarm_gsi.h, lib/libgfarm/gfsl/gfarm_secure_session.h, lib/libgfarm/gfsl/gsi.c, lib/libgfarm/gfsl/scsub.c, lib/libgfarm/gfsl/server.c, lib/libgfarm/gfsl/server2.c, lib/libgfarm/gfsl/session.c, lib/libgfarm/gfsl/tcputil.c, lib/libgfarm/gfsl/tcputil.h:
	fix more LP64 problems by renaming
		gfarmSecSession{Send,Receive}{Bytes,Short,Long} to
		gfarmSecSession{Send,Receive}{Int8,Int16,Int32}

	* lib/libgfarm/gfarm/hostspec.c, lib/libgfarm/gfarm/import_help.c:
	fix gcc-3.3 warnings on Solaris 8

2003-12-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/config.c:
	Removed the home directory existence check.

	* lib/libgfarm/gfarm/url.c (gfarm_canonical_path_for_creation):
	Fixed a bug during elimination unnecessary '/'s.  Before this fix, a file with one-letter filename like 'gfarm:a' always results in an error of 'already exists'.

2003-12-04  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/auth_client_gsi.c, lib/libgfarm/gfarm/config.c:
	fix most of warnings with SUNWspro-6.2 on Solaris 8

	* INSTALL.en, INSTALL.ja: mention chkconfig command on RedHat Linux

	* lib/libgfarm/gfsl/gsi.c, lib/libgfarm/gfsl/session.c, lib/libgfarm/gfsl/tcputil.c, lib/libgfarm/gfsl/tcputil.h:
	fix LP64 problems by renaming
		gfarm{Read,Write}{Byte,Short,Long} to
		gfarm{Read,Write}{Int8,Int16,Int32}

	* gftool/gfrep/gfrep.c:
	assume "-a <architecture of destination host>" on
		gfrep -d <host> gfarm:program

2003-12-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/metadb_ldap.c (line 1087):
	need to modify this line also.

2003-12-04  Noriyuki Soda  <soda@sra.co.jp>

	* gfptool/util/gfregister.in: forgot to remove things for debugging

	* gfptool/util/gfregister.in:
	- force gfreg by -f option to register binaries,
	  because there may be old version binaries.
	- specify multiple gfarm files at once on gfreg and gfrep

	* lib/libgfarm/gfarm/metadb_ldap.c:
	try to avoid the following warnings by recent gcc:
		dereferencing type-punned pointer will break strict-aliasing rules

2003-12-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/gfs_dir.c (lookup_path):
	Do not set a create flag for looking up the current working directory.
	(gfarm_initialize): Added the existence check of user's home directory.  Without this, there is no way to distinguish between a user's home directory and a new file.

2003-12-04  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfrep/gfrep.c:
	fix a trivial bug that gfrep command always returns 1 as its exit status.

	* lib/libgfarm/Makefile:
	- if the host is a filesystem node, use "gfarm:/bin/gfrcmd"
	  instead of ${prefix}/bin/gfrcmd to invoke remote "gfrepbe_client"
	  as suggested by naotaka-san.
	- use "gfrcmd" in user's $PATH instead of ${prefix}/bin/gfrcmd.

	* lib/libgfarm/gfarm/gfs_client_rep.c:
	- if the host is a filesystem node, use "gfarm:/bin/gfrcmd"
	  instead of ${prefix}/bin/gfrcmd to invoke remote "gfrepbe_client"
	  as suggested by naotaka-san.
	- use "gfrcmd" in user's $PATH instead of ${prefix}/bin/gfrcmd.
	- fix a bug that "bootstrap mode" of gfrep incorrectly becomes YES,
	  if gfarm_file_section_replicate_multiple_request() is called once.
	  this bug doesn't affect "gfrep -P", though.

2003-12-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_exec.c:
	terminate the client environment before call of execve().

	* lib/libgfarm/gfarm/config.c: use gfs_profile macro.

	* gftool/gfsck/gfsck.c:
	Added a metacharacter expansion feature for command-line arguments using gfs_glob().

2003-12-04  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client_udp.c:
	automatically close(2) the connections to gfsd on exec(2)

	* lib/libgfarm/gfarm/gfm_client.c:
	automatically close(2) the connection to gfmd on exec(2)

	* gftool/gfrun/gfrun.c:
	don't use "gfexec", if specified command isn't a gfarm command.

2003-12-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrun/gfrun.c:
	Changed the default feature regarding to program delivery.  Now, gfrun executes gfexec in parallel that will replicate a specified program if needed, ensuring some level of fault tolerance.
	The '-S' option is for the old behavior such that the gfrun command serially delivers a specified program.  This does not require gfexec.

2003-12-04  Noriyuki Soda  <soda@sra.co.jp>

	* gfptool/gfrepbe_client/gfrepbe_client.c:
	rename a variable from gfrep_backend_server to gfrep_backend_server_url,
	just for consistency.

2003-12-04  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* package/redhat/gfarm.spec:
	Added gfs_utimes(3) manual page in English.

2003-12-04  Noriyuki Soda  <soda@sra.co.jp>

	* server/gfsd/Makefile, server/gfsd/gfsd.c:
	- add ${prefix}/bin to default $PATH for users's script which invokes gfexec
	- change system default $PATH as follows
	  - give priority to /usr/local/bin
	  - add /usr/ucb (for Solaris and SVR4)
	  - add /usr/pkg/bin (for "pkgsrc" multi platform packaging system)

2003-12-04  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/gfarmd.init, debian/gfarmd.postinst:
	these are already not needed

2003-12-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_exec.c:
	(gfs_exec) Added a fault tolerance feature in case that the program in a local spool is missing even though there is a metadata entry.

2003-12-04  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/gfarm-client.manpages: removed manpages for gfrsh and gfssh
	building symbolick link for these in debian/rule script

	* debian/control: changed Standards-Version

	* debian/libgfarm-dev.manpages: added gfs_realpath manpage

2003-12-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* man/man3/gfs_chdir.3, man/man3/gfs_pio_ungetc.3, man/man3/gfs_pio_write.3, man/man3/gfs_readdir.3, man/man3/gfs_realpath.3, man/man3/gfs_stat.3, man/man3/gfs_unlink.3, man/ja/man3/gfs_realpath.3, doc/html/ja/ref/man3/gfs_realpath.3.html, doc/html/en/ref/man3/gfs_chdir.3.html, doc/html/en/ref/man3/gfs_pio_ungetc.3.html, doc/html/en/ref/man3/gfs_pio_write.3.html, doc/html/en/ref/man3/gfs_readdir.3.html, doc/html/en/ref/man3/gfs_realpath.3.html, doc/html/en/ref/man3/gfs_stat.3.html, doc/html/en/ref/man3/gfs_unlink.3.html, doc/docbook/ja/ref/man3/gfs_realpath.3.docbook, doc/docbook/en/ref/man3/gfs_pio_write.3.docbook, doc/docbook/en/ref/man3/gfs_readdir.3.docbook, doc/docbook/en/ref/man3/gfs_realpath.3.docbook, doc/docbook/en/ref/man3/gfs_rename.3.docbook, doc/docbook/en/ref/man3/gfs_rmdir.3.docbook, doc/docbook/en/ref/man3/gfs_stat.3.docbook, doc/docbook/en/ref/man3/gfs_unlink.3.docbook:
	docbook tag for the constant pointer for an error message is changed from <filename> to <constant>.

	* ChangeLog: backout the previous change.

2003-12-04  Noriyuki Soda  <soda@sra.co.jp>

	* package/solaris/build: bump the version number to 1.0.1

2003-12-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* man/man3/gfs_utimes.3, doc/html/en/ref/man3/gfs_utimes.3.html, doc/docbook/en/ref/man3/gfs_utimes.3.docbook:
	Added gfs_utimes(3) manual page in English.

	* doc/docbook/en/ref/man3/gfs_chdir.3.docbook, doc/docbook/en/ref/man3/gfs_pio_ungetc.3.docbook, ChangeLog:
	*** empty log message ***

	* doc/docbook/en/ref/man3/Makefile.inc, man/ja/man3/gfs_utimes.3, doc/html/ja/ref/man3/gfs_utimes.3.html, doc/docbook/ja/ref/man3/gfs_utimes.3.docbook:
	Added gfs_utimes(3) manual page in English.
	Added a 'const' modifier.

2003-12-04  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec:
	remove a hack to change the RPM version number from 1.0 to 1.0r.
	bump version number to 1.0.1.

2003-12-04  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/control, debian/copyright, debian/gfarm-client.manpages, debian/gfarm-gfptool.install, debian/rules:
	changed package script and compornents for 1.0.1

2003-12-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrcmd/gfrcmd.c, lib/libgfarm/gfarm/config.c:
	Suppress displaying verbose authentication error messages twice.

2003-12-04  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/libgfarm-dev.manpages:
	removed manpages for gfs_chmod, chown, rename, mkdir, rmdir

	* debian/changelog: for version 1.0.1

2003-12-03  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/host.h:
	gfarm_host_get_self_architecture() is now declared in <gfarm/gfarm_misc.h>

	* lib/libgfarm/gfarm/gfs_client.h:
	remove unnecessary argument name from a function prototype

2003-12-02  Noriyuki Soda  <soda@sra.co.jp>

	* gfptool/gfrepbe_server/gfrepbe_server.c:
	shut up gcc warning: `file_size' might be used uninitialized in this function

	* include/gfarm/gfarm_misc.h, include/gfarm/gfs.h:
	missing function prototypes, pointed out by naotaka-san

	* gftool/gfrep/gfrep.c, lib/libgfarm/gfarm/gfs_pio_misc.c:
	use bootstrap mode by default (discussed with tatebe-san)

2003-12-02  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/gfmd.init, debian/gfsd.init: enabled -P option for PIDFILE

2003-12-01  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_client.c (gfs_client_command_request):
	Fixed a buffer overrun problem with -X option of gfrcmd, which causes segfault.
	(gfs_client_command_request): Fixed a memory allocation error check.

2003-12-01  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfmd.in, package/redhat/gfsd.in, package/solaris/gfmd.in, package/solaris/gfsd.in:
	use -P option to create a pid file

	* doc/html/en/ref/man8/gfmd.8.html, doc/html/en/ref/man8/gfsd.8.html, man/ja/man8/gfmd.8, man/ja/man8/gfsd.8, man/man8/gfmd.8, man/man8/gfsd.8, doc/html/ja/ref/man8/gfmd.8.html, doc/html/ja/ref/man8/gfsd.8.html:
	regen

	* doc/docbook/en/ref/man8/gfmd.8.docbook, doc/docbook/en/ref/man8/gfsd.8.docbook, doc/docbook/ja/ref/man8/gfmd.8.docbook, doc/docbook/ja/ref/man8/gfsd.8.docbook:
	mention -P option

	* server/gfmd/gfmd.c, server/gfsd/gfsd.c:
	add -P option which creates a pid file,
	suggestion/patch supplied by naotaka-san in
	http://datafarm.apgrid.org/bugzilla-ja/show_bug.cgi?id=15

2003-12-01  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	Added the item 2.1 for authentication error in GSI.

2003-11-28  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/rules: changed prefix for configure and make install

2003-11-27  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfreg/gfreg.c: clarify some comments

	* gftool/gfreg/gfreg.c: minor indentation change

	* gftool/gfreg/gfreg.c:
	completely rewritten to fix the following problems:
	- "gfreg <file> <URL-of-directory>" fails with "missing -I <Gfarm index>"
	- "gfreg <program> <URL>" fails w/ "binary file in auto index mode" in
	  some weird condition (not always)
	etc...

	This change also introduces "-H" option.

2003-11-27  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/html/en/ref/man1/gfreg.1.html, doc/html/ja/ref/man1/gfreg.1.html, man/ja/man1/gfreg.1, man/man1/gfreg.1:
	regen

2003-11-27  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* doc/docbook/en/ref/man1/gfreg.1.docbook, doc/docbook/ja/ref/man1/gfreg.1.docbook:
	added option -? description

	* gftool/gfrm/gfrm.c, gftool/gfwhere/gfwhere.c, gftool/gfexport/gfexport.c, gftool/gfhost/gfhost.c, gftool/gfkey/gfkey.c, gftool/gfls/gfls.c, gftool/gfps/gfps.c, gftool/gfreg/gfreg.c, gftool/gfrep/gfrep.c:
	supported -? option in getopt

2003-11-26  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec:
	make RPM version "1.0r" instead of "1.0", to make "rpm -U" possible.
	("1.0" is older version than "1.0b5", but "1.0r" is newer version than "1.0b5",
	 from RPM view point.)

2003-11-26  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/gfarm-client.install, debian/gfarm-client.manpages, debian/gfarm-doc.install, debian/gfarm-gfptool.install, debian/gfarm-gfptool.manpages, debian/gfarm-gfront.install, debian/gfmd.install, debian/gfmd.manpages, debian/gfsd.install, debian/gfsd.manpages, debian/libgfarm-dev.install, debian/libgfarm-dev.manpages, debian/rules:
	support woody and sarge

2003-11-26  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* RELNOTES: Release note for the version 1.0.

	* doc/GUIDE.ja:
	Simplify the description about sharedsecret key authentication.

	* INSTALL.en, INSTALL.ja:
	Added the description about the version of ldap server.

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	Deleted example configuration in the item 3.2, because enabling both sharedsecret and gsi is not allowed.

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	Added the item 2.2 that describes the maintenance for disk crash.

2003-11-25  Noriyuki Soda  <soda@sra.co.jp>

	* gfptool/gfrepbe_client/Makefile, gfptool/gfrepbe_client/gfrepbe_client.c, gfptool/gfrepbe_server/Makefile, gfptool/gfrepbe_server/gfrepbe_server.c:
	fix problems on Solaris 8

	* configure, configure.in, include/gfarm/gfarm_config.h.in:
	fdatasync() belongs to librt instead of libc on solaris

	* gftool/Makefile: gfrepconfig won't be included in release image.

	* debian/gfarm-client.install, debian/gfsd.install, debian/rules:
	add gfsck and gfstat to gfarm-client subpackage
	add gfexec to gfsd subpackage

	* package/solaris/gfarm-client.files, package/solaris/gfarm-fsnode.files:
	add gfsck and gfstat to gfarm-client
	add gfexec to gfarm-fsnode

2003-11-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfreg/gfreg.c:
	Chenged the condition entering in auto index mode.
	Added the architecture name check when registering a binary.

2003-11-25  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* package/redhat/gfarm.spec: change version number from 1.0b7 to 1.0.
	introduce following programs
	gfexec, a fsnode program executes gfarm program with lower overhead than gfrun
	gfsck, a client tool checks file consistency of fsnodes and metadb
	gfstat, a client program displays gfarm-URL stat.

2003-11-25  Takuya Ishibashi  <takuya@soum.co.jp>

	* snmptool/glogger3/INSTALL.ja:
	Added descriptions about SNMP and GMonitor.

2003-11-25  Noriyuki Soda  <soda@sra.co.jp>

	* doc/Gfarm-FAQ.ja: standardize punctuations

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	mention file owner/mode problem at replication

	* gfptool/gfrepbe_client/gfrepbe_client.c, lib/libgfarm/gfarm/gfs_pio_misc.c:
	drop setuid/setgid bit, when replication is not done by the owner of the file.

	* package/solaris/build: update version number

	* util/00README: this README file is now obsolete.

	* util/gfsuites/bin/gfront, util/gfsuites/bin/gmonitor, util/gfsuites/bin/graphapp, util/gfsuites/bin/grapher, util/gfsuites/build.xml:
	remove older gfront, gmonitor and glogger,
	because gfront now belongs to util/gfront/, and
	gmonitor and glogger belong to snmptool/.

2003-11-25  Takuya Ishibashi  <takuya@soum.co.jp>

	* snmptool/gmonitor3/gmonitor3.jar, util/gfront/gfront.jar: rebuild

2003-11-25  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/changelog: for version 1.0

	* debian/control: changed build dependencies

	* debian/control: changed descriptions for all packages.

2003-11-24  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* RELNOTES: snapshot for version 1.0.  Please add more.

	* INSTALL.en, INSTALL.ja:
	Removed the description for explicit creation of user directories in each spool directory.

2003-11-21  Takuya Ishibashi  <takuya@soum.co.jp>

	* snmptool/gmonitor3/gmonitor/app/SimpleGrapherApp.java:
	Modified the action of ComboBox selection. Selected a item which does not contain data is removed from the list. Refresh is pushed for resetting the list.

2003-11-20  Takuya Ishibashi  <takuya@soum.co.jp>

	* snmptool/gmonitor3/gmonitor/app/SimpleGrapherApp.java, snmptool/gmonitor3/gmonitor/app/SimpleGrapherBaseUI.java, snmptool/gmonitor3/gmonitor/gui/DataTimeSpace.java, snmptool/gmonitor3/gmonitor/gui/GraphMonitor.java, snmptool/gmonitor3/gmonitor/logdata/DataBlock.java, snmptool/gmonitor3/gmonitor/logdata/HostDefBlock.java, snmptool/gmonitor3/gmonitor/logdata/HostDefElement.java, snmptool/gmonitor3/gmonitor/logdata/OIDDefBlock.java, snmptool/gmonitor3/gmonitor/logdata/OIDDefElement.java:
	Fixed a bug of failing to read two or more files after changing the configuration of glogger.

2003-11-19  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfrep/gfrep.c: fix a bug of glob usage.

	* gfptool/gfrepbe_server/Makefile, gfptool/gfrepbe_server/gfrepbe_server.c:
	output authentication log to syslog

	* gftool/gfrep/gfrep.c: add verbose option (-v)

	* gftool/gfrep/gfrep.c: correct error message

	* gftool/gfrep/gfrep.c: mention -P option in usage

	* gftool/gfrep/gfrep.c:
	- add -P feature to gfrep (from gfrepconfig) ... not tested yet
	- remove -l option, and rename -L to -l option on gfrep

	* gftool/gfrep/gfrep.c: forgot to remove wrong check of arguments

	* debian/gfarm-gfptool.install, package/redhat/gfarm.spec, package/solaris/gfarm-gfptool.files:
	add gfrepbe_client and gfrepbe_server to package configurations

	* gftool/gfrep/gfrep.c: forgot to allocate stroage for section name

	* makes/config.mk.in, gfptool/gfrepbe_server/Makefile, gfptool/gfrepbe_server/gfrepbe_server.c, gfptool/gfrepbe_client/Makefile, gfptool/gfrepbe_client/gfrepbe_client.c, lib/libgfarm/gfarm/gfs_client_rep.c:
	use gfrepbe_client/gfrepbe_server for replication

	* gftool/Makefile:
	a program to generate configuration file of "gfrep -L" for BWC

	* server/gfsd/gfsd.c, gftool/gfrep/Makefile, gftool/gfrep/gfrep.c, include/gfarm/gfarm_config.h.in, include/gfarm/gfarm_stringlist.h, include/gfarm/gfs.h, lib/libgfarm/Makefile, lib/libgfarm/gfarm/Makefile.inc, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/host.c, lib/libgfarm/gfarm/host.h, lib/libgfarm/gfarm/param.c, lib/libgfarm/gfarm/param.h, lib/libgfarm/gfarm/xxx_proto.c, lib/libgfarm/gfarm/xxx_proto.h, INSTALL.ja, configure.in, gfptool/Makefile, gfptool/util/gfregister.in:
	use gfrepbe_client/gfrepbe_server for replication

2003-11-18  Takuya Ishibashi  <takuya@soum.co.jp>

	* snmptool/glogger3/glogd.in: Fixed a bug of failing to start.

	* snmptool/gmonitor3/gmonitor/app/SimpleGrapherApp.java:
	Modified the action of Refresh at the mode of AutoUpdate.

	* snmptool/gmonitor3/gmonitor/logdata/DataBlock.java, snmptool/gmonitor3/gmonitor/logdata/DataElement.java:
	optimized

2003-11-17  Takuya Ishibashi  <takuya@soum.co.jp>

	* snmptool/gmonitor3/gmonitor/app/SimpleGrapherApp.java, snmptool/gmonitor3/gmonitor/gui/DataTimeSpace.java, snmptool/gmonitor3/gmonitor/logdata/DataBlock.java, snmptool/gmonitor3/gmonitor/logdata/DataElement.java, snmptool/gmonitor3/gmonitor/logdata/UTY.java:
	optimized

	* snmptool/glogger3/glogger.h: Added '#include <time.h>'.
	Removed some comment-out messages.

	* snmptool/glogger3/sample.conf: Added an example to get 'sysUpTime'.

	* snmptool/glogger3/INSTALL.en, snmptool/glogger3/INSTALL.ja, snmptool/glogger3/Makefile.in, snmptool/glogger3/config.mk.in, snmptool/glogger3/configure, snmptool/glogger3/configure.in, snmptool/glogger3/glogd-func, snmptool/glogger3/glogd.in:
	'glogd' and 'glogd-func' are installed in 'PREFIX/bin'.
	'sample.conf' is installed in 'PREFIX/etc/glogger' or '--with-confdir=DIR'.

2003-11-13  Takuya Ishibashi  <takuya@soum.co.jp>

	* snmptool/gmonitor3/Makefile: unnecessary file

2003-11-13  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* snmptool/glogger3/INSTALL.en, snmptool/glogger3/INSTALL.ja:
	More improvement needed!

	* snmptool/glogger3/docbook/en/Makefile:
	Don't report error when removing unnecessary files fails.

2003-11-13  Takuya Ishibashi  <takuya@soum.co.jp>

	* snmptool/gmonitor3/gmonitor/app/SimpleGrapherApp.java:
	Modified actions of cancel with some menus.
	Fixed a bug such that useless refreshes are performed when choosing ComboBox.

	* snmptool/glogger3/glogger.h, snmptool/glogger3/read_glogger_conf.c, snmptool/glogger3/snmpasync.c:
	Supported getting 'sysUpTime'.

2003-11-13  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrun/gfrun.c:
	Added an existence check for a command, as suggested by Bugzilla-ja #12.
	The specified command name without gfarm: prefix is tried to be expanded.

	* gftool/gfexport/gfexport.c, gftool/gfstat/gfstat.c:
	Accepts a Gfarm file without gfarm: prefix.

	* lib/libgfarm/gfarm/gfs_pio_global.c (gfs_pio_set_view_global):
	Fixed a critical bug for calculation of offsets reported by Bugzilla-ja #11.

	* gftool/gfreg/gfreg.c:
	Enhanced a binary registration as suggested by Bugzilla-ja #8.
	Supported '-' for an input file.

2003-11-12  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_pio_section.c:
	[FT] Enhanced a FT feature for invalid (unregistered) hostnames.  When accessing these entries, try one of other replicas after deleting the metadata.
	This does not usually happen because the scheduler only chooses available file system nodes.  It happens only by explicitly specifing invalid hostnames.
	With this modification, 'gfsck' can delete these invalid metadata entries.

	* doc/docbook/ja/ref/man1/Makefile.inc, doc/docbook/ja/ref/man1/gfstat.1.docbook, doc/html/en/ref/index.html, doc/html/en/ref/man1/gfstat.1.html, doc/html/ja/ref/index.html, doc/html/ja/ref/man1/gfstat.1.html, man/ja/man1/gfstat.1, man/man1/gfstat.1, doc/docbook/en/ref/man1/Makefile.inc, doc/docbook/en/ref/man1/gfstat.1.docbook:
	Added a manual page for gfstat(1).

2003-11-12  Takuya Ishibashi  <takuya@soum.co.jp>

	* snmptool/gmonitor3/gmonitor/app/SimpleGrapherApp.java, snmptool/gmonitor3/gmonitor/app/SimpleGrapherBaseUI.java:
	Added a config menu of the Diff mode correction by uptime.

	* snmptool/gmonitor3/gmonitor/gui/DataTimeSpace.java:
	Added the Diff mode correction by uptime.
	Modified the calculation of Diff mode. (using previous valid value)

2003-11-12  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/docbook/en/ref/man1/Makefile.inc, doc/docbook/en/ref/man1/gfexec.1.docbook, doc/docbook/ja/ref/man1/Makefile.inc, doc/docbook/ja/ref/man1/gfexec.1.docbook, doc/html/en/ref/index.html, doc/html/en/ref/man1/gfexec.1.html, doc/html/ja/ref/index.html, doc/html/ja/ref/man1/gfexec.1.html, man/ja/man1/gfexec.1, man/man1/gfexec.1:
	Added a manual page for gfexec(1).

	* gftool/gfexec/gfexec.c:
	save the initial argv because it may be modified in gfarm_initialize().

	* gftool/Makefile, gftool/gfexec/Makefile, gftool/gfexec/gfexec.c:
	A new command-line interface to invoke a gfarm command.

		usage: gfexec gfarm:command args ...

	* gftool/Makefile, gftool/gfsck/Makefile, gftool/gfsck/gfsck.c:
	An initial commit for gfsck system command.

		usage: gfsck [ -v ] path ...

	Currently, it checks the existence of every file fragment.  If not, the meta data is deleted.

2003-11-11  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/Makefile: Added an entry for gfstat.

	* gftool/gfstat/Makefile, gftool/gfstat/gfstat.c:
	a command-line interface to inspect file informations.

	* include/gfarm/gfs.h, lib/libgfarm/gfarm/gfs_pio_section.c:
	Added a new experimental flag for gfs_pio_open() and create(), GFARM_FILE_NOT_RETRY.

	* gfptool/gfsplck/gfsplck.c:
	With the -d option, invalid files or directories in the spool directory are also deleted.
	Fixed a bug such that a (invalid) file section is unexpectedly attached to a Gfarm directory.

2003-11-10  Noriyuki Soda  <soda@sra.co.jp>

	* bench/nconnect/nconnect.c:
	add experimental option "-S" which specifies `sync_rate'

	* lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/param.c, lib/libgfarm/gfarm/param.h, server/gfsd/gfsd.c:
	add experimental netparam `sync_rate'

	* lib/libgfarm/gfarm/gfs_pio_section.c:
	add experimental netparam `sync_rate'

	XXX FIXME: replicate_section_to_local() doesn't honr `sync_rate'

2003-11-08  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfls/gfls.c:
	Fixed a bug related to spacing with the -F option reported by Bugzilla-ja #5.
	http://datafarm.apgrid.org/bugzilla-ja/show_bug.cgi?id=5

2003-11-07  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfmkdir/gfmkdir.c:
	gfmkdir does not need to create a physical directory on every file
	system node any more, because it will be created on demand.  Now, just
	insert the directory entry to the meta db.  That's it.

	* gftool/gfps/gfps.c:
	Skip to display invalid job information that causes segfault.

2003-11-06  Takuya Ishibashi  <takuya@soum.co.jp>

	* snmptool/gmonitor3/docbook/en/gmonitor3.1, snmptool/gmonitor3/docbook/en/gmonitor3.1.docbook, snmptool/gmonitor3/docbook/en/gmonitor3.1.html, snmptool/gmonitor3/docbook/ja/gmonitor3.1, snmptool/gmonitor3/docbook/ja/gmonitor3.1.docbook, snmptool/gmonitor3/docbook/ja/gmonitor3.1.html:
	Renamed some option names.

2003-11-05  Takuya Ishibashi  <takuya@soum.co.jp>

	* snmptool/gmonitor3/gmonitor/logdata/DataFile.java:
	Modified the processing way of opening and closing files.

	* snmptool/gmonitor3/gmonitor/gui/DataTimeSpace.java:
	Modified the calculation of diff mode.

	* snmptool/gmonitor3/gmonitor/app/SimpleGrapherApp.java:
	Renamed some option names.
	Fixed a bug of endless loop when there is no data in the opened file.

2003-11-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrcmd/gfrcmd.c, lib/libgfarm/gfarm/auth.h, lib/libgfarm/gfarm/auth_client_gsi.c, lib/libgfarm/gfarm/auth_server_gsi.c, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/io_gfsl.h:
	Added an experimental support for the distingushed name to a global Gfarm name.
	Currently, the same local user map is used to describe the mapping.
	[CAUTION] When using this feature, the same local user account can be shared by several users that has the different distingushed name.  On the other hand, there is no security among users that share the same local user account.

	* lib/libgfarm/gfsl/gfarm_secure_session.h, lib/libgfarm/gfsl/session.c (gfarmSecSessionGetInitiatorCredName):
	Added to obtain the distinguished name of the client.

	* gftool/gfmkdir/gfmkdir.c, gftool/gfrmdir/gfrmdir.c:
	Fixed a critical bug such that the first directory entry is ignored, introduced by the previous commit.

2003-10-29  Takuya Ishibashi  <takuya@soum.co.jp>

	* util/gfront/GFront/gfront/GFront.java, util/gfront/GFront/gfront/GFrontApp.java:
	Renamed "Update" to "Refresh". Modified etc..

	* snmptool/gmonitor3/gmonitor/gui/DataTimeSpace.java:
	Modified the calculation of diff mode.

	* snmptool/gmonitor3/gmonitor/app/SimpleGrapherBaseUI.java:
	Renamed "Redraw" to "Refresh".

	* snmptool/gmonitor3/gmonitor/app/SimpleGrapherApp.java:
	Modified the action of host selection when there is no selected data.

2003-10-29  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* util/ptool/preplace:
	A new ptool for replacing a word in a document in parallel.
	e.g. preplace "usr\/users" home /etc/passwd
	replaces every occurrence of "usr/users" with "home".

	* doc/docbook/en/ref/man3/gfs_closedir.3.docbook, doc/docbook/en/ref/man3/gfs_opendir.3.docbook, doc/docbook/en/ref/man3/gfs_readdir.3.docbook, doc/docbook/ja/ref/man3/gfs_readdir.3.docbook, doc/html/en/ref/man3/gfs_closedir.3.html, doc/html/en/ref/man3/gfs_opendir.3.html, doc/html/en/ref/man3/gfs_readdir.3.html, doc/html/ja/ref/man3/gfs_readdir.3.html, man/ja/man3/gfs_readdir.3, man/man3/gfs_closedir.3, man/man3/gfs_opendir.3, man/man3/gfs_readdir.3:
	Removed "NOT SUPPORTED YET".

2003-10-28  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfptool/gfcp/gfcp.c:
	Added the -p option for preserving the file status.
	Added the error check such that the destination is a directory or not, because the gfcp currently support a copy from a file to a file.

	* gfptool/gfsplck/gfsplck.c (fixurl):
	Removed check_path_info() because gfarm_url_make_path() already makes sure the existence of the metadata.

	* INSTALL.en, INSTALL.ja:
	Deleted an obsolete description such that a creation of a home directory and an execution of the gfregister command are needed every time a new file system node is added.

	* lib/libgfarm/gfarm/gfs_pio_misc.c (gfs_utimes):
	Fixed a bug such that an uninitialized value will be set to ctimespec when 'tsp' (access and modification times) is specified by the argument.

	* gftool/gfrmdir/gfrmdir.c, gftool/gfmkdir/gfmkdir.c:
	Skipped command-line arguments.  The current code does not require it, while it will be needed.

2003-10-27  Takuya Ishibashi  <takuya@soum.co.jp>

	* util/gfront/GFront/gfront/FragmentEditor.java, util/gfront/GFront/gfront/GFront.java, util/gfront/GFront/gfront/GFrontCommon.java:
	Modified actions of tree selection and Update.

2003-10-22  Takuya Ishibashi  <takuya@soum.co.jp>

	* util/gfront/gfront.jar, util/gfront/GFront/gfront/GFrontCommon.java, util/gfront/GFront/gfront/RightClickDirTree.java, util/gfront/GFront/gfront/RightClickTable.java:
	Enabled menus of gfrun, gfmkdir and gfrmdir.

	* util/gfront/gfront.jar: Added a menu of Update.

2003-10-21  Takuya Ishibashi  <takuya@soum.co.jp>

	* util/gfront/GFront/gfront/FragmentEditor.java, util/gfront/GFront/gfront/GFront.java, util/gfront/GFront/gfront/RightClickDirTree.java, util/gfront/GFront/gfront/RightClickTable.java:
	Modified a action of Update.

	* util/gfront/build.xml, util/gfront/gfront.mani:
	Added a manifest-file for gfront.jar.

	* util/gfront/GFront/gfront/GFront.java, util/gfront/GFront/gfront/GFrontConst.java:
	Added a menu for Update.

	* util/gfront/GFront/gfront/FragmentEditor.java:
	Fixed a bug to display filesystem nodes of an executable file. 
	(maximum of 10 nodes are displayed)

	* util/gfront/GFront/.classpath, util/gfront/GFront/.project:
	Added project files for Eclipse.

2003-10-20  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/addpath/addpath.c (gfarm_path_info_set_from_file):
	Fixed a bug to free unallocated memory area that causes a segfault.

2003-10-15  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfutil/gfevent.c:
	fix missing variable initialization which makes gfhost and scheduling
	functions hang.

2003-10-14  Takuya Ishibashi  <takuya@soum.co.jp>

	* snmptool/gmonitor3/gmonitor/gui/DataTimeSpace.java, snmptool/gmonitor3/gmonitor/logdata/DataBlockGroup.java, snmptool/gmonitor3/gmonitor/logdata/DataBlockGroupElement.java:
	Fixed so that the action that has become heavy in the previous commit may become light.

2003-10-10  Takuya Ishibashi  <takuya@soum.co.jp>

	* snmptool/gmonitor3/gmonitor/app/SimpleGrapherApp.java:
	Fixed the action of AutoUpdate mode.

	* snmptool/gmonitor3/gmonitor/gui/DataTimeSpace.java, snmptool/gmonitor3/gmonitor/logdata/DataBlockGroup.java, snmptool/gmonitor3/gmonitor/logdata/DataBlockGroupElement.java, snmptool/gmonitor3/gmonitor/logdata/OIDDefBlock.java:
	Fixed the action when OIDs are different and OID nick names are same.

2003-10-09  Takuya Ishibashi  <takuya@soum.co.jp>

	* snmptool/gmonitor3/docbook/ja/Makefile, snmptool/gmonitor3/docbook/ja/gmonitor3.1, snmptool/gmonitor3/docbook/ja/gmonitor3.1.docbook, snmptool/gmonitor3/docbook/ja/gmonitor3.1.html, snmptool/gmonitor3/INSTALL, snmptool/gmonitor3/Makefile.in, snmptool/gmonitor3/config.mk.in, snmptool/gmonitor3/configure, snmptool/gmonitor3/configure.in, snmptool/gmonitor3/docbook/Makefile, snmptool/gmonitor3/docbook/doc.mk.in, snmptool/gmonitor3/docbook/en/Makefile, snmptool/gmonitor3/docbook/en/gmonitor3.1, snmptool/gmonitor3/docbook/en/gmonitor3.1.docbook, snmptool/gmonitor3/docbook/en/gmonitor3.1.html, snmptool/gmonitor3/gmonitor3, snmptool/gmonitor3/gmonitor3.in, snmptool/gmonitor3/install-sh:
	Added manuals and installer for gmonitor3.

2003-10-03  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/rules: added man files for libgfarm-dev package

	* debian/changelog: new beta release

2003-10-02  Takuya Ishibashi  <takuya@soum.co.jp>

	* snmptool/gmonitor3/gmonitor3.jar: Fixed average calcualation.

	* snmptool/gmonitor3/gmonitor/gui/GraphMonitorModel.java:
	Fixed calcAverage(). (pointed by tatebe-san)

2003-10-01  Takuya Ishibashi  <takuya@soum.co.jp>

	* snmptool/gmonitor3/gmonitor/app/SimpleGrapherApp.java, snmptool/gmonitor3/gmonitor/gui/GraphMonitor.java, snmptool/gmonitor3/gmonitor/logdata/DataBlockGroupElement.java, snmptool/gmonitor3/gmonitor/logdata/DataFile.java:
	Deleted some TODO messages.

	* snmptool/gmonitor3/gmonitor3: starting script for gmonitor3.jar

	* snmptool/gmonitor3/gmonitor3.jar: jar file of gmonitor3

2003-09-30  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* RELNOTES: Deleted unnecessary section.

	* ChangeLog, RELNOTES: Release note for the version 1.0b5.

2003-09-30  Noriyuki Soda  <soda@sra.co.jp>

	* package/solaris/build:
	update openssl from 0.9.7b to 0.9.7c, to avoid security holes reported today.
	XXX - openldap is still compiled by gcc-2.95.2. but it seems to be ok.

2003-09-30  Takuya Ishibashi  <takuya@soum.co.jp>

	* snmptool/glogger3/docbook/en/Makefile, snmptool/glogger3/docbook/en/docdir.mk, snmptool/glogger3/docbook/ja/Makefile.in, snmptool/glogger3/docbook/ja/docdir.mk, snmptool/glogger3/docbook/ja/glogdump.8, snmptool/glogger3/docbook/ja/glogdump.8.docbook, snmptool/glogger3/docbook/ja/glogdump.8.html, snmptool/glogger3/docbook/ja/glogger.8, snmptool/glogger3/docbook/ja/glogger.8.docbook, snmptool/glogger3/docbook/ja/glogger.8.html, snmptool/glogger3/docbook/ja/glogger.conf.5, snmptool/glogger3/docbook/ja/glogger.conf.5.docbook, snmptool/glogger3/docbook/ja/glogger.conf.5.html, snmptool/glogger3/docbook/ja/glogger_logdata.5, snmptool/glogger3/docbook/ja/glogger_logdata.5.docbook, snmptool/glogger3/docbook/ja/glogger_logdata.5.html, snmptool/glogger3/INSTALL.en, snmptool/glogger3/INSTALL.ja, snmptool/glogger3/Makefile.in, snmptool/glogger3/avg1.pl, snmptool/glogger3/avg2.pl, snmptool/glogger3/config.mk.in, snmptool/glogger3/configure, snmptool/glogger3/configure.in, snmptool/glogger3/docbook/Makefile, snmptool/glogger3/expand_node_name.c, snmptool/glogger3/expand_node_name.h, snmptool/glogger3/glogd.in, snmptool/glogger3/glogdump.c, snmptool/glogger3/glogger.c, snmptool/glogger3/glogger.h, snmptool/glogger3/install-sh, snmptool/glogger3/prepare_files.c, snmptool/glogger3/read_glogger_conf.c, snmptool/glogger3/sample.conf, snmptool/glogger3/set_options.c, snmptool/glogger3/setsnmp_configure, snmptool/glogger3/snmpasync.c, snmptool/glogger3/write_to_files.c:
	inital import of glogger3

2003-09-30  Noriyuki Soda  <soda@sra.co.jp>

	* package/solaris/build: some cleanup

2003-09-29  Noriyuki Soda  <soda@sra.co.jp>

	* package/solaris/build:
	script to build binary release images on Solaris

2003-09-29  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja: Deleted obsolete items.

	* lib/libgfarm/gfarm/url.c (gfs_realpath): Added a null string check.

	* doc/docbook/ja/ref/man3/Makefile.inc, doc/docbook/ja/ref/man3/gfs_realpath.3.docbook, doc/html/en/ref/man3/gfs_glob.3.html, doc/html/en/ref/man3/gfs_realpath.3.html, doc/html/ja/ref/man3/gfs_realpath.3.html, man/ja/man3/gfs_realpath.3, man/man3/gfs_glob.3, man/man3/gfs_realpath.3, doc/docbook/en/ref/man3/Makefile.inc, doc/docbook/en/ref/man3/gfs_glob.3.docbook, doc/docbook/en/ref/man3/gfs_realpath.3.docbook:
	Added a manual page for gfs_realpath(3).
	Modified an incomplete sentence in the manual page for gfs_glob(3).

2003-09-29  Noriyuki Soda  <soda@sra.co.jp>

	* debian/rules: undo revision 1.28:
	move "gfreg" back from a gfptool to a client tool

	* package/solaris/gfarm-client.files, package/solaris/gfarm-gfptool.files:
	sort

	* package/solaris/gfarm-client.files, package/solaris/gfarm-gfptool.files:
	undo previou change:
	move "gfreg" back from a gfptool to a client tool

	* package/redhat/gfarm.spec: undo revision 1.28
	move "gfreg" back from a gfptool to a client tool

	* package/redhat/gfarm.spec: sort

	* package/redhat/gfarm.spec: add missing documents

	* package/redhat/gfarm.spec: change version number from 1.0b4 to 1.0b5

2003-09-29  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog: Catched up with the current ChangeLog.

	* gftool/gfsetdir/gfsetdir.c:
	use gfs_realpath().  Client commands should not use canonical path name explicitly.

	* lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/url.c:
	gfs_realpath: now it expands '~' (instead of shells) from a given Gfarm URL not a given canonical path name.

2003-09-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfsl/client.c, lib/libgfarm/gfsl/client2.c, lib/libgfarm/gfsl/gsi.c, lib/libgfarm/gfsl/scsub.c, lib/libgfarm/gfsl/server.c, lib/libgfarm/gfsl/server2.c, lib/libgfarm/gfsl/session.c:
	Changed the order of include file <gssapi.h> to eliminate a warning '"IOV_MAX" redefined'.  This is caused by the change of globus_common.h of gpt-3.0.

2003-09-25  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/auth_client_gsi.c, lib/libgfarm/gfarm/auth_server_gsi.c, lib/libgfarm/gfarm/io_gfsl.h:
	make server-side GSI-auth work with user's credential.
	XXX - this is a temporary workaround, we really need to check server's DN.

2003-09-22  Takuya Ishibashi  <takuya@soum.co.jp>

	* snmptool/gmonitor3/.cvsignore, snmptool/gmonitor3/.project:
	Added a project file for Eclipse.

	* snmptool/gmonitor3/gmonitor/app/SimpleGrapherApp.java, snmptool/gmonitor3/gmonitor/app/SimpleGrapherBaseUI.java, snmptool/gmonitor3/.cvsignore, snmptool/gmonitor3/Makefile, snmptool/gmonitor3/UTYTest.java, snmptool/gmonitor3/build.xml, snmptool/gmonitor3/gmonitor.mani, snmptool/gmonitor3/gmonitor/gui/DataTimeSpace.java, snmptool/gmonitor3/gmonitor/gui/GraphMonitor.java, snmptool/gmonitor3/gmonitor/gui/GraphMonitorModel.java, snmptool/gmonitor3/gmonitor/gui/RawData.java, snmptool/gmonitor3/gmonitor/gui/RawDataElement.java, snmptool/gmonitor3/gmonitor/gui/ViewData.java, snmptool/gmonitor3/gmonitor/gui/ViewDataElement.java, snmptool/gmonitor3/gmonitor/logdata/BinaryBlock.java, snmptool/gmonitor3/gmonitor/logdata/CachedSeekableFile.java, snmptool/gmonitor3/gmonitor/logdata/DataBlock.java, snmptool/gmonitor3/gmonitor/logdata/DataBlockGroup.java, snmptool/gmonitor3/gmonitor/logdata/DataBlockGroupElement.java, snmptool/gmonitor3/gmonitor/logdata/DataBlockGroupTable.java, snmptool/gmonitor3/gmonitor/logdata/DataElement.java, snmptool/gmonitor3/gmonitor/logdata/DataFile.java, snmptool/gmonitor3/gmonitor/logdata/FirstMetaBlock.java, snmptool/gmonitor3/gmonitor/logdata/HostDefBlock.java, snmptool/gmonitor3/gmonitor/logdata/HostDefElement.java, snmptool/gmonitor3/gmonitor/logdata/HttpSeekableFile.java, snmptool/gmonitor3/gmonitor/logdata/IntervalDefBlock.java, snmptool/gmonitor3/gmonitor/logdata/IntervalDefElement.java, snmptool/gmonitor3/gmonitor/logdata/LocalSeekableFile.java, snmptool/gmonitor3/gmonitor/logdata/OIDDefBlock.java, snmptool/gmonitor3/gmonitor/logdata/OIDDefElement.java, snmptool/gmonitor3/gmonitor/logdata/SecondMetaBlock.java, snmptool/gmonitor3/gmonitor/logdata/SeekableFile.java, snmptool/gmonitor3/gmonitor/logdata/SeekableFileFactory.java, snmptool/gmonitor3/gmonitor/logdata/UTY.java, snmptool/gmonitor3/gmonitor/tools/DumpLogFile.java, snmptool/gmonitor3/gmonitor/tools/GlogDump.java, snmptool/gmonitor3/gmonitor/tools/ScanLogDir.java, snmptool/gmonitor3/gmonitor/tools/SumRawDataSeries.java:
	initial import of gmonitor3

2003-09-22  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_pio_local.c:
	Set 0 to the file creation mask during open() and mkdir().

	* server/gfsd/gfsd.c:
	Set file creation mask to 0 to avoid modification by process's file mode creation mask.

	* gftool/gfsetdir/gfsetdir.c, include/gfarm/gfarm_misc.h, lib/libgfarm/gfarm/url.c:
	Fixed a bug such that gfcd accepts a file as a new working directory.  This bug is substantially introduced in the previous commit.
	(gfarm_path_canonical_to_url): Added in url.c.  It translates a canonical path to a Gfarm URL.

2003-09-21  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfmkdir/gfmkdir.c, gftool/gfrmdir/gfrmdir.c:
	Removed the error check after gfs_client_apply_all_hosts().

	* include/gfarm/gfarm_error.h, lib/libgfarm/gfarm/error.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_remote.c, lib/libgfarm/gfarm/gfs_pio_section.c:
	Added a new error; GFARM_ERR_INCONSISTENT_RECOVERABLE, to show a recoverable error after deleting inconsistent metadata.
	Added gfs_pio_{local,remote}_mkdir_parent_canonical_path() to create the parent directory.  XXX - if the directory is owned by the different user, create a directory with the permission 0777.  This should be removed in the next major release.
	(gfs_pio_open_{local,remote}_section): FT - if missing, create the parent directory.  If a physical file is missing, delete the metadata and return GFARM_ERR_INCONSISTENT_RECOVERABLE.
	(gfarm_file_section_replicate_from_to_internal): FT - if missing, create the parent directory.
	If creating a replica that owned by the different user, add a group/other write access permission if it is allowed.  XXX - this should be removed in the next major release.

	* lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_proto.h, server/gfsd/gfsd.c:
	Added gfs_{client,server}_exist(), which is a light-weight version of gfs_client_stat() to check the existence.

2003-09-12  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_dir.c (gfs_chdir): Plugged a memory leak.
	(gfs_opendir): Fixed a lookup bug.

	* lib/libgfarm/gfarm/Makefile.inc:
	Updated dependencies of object files on include files.

	* lib/libgfarm/gfarm/gfs_dir.c:
	Updated a comment for including "gfs_pio.h".

	* lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_pio_misc.c:
	Moved gfs_stat() and related functions from gfs_dir.c to gfs_pio_misc.c.

	* lib/libgfarm/gfarm/gfs_dir.c (gfs_stat, gfs_opendir):
	expand '~' by gfarm_canonical_path().
	(gfs_stat): gfs_stat() and related functions will be moved back to gfs_pio_misc.c in the next commit.

	* gftool/addpath/addpath.c:
	Removed a directory check for removal of metadata.  It is not necessary.

2003-09-11  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/addpath/addpath.c:
	use a global name rather than a local name for the file owner.

	* lib/libgfarm/gfutil/daemon.c: Added a missing include file.

	* gftool/gfrun/gfrun.c:
	GFS_PWD is passed without stripping the Gfarm prefix.

	* doc/docbook/ja/ref/man3/gfs_glob.3.docbook, doc/docbook/ja/ref/man3/gfs_glob_add.3.docbook, doc/docbook/ja/ref/man3/gfs_opendir.3.docbook, doc/docbook/ja/ref/man3/gfs_stat.3.docbook, doc/html/en/ref/man3/gfs_glob.3.html, doc/html/en/ref/man3/gfs_glob_add.3.html, doc/html/en/ref/man3/gfs_glob_free.3.html, doc/html/en/ref/man3/gfs_glob_init.3.html, doc/html/en/ref/man3/gfs_opendir.3.html, doc/html/en/ref/man3/gfs_stat.3.html, doc/html/ja/ref/man3/gfs_glob.3.html, doc/html/ja/ref/man3/gfs_opendir.3.html, doc/html/ja/ref/man3/gfs_stat.3.html, man/ja/man3/gfs_glob.3, man/ja/man3/gfs_glob_add.3, man/ja/man3/gfs_opendir.3, man/ja/man3/gfs_stat.3, man/man3/gfs_glob.3, man/man3/gfs_glob_add.3, man/man3/gfs_glob_free.3, man/man3/gfs_glob_init.3, man/man3/gfs_opendir.3, man/man3/gfs_stat.3, doc/docbook/en/ref/man3/Makefile.inc, doc/docbook/en/ref/man3/gfs_chdir.3.docbook, doc/docbook/en/ref/man3/gfs_glob.3.docbook, doc/docbook/en/ref/man3/gfs_glob_add.3.docbook, doc/docbook/en/ref/man3/gfs_glob_free.3.docbook, doc/docbook/en/ref/man3/gfs_glob_init.3.docbook, doc/docbook/en/ref/man3/gfs_opendir.3.docbook, doc/docbook/en/ref/man3/gfs_stat.3.docbook:
	Added manual page related gfs_glob() in English.
	For other functions, function prototypes are modified related to the const type qualifier.

	* doc/html/en/ref/index.html, doc/html/en/ref/man3/gfs_chdir.3.html, doc/html/ja/ref/index.html, doc/html/ja/ref/man3/gfs_chdir.3.html, man/ja/man3/gfs_chdir.3, man/man3/gfs_chdir.3, doc/docbook/en/ref/man3/Makefile.inc, doc/docbook/en/ref/man3/gfs_chdir.3.docbook, doc/docbook/ja/ref/man3/Makefile.inc, doc/docbook/ja/ref/man3/gfs_chdir.3.docbook:
	Manual page for gfs_chdir(3)

	* include/gfarm/gfarm_misc.h, include/gfarm/gfs.h, include/gfarm/gfs_glob.h, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/glob.c, lib/libgfarm/gfarm/url.c (gfs_chdir):
	the argument of this function can be a Gfarm URL not only a canonical (relative) path name.
	Other files are modified to eliminate warnings related to the const type qualifier.

	* gftool/gfsetdir/gfsetdir.c:
	use gfarm_canonical_path("~") instead of direct use of gfarm_get_global_username() to obtain the home directory.
	Eliminated a check code whether the specified directory in a spool directory exists or not.  The almost same check is done in gfarm_canonical_path().

	* gftool/gfrun/gfrun.c, lib/libgfarm/gfarm/config.c:
	The current working directory in a Gfarm file system is passed to remote parallel processes.

	* lib/libgfarm/gfarm/gfs_dir.c: Added a new function, gfs_chdir().

	* lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/url.c (gfs_getcwd):
	Fixed a bug in the default case.  Use the common function to expand a user's home directory.
	(gfarm_canonical_path_for_creation): 'gfmkdir gfarm:' now works fine.

	* lib/libgfarm/gfarm/url.c:
	Backed out the previous change.  It is not necessary, sorry.

	* lib/libgfarm/gfarm/url.c:
	Fixed a possible segfault that is introduced in the previous commit.
	[cvs log in the revision 1.9] plugged a memory leak. (I forget to mention.)

2003-09-10  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrmdir/gfrmdir.c, gftool/gfmkdir/gfmkdir.c:
	Added the -h option, which is requested by the Bug #3 in bugzilla-ja.

	* gftool/gfls/gfls.c:
	Fixed a multi-column display format bug with the -F option reported by Bug 5 in Gfarm bugzills-ja.
	http://datafarm.apgrid.org/bugzilla-ja/show_bug.cgi?id=5

	* lib/libgfarm/gfarm/url.c:
	Took care of the case such that a new directory is specified with trailing '/'s, such as 'gfmkdir /tatebe/abc/' and 'gfmkdir /tatebe/abc///'.
	This change also includes a checking code for attempting to create the root directory in gfarm_canonical_path_for_creation().  Although this check should not be necessary here, it is needed to prevent succeeding errors due to lack of care of this case mainly in gfs_client.c.

2003-09-10  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/gfarm-client.install, debian/gfarm-gfptool.install:
	moved gfreg command from gfptool to client package

	* debian/control:
	Added dependecy of 'gfptool' package on 'client' packeage.

2003-09-10  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* package/redhat/gfarm.spec:
	Added dependecy of 'gfptool' package on 'client' packeage.

2003-09-10  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* INSTALL.en, INSTALL.ja:
	Modified the section related to a creation of user's working directory.
	It should be created by 'gfmkdir gfarm:~' or 'gfmkdir gfarm:' instead of 'gfmkdir gfarm:/$USER'.

	* lib/libgfarm/gfarm/url.c:
	Fixed a bug such that gfmkdir gfarm:~ or gfmkdir gfarm:~username does not work.

2003-09-10  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/rules: added manpages for gfcd,gfmkdir,gfpwd,gfrmdir,gfsetdir

	* debian/gfarm-client.install:
	added gfmkdir,gfpwd,gfrmdir,gfsetdir to client package

	* debian/changelog: fixed a missing

2003-09-05  Noriyuki Soda  <soda@sra.co.jp>

	* INSTALL.en, INSTALL.ja:
	- explicitly specify /usr/grid/sbin about the tools in this directory.
	- mention $PATH in users' setting section.

	* debian/gfarm-gfptool.install, gfptool/util/Makefile, package/redhat/gfarm.spec, package/solaris/gfarm-gfptool.files:
	change installation directory of gfregister from $prefix/bin to $prefix/sbin,
	because the purpose of this command is administration only.

2003-09-05  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* RELNOTES: Added the description for a new command 'gfregister'.

	* INSTALL.en: Improved the wording.

2003-09-05  Noriyuki Soda  <soda@sra.co.jp>

	* configure: regen

	* configure.in:
	change the order to call AC_CHECK_LIB(nsl, gethostname) and
	AC_CHECK_LIB(socket, socket).
	OpenLDAP cannot be linked on Solaris without this fix.

	* INSTALL.ja: - use gfmkdir to create users' working directories.
	- add "gfhost | gfrun -H - hostname" for installation confirmation.
	- deprecate "make gfregister", and introduce "gfregister" command.
	- mention actual name of startup scripts.
	- mention that sharesecret is the only authenticaion for a non-privileged user.
	- change "yu-za-" (in Japanese) to "yu-za"
	- change some japanese punctuations to "," and ".".

	* INSTALL.en: - use gfmkdir to create users' working directories.
	- add "gfhost | gfrun -H - hostname" for installation confirmation.
	- deprecate "make gfregister", and introduce "gfregister" command.
	- mention actual name of startup scripts.
	- mention that sharesecret is the only authenticaion for a non-privileged user.

	* configure: regen

	* configure.in: forgot to mkdir in previous change

	* configure: regen

	* debian/gfarm-client.install, debian/gfarm-gfptool.install, debian/rules, package/solaris/gfarm-client.files, package/solaris/gfarm-gfptool.files, package/redhat/gfarm.spec:
	change "gfreg" from a client tool to a gfptool,
	as described in its Makefile and INSTALL.{ja,en}.

	* configure.in, debian/gfarm-gfptool.install, gfptool/Makefile, gfptool/util/Makefile, gfptool/util/gfregister.in, package/redhat/gfarm.spec, package/solaris/gfarm-gfptool.files:
	introduce an administration tool "gfregister".
	this tool makes "make gfregister" obsolete.

	* lib/libgfarm/gfarm/url.c:
	use a light way to compare a string with "".

	* lib/libgfarm/gfarm/gfs_dir.c:
	make gfs_realpath() really work with path="/".
	previous version returns "gfarm:" instead of "gfarm:/" for root directory.

	gfmkdir cannot create toplevel directory without this fix.

2003-09-05  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/rules: add man pages for libgfarm

2003-09-05  Noriyuki Soda  <soda@sra.co.jp>

	* util/gfront/Makefile:
	use a shell variable instead of a hardcoded name

2003-09-05  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* server/gfsd/gfsd.c:
	Added an existence check of the spool directory at the startup time.

2003-09-05  Noriyuki Soda  <soda@sra.co.jp>

	* configure: regen

	* configure.in: - automatically search openldap
	- make configure script fail, if openldap isn't found
	- make configure script fail, if globus-makefile-header fails.
	- use AC_MSG_*(), instead of echo

	* lib/libgfarm/gfarm/Makefile.inc, lib/libgfarm/gfarm/auth_client_gsi.c, lib/libgfarm/gfarm/auth_server_gsi.c, lib/libgfarm/gfarm/io_fd.h, lib/libgfarm/gfarm/io_gfsl.c, lib/libgfarm/gfarm/io_gfsl.h:
	fix for Bugzilla Bug 2: gsi_auth mode does not deligate the user credential

2003-09-05  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* package/redhat/gfarm.spec: change version number from 1.0b3 to 1.0b4
	add some man files and html files

2003-09-05  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog, RELNOTES: Release note for the version 1.0b4.

	* doc/html/en/ref/man5/gfarm.conf.5.html, man/man5/gfarm.conf.5: regen

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook: Changed 'ALL' to '*'.
	Changed parameter name that consists of several words for each sentence to one word for readability.

	* doc/html/en/ref/index.html, doc/html/ja/ref/index.html:
	Added missing entries; gfcd and gfpwd.
	Added a missing termination tag </H1>.

2003-09-04  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/changelog: new beta release in changelog

2003-09-03  Jun Ebihara  <jun@soum.co.jp>

	* util/gfront/build.xml: Configration file for Ant.

2003-09-02  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/html/ja/ref/man3/gfs_glob_add.3.html, doc/html/ja/ref/man3/gfs_glob_free.3.html, doc/html/ja/ref/man3/gfs_glob_init.3.html, man/ja/man3/gfs_glob_add.3, man/ja/man3/gfs_glob_free.3, man/ja/man3/gfs_glob_init.3:
	Initial revision generated from docbook file

	* doc/docbook/ja/ref/man3/gfs_glob_add.3.docbook, doc/docbook/ja/ref/man3/gfs_glob_free.3.docbook, doc/docbook/ja/ref/man3/gfs_glob_init.3.docbook:
	New file.

	* doc/docbook/ja/ref/man3/Makefile.inc:
	add gfs_glob_init(3), gfs_glob_add(3), gfs_glob_free(3)

	* man/ja/man3/gfs_glob.3: regen

	* doc/docbook/ja/ref/man3/gfs_glob.3.docbook: fix date

	* doc/html/ja/ref/man3/gfs_glob.3.html, man/ja/man3/gfs_glob.3: regen

	* doc/docbook/ja/ref/man3/gfs_glob.3.docbook: wording

2003-08-28  Noriyuki Soda  <soda@sra.co.jp>

	* INSTALL.en, INSTALL.ja:
	$HOME is no longer default of --prefix, it's /usr/local now.

2003-08-28  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/html/ja/ref/man3/gfs_glob.3.html, man/ja/man3/gfs_glob.3:
	Initial revision generated from docbook

	* doc/docbook/ja/ref/man3/gfs_glob.3.docbook: New file.

	* doc/docbook/ja/ref/man3/Makefile.inc: add gfs_glob(3)

	* doc/html/ja/ref/man3/gfs_utimes.3.html, man/ja/man3/gfs_utimes.3:
	Initial revision generated from docbook file

	* doc/docbook/ja/ref/man3/Makefile.inc: add gfs_utiems(3)

	* doc/docbook/ja/ref/man3/gfs_utimes.3.docbook: New file.

2003-08-27  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfmpirun/gfmpirun.c:
	Fixed a problem such that gfmpirun_p4 cannot be suspended or executed in background.

2003-08-27  Noriyuki Soda  <soda@sra.co.jp>

	* INSTALL.ja: remove redundant sentence.
	change "multiple file" -> "multiple host" for the description of gfimport_*.

2003-08-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/url.c (gfarm_canonical_path_for_creation):
	Fixed a bug reported by Bug 1 in Gfarm bugzilla-ja.  http://datafarm.apgrid.org/bugzilla-ja/show_bug.cgi?id=1
	When creating a directory or a file at the top level, it is not correctly registered in the Gfarm filesystem metadata, since its transformation to the Gfarm internal canonical name is not appropriate.

2003-08-22  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* man/ja/man5/gfarm.conf.5, man/man1/gfhost.1, man/man1/gfront.1, man/man1/gfsched.1, man/man5/gfarm.conf.5, doc/html/en/ref/man1/gfhost.1.html, doc/html/en/ref/man1/gfront.1.html, doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man1/gfhost.1.html, doc/html/ja/ref/man5/gfarm.conf.5.html, man/ja/man1/gfhost.1, man/ja/man1/gfsched.1:
	regen.

	* doc/html/en/ref/index.html: Fixed typo.

	* doc/docbook/en/ref/man1/gfront.1.docbook: Fixed typo.
	Improved the wording.  Added a notice about client commands and configuration file.

	* configure, configure.in:
	Fixed a bug introduced in the previous commit.
	This fixes the problem such that GLOBUS_LOCATION is improperly set up, and globus-makefile-header fails at the configuration time when the directory is not specified by the --with-globus option.

2003-08-22  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/changelog, debian/gfarm-gfront.install:
	miss building of gfarm-gfront package

2003-08-21  Takuya Ishibashi  <takuya@soum.co.jp>

	* man/man1/gfront.1: regen
	- fix charactor code setting

2003-08-20  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfutil/gfevent.c:
	fix a bug related to a sequence point, found by SUWspro compiler.

	* package/solaris/gfarm-doc.files, package/solaris/gfarm-gfront.files:
	add gfarm-gfront binary package

	* package/solaris/gfarm-client.files:
	add gfmkdir, gfrmdir, gfpwd and gfsetdir

	* package/redhat/gfarm.spec: fix a problem on %{have_ns} case.

2003-08-20  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* package/redhat/gfarm.spec: add file entries
	change macro definition for MPI

2003-08-20  Noriyuki Soda  <soda@sra.co.jp>

	* configure: regen

	* configure.in: fix a bug which is introduced in the previous version:
	it didn't work with --with-globus, if $GLOBUS_LOCATION isn't set.

2003-08-20  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/README.Debian, debian/control, debian/gfarm-gfront.install, debian/rules:
	including gfarm-gfront

2003-08-20  Noriyuki Soda  <soda@sra.co.jp>

	* configure: regen

	* configure.in: link globus library statically by default.
	add "--with-globus-shared" option to configure command to link it dynamically.

	this makes the following difference about the binary size on redhat-8.0:

					    globus
					dynamic	static
		bin (stripped)		  4064	 38824
		sbin (stripped)		   328	  3496
		bin (with -g)		 26363	118840
		sbin (with -g)		  2297	 11849

2003-08-20  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* RELNOTES: Added the description about fault tolerant feature.
	Changed text style.

	* ChangeLog: Catched up with the current ChangeLog.

	* lib/libgfarm/gfarm/gfs_pio_section.c, lib/gfs_hook/hooks_common.c:
	[Fault tolelance] When gfs_pio_set_view_section() fails because a file replica to be opened is missing for some reason, delete the section copy info and try to open another replica.
	nCVS: Enter Log.  Lines beginning with `CVS:' are removed automatically

2003-08-20  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* package/redhat/gfarm.spec: for release 1.0b3
	add spec for gfarm-gfront

2003-08-20  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrun/gfrun.c (register_stdout_stderr):
	Fixed a bug such that gfsplck is eventually executed even if stdout and stderr files are successfully created.

2003-08-20  Takuya Ishibashi  <takuya@soum.co.jp>

	* man/man1/gfront.1: Initial import of gfront manual.

2003-08-20  Noriyuki Soda  <soda@sra.co.jp>

	* doc/docbook/ja/ref/man5/gfarm.conf.5.docbook, lib/libgfarm/gfarm/auth.h, lib/libgfarm/gfarm/auth_client.c, lib/libgfarm/gfarm/auth_client_gsi.c, lib/libgfarm/gfarm/auth_config.c, lib/libgfarm/gfarm/auth_server.c, lib/libgfarm/gfarm/auth_server_gsi.c, lib/libgfarm/gfarm/io_gfsl.c, doc/GUIDE.ja, doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja, doc/docbook/en/ref/man1/gfhost.1.docbook, doc/docbook/en/ref/man1/gfsched.1.docbook, doc/docbook/en/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man1/gfhost.1.docbook, doc/docbook/ja/ref/man1/gfsched.1.docbook:
	implement "gsi_auth" method, which performs GSI authentication,
	but does not use any data signing or data encryption for later communication,
	for faster (but not really secure) communication with GSI credential.

	* gftool/gfsetdir/gfsetdir.c, gftool/gfmkdir/gfmkdir.c, gftool/gfrmdir/gfrmdir.c:
	portability fix: basename(3) needs <libgen.h>

	* doc/GUIDE.ja, INSTALL.en, INSTALL.ja:
	the output format of "gfhost -l" was changed.

2003-08-20  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/html/en/ref/man1/gfmpirun_p4.1.html, doc/html/en/ref/man1/gfrcmd.1.html, doc/html/en/ref/man1/gfreg.1.html, doc/html/en/ref/man1/gfrep.1.html, doc/html/en/ref/man1/gfrun.1.html, doc/html/ja/ref/man1/gfmpirun_p4.1.html, doc/html/ja/ref/man1/gfrcmd.1.html, doc/html/ja/ref/man1/gfreg.1.html, doc/html/ja/ref/man1/gfrep.1.html, doc/html/ja/ref/man1/gfrun.1.html, man/ja/man1/gfmpirun_p4.1, man/ja/man1/gfrcmd.1, man/ja/man1/gfreg.1, man/ja/man1/gfrep.1, man/ja/man1/gfrun.1, man/man1/gfmpirun_p4.1, man/man1/gfrcmd.1, man/man1/gfreg.1, man/man1/gfrep.1, man/man1/gfrun.1:
	regen

	* doc/docbook/en/ref/man1/gfreg.1.docbook:
	Fixed a syntactical error of DocBook.

	* doc/docbook/en/ref/man1/gfmpirun_p4.1.docbook, doc/docbook/en/ref/man1/gfrun.1.docbook, doc/docbook/ja/ref/man1/gfmpirun_p4.1.docbook, doc/docbook/ja/ref/man1/gfrun.1.docbook:
	Updated the description.

2003-08-20  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/hooks.c:
	__utime(): use system call symbolic constant 'SYS_utime' for linux, 'SYS_utimes' for others.

2003-08-20  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/docbook/en/ref/man1/gfrcmd.1.docbook, doc/docbook/en/ref/man1/gfreg.1.docbook, doc/docbook/en/ref/man1/gfrep.1.docbook, doc/docbook/ja/ref/man1/gfrcmd.1.docbook, doc/docbook/ja/ref/man1/gfreg.1.docbook, doc/docbook/ja/ref/man1/gfrep.1.docbook:
	Updated the description of manual pages.

2003-08-20  Noriyuki Soda  <soda@sra.co.jp>

	* util/gfront/Makefile:
	fix a problem that gfront cannot be installed, if --srcdir is specified
	as an argument of configure. reported by naotaka-san.

	* configure: regen (for the change by naotaka-san)

2003-08-20  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* configure.in: creating util directory

	* debian/changelog: release beta 3

2003-08-20  Takuya Ishibashi  <takuya@soum.co.jp>

	* man/ja/man1/gfront.1: Add description about gfront.

2003-08-19  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/html/en/ref/man1/gfrun.1.html, doc/html/ja/ref/man1/gfrun.1.html, man/ja/man1/gfrun.1, man/man1/gfrun.1:
	regen

	* doc/docbook/ja/ref/man1/gfrun.1.docbook, doc/docbook/en/ref/man1/gfrun.1.docbook:
	Added the description for newly added command-line options; -r, -I, -v, -p options.

2003-08-19  Noriyuki Soda  <soda@sra.co.jp>

	* doc/html/ja/ref/man1/gfsched.1.html, man/ja/man1/gfsched.1, man/man1/gfsched.1, doc/html/en/ref/man1/gfsched.1.html:
	regen

	* doc/docbook/en/ref/man1/gfsched.1.docbook, doc/docbook/ja/ref/man1/gfsched.1.docbook:
	describe -U option which is added today

2003-08-19  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog, RELNOTES: Release note for the version 1.0b3.

2003-08-19  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfsched/gfsched.c:
	add -U option to retain old behavior (i.e. do not check authentcation)

	* lib/libgfarm/gfarm/schedule.c, include/gfarm/gfarm_misc.h:
	check authentication success/failure on scheduling

2003-08-19  Takuya Ishibashi  <takuya@soum.co.jp>

	* doc/html/ja/ref/man1/gfront.1.html: Add description about gfront.

	* doc/html/en/ref/index.html: Add gfront.

	* doc/html/en/ref/man1/gfront.1.html: Add gfront manual.

	* doc/docbook/ja/ref/man1/gfront.1.docbook: Add description.

	* doc/docbook/en/ref/man1/Makefile.inc: Add gfront manual.

	* doc/docbook/en/ref/man1/gfront.1.docbook, man/ja/man1/gfront.1:
	Initial import of gfront manual.

	* doc/docbook/ja/ref/man1/gfront.1.docbook: nit.

	* doc/html/ja/ref/index.html: Add gfront manual link.

	* doc/html/ja/ref/man1/gfront.1.html: Initial Import of gfront manual.

	* doc/docbook/ja/ref/man1/Makefile.inc: Add gfront manual.

	* doc/docbook/ja/ref/man1/gfront.1.docbook:
	Initial Import of gfront manual.

2003-08-19  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/control: add flex and bison in Build-Depends section.

2003-08-19  Noriyuki Soda  <soda@sra.co.jp>

	* util/gfront/Makefile: remove "gfront" on "make distclean"

	* lib/gfs_hook/hooks.c: backout previous (not intended) commit

	* util/gfront/Makefile, lib/gfs_hook/hooks.c, Makefile.in:
	install gfront and gfront.jar

	* configure: regen

	* configure.in: rewrite @prefix@ for util/gfront/gfront

	* util/gfront/gfront.in:
	- make this template configurable by the configure script
	- avoid bash-ism (">&" isn't portable on bourne shells)

2003-08-19  Takuya Ishibashi  <takuya@soum.co.jp>

	* util/gfront/GFront/gfront/ChangeLookAndFeel.java, util/gfront/GFront/gfront/CommandOutput.java, util/gfront/GFront/gfront/DirectoryTreeNode.java, util/gfront/GFront/gfront/FileTableModel.java, util/gfront/GFront/gfront/FragmentEditor.java, util/gfront/GFront/gfront/GFAction.java, util/gfront/GFront/gfront/GFAppConst.java, util/gfront/GFront/gfront/GFLSParser.java, util/gfront/GFront/gfront/GFWHEREParser.java, util/gfront/GFront/gfront/GFWHEREParser2.java, util/gfront/GFront/gfront/GFront.java, util/gfront/GFront/gfront/GFrontApp.java, util/gfront/GFront/gfront/GFrontCommon.java, util/gfront/GFront/gfront/GFrontConst.java, util/gfront/GFront/gfront/GfhostList.java, util/gfront/GFront/gfront/ReadOnlyTableModel.java, util/gfront/GFront/gfront/RightClickDirTree.java, util/gfront/GFront/gfront/RightClickTable.java:
	Initial import of gfront

	* util/gfront/gfront.in, util/gfront/gfront.jar:
	initial import of gfront

2003-08-18  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/auth_client.c: remove unused variable

2003-08-18  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* include/gfarm/gfarm_metadb.h, lib/gfs_hook/hooks.c, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/metadb_ldap.c:
	Added a hook entry fo utimes().

2003-08-18  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/auth.h: add comment

	* lib/libgfarm/gfarm/auth_server.c, lib/libgfarm/gfarm/auth.h:
	allocate new authenticaion method identifier for new GSI authentiction protocol,
	to avoid confusion which may be caused by communication between old gfarm GSI
	and new gfarm GSI.

	* lib/libgfarm/gfarm/auth_client_gsi.c: better(?) error message

	* lib/libgfarm/gfarm/auth_client.c:
	a bug about state transition for parallel authenticaion.
	expired GSI proxy credential makes this bug appear.

2003-08-13  Noriyuki Soda  <soda@sra.co.jp>

	* doc/html/en/ref/man1/gfhost.1.html, man/man1/gfhost.1: regen

	* doc/docbook/en/ref/man1/gfhost.1.docbook:
	forgot to translate to english in previous commit

	* gftool/gfhost/gfhost.c: fix a bug in previous commit

	* doc/html/en/ref/man1/gfhost.1.html, doc/html/ja/ref/man1/gfhost.1.html, man/ja/man1/gfhost.1, man/man1/gfhost.1:
	regen

	* doc/docbook/en/ref/man1/gfhost.1.docbook, doc/docbook/ja/ref/man1/gfhost.1.docbook, gftool/gfhost/gfhost.c:
	- do not display error message with default function and -H function,
	  as suggested by tatebe-san long ago.
	- display authentication method with -H function as well as -l function

	* lib/libgfarm/gfutil/gfevent.c:
	return 0 instead of EDEADLK, if there is no pending event.

2003-08-12  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/auth_client_gsi.c: forgot to set `just' flag

	* man/man1/gfhost.1, doc/html/en/ref/man1/gfhost.1.html, doc/html/ja/ref/man1/gfhost.1.html, man/ja/man1/gfhost.1:
	regen

	* doc/docbook/en/ref/man1/gfhost.1.docbook: missing <para>

	* lib/libgfarm/gfarm/Makefile.inc, lib/libgfarm/gfsl/Makefile.inc:
	reflect reality

	* lib/libgfarm/gfarm/schedule.c: stupid mistake

	* lib/libgfarm/gfarm/Makefile.inc, lib/libgfarm/gfarm/auth_client_gsi.c, lib/libgfarm/gfarm/schedule.c, lib/libgfarm/gfsl/gfarm_gsi.h, lib/libgfarm/gfsl/gfarm_secure_session.h, lib/libgfarm/gfsl/gfsl_config.h, lib/libgfarm/gfsl/gsi.c, lib/libgfarm/gfsl/session.c, lib/libgfarm/gfutil/Makefile.inc, lib/libgfarm/gfutil/gfevent.c, lib/libgfarm/gfutil/gfevent.h, lib/libgfarm/gfutil/gfutil.h, lib/libgfarm/gfutil/timeval.c, doc/docbook/en/ref/man1/gfhost.1.docbook, doc/docbook/ja/ref/man1/gfhost.1.docbook, gftool/gfhost/Makefile, gftool/gfhost/gfhost.c:
	implement parallel authentication

	* lib/libgfarm/gfarm/auth.h, lib/libgfarm/gfarm/auth_client.c, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h:
	- make gfarm_authorize() and gfarm_auth_request() return
	  the authentication method
	- implement parallel authentication

	* lib/libgfarm/gfarm/io_gfsl.h: cosmetic change

	* server/gfmd/gfmd.c, lib/libgfarm/gfarm/auth_config.c, lib/libgfarm/gfarm/auth_server.c, lib/libgfarm/gfarm/gfm_client.c, server/gfsd/gfsd.c:
	make gfarm_authorize() and gfarm_auth_request() return
	the authentication method

	* lib/libgfarm/gfarm/auth_server_gsi.c: minor cosmetic change

	* lib/libgfarm/gfarm/auth_common.c: fix off-by-one error

2003-08-08  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrun/gfrun.c:
	Fixed a problem of buffer overrun when too long (invalid) section name is specified by the -I option.

2003-08-07  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/schedule.c:
	use loadavg instead of (loadavg / h->host_info->ncpu) to count
	number of semi_idle_hosts, to workaround a scheduling problem
	with Hirano Tsuneo-san's program which 1GB memory.

	* server/gfsd/gfsd.c:
	changes corresponding to lib/libgfarm/gfarm/gfs_client.c revision 1.5.

	it was possible that gfsd consumes 100% of cpu, if read(2) or write(2)
	returns an error on gfs_server_client_command().
	followings are done to solve this potential problem:
	- check error status every time after calling gfarm_iobuffer_{read,write}()
	  and make an appropriate action to deal with the error.
	- don't call gfarm_iobuffer_{read,write}() without select(2),
	  because it may cause EAGAIN.
	  this behaviour is actually observed at the handler of
	  GFS_COMMAND_CLIENT_STATE_OUTPUT.
	  XXX there are still some such places.

	This also includes the following change:
	- if a socket with gfrcmd client is disconnected unexpectedly
	  (e.g. by gfrcmd is killed by SIGKILL), send SIGTERM signal to
	  a command which was invoked by the gfrcmd.

	* lib/libgfarm/gfarm/gfs_client.c:
	fix a bug that Hirano Tsuneo-san recently encounterd.

	In this case, gfrcmd consumes 100% of cpu, although a remote command
	which is invoked by the gfrcmd already finished.
	The gfrcmd is trying to write an error message from the remote command
	to stderr, but because the user has already logged out from the tty,
	write(2) to stderr is returning -1 with errno == EIO.

	followings are done to solve this bug:
	- check error status every time after calling gfarm_iobuffer_{read,write}(),
	  and make an appropriate action to deal with the error.
	- don't call gfarm_iobuffer_{read,write}() without select(2),
	  because it may cause EAGAIN.
	  XXX there are still some such places.

	This also includes the following change:
	- fix missing error check for select(2)

	* lib/libgfarm/gfarm/iobuffer.h:
	add a comment about gfarm_iobuffer_get_error()

	* include/gfarm/gfarm_error.h, lib/libgfarm/gfarm/error.c:
	add GFARM_ERR_INTERRUPTED_SYSTEM_CALL
	and GFARM_ERR_RESOURCE_TEMPORARILY_UNAVAILABLE
	which are corresponding to EINTR and EAGAIN

2003-08-07  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrun/gfrun.c:
	Fixed a bug such that number of fragment is not specified correctly when the -I option is specified.

2003-07-23  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfmpirun/gfmpirun.c:
	Added -G <Gfarm file> and -N <# nodes> options.

2003-07-18  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrun/gfrun.c:
	Added -I <section> option to specify an index name explicitly.  This option is effective only with the file-affinity scheduling.

	* gftool/gfrun/gfrun.c: Added -r option for on-demand replication.

	* lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_section.c:
	config.c (gfarm_parse_argv): Added --gfarm_replicate option for on-demand replication.  In this case, every remote file will be replicated at access time.

2003-07-17  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* include/gfarm/gfarm_misc.h, lib/libgfarm/gfarm/schedule.h:
	Moved the function declaration of gfarm_schedule_search_idle_by_domainname() to public place.

	* gftool/gfreg/gfreg.c:
	Added -D <domainname> option to limit filesystem nodes within the specified domainname.

2003-07-16  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrep/gfrep.c:
	Supported a special case for replicating a Gfarm file with only one file fragment as requested by [gfarm-discuss-ja:00002].  In this case, the file can be replicated by specifying the -d option.

2003-07-11  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* doc/README.hook.en: fixed a typo at MPI section

2003-07-09  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfsl/gfsl_config.h, lib/libgfarm/gfsl/session.c:
	Moved GSS minor status initial value defintion.

	* lib/libgfarm/gfsl/session.c:
	negotiateConfigParam() Change GSS minor stats initial value.

	* lib/libgfarm/gfsl/session.c:
	negotiateConfigParam(): In previous revision, majStatPtr and minStatPtr are
	unset in case of error before gfarmGssConfigureMessageSize() is called.
	Corrected this problem.

2003-07-09  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfmkdir/gfmkdir.c: - repair a mistake made at previous commit.
	  gfs_client_mkdir() should be done, even if the directory already exists
	  in metadb, because previous gfmkdir operation might fail on some nodes.
	- don't report "already exists" error on every node, if metadata of the
	  directory already exists.

2003-07-09  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfsl/session.c:
	negotiateConfigParam(): Send and receive 3 negotiation parameters with
	force flags one time to reduce slow select(2) system call.

2003-07-08  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfrmdir/gfrmdir.c:
	remove path_info, even if the directory is already removed in a spool.

	* lib/libgfarm/gfarm/gfs_client.c: - provide gfs_client_hostname()
	- slightly better error message

	* lib/libgfarm/gfarm/gfs_client.h: provide gfs_client_hostname()

	* gftool/gfrmdir/gfrmdir.c:
	use gfarm_url_make_path() instead of gfarm_url_make_path_for_creation()

	* gftool/gfreg/gfreg.c:
	remove a variable which became unused in previous commit

	* gftool/gfmkdir/gfmkdir.c, gftool/gfrmdir/gfrmdir.c, gftool/gfsetdir/gfsetdir.c:
	make these commands accept "gfarm:" prefix

	* lib/libgfarm/gfarm/url.c: - use GFARM_ERR_GFARM_URL_PREFIX_IS_MISSING
	- remove some unnecessary assignments
	- use gfarm_is_url() in some place

	* include/gfarm/gfarm_error.h, lib/libgfarm/gfarm/error.c:
	define GFARM_ERR_GFARM_URL_PREFIX_IS_MISSING

	* gftool/addpath/addpath.c, gftool/gfmkdir/gfmkdir.c: add sanity check

	* gftool/gfreg/gfreg.c:
	make a codition work even if the last argument is NULL string.

	* lib/libgfarm/gfarm/glob.c:
	fix an off-by-one error which made gfls coredump

2003-07-02  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfsl/REFERENCE:
	change description of GSSAPI status in some functions because they can
	get, log minor status.

2003-07-02  Noriyuki Soda  <soda@sra.co.jp>

	* INSTALL.en, INSTALL.ja, doc/GUIDE.ja: mention "gfsched -N"

	* INSTALL.en: translate gfcd/gfpwd section to English

	* INSTALL.ja: use same wording with an existent section

	* INSTALL.ja: change punctuation, section order, indentation

	* man/ja/man1/gfcd.1, man/ja/man1/gfmkdir.1, man/ja/man1/gfpwd.1, man/ja/man1/gfrmdir.1, man/ja/man1/gfsetdir.1, man/man1/gfcd.1, man/man1/gfmkdir.1, man/man1/gfpwd.1, man/man1/gfrmdir.1, man/man1/gfsetdir.1, doc/html/ja/ref/man1/gfcd.1.html, doc/html/ja/ref/man1/gfmkdir.1.html, doc/html/ja/ref/man1/gfrmdir.1.html, doc/html/ja/ref/man1/gfsetdir.1.html, doc/html/en/ref/man1/gfcd.1.html, doc/html/en/ref/man1/gfmkdir.1.html, doc/html/en/ref/man1/gfpwd.1.html, doc/html/en/ref/man1/gfrmdir.1.html, doc/html/en/ref/man1/gfsetdir.1.html:
	regen

	* doc/docbook/en/ref/man1/Makefile.inc, doc/docbook/en/ref/man1/gfcd.1.docbook, doc/docbook/en/ref/man1/gfmkdir.1.docbook, doc/docbook/en/ref/man1/gfpwd.1.docbook, doc/docbook/en/ref/man1/gfrmdir.1.docbook, doc/docbook/en/ref/man1/gfsetdir.1.docbook:
	english version of new documents

	* doc/docbook/ja/ref/man1/gfmkdir.1.docbook, doc/docbook/ja/ref/man1/gfpwd.1.docbook, doc/docbook/ja/ref/man1/gfrmdir.1.docbook:
	update modified date

	* doc/docbook/ja/ref/man1/gfcd.1.docbook, doc/docbook/ja/ref/man1/gfsetdir.1.docbook:
	- use <variablelist>
	- update modified date

2003-07-02  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* INSTALL.ja:
	Added description of setting for chagning Gfarm working directory.

	* doc/html/ja/ref/man1/gfcd.1.html, doc/html/ja/ref/man1/gfpwd.1.html, doc/html/ja/ref/man1/gfsetdir.1.html, man/ja/man1/gfcd.1, man/ja/man1/gfpwd.1, man/ja/man1/gfsetdir.1:
	Initial revision genereted from docbook file.

	* doc/html/ja/ref/man1/gfrmdir.1.html, man/ja/man1/gfrmdir.1:
	Added again because gfrmdir(1) is implemented.

	* doc/html/ja/ref/man1/gfmkdir.1.html, man/ja/man1/gfmkdir.1: regen

	* doc/docbook/ja/ref/man1/gfmkdir.1.docbook: Corrected synopsis.

	* doc/docbook/ja/ref/man1/Makefile.inc:
	Added gfcd(1), gfmkdir(1), gfpwd(1), gfrmdir(1), gfsetdir(1) man pages.

	* doc/docbook/ja/ref/man1/gfcd.1.docbook, doc/docbook/ja/ref/man1/gfpwd.1.docbook, doc/docbook/ja/ref/man1/gfsetdir.1.docbook:
	New file.

2003-06-27  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfmkdir/gfmkdir.c, gftool/gfrmdir/gfrmdir.c, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_unlink.c:
	Added operation meta db in making and removing gfarm directory.
	gfmkdir sets the directory information to meta db if making directory succeeds
	on some host. gfrmdir removes from meta db unless a serious error occurs.
	It checks specifiled path name is a directory, dosen't remove files.
	And added checking the argument path isn't a directory in gfs_unlink(),

2003-06-19  Noriyuki Soda  <soda@sra.co.jp>

	* man/man5/gfarm.conf.5, doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man5/gfarm.conf.5.html, man/ja/man5/gfarm.conf.5:
	regen

	* doc/conf/gfarm.conf, INSTALL.en, INSTALL.ja, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook, doc/docbook/en/ref/man5/gfarm.conf.5.docbook, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/hostspec.c:
	"*" in hostspec now means all hosts (as well as "ALL").
	"ALL" will be deprecated in the future.

	* gftool/gfrun/gfrun.c: better error reporting

2003-06-18  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/Makefile, gftool/gfmkdir/Makefile, gftool/gfmkdir/gfmkdir.c, gftool/gfrmdir/Makefile, gftool/gfrmdir/gfrmdir.c, include/gfarm/gfarm_misc.h, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h:
	Implemented gfmkdir and gfrmdir.

	* lib/libgfarm/gfarm/url.c: Added error check.

2003-06-17  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_unlink.c:
	Added profiling feature for gfs_stat() and gfs_unlink().

	* gfptool/gfsplck/gfsplck.c:
	Catched up with the change of behavior of gfarm_url_make_path().
	Now, it returns "no such object" when the specified URL is not registered.

	* lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/gfs_pio.c:
	Output profiling information to stderr not to stdout.

	* gftool/gfrun/gfrun.c, lib/libgfarm/gfutil/timer.c, lib/libgfarm/gfutil/timer.h, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_local.c:
	Added the -p option to gfrun command for GFS PIO API profiling.

2003-06-16  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* include/gfarm/gfs.h, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio_local.c:
	Added profling feature for gfs_pio_set_view_local().

	* include/gfarm/gfs.h, lib/libgfarm/gfarm/Makefile.inc, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfutil/Makefile.inc, lib/libgfarm/gfutil/timer.c, lib/libgfarm/gfutil/timer.h:
	Added experimental profiling support for GFS PIO funcitons.
	To enable profiling, compile libgfarm.a with -DGFS_PROFILE.
	Not tested yet.

2003-06-12  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* include/gfarm/gfarm_misc.h, lib/libgfarm/gfarm/url.c:
	- Removed warning about const type modifier.
	- Fixed bug in gfarm_canonical_path_for_creation()  in case of url is
	  "gfarm:/dir/file".

	* lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/url.c, include/gfarm/gfarm_misc.h:
	Fixed bug that gfs_pio_create() fails.
	It was reported by naotaka-san in [gfarm-cvs:01848], [gfarm-cvs:01849].

2003-06-11  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/host.c:
	make it possible to specify host alias as a hostname.
	problem reported by naotaka-san in [gfarm-cvs:01824].

2003-06-11  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_dir.c: Corrected an error.

	* gftool/Makefile, gftool/gfpwd/Makefile, gftool/gfpwd/gfpwd.c, gftool/gfsetdir/Makefile, gftool/gfsetdir/gfsetdir.c, include/gfarm/gfs.h, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/url.c:
	-Implemented gfsetdir (for temporaly use instead of gfcd) and gfpwd.

2003-06-11  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/metadb_ldap.c: add extra newline

	* lib/libgfarm/gfarm/metadb_ldap.c: fix memory leak at LDAP access.
	RFC1823 (The LDAP Application Program Interface) is not enough,
	function calls which aren't described in the RFC are needed.

2003-06-10  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/auth_client_gsi.c: an error condition was missed.

2003-06-10  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/README.hook.en: Fixed a typo.

2003-06-09  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/lseek64.c:
	return value of gfs_hook_syscall_lseek64() was incorrect on linux.
	problem pointed out by tatebe-san.

2003-06-05  Noriyuki Soda  <soda@sra.co.jp>

	* doc/html/en/ref/man1/gfimport_fixed.1.html, doc/html/en/ref/man1/gfimport_text.1.html, doc/html/en/ref/man1/gfsched.1.html, doc/html/ja/ref/man1/gfimport_fixed.1.html, doc/html/ja/ref/man1/gfimport_text.1.html, doc/html/ja/ref/man1/gfsched.1.html, man/ja/man1/gfhost.1, man/ja/man1/gfimport_fixed.1, man/ja/man1/gfimport_text.1, man/ja/man1/gfsched.1, man/man1/gfimport_fixed.1, man/man1/gfimport_text.1, man/man1/gfsched.1:
	*** empty log message ***

	* doc/docbook/en/ref/man1/gfimport_fixed.1.docbook, doc/docbook/en/ref/man1/gfimport_text.1.docbook, doc/docbook/en/ref/man1/gfsched.1.docbook, doc/docbook/ja/ref/man1/gfimport_fixed.1.docbook, doc/docbook/ja/ref/man1/gfimport_text.1.docbook, doc/docbook/ja/ref/man1/gfsched.1.docbook, gftool/gfsched/gfsched.c, include/gfarm/gfarm_misc.h, lib/libgfarm/gfarm/schedule.h:
	add "-N" option to "gfsched" command

	* lib/libgfarm/gfsl/gsi.c, lib/libgfarm/gfarm/auth_client_gsi.c:
	include "gfutil.h" to suppress warning about missing prototype

	* gftool/gfhost/gfhost.c:
	use gfarm_host_info_address_get() instead of gfarm_host_address_get()
	to reduce inquery to metadata server.

2003-06-04  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/schedule.c:
	- honor struct gfarm_host_info::ncpu for scheduling
	- if there are replicas, previous version of gfarm_url_hosts_schedule()
	  and gfarm_url_hosts_schedule_by_program() schedule same host for
	  multile fragments. this version avoids such stupid scheduling if possible.

	* lib/libgfarm/gfarm/host.c, lib/libgfarm/gfarm/host.h:
	provide gfarm_host_info_address_get() to avoid overhead to query
	gfarm_host_info multiple times.

2003-06-01  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/README.hook.en: Added a section for C++ programs.

2003-05-30  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* include/gfarm/gfarm_misc.h, lib/libgfarm/gfarm/auth_client_gsi.c, lib/libgfarm/gfarm/auth_server_gsi.c, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfsl/client.c, lib/libgfarm/gfsl/client2.c, lib/libgfarm/gfsl/gfarm_gsi.h, lib/libgfarm/gfsl/gfarm_secure_session.h, lib/libgfarm/gfsl/gsi.c, lib/libgfarm/gfsl/scsub.c, lib/libgfarm/gfsl/server.c, lib/libgfarm/gfsl/server2.c, lib/libgfarm/gfsl/session.c:
	get and display GSSAPI authentication error minor status.

	* gftool/gfrun/gfrun.c, server/gfmd/gfmd.c, server/gfsd/gfsd.c, gftool/gfrcmd/gfrcmd.c:
	added -v option displays GSSAPI major and minor error status.

2003-05-27  Noriyuki Soda  <soda@sra.co.jp>

	* server/gfsd/gfsd.c: choose ad hoc way to make bash execute .bashrc

2003-05-23  Noriyuki Soda  <soda@sra.co.jp>

	* include/gfarm/gfarm_misc.h:
	add functions to schedule hosts which can run specified program

	* man/ja/man1/gfexport.1, man/ja/man1/gfhost.1, man/ja/man1/gfrm.1, man/ja/man1/gfrun.1, man/ja/man1/gfsched.1, man/ja/man1/gfwhere.1, man/man1/gfexport.1, man/man1/gfhost.1, man/man1/gfrm.1, man/man1/gfrun.1, man/man1/gfsched.1, man/man1/gfwhere.1, doc/html/en/ref/man1/gfexport.1.html, doc/html/en/ref/man1/gfrm.1.html, doc/html/en/ref/man1/gfrun.1.html, doc/html/en/ref/man1/gfsched.1.html, doc/html/en/ref/man1/gfwhere.1.html, doc/html/ja/ref/man1/gfexport.1.html, doc/html/ja/ref/man1/gfrm.1.html, doc/html/ja/ref/man1/gfrun.1.html, doc/html/ja/ref/man1/gfsched.1.html, doc/html/ja/ref/man1/gfwhere.1.html:
	regen

	* doc/docbook/en/ref/man1/gfexport.1.docbook, doc/docbook/en/ref/man1/gfrm.1.docbook, doc/docbook/en/ref/man1/gfsched.1.docbook, doc/docbook/en/ref/man1/gfwhere.1.docbook, doc/docbook/ja/ref/man1/gfexport.1.docbook, doc/docbook/ja/ref/man1/gfrm.1.docbook, doc/docbook/ja/ref/man1/gfsched.1.docbook, doc/docbook/ja/ref/man1/gfwhere.1.docbook:
	replace "sparc-sun-solaris" by "sparc-sun-solaris8"

	* doc/docbook/ja/ref/man1/gfsched.1.docbook, doc/docbook/en/ref/man1/gfsched.1.docbook:
	- add description about -p option
	- correct description about passing an executable file to -I option

	* doc/docbook/en/ref/man1/gfrun.1.docbook, doc/docbook/ja/ref/man1/gfrun.1.docbook:
	add descriptions about -g and -u option

	* gftool/gfrun/gfrun.c:
	- deal with running a program on a cluster with mixed architectures.
	  we have to restrict hosts by the architectures that the program
	  is registered.
	- add "-u" and "-g" option to manually decide to pass gfarm specific options.
	- clean up by splitting main()

	* gftool/gfsched/gfsched.c:
	add "-p" option to restrict hosts by a program.

	* lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/schedule.c, lib/libgfarm/gfarm/schedule.h, lib/libgfarm/gfarm/stringlist.c:
	add functions to schedule hosts which can run specified program

	* lib/libgfarm/gfarm/config.c: better behavior on debugger invocation

	* gftool/gfhost/gfhost.c: use gfarm_host_is_in_domain()

	* lib/libgfarm/gfarm/hostspec.c: define gfarm_host_is_in_domain()

2003-05-22  Noriyuki Soda  <soda@sra.co.jp>

	* INSTALL.en, INSTALL.ja:
	add a link to http://www.globus.org/security/ about GSI

	* man/ja/man1/gfhost.1, man/ja/man1/gfmpirun_p4.1, man/man1/gfhost.1, man/man1/gfmpirun_p4.1, doc/html/en/ref/man1/gfhost.1.html, doc/html/en/ref/man1/gfmpirun_p4.1.html, doc/html/ja/ref/man1/gfhost.1.html, doc/html/ja/ref/man1/gfmpirun_p4.1.html:
	regen

	* doc/docbook/en/ref/man1/gfhost.1.docbook, doc/docbook/ja/ref/man1/gfhost.1.docbook:
	gfhost man page

2003-05-22  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/gfs_pio_section.c:
	delete ineffective memory allocation code found by soda-san

2003-05-20  Noriyuki Soda  <soda@sra.co.jp>

	* INSTALL.ja: alpha-dec -> alpha-hp

	* INSTALL.en, INSTALL.ja, doc/GUIDE.ja:
	be more specific about OS version for architecture name

	* gftool/gfhost/gfhost.c: add a comment to DEFAULT_CONCURRENCY

2003-05-20  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* INSTALL.en, INSTALL.ja:
	The -D option of gfhost should be the -M option.

2003-05-19  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* RELNOTES: Updated the description about flags for a replication hint.

	* doc/html/en/ref/man5/gfarm.conf.5.html, man/man5/gfarm.conf.5: regen

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook:
	Fixed a grammatical error introduced by the previous commit.

	* RELNOTES: Release note for the version 1.0b2.

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	Deleted the item 2.1 because this problem is fixed.

	* INSTALL.en, INSTALL.ja:
	Updated the description related to the gfreg command.

	* ChangeLog: Catched up with the current ChangeLog.

2003-05-19  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/gfj_client.h: typo in comment

	* lib/libgfarm/gfarm/auth.h, lib/libgfarm/gfarm/auth_common.c, lib/libgfarm/gfarm/schedule.c:
	Better (or, at least more usable than current one) scheduling.
	Currently, shuffling is disabled, although it's somewhat tested.
	"-DUSE_SHUFFLED" enables the host shuffling.

	* gftool/gfrun/gfrun.c:
	make it possible to make gfrun suspend/background

	* server/gfmd/gfmd.c: fix minor(?) race condition

	* server/gfmd/gfmd.c: fix resource leak in previous commit

	* server/gfmd/gfmd.c:
	Fix longstanding bug which made gfmd core dump at authentication failure.
	Connection was registered to file_table[] at too early stage, even if
	authentication failed.

	* lib/libgfarm/gfarm/auth.h, lib/libgfarm/gfarm/auth_server.c, lib/libgfarm/gfarm/auth_server_gsi.c, server/gfmd/gfmd.c, server/gfsd/gfsd.c:
	Change function signature of gfarm_authorize(), it now returns client
	hostname, too.
	This change also includes some resource leaks. One of them has been
	existed since nearly one year ago. (And again, the bug was introduced
	on 2002/06/24, too...)

	* lib/libgfarm/gfarm/auth_client_gsi.c:
	fix apparent typo (this bug was introduced on 2002/06/24, too...)

2003-05-19  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/changelog: new version

2003-05-19  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/auth_client.c:
	add missing error check (this bug was introduced on 2002/06/24)

	* lib/libgfarm/gfarm/gfs_dir.c:
	Correct a problem that error message about half-written metadata was
	reported as "not a directory".  Now, it is reported as "no fragment
	information".

	problem reported in the following mail:
	From: Naotaka YAMAMOTO <naotaka@ni.aist.go.jp>
	Subject: [gfarm-arch:00312] Re: [datafarm:00449] gfarm software release TODO
	Date: Mon, 14 Apr 2003 11:14:02 +0900 (JST)

	This change includes some fixes about memory leak, too.

2003-05-16  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec: change version number from 1.0b1 to 1.0b2

2003-05-16  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* server/gfmd/gfmd.c:
	do not malloc becuase not return in the middle of function

	* server/gfmd/gfmd.c: enabled to log disconnection

	* lib/libgfarm/gfarm/auth_server.c, lib/libgfarm/gfarm/auth_server_gsi.c:
	moved declarations of variables from the middle of the function to the head
	for old compilers

	* lib/libgfarm/gfutil/gfutil.h, lib/libgfarm/gfutil/logutil.c, server/gfsd/gfsd.c, lib/libgfarm/gfarm/auth.h, lib/libgfarm/gfarm/auth_client.c, lib/libgfarm/gfarm/auth_common.c, lib/libgfarm/gfarm/auth_config.c, lib/libgfarm/gfarm/auth_server.c, lib/libgfarm/gfarm/auth_server_gsi.c, lib/libgfarm/gfarm/io_gfsl.h:
	- gfsd: enabled to log authentication and disconnection
	- changed 'authetication method name 'simple' to 'sharedsecret'
	  in function names, messages and so on

2003-05-15  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/docs, debian/gfarm-doc.docs, debian/gfarm-doc.examples, debian/gfmd.examples:
	include gfarm.schema in example directory

2003-05-14  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/gfmd.conffiles, debian/gfsd.conffiles: re-entry conffiles

	* debian/changelog: debian version -4

	* debian/rules: with japanexe man pages

	* debian/rules: using dh_installinit
	installed english manpages instet of japanese pages.

	* debian/gfmd.postinst: using auto generated gfmd.postinst.debhelper

	* debian/gfmd.init, debian/gfsd.init: rewriten

2003-05-13  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/README.hook.en:
	Added an example of static compilation with the Globus library.

	* INSTALL.ja, doc/GUIDE.ja, doc/Gfarm-FAQ.ja: Converted to EUC.

2003-05-12  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_common.c (FUNC___OPEN):
	Limited the number of retries when gfs_pio_set_view_local() fails.  That is because unlimited number of retries result in the infinite loop at least when a spool directory is not correctly set up.

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook:
	Corrected the description about the netparam rate_limit parameter.

2003-05-12  Hideki Kondou  <hkondo@soum.co.jp>

	* doc/GUIDE.ja:
	Add a sample command line of usage of 'gfreg' new style.

2003-05-11  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/html/en/ref/index.html, doc/html/ja/ref/index.html:
	Added a new category, scheduling, in the section 3.

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	The second revision of the item 2.2.

2003-05-10  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfsl/gfsl_config.h, lib/libgfarm/gfsl/session.c:
	revision 1.2 of gfs_config.h made encryption disabled accidentally,
	by mistakenly using opposite condition.
	this fixes the problem.

2003-05-10  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfreg/gfreg.c:
	(main) Added the missing initialization for the local variable 'auto_hosts'.

2003-05-09  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfsl/gfarm_gsi.h, lib/libgfarm/gfsl/gfsl_config.h, lib/libgfarm/gfsl/gsi.c, server/gfsd/gfsd.c, lib/libgfarm/gfarm/io_fd.c, lib/libgfarm/gfarm/io_gfsl.c, lib/libgfarm/gfarm/xxx_proto.c, lib/libgfarm/gfarm/xxx_proto.h:
	export delegated credential to a command which is invoked by gfrcmd

	* lib/libgfarm/gfsl/gfsl_config.h:
	- define USE_GLOBUS again, to enable "globus" configuration parameter.
	  (see session.c)
	- define GFARM_GSS_ENCRYPTION_ENABLED=1, even if defined(USE_GLOBUS) case.
	- rename _GFARM_CONFIG_H_ to _GFARM_GFSL_CONFIG_H_

2003-05-09  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/Makefile.inc, lib/libgfarm/gfarm/gfs_pio_section.c:
	implemented GFARM_FILE_REPLICATE, GFARM_FILE_NOT_REPLICATE

2003-05-08  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/gfsd.init: fixed a bug: cannot restart

	* debian/control: Fixed typo.

	* debian/gfarm-doc.install, debian/rules:
	using /usr/share/doc/gfarm-doc in gfarm-doc package

2003-05-08  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	Added an item 2.2 in the trouble shooting section to check and delete unnecessary files in a spool directory.

	* lib/libgfarm/gfarm/gfs_pio_misc.c (gfarm_url_fragments_replicate):
	Fixed a serious bug of buffer overrun.

	* ChangeLog: Catched up with the current ChangeLog.

	* gfptool/gfcp/gfcp.c:
	Display an error message when file transfer error happens.

	* gftool/gfreg/gfreg.c:
	Fixed a bug such that the following cases do not work well;
	% gfreg file gfarm:dir
	% gfreg excutable ... gfarm:dir

2003-05-07  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/auth_server_gsi.c:
	revert to the previous version 1.3 due to the unwilling commit.

	* lib/libgfarm/gfarm/auth_server_gsi.c, lib/libgfarm/gfarm/schedule.c (gfarm_schedule_search_idle_hosts):
	plugged a memory leak.
	Improved the wording of the error messages.

	* gftool/gfreg/gfreg.c:
	Added a new feature to register multiple local files.
	For example,

	% gfreg -I 0 -N 1 file1 file2 file3 gfarm:
	% gfls
	file1 file2 file3
	% gfreg file1 file2 file3 gfarm:file
	% gfwhere file
	0: gfm01.apgrid.org
	1: gfm02.apgrid.org
	2: gfm03.apgrid.org
	% gfreg gf* gfarm:/bin
	% gfls /bin
	gfcombine      gfcp           gfgrep         gfsplck
	gfcombine_hook gfcp_hook      gfreg

	In the second case, each file fragment will be stored on different filesystem nodes if available.

	* include/gfarm/gfarm_misc.h, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/schedule.c, lib/libgfarm/gfarm/schedule.h (gfarm_schedule_search_idle_hosts):
	Even if enough number of hosts are not available, select requested number of hosts by re-using available hosts in the cyclic manner.
	schedule.c: Even if available number of hosts is the same as the requested number of hosts, check the availability of hosts.
	gfarm_host_domain_hosts_schedule() is replaced by gfarm_schedule_search_idle_by_domainname() that calls gfarm_schedule_search_idle_hosts() internally to select only available hosts.

2003-05-07  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec: use macro, more

2003-05-07  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* package/redhat/gfarm.spec: fsnode: does not replace /etc/gfarm.conf
	server: remove empty /etc/gfarm-ldap directory

2003-05-01  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfarm/gfarm/gfs_exec.c: cvs-log test again.

	* doc/html/ja/ref/man5/gfarm.conf.5.html: regen

	* man/ja/man5/gfarm.conf.5: regen
	cvs-log test again.  This mail should be sent from o.tatebe@aist.go.jp not tatebe@cvs.apgrid.org.

	* doc/docbook/ja/ref/man5/gfarm.conf.5.docbook:
	cvs-log test.  This mail should be sent from o.tatebe@aist.go.jp not tatebe@cvs.apgrid.org.

	* man/man8/Makefile, man/ja/man1/Makefile, man/ja/man3/Makefile, man/ja/man5/Makefile, man/ja/man8/Makefile, man/man1/Makefile, man/man3/Makefile, man/man5/Makefile:
	Added EXTRA_CLEAN_TARGETS to clean up manpage.links and manpage.refs.

2003-05-01  Hideki Kondou  <hkondo@soum.co.jp>

	* util/gfsuites/src/gfsuites/common/GFWHEREParser.java, util/gfsuites/src/sample.html:
	fix 'somewhere.com' -> 'example.com'

2003-05-01  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/html/en/ref/man1/gfrcmd.1.html, doc/html/ja/ref/man1/gfrcmd.1.html, man/ja/man1/gfrcmd.1, man/man1/gfrcmd.1:
	regen

	* doc/docbook/en/ref/man1/gfrcmd.1.docbook, doc/docbook/ja/ref/man1/gfrcmd.1.docbook, gftool/gfrcmd/gfrcmd.c:
	Updated the description about command-line options.

	* lib/libgfarm/gfarm/config.c:
	(gfarm_strtoken) Fixed a trivial cast error.

2003-04-30  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/config.c:
	- fix signed vs unsigned char * warning with gcc on solaris
	- fix printf format string warning with gcc on solaris

	* lib/libgfarm/gfarm/hostspec.c:
	fix signed vs unsigned char * warning with gcc on solaris

2003-04-28  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog: Catched up with the current ChangeLog.

2003-04-28  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/config.c:
	add function map-user and let gfarm-local-to-global-usernam and
	gfarm-global-to-local-username call it. Soda-san made the patch-file
	for this modification.

2003-04-28  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/rules: auto generating/removing debian/*gsi.install files

	* debian/control: change dependencies

	* debian/changelog: version 1.0b1-3

	* debian/postinst: don't call /etc/init.d/gfarm-server

	* util/ptool/Makefile: have not execute flag x

	* debian/rules: change clean:

	* debian/changelog, debian/control, debian/gfarm-client.files, debian/gfarm-client.install, debian/gfarm-doc.files, debian/gfarm-doc.install, debian/gfarm-gfptool.files, debian/gfarm-gfptool.install, debian/gfarmd.files, debian/gfmd.files, debian/gfmd.install, debian/gfsd.conffiles, debian/gfsd.files, debian/gfsd.install, debian/libgfarm-dev.files, debian/libgfarm-dev.install, debian/rules:
	building -gsi packages.
	using dh_install instet of dh_movefiles (using package.install files)
	gfsd.conffiles is not needed

	* debian/gfarm-gfptool.files: rename from gfarm.files

	* debian/gfarm.files: rename to gfarm-gfptool.files

	* debian/control, debian/rules: change package name

2003-04-26  Noriyuki Soda  <soda@sra.co.jp>

	* configure: regen

	* configure.in:
	do not set $globus_location=${GLOBUS_LOCATION}, if globus is disabled

	* package/solaris/gfmd.in, package/solaris/gfsd.in:
	workaround a problem that -R doesn't work with indirectly dependent SOs
	like the follows:
		libglobus_gsi_proxy_core_gcc32.so.0
		libglobus_gsi_credential_gcc32.so.0
		libglobus_gsi_callback_gcc32.so.0
		libglobus_oldgaa_gcc32.so.0
		libglobus_gsi_sysconfig_gcc32.so.0
		libglobus_gsi_cert_utils_gcc32.so.0
		libglobus_openssl_error_gcc32.so.0
		libglobus_openssl_gcc32.so.0
		libglobus_proxy_ssl_gcc32.so.0
		libglobus_common_gcc32.so.0

	* package/solaris/gfarm-fsnode.files: remove blank line

2003-04-25  Noriyuki Soda  <soda@sra.co.jp>

	* package/solaris/gfarm-fsnode.files:
	etc/gfarm.conf -> etc/gfarm.conf.sample, to prevent to overwrite gfarm.conf

	* package/solaris/gfarm-doc.files:
	usr/grid/share/doc/gfarm -> usr/grid/share

	* package/solaris/gfarm-client.files, package/solaris/gfarm-devel.files, package/solaris/gfarm-doc.files, package/solaris/gfarm-fsnode.files, package/solaris/gfarm-gfptool.files, package/solaris/gfarm-server.files:
	files for solaris package

	* makes/config.mk.in:
	make "make prefix=XXXX install" effective for $(docdir)

	* configure: regen

	* Makefile.in, configure.in, package/redhat/gfarm.spec, package/redhat/gfmd, package/redhat/gfmd.in, package/redhat/gfsd, package/redhat/gfsd.in, package/solaris/gfmd, package/solaris/gfmd.in, package/solaris/gfsd, package/solaris/gfsd.in:
	automatically rewrite ${prefix} in the rc.d scripts.
	bump RPM rel number from 1 to 2 (i.e. gfarm-*-1.0b1-2.i386.rpm).

2003-04-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/html/en/ref/man1/gfhost.1.html, doc/html/ja/ref/man1/gfhost.1.html, man/ja/man1/gfhost.1, man/man1/gfhost.1:
	regen

	* doc/docbook/en/ref/man1/gfhost.1.docbook, doc/docbook/ja/ref/man1/gfhost.1.docbook:
	The -L option should be the -M option.

2003-04-25  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec, util/ptool/Makefile: do not install pdiff

2003-04-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/html/en/ref/man5/gfarm.conf.5.html, man/man5/gfarm.conf.5: regen

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook: Improved the wording.

2003-04-25  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/changelog: set version for release

2003-04-25  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfsl/auth.c: missing semicolon

2003-04-25  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/gfarm-client.files: remove pdiff in this package

	* debian/libgfarm-dev.files: typo

2003-04-25  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfsl/auth.c, lib/libgfarm/gfsl/misc.c, lib/libgfarm/gfsl/session.c, lib/libgfarm/gfsl/tcputil.c:
	- make it possible to use syslog
	- use snprintf, if available

	* lib/libgfarm/gfsl/Makefile.inc: add dependency

	* configure, configure.in: cosmetic fix

	* INSTALL.en, INSTALL.ja:
	don't describe the contents of the gfarm.schema, but just refer the filename

	* package/redhat/gfarm.spec:
	install gfarm.conf to /etc/, and gfarm.schema to /etc/gfarm-ldap/

2003-04-25  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/control: remove gfarmd package

	* debian/gfarm-client.files: same gfarm.spec

2003-04-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	Added an entry for "not a directory".
	Improved the wording.

2003-04-25  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/gfmd.postinst: never start init script

2003-04-25  Noriyuki Soda  <soda@sra.co.jp>

	* man/man5/gfarm.conf.5, man/ja/man5/gfarm.conf.5, doc/html/ja/ref/man5/gfarm.conf.5.html, doc/html/en/ref/man5/gfarm.conf.5.html:
	regen

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook: forgot to update BNF

	* doc/docbook/ja/ref/man5/gfarm.conf.5.docbook: wording

2003-04-25  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/gfmd.files, debian/gfsd.conffiles, debian/gfsd.files, debian/rules:
	not start daemon after installation

2003-04-25  Noriyuki Soda  <soda@sra.co.jp>

	* doc/html/ja/ref/man5/gfarm.conf.5.html, doc/html/en/ref/man5/gfarm.conf.5.html:
	regen

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook:
	correct syntax error in the previous commit

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook:
	broken english translation of "local_user_map" feature.
	(it's better than nothing.)

	* doc/docbook/ja/ref/man5/gfarm.conf.5.docbook:
	fix typo (local_usr_map -> local_user_map), etc...

	* doc/Gfarm-FAQ.en:
	very preliminary FAQ with broken English translation.

	* doc/Gfarm-FAQ.ja: very preliminary FAQ

2003-04-25  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/gfsd.conffiles: init script and conf file

	* debian/gfsd.files: add gfarm.conf

	* debian/rules: change mode ./etc/gfarm.conf

2003-04-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* util/00README: Improved the wording.

2003-04-25  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/libgfarm-dev.files, debian/rules: add *mpi.o

2003-04-25  Noriyuki Soda  <soda@sra.co.jp>

	* doc/html/en/ref/index.html, doc/html/ja/ref/index.html: better index

	* package/redhat/gfarm.spec:
	add pcat, pcp, pdel, pdiff, pdist and prun to gfarm-client RPM

	* configure: regen

	* configure.in: change default ${prefix} from $HOME to /usr/local

2003-04-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* RELNOTES: Added the section of Gfarm filesystem.

2003-04-25  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/rules: define package names *_PKG

2003-04-25  Noriyuki Soda  <soda@sra.co.jp>

	* man/man3/gfs_chmod.3, man/man3/gfs_chown.3, man/man3/gfs_mkdir.3, man/man3/gfs_rename.3, man/man3/gfs_rmdir.3, man/ja/man3/gfs_chmod.3, man/ja/man3/gfs_chown.3, man/ja/man3/gfs_mkdir.3, man/ja/man3/gfs_rename.3, man/ja/man3/gfs_rmdir.3, man/ja/man1/gfmkdir.1, man/ja/man1/gfrmdir.1, doc/html/ja/ref/man3/gfs_chmod.3.html, doc/html/ja/ref/man3/gfs_chown.3.html, doc/html/ja/ref/man3/gfs_mkdir.3.html, doc/html/ja/ref/man3/gfs_rename.3.html, doc/html/ja/ref/man3/gfs_rmdir.3.html, doc/html/ja/ref/man1/gfmkdir.1.html, doc/html/ja/ref/man1/gfrmdir.1.html, doc/html/en/ref/man3/gfs_chmod.3.html, doc/html/en/ref/man3/gfs_chown.3.html, doc/html/en/ref/man3/gfs_mkdir.3.html, doc/html/en/ref/man3/gfs_rename.3.html, doc/html/en/ref/man3/gfs_rmdir.3.html:
	remove following manuals for now, because those are not implemented yet:
		gfmkdir(1), gfrmdir(1), gfs_chmod(3), gfs_chown(3),
		gfs_mkdir(3), gfs_rmdir(3), gfs_rename(3)

	* Makefile.in, util/ptool/Makefile:
	install pcat, pcp, pdel, pdiff, pdist and prun into ${prefix}/bin

	* man/man1/digest.1, man/ja/man1/digest.1, doc/html/ja/ref/man1/digest.1.html, doc/html/en/ref/man1/digest.1.html:
	regen

	* doc/docbook/en/ref/man1/digest.1.docbook, doc/docbook/ja/ref/man1/digest.1.docbook, gftool/digest/digest.c:
	make digest command compatible with somewhat popular free program which has
	same name.

2003-04-25  Yasuhito Takamiya  <takamiya@matsulab.is.titech.ac.jp>

	* debian/gfarm-doc.files: added.

2003-04-25  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/rules: use gcc

2003-04-25  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec:
	install RELNOTES into /usr/doc/gfarm-1.0b1/

	* doc/Makefile: install RELNOTES into ${prefix}/share/doc/gfarm/

2003-04-25  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* doc/docbook/ja/ref/man5/gfarm.conf.5.docbook, doc/html/ja/ref/man5/gfarm.conf.5.html, man/ja/man5/gfarm.conf.5:
	add description of user map.

2003-04-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* RELNOTES: Added the section of sample parallel commands.

2003-04-25  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec:
	- add --with-mpi automatically, if /usr/bin/mpicc exists.
	- define %{have_ns} macro, and use it for the decision to include "ns" tools.

2003-04-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* RELNOTES: Release Notes

	* util/ptool/pcat, util/ptool/pcp, util/ptool/pdel, util/ptool/pdiff, util/ptool/pdist, util/ptool/prun:
	Parallel tools for cluster management.

2003-04-25  Hideki Kondou  <hkondo@soum.co.jp>

	* INSTALL.en, INSTALL.ja:  * fix a path prefix in sample command line.
	   /usr/local/gfarm -> /usr/grid

2003-04-25  Noriyuki Soda  <soda@sra.co.jp>

	* debian/rules, doc/Makefile, makes/config.mk.in, package/redhat/gfarm.spec:
	- change the installation directory of html files
	  from ${prefix}/html to ${prefix}/share/doc/gfarm/html
	  (as debian package did).
	- install the following files into ${prefix}/share/doc/.
	  LICENSE, INSTALL.en, INSTALL.ja,
	  GUIDE.ja, Gfarm-FAQ.en, Gfarm-FAQ.ja, README.hook.en

2003-04-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/html/en/ref/man1/gfrun.1.html, doc/html/ja/ref/man1/gfrun.1.html, man/ja/man1/gfrun.1, man/man1/gfrun.1:
	regen

	* doc/docbook/en/ref/man1/gfrun.1.docbook, doc/docbook/ja/ref/man1/gfrun.1.docbook:
	Updated the description.

2003-04-25  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec:
	build gfarm-*.rpm and gfarm-gsi-*.rpm (w/ globus) by only one spec file.

2003-04-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrun/gfrun.c:
	Display warning message when the -N option is ignored.

	* doc/docbook/ja/ref/man1/gfrun.1.docbook: Updated the description.

2003-04-25  Yasuhito Takamiya  <takamiya@matsulab.is.titech.ac.jp>

	* debian/rules: fixed prefix and DESTDIR. now debuild is okay.

	* debian/rules: make {install,distclean} in build/ dir.

2003-04-25  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec:
	remove --with-globus, use macros to make it easy to change install prefix.

	* doc/Gfarm-FAQ.en, doc/Gfarm-FAQ.ja:
	Added Gfarm FAQs for packaging. (These are empty for now.)
	XXX - should be written as an article of DocBook SGML/XML format.

2003-04-25  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* package/redhat/gfarm.spec:
	add gfarm.conf.5 man and html pages in English.

2003-04-25  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/files: this file is created by debuild.

2003-04-25  Yasuhito Takamiya  <takamiya@matsulab.is.titech.ac.jp>

	* debian/rules: mkdir ${top_srcdir}/build/ dir and do make in it.

2003-04-25  Hideki Kondou  <hkondo@soum.co.jp>

	* doc/GUIDE.ja: Fix a sample path, /usr/local -> /usr/grid

2003-04-25  Noriyuki Soda  <soda@sra.co.jp>

	* debian/rules, package/redhat/gfarm.spec: add gfhost(1) manual page

2003-04-25  Hideki Kondou  <hkondo@soum.co.jp>

	* doc/GUIDE.ja, util/gfsuites/bin/gfront, util/gfsuites/bin/gmonitor, util/gfsuites/bin/grapher, util/gfsuites/etc/gmonitor-sample.conf, util/gfsuites/src/gfsuites/common/FilesetDataSource.java, util/gfsuites/src/gfsuites/common/GFAppConst.java, util/gfsuites/src/gfsuites/gmonitor/GMonitor.java, util/glogger/README.ja, util/glogger/sample.conf:
	Some fixing and unification of sample domainname.

2003-04-25  Noriyuki Soda  <soda@sra.co.jp>

	* man/man5/gfarm.conf.5, man/man1/gfhost.1, man/ja/man1/gfhost.1, doc/html/ja/ref/man1/gfhost.1.html, doc/html/en/ref/man5/gfarm.conf.5.html, doc/html/en/ref/man1/gfhost.1.html:
	regen

	* doc/docbook/en/ref/man1/Makefile.inc, doc/docbook/en/ref/man1/gfhost.1.docbook, doc/docbook/ja/ref/man1/Makefile.inc, doc/docbook/ja/ref/man1/gfhost.1.docbook:
	Added gfhost(1) man pages for packaging. (These are empty for now.)

2003-04-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/docbook/en/ref/man5/gfarm.conf.5.docbook: Checked spelling.

2003-04-25  Noriyuki Soda  <soda@sra.co.jp>

	* debian/rules, doc/docbook/en/ref/man3/Makefile.inc, doc/docbook/ja/ref/man1/Makefile.inc, doc/docbook/ja/ref/man3/Makefile.inc, package/redhat/gfarm.spec:
	do not install following manuals, because those are not implemented yet:
		gfmkdir(1), gfrmdir(1),	gfs_chmod(3), gfs_chown(3),
		gfs_mkdir(3), gfs_rmdir(3), gfs_rename(3)

2003-04-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/html/en/ref/Makefile, doc/html/en/ref/index.html, doc/html/en/ref/man5/Makefile, doc/html/en/ref/man5/gfarm.conf.5.html, man/Makefile, man/man5/Makefile, man/man5/gfarm.conf.5:
	Added section 5 in English.
	Generated man and html pages from docbook files.

2003-04-25  Noriyuki Soda  <soda@sra.co.jp>

	* man/man3/gfs_pio_create.3, man/man3/gfs_pio_open.3, man/man3/gfs_pio_set_view_index.3, man/man1/gfreg.1, man/man1/gfrun.1, man/man1/gfwc.1, man/ja/man5/gfarm.conf.5, man/ja/man3/gfs_pio_create.3, man/ja/man3/gfs_pio_open.3, man/ja/man3/gfs_pio_set_view_index.3, man/ja/man1/gfreg.1, man/ja/man1/gfwc.1, doc/html/ja/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man3/gfs_pio_create.3.html, doc/html/ja/ref/man3/gfs_pio_open.3.html, doc/html/ja/ref/man3/gfs_pio_set_view_index.3.html, doc/html/ja/ref/man1/gfreg.1.html, doc/html/ja/ref/man1/gfwc.1.html, doc/html/en/ref/man3/gfs_pio_create.3.html, doc/html/en/ref/man3/gfs_pio_open.3.html, doc/html/en/ref/man3/gfs_pio_set_view_index.3.html, doc/html/en/ref/man1/gfreg.1.html, doc/html/en/ref/man1/gfrun.1.html, doc/html/en/ref/man1/gfwc.1.html:
	regen ("gfmpirun" command is renamed to "gfmpirun_p4")

	* doc/docbook/ja/ref/man3/gfs_pio_create.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_open.3.docbook, doc/html/en/ref/man1/gfmpirun.1.html, doc/html/en/ref/man1/gfmpirun_p4.1.html, doc/html/ja/ref/man1/gfmpirun.1.html, doc/html/ja/ref/man1/gfmpirun_p4.1.html, gftool/gfmpirun/Makefile, gftool/gfmpirun/gfmpirun.c, man/ja/man1/gfmpirun.1, man/ja/man1/gfmpirun_p4.1, man/man1/gfmpirun.1, man/man1/gfmpirun_p4.1, package/redhat/gfarm.spec, INSTALL.en, INSTALL.ja, debian/gfarm-client.files, debian/rules, doc/docbook/en/ref/man1/Makefile.inc, doc/docbook/en/ref/man1/gfmpirun.1.docbook, doc/docbook/en/ref/man1/gfmpirun_p4.1.docbook, doc/docbook/en/ref/man1/gfreg.1.docbook, doc/docbook/en/ref/man1/gfrun.1.docbook, doc/docbook/en/ref/man1/gfwc.1.docbook, doc/docbook/en/ref/man3/gfs_pio_create.3.docbook, doc/docbook/en/ref/man3/gfs_pio_open.3.docbook, doc/docbook/ja/ref/man1/Makefile.inc, doc/docbook/ja/ref/man1/gfmpirun.1.docbook, doc/docbook/ja/ref/man1/gfmpirun_p4.1.docbook, doc/docbook/ja/ref/man1/gfreg.1.docbook, doc/docbook/ja/ref/man1/gfwc.1.docbook:
	"gfmpirun" command is renamed to "gfmpirun_p4"

2003-04-25  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* doc/docbook/en/ref/man5/Makefile.inc, doc/docbook/en/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook:
	Added the english version of gfarm.conf(5).

2003-04-25  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/libgfarm/gfarm/config.c: fixed bugs in reading user map file.

2003-04-24  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrun/gfrun.c: Updated description of usage.
	When there is no scheduling information and the gfrun command is executed on a non-filesystem node, choose a (remote) filesystem node with the lowest load average.

2003-04-24  Noriyuki Soda  <soda@sra.co.jp>

	* INSTALL.en, INSTALL.ja: drop Tru64 and IRIX

	* server/Makefile.inc: (forgot to commit this one)
	install gfmd, gfsd and gfarmd into ${prefix}/sbin (rather than ${prefix}/bin)

	* debian/rules, makes/config.mk.in, ns/gfarmd/Makefile.in, package/redhat/gfarm.spec, server/gfmd/Makefile, server/gfsd/Makefile:
	install gfmd, gfsd and gfarmd into ${prefix}/sbin (rather than ${prefix}/bin)

2003-04-24  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* package/redhat/gfarm.spec: change version number: 1.0 -> 1.0b1 and
	       configure --prefix: /usr/lcoal/gfarm -> /usr/grid
	for 1st public release.

	* package/redhat/gfarm.spec: change for public release 1.0

2003-04-23  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/gfarm/auth_server.c, lib/libgfarm/gfarm/auth_server_gsi.c, lib/libgfarm/gfutil/Makefile.inc, lib/libgfarm/gfutil/daemon.c, lib/libgfarm/gfutil/gfutil.h, lib/libgfarm/gfutil/limit.c, lib/libgfarm/gfutil/logutil.c, ns/gfarmd/gfarmd.c, ns/gfarmd/gfd_auth.c, ns/gfarmd/gfd_file.c, ns/gfarmd/gfd_parse.c, server/gfmd/gfmd.c, server/gfsd/gfsd.c:
	to prevent name space pollution, rename some functions as follows:
	daemon()		->	gfarm_daemon()
	unlimit_nofiles()	->	gfarm_unlimit_nofiles()
	fatal*()		->	gflog_fatal*()
	syslog_name_to_facility() ->	gflog_syslog_name_to_facility()
	log_open_syslog()	->	gflog_syslog_open()
	log_*()			->	gflog_*()

	* lib/Makefile, lib/libgfarm/gfsl/Makefile:
	make test programs in lib/libgfarm/gfsl/

	* lib/libgfarm/gfsl/Makefile.inc, lib/libgfarm/gfsl/auth.c, lib/libgfarm/gfsl/client.c, lib/libgfarm/gfsl/client2.c, lib/libgfarm/gfsl/gfarm_hash.c, lib/libgfarm/gfsl/gfarm_hash.h, lib/libgfarm/gfsl/gsi.c, lib/libgfarm/gfsl/misc.c, lib/libgfarm/gfsl/misc.h, lib/libgfarm/gfsl/server.c, lib/libgfarm/gfsl/server2.c, lib/libgfarm/gfsl/session.c, lib/libgfarm/gfsl/tcputil.c, lib/libgfarm/gfsl/tcputil.h:
	- remove a hash module which was derived from Tcl.
	  use home-grown hash module instead.
	- add "gfarm" prefix to functions in tcputil.c and misc.c
	  to prevent name space pollution.

	* lib/libgfarm/Makefile: forgot to add -DGLOBUS_BUG

	* lib/libgfarm/gfarm/auth_server_gsi.c:
	adapt changes about gfarm_local_to_global_username() function prototype

2003-04-23  Hideki Kondou  <hkondo@soum.co.jp>

	* util/glogger/libglogger.c, util/glogger/sample.conf: New file.

	* util/glogger/libglogger.c, util/glogger/sample.conf:
	importing GMonitor, GFront, GLogger.

	* util/glogger/glogd, util/glogger/glogger.c, util/glogger/glogger.h:
	New file.

	* util/glogger/glogd, util/glogger/glogger.c, util/glogger/glogger.h:
	importing GMonitor, GFront, GLogger.

	* util/gfsuites/src/gfsuites/gmonitor/NodeMonitor.java, util/gfsuites/src/gfsuites/gmonitor/RangePanel.java, util/glogger/INSTALL, util/glogger/Makefile, util/glogger/README.ja, util/glogger/avg.pl:
	New file.

	* util/gfsuites/src/gfsuites/gmonitor/NodeMonitor.java, util/gfsuites/src/gfsuites/gmonitor/RangePanel.java, util/glogger/INSTALL, util/glogger/Makefile, util/glogger/README.ja, util/glogger/avg.pl:
	importing GMonitor, GFront, GLogger.

	* util/gfsuites/src/gfsuites/gmonitor/GraphFrame.java, util/gfsuites/src/gfsuites/gmonitor/GraphFrameApp.java, util/gfsuites/src/gfsuites/gmonitor/GrapherApplet.java, util/gfsuites/src/gfsuites/gmonitor/HttpGraphPanel.java:
	New file.

	* util/gfsuites/src/gfsuites/gmonitor/GraphFrame.java, util/gfsuites/src/gfsuites/gmonitor/GraphFrameApp.java, util/gfsuites/src/gfsuites/gmonitor/GrapherApplet.java, util/gfsuites/src/gfsuites/gmonitor/HttpGraphPanel.java:
	importing GMonitor, GFront, GLogger.

	* util/gfsuites/src/gfsuites/gmonitor/GPlot.java: New file.

	* util/gfsuites/src/gfsuites/gmonitor/GPlot.java:
	importing GMonitor, GFront, GLogger.

	* util/gfsuites/src/gfsuites/gmonitor/GMonitor.java, util/gfsuites/src/gfsuites/gmonitor/GMonitorApp.java, util/gfsuites/src/gfsuites/gmonitor/GMonitorConst.java:
	New file.

	* util/gfsuites/src/gfsuites/gmonitor/GMonitor.java, util/gfsuites/src/gfsuites/gmonitor/GMonitorApp.java, util/gfsuites/src/gfsuites/gmonitor/GMonitorConst.java:
	importing GMonitor, GFront, GLogger.

	* util/gfsuites/src/gfsuites/gmonitor/GFNode.java, util/gfsuites/src/gfsuites/gmonitor/GFNodeEditor.java, util/gfsuites/src/gfsuites/gmonitor/GMActions.java:
	New file.

	* util/gfsuites/src/gfsuites/gmonitor/GFNode.java, util/gfsuites/src/gfsuites/gmonitor/GFNodeEditor.java, util/gfsuites/src/gfsuites/gmonitor/GMActions.java:
	importing GMonitor, GFront, GLogger.

	* util/gfsuites/src/gfsuites/gmonitor/FileDataVisualizer.java:
	New file.

	* util/gfsuites/src/gfsuites/gmonitor/FileDataVisualizer.java:
	importing GMonitor, GFront, GLogger.

	* util/gfsuites/src/gfsuites/gmonitor/ClusterGraphFrame.java, util/gfsuites/src/gfsuites/gmonitor/ConfReader.java, util/gfsuites/src/gfsuites/gmonitor/DataVisualizeFrame.java:
	New file.

	* util/gfsuites/src/gfsuites/gmonitor/ClusterGraphFrame.java, util/gfsuites/src/gfsuites/gmonitor/ConfReader.java, util/gfsuites/src/gfsuites/gmonitor/DataVisualizeFrame.java:
	importing GMonitor, GFront, GLogger.

	* util/gfsuites/src/gfsuites/common/TreeChooser.java, util/gfsuites/src/gfsuites/common/ValueCellRenderer.java, util/gfsuites/src/gfsuites/gfront/DirectoryTreeNode.java, util/gfsuites/src/gfsuites/gfront/FileTableModel.java, util/gfsuites/src/gfsuites/gfront/GFAction.java, util/gfsuites/src/gfsuites/gfront/GFront.java, util/gfsuites/src/gfsuites/gfront/GFrontApp.java, util/gfsuites/src/gfsuites/gfront/GFrontConst.java:
	New file.

	* util/gfsuites/src/gfsuites/common/TreeChooser.java, util/gfsuites/src/gfsuites/common/ValueCellRenderer.java, util/gfsuites/src/gfsuites/gfront/DirectoryTreeNode.java, util/gfsuites/src/gfsuites/gfront/FileTableModel.java, util/gfsuites/src/gfsuites/gfront/GFAction.java, util/gfsuites/src/gfsuites/gfront/GFront.java, util/gfsuites/src/gfsuites/gfront/GFrontApp.java, util/gfsuites/src/gfsuites/gfront/GFrontConst.java:
	importing GMonitor, GFront, GLogger.

	* util/gfsuites/src/gfsuites/common/HttpDataSourceContext.java, util/gfsuites/src/gfsuites/common/MetaServerAccess.java, util/gfsuites/src/gfsuites/common/MetaServerSpecifyer.java, util/gfsuites/src/gfsuites/common/NodeDisplayTableModel.java, util/gfsuites/src/gfsuites/common/NodeListChooser.java, util/gfsuites/src/gfsuites/common/ReadOnlyTableModel.java:
	New file.

	* util/gfsuites/src/gfsuites/common/HttpDataSourceContext.java, util/gfsuites/src/gfsuites/common/MetaServerAccess.java, util/gfsuites/src/gfsuites/common/MetaServerSpecifyer.java, util/gfsuites/src/gfsuites/common/NodeDisplayTableModel.java, util/gfsuites/src/gfsuites/common/NodeListChooser.java, util/gfsuites/src/gfsuites/common/ReadOnlyTableModel.java:
	importing GMonitor, GFront, GLogger.

	* util/gfsuites/src/gfsuites/common/GFLSParser.java, util/gfsuites/src/gfsuites/common/GFWHEREParser.java, util/gfsuites/src/gfsuites/common/GLoggerUtils.java, util/gfsuites/src/gfsuites/common/HostSymFileFilter.java, util/gfsuites/src/gfsuites/common/HttpDataSource.java:
	New file.

	* util/gfsuites/src/gfsuites/common/GFLSParser.java, util/gfsuites/src/gfsuites/common/GFWHEREParser.java, util/gfsuites/src/gfsuites/common/GLoggerUtils.java, util/gfsuites/src/gfsuites/common/HostSymFileFilter.java, util/gfsuites/src/gfsuites/common/HttpDataSource.java:
	importing GMonitor, GFront, GLogger.

	* util/gfsuites/src/gfsuites/common/FragmentEditor.java, util/gfsuites/src/gfsuites/common/GFAppConst.java, util/gfsuites/src/gfsuites/common/GFAppUtilities.java:
	New file.

	* util/gfsuites/src/gfsuites/common/FragmentEditor.java, util/gfsuites/src/gfsuites/common/GFAppConst.java, util/gfsuites/src/gfsuites/common/GFAppUtilities.java:
	importing GMonitor, GFront, GLogger.

	* util/gfsuites/lib/plotapplet.jar, util/gfsuites/src/gfsuites/common/AbstractDataSource.java, util/gfsuites/src/gfsuites/common/AbstractDataSourceContext.java, util/gfsuites/src/gfsuites/common/CommandOutput.java, util/gfsuites/src/gfsuites/common/ConfigurationGFARM.java, util/gfsuites/src/gfsuites/common/DoubleCellRenderer.java, util/gfsuites/src/gfsuites/common/FilesetDataSource.java, util/gfsuites/src/gfsuites/common/FilesetDataSourceContext.java, util/gfsuites/src/index.html, util/gfsuites/src/sample.html:
	New file.

	* util/gfsuites/lib/plotapplet.jar, util/gfsuites/src/gfsuites/common/AbstractDataSource.java, util/gfsuites/src/gfsuites/common/AbstractDataSourceContext.java, util/gfsuites/src/gfsuites/common/CommandOutput.java, util/gfsuites/src/gfsuites/common/ConfigurationGFARM.java, util/gfsuites/src/gfsuites/common/DoubleCellRenderer.java, util/gfsuites/src/gfsuites/common/FilesetDataSource.java, util/gfsuites/src/gfsuites/common/FilesetDataSourceContext.java, util/gfsuites/src/index.html, util/gfsuites/src/sample.html:
	importing GMonitor, GFront, GLogger.

	* util/gfsuites/bin/gmonitor, util/gfsuites/bin/graphapp, util/gfsuites/bin/grapher, util/gfsuites/etc/gmonitor-sample.conf:
	New file.

	* util/gfsuites/bin/gmonitor, util/gfsuites/bin/graphapp, util/gfsuites/bin/grapher, util/gfsuites/etc/gmonitor-sample.conf:
	importing GMonitor, GFront, GLogger.

	* util/00README, util/gfsuites/bin/gfront, util/gfsuites/build.xml:
	New file.

	* util/00README, util/gfsuites/bin/gfront, util/gfsuites/build.xml:
	importing GMonitor, GFront, GLogger.

2003-04-23  Takuya Ishibashi  <takuya@soum.co.jp>

	* doc/GUIDE.ja:
	- Added notes about mixing sharedsecret and gsi authentication.
	- Added notes about setting PATH before executing Gfarm commands.
	- Converted EUC to Shift JIS.

2003-04-23  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* README.hook.en, doc/README.hook.en:
	Moved from the top directory to the doc/ directory.

	* doc/docbook/en/ref/man3/gfs_pio_set_view_index.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_set_view_index.3.docbook:
	Fixed typo.

2003-04-23  Hideki Kondou  <hkondo@soum.co.jp>

	* doc/GUIDE.ja: Charset conversion, JIS to EUC.

	* doc/GUIDE.ja: Gfarm User's Guide.

2003-04-23  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfkey/gfkey.c: change function name in config.c

	* gftool/gfrcmd/gfrcmd.c, include/gfarm/gfarm_misc.h, lib/libgfarm/gfarm/auth_server.c, lib/libgfarm/gfarm/config.c:
	implement local <--> global user name mapping

2003-04-18  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* LICENSE: Copyright notice

2003-04-17  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfarm/Makefile, makes/include.mk, makes/subdir.mk, makes/var.mk, ns/gfarm/Makefile:
	make "configure --srcdir=..." work again

	* configure: regen

	* configure.in: mistake in previous commit.
	this caused "make" fail unless openldap belongs to /usr.

	* ns/nslib/Makefile.in:
	use same expression with subdir.mk to see whether --srcdir was used
	at "configure" time.

	* Makefile.in, ns/Makefile, ns/nslib/Makefile.in, ns/nstool/Makefile:
	fix build problems under ns/ hierarchy

	* ns/nslib/Makefile: remove a file which was committed accidentally

	* include/gfarm/config.h.in:
	remove a garbage file which was committed accidentally.

2003-04-16  Noriyuki Soda  <soda@sra.co.jp>

	* server/Makefile, ns/Makefile, makes/config.mk.in, makes/include.mk, makes/subdir.mk, makes/var.mk, lib/libgfarm/Makefile, lib/gfs_hook/Makefile.in, lib/Makefile, gftool/gfrun/Makefile, gftool/gfreg/Makefile, gftool/gfrcmd/Makefile, gftool/gfps/Makefile, gftool/gfmpirun/Makefile, gftool/gfls/Makefile, gftool/gfkey/Makefile, gftool/gfhost/Makefile, gftool/addpath/Makefile, gfptool/gfsplck/Makefile, Makefile.in, configure, configure.in, gfarm_config.h.in:
	directories are restructured

	* server/gfsd/Makefile, server/gfsd/gfsd.c, server/gfsd/loadavg.c:
	moved from gfsd

	* server/gfmd/Makefile, server/gfmd/gfmd.c: moved from gfmd

	* ns/nstool/Makefile: moved from nstool

	* ns/nstool/file/Makefile.in, ns/nstool/file/get.c, ns/nstool/file/ns_get.c, ns/nstool/file/ns_lstat.c, ns/nstool/file/ns_mkdir.c, ns/nstool/file/ns_put.c, ns/nstool/file/ns_readdir.c, ns/nstool/file/ns_readlink.c, ns/nstool/file/ns_rename.c, ns/nstool/file/ns_stat.c, ns/nstool/file/ns_symlink.c, ns/nstool/file/ns_unlink.c, ns/nstool/file/ns_unlink_dir.c, ns/nstool/file/put.c, ns/nstool/file/stat.c:
	moved from nstool/file

	* ns/nslib/Makefile, ns/nslib/Makefile.in, ns/nslib/bswap.c, ns/nslib/bswap.h, ns/nslib/comm.c, ns/nslib/file.c, ns/nslib/gflib.c, ns/nslib/nsclnt.c, ns/nslib/nsexec.c, ns/nslib/soc-lxdr.c, ns/nslib/soc.c:
	moved from nslib

	* lib/libgfarm/gfsl/Makefile, lib/libgfarm/gfsl/Makefile.gt1, lib/libgfarm/gfsl/Makefile.inc, lib/libgfarm/gfsl/README, lib/libgfarm/gfsl/REFERENCE, lib/libgfarm/gfsl/Why, lib/libgfarm/gfsl/auth.c, lib/libgfarm/gfsl/client.c, lib/libgfarm/gfsl/client2.c, lib/libgfarm/gfsl/gfarm-initiator.conf, lib/libgfarm/gfsl/gfarm-usermap, lib/libgfarm/gfsl/gfarm_auth.h, lib/libgfarm/gfsl/gfarm_gsi.h, lib/libgfarm/gfsl/gfarm_hash.c, lib/libgfarm/gfsl/gfarm_hash.h, lib/libgfarm/gfsl/gfarm_secure_session.h, lib/libgfarm/gfsl/gfsl_config.h, lib/libgfarm/gfsl/gsi.c, lib/libgfarm/gfsl/misc.c, lib/libgfarm/gfsl/scsub.c, lib/libgfarm/gfsl/server.c, lib/libgfarm/gfsl/server2.c, lib/libgfarm/gfsl/session.c, lib/libgfarm/gfsl/tcputil.c, lib/libgfarm/gfsl/tcputil.h:
	moved from lib/libgfsl

	* lib/libgfarm/gfutil/Makefile.inc, lib/libgfarm/gfutil/daemon.c, lib/libgfarm/gfutil/gfutil.h, lib/libgfarm/gfutil/hash.c, lib/libgfarm/gfutil/hash.h, lib/libgfarm/gfutil/limit.c, lib/libgfarm/gfutil/logutil.c, lib/libgfarm/gfarm/Makefile.inc, lib/libgfarm/gfarm/auth.h, lib/libgfarm/gfarm/auth_client.c, lib/libgfarm/gfarm/auth_client_gsi.c, lib/libgfarm/gfarm/auth_common.c, lib/libgfarm/gfarm/auth_config.c, lib/libgfarm/gfarm/auth_server.c, lib/libgfarm/gfarm/auth_server_gsi.c, lib/libgfarm/gfarm/config.c, lib/libgfarm/gfarm/error.c, lib/libgfarm/gfarm/gfj_client.h, lib/libgfarm/gfarm/gfm_client.c, lib/libgfarm/gfarm/gfm_proto.h, lib/libgfarm/gfarm/gfs_client.c, lib/libgfarm/gfarm/gfs_client.h, lib/libgfarm/gfarm/gfs_client_udp.c, lib/libgfarm/gfarm/gfs_dir.c, lib/libgfarm/gfarm/gfs_exec.c, lib/libgfarm/gfarm/gfs_pio.c, lib/libgfarm/gfarm/gfs_pio.h, lib/libgfarm/gfarm/gfs_pio_default.c, lib/libgfarm/gfarm/gfs_pio_global.c, lib/libgfarm/gfarm/gfs_pio_local.c, lib/libgfarm/gfarm/gfs_pio_misc.c, lib/libgfarm/gfarm/gfs_pio_remote.c, lib/libgfarm/gfarm/gfs_pio_section.c, lib/libgfarm/gfarm/gfs_proto.c, lib/libgfarm/gfarm/gfs_proto.h, lib/libgfarm/gfarm/gfs_unlink.c, lib/libgfarm/gfarm/glob.c, lib/libgfarm/gfarm/host.c, lib/libgfarm/gfarm/host.h, lib/libgfarm/gfarm/hostspec.c, lib/libgfarm/gfarm/hostspec.h, lib/libgfarm/gfarm/import_help.c, lib/libgfarm/gfarm/io_fd.c, lib/libgfarm/gfarm/io_fd.h, lib/libgfarm/gfarm/io_gfsl.c, lib/libgfarm/gfarm/io_gfsl.h, lib/libgfarm/gfarm/iobuffer.c, lib/libgfarm/gfarm/iobuffer.h, lib/libgfarm/gfarm/metadb_ldap.c, lib/libgfarm/gfarm/metadb_misc.c, lib/libgfarm/gfarm/param.c, lib/libgfarm/gfarm/param.h, lib/libgfarm/gfarm/schedule.c, lib/libgfarm/gfarm/schedule.h, lib/libgfarm/gfarm/sockopt.c, lib/libgfarm/gfarm/sockopt.h, lib/libgfarm/gfarm/stringlist.c, lib/libgfarm/gfarm/url.c, lib/libgfarm/gfarm/xxx_proto.c, lib/libgfarm/gfarm/xxx_proto.h:
	moved from gfarmlib

	* ns/include/gfarm/Makefile, ns/include/gfarm/comm.h, ns/include/gfarm/debug.h, ns/include/gfarm/gflib.h, ns/include/gfarm/ns.h, ns/include/gfarm/nsclnt.h, ns/include/gfarm/nscom.h, ns/include/gfarm/nsexec.h, ns/include/gfarm/soc-lxdr.h, ns/include/gfarm/soc.h, ns/include/gfarm/type.h:
	moved from include

	* include/Makefile.in, include/comm.h, include/debug.h, include/gfarm.h, include/gfarm_error.h, include/gfarm_metadb.h, include/gfarm_misc.h, include/gfarm_stringlist.h, include/gflib.h, include/gfs.h, include/gfs_glob.h, include/gfs_hook.h, include/ns.h, include/nsclnt.h, include/nscom.h, include/nsexec.h, include/soc-lxdr.h, include/soc.h, include/type.h:
	moved to include/gfarm and ns/include/gfarm

	* include/gfarm/Makefile, include/gfarm/config.h.in, include/gfarm/gfarm.h, include/gfarm/gfarm_config.h.in, include/gfarm/gfarm_error.h, include/gfarm/gfarm_metadb.h, include/gfarm/gfarm_misc.h, include/gfarm/gfarm_stringlist.h, include/gfarm/gfs.h, include/gfarm/gfs_glob.h, include/gfarm/gfs_hook.h:
	moved from include

	* ns/gfarmd/Makefile.in, ns/gfarmd/gfarmd.c, ns/gfarmd/gfarmd.h, ns/gfarmd/gfd_auth.c, ns/gfarmd/gfd_cmd.h, ns/gfarmd/gfd_cmd.l, ns/gfarmd/gfd_cmd.y, ns/gfarmd/gfd_file.c, ns/gfarmd/gfd_parse.c, ns/gfarmd/symtab.c, ns/gfarmd/symtab.h, ns/gfarmd/yyerror.c:
	moved from gfarmd

	* ns/gfarm/Makefile, ns/gfarm/cmd.h, ns/gfarm/cmd.l, ns/gfarm/cmd.y, ns/gfarm/gfarm.c:
	moved from gfarm

	* lib/gfs_hook/sysdep/linux/kernel_stat.h, lib/gfs_hook/sysdep/linux/xstatconv.c:
	fix problem with headers in recent linux kernel.

	* acconfig.h:
	forgot to update this file, when gfarm_config.h.in was updated.

2003-04-16  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* INSTALL.en, INSTALL.ja: Updated the overview section.
	Added the description about gfs_hook_mpi.o, a syscall-hook library for MPI applications.

	* ChangeLog: Catched up with the current ChangeLog.

2003-04-11  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfsl/server.c: make unreachable statements "#if 0"

	* lib/libgfsl/Makefile: define GLOBUS_BUG unconditionally for now

	* lib/libgfsl/gsi.c: use "#if GLOBUS_BUG" to make the workaround clear.

2003-04-11  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfsl/gsi.c (gfarmGssAcceptSecurityContext):
	Removed the GSS_C_DELEG_FLAG check since it is not set using the Globus GSSAPI library, although this violates the RFC 2744.

2003-04-11  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfsl/auth.c, lib/libgfsl/session.c, gfarmlib/Makefile.in, gfarmlib/auth_client_gsi.c, gfarmlib/auth_server_gsi.c, gfarmlib/io_gfsl.c, gfarmlib/io_gfsl.h:
	fix gcc warnings

	* gfarmlib/schedule.c: - change indentation
	- plug some memory leaks on error case
	- make gfarm_url_hosts_schedule() use gfarm_file_section_host_schedule()
	  internally

	* gfarmlib/auth_server_gsi.c:
	fix a bug that `global_username' was erroneously freed.
	this is same fix with auth_server.c revision 1.12 by tatebe-san.

2003-04-11  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gfarmlib/gfs_pio_section.c:
	gfs_pio_set_view-section(): changed calling sequence of gfarm_schedule_search_
	idle_by_all()

	* gfarmlib/schedule.c, gfarmlib/schedule.h, gftool/gfrun/gfrun.c:
	added -N <proc_num> option to gfrun.
	programs run on top <proc_num> lightest hosts in load average.

2003-04-10  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/auth_server.c:
	try to simplify gfarm_authorize_simple() implementation.
	the behavior of log_set_auxiliary_info() is changed in this commit,
	it is now revoked always if error happens.
	(before this change, it wasn't revoked at error, if switch_to was true.)

	* gfarmlib/Makefile.in, lib/gfs_hook/Makefile.in, lib/libgfsl/Makefile:
	always make ${prefix}/lib directory automatically

	* configure: regen

	* configure.in: forgot to specify -p for mkdir

2003-04-10  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmlib/auth_server.c (gfarm_authorize_simple):
	Take care the non switch_to and successful authorization case.

2003-04-09  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfsl/gfarm_config.h:
	undef USE_GLOBUS.  This enables the confidentiality feature such that each message will be encrypted.  The perforance impact needs to be investigated

	* gfarmlib/auth_server.c (gfarm_authorize_simple):
	Do not switch the user ID before simple authorization method, since it is necessary to switch back to the original user ID when it fails.
	This fixed a problem such that the gsi authentication always fails after the sharedsecret authentication.

2003-04-09  Noriyuki Soda  <soda@sra.co.jp>

	* Makefile.in: forgot to remove $(top_objdir)/gfarm/gfarm_config.h

	* Makefile.in, configure, configure.in, gfarm/Makefile, gfarmd/Makefile.in, gfptool/gfcombine_hook/Makefile, gfptool/gfcp_hook/Makefile, include/Makefile.in, lib/gfs_hook/Makefile.in, lib/gfs_hook/sysdep/linux/Makefile.in, makes/html.mk, makes/man.mk, makes/subdir.mk, makes/var.mk, nslib/Makefile.in, nstool/file/get.c, nstool/file/ns_get.c, nstool/file/ns_lstat.c, nstool/file/ns_mkdir.c, nstool/file/ns_put.c, nstool/file/ns_readdir.c, nstool/file/ns_readlink.c, nstool/file/ns_rename.c, nstool/file/ns_stat.c, nstool/file/ns_symlink.c, nstool/file/ns_unlink.c, nstool/file/ns_unlink_dir.c, nstool/file/put.c, nstool/file/stat.c:
	make "./configure --srcdir=XXX" work again.
	the way to handle <gfarm/gfarm_config.h> and <gfarm/con.h> is messy, though.
	(these are now put in $(top_objdir)/gfarm, rather than $(top_srcdir)/include.
	 probably best way is to change include directory name from include to gfarm.)

	* nslib/nsexec.c: change #include "*.h" to #include <gfarm/*.h>

	* gfarmlib/glob.c: 1 byte memory was wasted in previous change

	* gfarmlib/gfs_dir.c, gfarmlib/glob.c, gfarmlib/url.c, gftool/gfls/gfls.c, include/gfarm_misc.h:
	revise previous change.
	in this version:
	- gfarm_url_prefix_skip() is now pure function.
	  it returns the result as the function-return-value.
	- gfarm_url_basename() is now renamed to gfarm_path_dir_skip(),
	  and now it doesn't take gfarm_url as its argument.
	  i.e. gfarm_path_dir_skip() is portable version of traditional basename(3),
	  rather than XPG basename(3).

	* gftool/gfls/gfls.c:
	fix bug that "gfls -l gfarm:" doesn't work, problem pointed out by naotaka-san

	* include/gfarm_misc.h:
	- rename GFARM_PREFIX{,_LENGTH} to GFARM_URL_PREFIX{,_LENGTH},
	  and make GFARM_URL_PREFIX_LENGTH == strlen(GFARM_URL_PREFIX).
	  this is more natural, and eliminates a lot of artificial "+1".
	- rename gfarm_prefix_skip() to gfarm_url_prefix_skip()
	- export gfarm_url_basename()

	* gfarmlib/gfs_dir.c, gfarmlib/glob.c, gfarmlib/url.c:
	- rename GFARM_PREFIX{,_LENGTH} to GFARM_URL_PREFIX{,_LENGTH},
	  and make GFARM_URL_PREFIX_LENGTH == strlen(GFARM_URL_PREFIX).
	  this is more natural, and eliminates a lot of artificial "+1".
	- rename gfarm_prefix_skip() to gfarm_url_prefix_skip()
	- split gfarm_basename() into gfarm_url_basename() and
	  gfarm_url_remove_suffix(),
	  and make gfarm_url_basename() not use XPG basename(3)

	* lib/gfs_hook/Makefile.in:
	use current directory for object file rather than /tmp

2003-04-09  Yasuhito Takamiya  <takamiya@matsulab.is.titech.ac.jp>

	* debian/changelog: new cvs upstream version (20030409).

	* debian/copyright: updated uri of cvs server.

	* debian/control: new cvs upstream version (20030409).

	new packages: gfarmd, gfmd
	renamed packages: gfarm-fsnode -> gfsd

	* debian/gfarm-doc.docs: removed #DOCS# line.

	* debian/gfarm-pool.conffiles, debian/gfarm-pool.init, debian/gfarm-pool.postinst, debian/gfarm-doc.files, debian/gfarm-fsnode.conffiles, debian/gfarm-fsnode.install, debian/gfarm-client.dirs, debian/gfarm-doc.dirs, debian/gfarm-fsnode.dirs, debian/gfarm-server.dirs, debian/libgfarm-dev.dirs:
	removed.

	* debian/files, debian/gfarm-client.files, debian/gfarm-client.install, debian/gfarm-fsnode.install, debian/gfarm.files, debian/gfarmd.files, debian/gfarmd.init, debian/gfarmd.postinst, debian/gfmd.files, debian/gfmd.init, debian/gfmd.postinst, debian/gfsd.files, debian/gfsd.init, debian/libgfarm-dev.files:
	added.

	* debian/rules:
	moved to DH_COMPAT=2 and rearranged obsolete make targets
	(gfarm-fsnode and so on.)

2003-04-09  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/hooks.c: correct return type of gfs_hook_syscall_lseek()

2003-04-08  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/Makefile.in, lib/gfs_hook/hooks_64.c, lib/gfs_hook/hooks_subr.h, lib/gfs_hook/lseek64.c:
	fix a problem to hook llseek/lseek64 on Solaris

	* man/man3/gfs_pio_open.3, man/ja/man3/gfs_pio_open.3, doc/html/ja/ref/man3/gfs_pio_open.3.html, doc/html/en/ref/man3/gfs_pio_open.3.html:
	regen

	* doc/docbook/en/ref/man3/gfs_pio_open.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_open.3.docbook:
	correct typo ("lags" -> "flags") reported by YAMAMOTO Naotaka-san

2003-04-08  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* doc/conf/gfarm.conf: sample gfarm.conf

2003-04-07  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/hostspec.c, gftool/gfhost/gfhost.c:
	fix "char *" vs "unsigned char *" mismatch that SUNWspro5.0 warns.

	* lib/gfs_hook/Makefile.in:
	fix a bug that debugging object (*.do) cannot be built with non-gcc compilers,
	because non-gcc only supports "*.o" as the extension of an object file.

	* configure: regen

	* configure.in: do not add "-I/usr/include" to cc options.
	to suppress the following gcc-3.2 warning on redhat-8.0:
	cc1: warning: changing search order for system directory "/usr/include"
	cc1: warning:   as it has already been specified as a non-system directory

	* gftool/gfhost/gfhost.c, gfarmlib/config.c: suppress gcc-3.2 warning

	* gfarmlib/gfs_client.h: suppress gcc warnings on NetBSD-1.6

	* gfarm/cmd.l, gfarmd/gfd_cmd.l, gfarmlib/auth_server.c, gfarmlib/gfs_pio.c, gfarmlib/logutil.h, gfsd/main.c, gftool/gfls/gfls.c, gftool/gfreg/gfreg.c:
	suppress gcc warnings on vine-2.5

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_init.c, lib/gfs_hook/hooks_init_mpi.c, lib/gfs_hook/hooks_subr.h, lib/gfs_hook/sysdep/linux/Makefile.in, lib/gfs_hook/sysdep/linux/fxstat.c, lib/gfs_hook/sysdep/linux/fxstat64.c, lib/gfs_hook/sysdep/linux/lxstat.c, lib/gfs_hook/sysdep/linux/lxstat64.c, lib/gfs_hook/sysdep/linux/xstat.c, lib/gfs_hook/sysdep/linux/xstat64.c:
	fix gcc warnings

2003-04-04  Noriyuki Soda  <soda@sra.co.jp>

	* gfarm_config.h.in, gfarmlib/xxx_proto.c:
	revise floating point part of the fix to negative file_offset_t problem.
	with this fix,
	- the significant figure has one more bit (53bit total) with ieee double.
	- more portable, because this version doesn't depend on any constant of
	  floating point representation.
	- approximately correct result up to 63bit.

2003-04-04  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* debian/README.Debian, debian/changelog, debian/control, debian/gfarm-client.dirs, debian/gfarm-doc.dirs, debian/gfarm-fsnode.conffiles, debian/gfarm-fsnode.dirs, debian/gfarm-server.dirs, debian/libgfarm-dev.dirs, debian/rules:
	We can build debian packages,
	but these are not complete.

2003-04-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfreg/gfreg.c: Plugged a memory leak.

	* gftool/gfreg/gfreg.c:
	Fixed a segfault problem when registering a new file.

2003-04-04  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* doc/conf/gfarm.schema: for ldap schema file

2003-04-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfreg/gfreg.c:
	Added the -f option to register a file even if it is already registered and will be overwritten.
	Without the -f option, check the existence at first.

	* gfarmlib/gfs_pio.h, gfarmlib/gfs_pio_section.c, gfarmlib/gfs_unlink.c (gfs_pio_set_view_section):
	When creating a file or opening with a trancation flag, delete all file fragments in the section at first.

	* gfarmlib/metadb_ldap.c, include/gfarm_metadb.h:
	Added a const modifier for some functions.

2003-04-03  Noriyuki Soda  <soda@sra.co.jp>

	* gfarm_config.h.in, gfarmlib/xxx_proto.c:
	use (nearly full) 53bit range for floating-point file_offset_t,
	rather than 43bit.

	* gfarm_config.h.in, gfarmlib/xxx_proto.c:
	slightly modified fix for the following problem:
	> Fixed a critical bug such that a negative value cannot be sent as a
	> offset datatype.
	> When this fix is applied, every library and daemon should be
	> re-built and re-started.

	differences are:
	- retain old on-wire data representation.
	- make this work with floating-point file_offset_t.

2003-04-03  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmlib/xxx_proto.c:
	Fixed a critical bug such that a negative value cannot be sent as a offset datatype.
	When this fix is applied, every library and daemon should be re-built and re-started.

2003-04-03  Noriyuki Soda  <soda@sra.co.jp>

	* gfsd/main.c: - create its own process group for invoked command,
	  and send passed signal to the process group rather than the process,
	  to make signal delivery actually work on GFS_PROTO_COMMAND implementation.
	- plug a security problem.
	  if the user's shell isn't a standard shell (i.e. not listed in /etc/shells),
	  GFS_PROTO_COMMAND without GFS_CLIENT_COMMAND_FLAG_SHELL_COMMAND shouldn't
	  be allowed.

	* gftool/gfrcmd/gfrcmd.c:
	- pass SIGINT, SIGQUIT and SIGTERM to the remote command.
	- implement -r option to invoke specified command directly,
	  (i.e. not via login-shell)

	* gfarmlib/gfs_client.h: export gfs_client_command_io()

	* gfarmlib/gfs_client.c: typo in the gfrcmd signal sending code

2003-03-31  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfwhere/gfwhere.c:
	enable to interpret metacharacters in arguments.

2003-03-20  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/gfs_client.c:
	- switch shell command used by gfrcmd from /bin/sh to user's login shell
	- GFS_CLIENT_COMMAND_FLAG_SHELL_COMMAND for gfs_client_command() to
	  implement above.

	* gfsd/main.c: fix bugs in previous commit
	fix long standing memory leak

	* gfsd/main.c: fatal typo

	* gfarmlib/gfs_client.h, gfsd/main.c, gftool/gfrcmd/gfrcmd.c:
	- switch shell command used by gfrcmd from /bin/sh to user's login shell
	- GFS_CLIENT_COMMAND_FLAG_SHELL_COMMAND for gfs_client_command() to
	  implement above.

2003-03-20  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmlib/gfs_pio.c (gfs_pio_open):
	Set GFARM_FILE_CREATE to flags for RDWR mode.
	(gfs_pio_create, gfs_pio_open): Fixed a bug when checking a file mode.

2003-03-19  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_common.c:
	Display more debug message for set_view_local.

	* gfsd/main.c:
	Just added a comment for $Id$. (check-in test on cvs.apgrid.org)

	* gfarmlib/gfs_pio_misc.c:
	gfarm_url_fragments_replicate): just cleaned up a code.

	* gfarmlib/gfs_unlink.c: Added a comment for parallel unlink.

	* gfarmlib/gfs_dir.c, gfarmlib/gfs_pio_section.c:
	Plugged a memory leak.

2003-03-18  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_init_mpi.c, lib/gfs_hook/hooks_init.c:
	Display a debug message when gfarm_initialize is automatically (implicitly) called.

2003-03-18  Noriyuki Soda  <soda@sra.co.jp>

	* makes/html.mk, doc/html/en/ref/man8/Makefile, doc/html/ja/ref/Makefile, doc/html/ja/ref/index.html, doc/html/ja/ref/man1/Makefile, doc/html/ja/ref/man3/Makefile, doc/html/ja/ref/man5/Makefile, doc/html/ja/ref/man8/Makefile, doc/Makefile, doc/html/Makefile, doc/html/en/ref/Makefile, doc/html/en/ref/index.html, doc/html/en/ref/man1/Makefile, doc/html/en/ref/man3/Makefile, doc/html/index.html:
	add very primitive HTML index page

	* man/man3/gfs_unlink.3, man/man8/gfmd.8, man/man8/gfsd.8, man/man3/gfs_pio_putline.3, man/man3/gfs_pio_puts.3, man/man3/gfs_pio_read.3, man/man3/gfs_pio_seek.3, man/man3/gfs_pio_set_local.3, man/man3/gfs_pio_set_view_index.3, man/man3/gfs_pio_set_view_local.3, man/man3/gfs_pio_ungetc.3, man/man3/gfs_pio_write.3, man/man3/gfs_readdir.3, man/man3/gfs_rename.3, man/man3/gfs_rmdir.3, man/man3/gfs_stat.3, man/man3/gfs_stat_free.3, man/man3/gfs_chmod.3, man/man3/gfs_chown.3, man/man3/gfs_closedir.3, man/man3/gfs_mkdir.3, man/man3/gfs_opendir.3, man/man3/gfs_pio_close.3, man/man3/gfs_pio_create.3, man/man3/gfs_pio_eof.3, man/man3/gfs_pio_error.3, man/man3/gfs_pio_flush.3, man/man3/gfs_pio_getc.3, man/man3/gfs_pio_getline.3, man/man3/gfs_pio_open.3, man/man3/gfs_pio_putc.3, man/man1/gfrcmd.1, man/man1/gfreg.1, man/man1/gfrep.1, man/man1/gfrm.1, man/man1/gfrun.1, man/man1/gfsched.1, man/man1/gfwc.1, man/man1/gfwhere.1, man/man3/gfarm_initialize.3, man/man3/gfarm_strings_free_deeply.3, man/man3/gfarm_terminate.3, man/man3/gfarm_url_hosts_schedule.3, man/ja/man5/gfarm.conf.5, man/ja/man8/gfmd.8, man/ja/man8/gfsd.8, man/man1/digest.1, man/man1/gfexport.1, man/man1/gfgrep.1, man/man1/gfimport_fixed.1, man/man1/gfimport_text.1, man/man1/gfkey.1, man/man1/gfls.1, man/man1/gfmpirun.1, man/man1/gfps.1, man/ja/man3/gfs_pio_seek.3, man/ja/man3/gfs_pio_set_local.3, man/ja/man3/gfs_pio_set_view_index.3, man/ja/man3/gfs_pio_set_view_local.3, man/ja/man3/gfs_pio_ungetc.3, man/ja/man3/gfs_pio_write.3, man/ja/man3/gfs_readdir.3, man/ja/man3/gfs_rename.3, man/ja/man3/gfs_rmdir.3, man/ja/man3/gfs_stat.3, man/ja/man3/gfs_stat_free.3, man/ja/man3/gfs_unlink.3, man/ja/man3/gfs_mkdir.3, man/ja/man3/gfs_opendir.3, man/ja/man3/gfs_pio_close.3, man/ja/man3/gfs_pio_create.3, man/ja/man3/gfs_pio_eof.3, man/ja/man3/gfs_pio_error.3, man/ja/man3/gfs_pio_flush.3, man/ja/man3/gfs_pio_getc.3, man/ja/man3/gfs_pio_getline.3, man/ja/man3/gfs_pio_open.3, man/ja/man3/gfs_pio_putc.3, man/ja/man3/gfs_pio_putline.3, man/ja/man3/gfs_pio_puts.3, man/ja/man3/gfs_pio_read.3, man/ja/man3/gfarm_stringlist_init.3, man/ja/man3/gfarm_stringlist_length.3, man/ja/man3/gfarm_strings_free_deeply.3, man/ja/man3/gfarm_terminate.3, man/ja/man3/gfarm_url_fragments_replicate.3, man/ja/man3/gfarm_url_hosts_schedule.3, man/ja/man3/gfarm_url_program_deliver.3, man/ja/man3/gfarm_url_program_register.3, man/ja/man3/gfarm_url_section_replicate_from_to.3, man/ja/man3/gfarm_url_section_replicate_to.3, man/ja/man3/gfs_chmod.3, man/ja/man3/gfs_chown.3, man/ja/man3/gfs_closedir.3, man/ja/man1/gfsched.1, man/ja/man1/gfwc.1, man/ja/man1/gfwhere.1, man/ja/man3/GFARM_STRINGLIST_ELEM.3, man/ja/man3/GFARM_STRINGLIST_STRARRAY.3, man/ja/man3/gfarm_hostlist_read.3, man/ja/man3/gfarm_import_fragment_config_read.3, man/ja/man3/gfarm_import_fragment_size_alloc.3, man/ja/man3/gfarm_initialize.3, man/ja/man3/gfarm_stringlist_add.3, man/ja/man3/gfarm_stringlist_cat.3, man/ja/man3/gfarm_stringlist_elem.3, man/ja/man3/gfarm_stringlist_free.3, man/ja/man1/gfimport_fixed.1, man/ja/man1/gfimport_text.1, man/ja/man1/gfkey.1, man/ja/man1/gfls.1, man/ja/man1/gfmkdir.1, man/ja/man1/gfmpirun.1, man/ja/man1/gfps.1, man/ja/man1/gfrcmd.1, man/ja/man1/gfreg.1, man/ja/man1/gfrep.1, man/ja/man1/gfrm.1, man/ja/man1/gfrmdir.1, man/ja/man1/gfrun.1, doc/html/ja/ref/man3/gfs_unlink.3.html, doc/html/ja/ref/man5/gfarm.conf.5.html, doc/html/ja/ref/man8/gfmd.8.html, doc/html/ja/ref/man8/gfsd.8.html, man/ja/man1/digest.1, man/ja/man1/gfexport.1, man/ja/man1/gfgrep.1, doc/html/ja/ref/man3/gfs_pio_write.3.html, doc/html/ja/ref/man3/gfs_readdir.3.html, doc/html/ja/ref/man3/gfs_rename.3.html, doc/html/ja/ref/man3/gfs_rmdir.3.html, doc/html/ja/ref/man3/gfs_stat.3.html, doc/html/ja/ref/man3/gfs_stat_free.3.html, doc/html/ja/ref/man3/gfs_pio_puts.3.html, doc/html/ja/ref/man3/gfs_pio_read.3.html, doc/html/ja/ref/man3/gfs_pio_seek.3.html, doc/html/ja/ref/man3/gfs_pio_set_local.3.html, doc/html/ja/ref/man3/gfs_pio_set_view_index.3.html, doc/html/ja/ref/man3/gfs_pio_set_view_local.3.html, doc/html/ja/ref/man3/gfs_pio_ungetc.3.html, doc/html/ja/ref/man3/gfs_pio_error.3.html, doc/html/ja/ref/man3/gfs_pio_flush.3.html, doc/html/ja/ref/man3/gfs_pio_getc.3.html, doc/html/ja/ref/man3/gfs_pio_getline.3.html, doc/html/ja/ref/man3/gfs_pio_open.3.html, doc/html/ja/ref/man3/gfs_pio_putc.3.html, doc/html/ja/ref/man3/gfs_pio_putline.3.html, doc/html/ja/ref/man3/gfs_chown.3.html, doc/html/ja/ref/man3/gfs_closedir.3.html, doc/html/ja/ref/man3/gfs_mkdir.3.html, doc/html/ja/ref/man3/gfs_opendir.3.html, doc/html/ja/ref/man3/gfs_pio_close.3.html, doc/html/ja/ref/man3/gfs_pio_create.3.html, doc/html/ja/ref/man3/gfs_pio_eof.3.html, doc/html/ja/ref/man3/gfarm_url_hosts_schedule.3.html, doc/html/ja/ref/man3/gfarm_url_program_deliver.3.html, doc/html/ja/ref/man3/gfarm_url_program_register.3.html, doc/html/ja/ref/man3/gfarm_url_section_replicate_from_to.3.html, doc/html/ja/ref/man3/gfarm_url_section_replicate_to.3.html, doc/html/ja/ref/man3/gfs_chmod.3.html, doc/html/ja/ref/man3/gfarm_stringlist_elem.3.html, doc/html/ja/ref/man3/gfarm_stringlist_free.3.html, doc/html/ja/ref/man3/gfarm_stringlist_init.3.html, doc/html/ja/ref/man3/gfarm_stringlist_length.3.html, doc/html/ja/ref/man3/gfarm_strings_free_deeply.3.html, doc/html/ja/ref/man3/gfarm_terminate.3.html, doc/html/ja/ref/man3/gfarm_url_fragments_replicate.3.html, doc/html/ja/ref/man3/GFARM_STRINGLIST_STRARRAY.3.html, doc/html/ja/ref/man3/gfarm_hostlist_read.3.html, doc/html/ja/ref/man3/gfarm_import_fragment_config_read.3.html, doc/html/ja/ref/man3/gfarm_import_fragment_size_alloc.3.html, doc/html/ja/ref/man3/gfarm_initialize.3.html, doc/html/ja/ref/man3/gfarm_stringlist_add.3.html, doc/html/ja/ref/man3/gfarm_stringlist_cat.3.html, doc/html/ja/ref/man1/gfrmdir.1.html, doc/html/ja/ref/man1/gfrun.1.html, doc/html/ja/ref/man1/gfsched.1.html, doc/html/ja/ref/man1/gfwc.1.html, doc/html/ja/ref/man1/gfwhere.1.html, doc/html/ja/ref/man3/GFARM_STRINGLIST_ELEM.3.html, doc/html/ja/ref/man1/gfmkdir.1.html, doc/html/ja/ref/man1/gfmpirun.1.html, doc/html/ja/ref/man1/gfps.1.html, doc/html/ja/ref/man1/gfrcmd.1.html, doc/html/ja/ref/man1/gfreg.1.html, doc/html/ja/ref/man1/gfrep.1.html, doc/html/ja/ref/man1/gfrm.1.html, doc/html/ja/ref/man1/digest.1.html, doc/html/ja/ref/man1/gfexport.1.html, doc/html/ja/ref/man1/gfgrep.1.html, doc/html/ja/ref/man1/gfimport_fixed.1.html, doc/html/ja/ref/man1/gfimport_text.1.html, doc/html/ja/ref/man1/gfkey.1.html, doc/html/ja/ref/man1/gfls.1.html, doc/html/en/ref/man3/gfs_rmdir.3.html, doc/html/en/ref/man3/gfs_stat.3.html, doc/html/en/ref/man3/gfs_stat_free.3.html, doc/html/en/ref/man3/gfs_unlink.3.html, doc/html/en/ref/man8/gfmd.8.html, doc/html/en/ref/man8/gfsd.8.html, doc/html/en/ref/man3/gfs_pio_set_local.3.html, doc/html/en/ref/man3/gfs_pio_set_view_index.3.html, doc/html/en/ref/man3/gfs_pio_set_view_local.3.html, doc/html/en/ref/man3/gfs_pio_ungetc.3.html, doc/html/en/ref/man3/gfs_pio_write.3.html, doc/html/en/ref/man3/gfs_readdir.3.html, doc/html/en/ref/man3/gfs_rename.3.html, doc/html/en/ref/man3/gfs_pio_getline.3.html, doc/html/en/ref/man3/gfs_pio_open.3.html, doc/html/en/ref/man3/gfs_pio_putc.3.html, doc/html/en/ref/man3/gfs_pio_putline.3.html, doc/html/en/ref/man3/gfs_pio_puts.3.html, doc/html/en/ref/man3/gfs_pio_read.3.html, doc/html/en/ref/man3/gfs_pio_seek.3.html, doc/html/en/ref/man3/gfs_opendir.3.html, doc/html/en/ref/man3/gfs_pio_close.3.html, doc/html/en/ref/man3/gfs_pio_create.3.html, doc/html/en/ref/man3/gfs_pio_eof.3.html, doc/html/en/ref/man3/gfs_pio_error.3.html, doc/html/en/ref/man3/gfs_pio_flush.3.html, doc/html/en/ref/man3/gfs_pio_getc.3.html, doc/html/en/ref/man3/gfarm_terminate.3.html, doc/html/en/ref/man3/gfarm_url_hosts_schedule.3.html, doc/html/en/ref/man3/gfs_chmod.3.html, doc/html/en/ref/man3/gfs_chown.3.html, doc/html/en/ref/man3/gfs_closedir.3.html, doc/html/en/ref/man3/gfs_mkdir.3.html, doc/html/en/ref/man1/gfrun.1.html, doc/html/en/ref/man1/gfsched.1.html, doc/html/en/ref/man1/gfwc.1.html, doc/html/en/ref/man1/gfwhere.1.html, doc/html/en/ref/man3/gfarm_initialize.3.html, doc/html/en/ref/man3/gfarm_strings_free_deeply.3.html, doc/html/en/ref/man1/gfls.1.html, doc/html/en/ref/man1/gfmpirun.1.html, doc/html/en/ref/man1/gfps.1.html, doc/html/en/ref/man1/gfrcmd.1.html, doc/html/en/ref/man1/gfreg.1.html, doc/html/en/ref/man1/gfrep.1.html, doc/html/en/ref/man1/gfrm.1.html, doc/html/en/ref/man1/digest.1.html, doc/html/en/ref/man1/gfexport.1.html, doc/html/en/ref/man1/gfgrep.1.html, doc/html/en/ref/man1/gfimport_fixed.1.html, doc/html/en/ref/man1/gfimport_text.1.html, doc/html/en/ref/man1/gfkey.1.html:
	generate from docbook

	* nstool/file/Makefile.in, man/ja/man1/Makefile, man/ja/man3/Makefile, man/ja/man5/Makefile, man/ja/man8/Makefile, man/man1/Makefile, man/man3/Makefile, man/man8/Makefile, nslib/Makefile.in, gfarmlib/Makefile.in, include/Makefile.in, lib/gfs_hook/sysdep/linux/Makefile.in, makes/config.mk.in, makes/html.mk, makes/man.mk, makes/prog.mk, makes/subdir.mk, makes/var.mk, doc/html/ja/ref/man1/Makefile, doc/html/ja/ref/man3/Makefile, doc/html/ja/ref/man5/Makefile, doc/html/ja/ref/man8/Makefile, gfarm/Makefile, gfarmd/Makefile.in, doc/html/en/ref/man1/Makefile, doc/html/en/ref/man3/Makefile, doc/html/en/ref/man8/Makefile, doc/html/ja/ref/Makefile, doc/docbook/ja/ref/man1/Makefile.inc, doc/docbook/ja/ref/man3/Makefile.inc, doc/docbook/ja/ref/man5/Makefile.inc, doc/docbook/ja/ref/man8/Makefile.inc, doc/html/en/ref/Makefile, Makefile.in, doc/Makefile, doc/docbook/en/ref/man1/Makefile.inc, doc/docbook/en/ref/man3/Makefile.inc, doc/docbook/en/ref/man8/Makefile.inc:
	add "man" and "html" target to generate them from docbook

	* doc/docbook/en/ref/man3/gfarm_strings_free_deeply.3.docbook, doc/docbook/en/ref/man3/gfarm_terminate.3.docbook, doc/docbook/en/ref/man3/gfarm_url_hosts_schedule.3.docbook, doc/docbook/en/ref/man3/gfs_chmod.3.docbook, doc/docbook/en/ref/man3/gfs_chown.3.docbook, doc/docbook/en/ref/man3/gfs_closedir.3.docbook, doc/docbook/en/ref/man3/gfs_mkdir.3.docbook, doc/docbook/en/ref/man3/gfs_opendir.3.docbook, doc/docbook/en/ref/man3/gfs_pio_close.3.docbook, doc/docbook/en/ref/man3/gfs_pio_create.3.docbook, doc/docbook/en/ref/man3/gfs_pio_eof.3.docbook, doc/docbook/en/ref/man3/gfs_pio_error.3.docbook, doc/docbook/en/ref/man3/gfs_pio_flush.3.docbook, doc/docbook/en/ref/man3/gfs_pio_getc.3.docbook, doc/docbook/en/ref/man3/gfs_pio_getline.3.docbook, doc/docbook/en/ref/man3/gfs_pio_open.3.docbook, doc/docbook/en/ref/man3/gfs_pio_putc.3.docbook, doc/docbook/en/ref/man3/gfs_pio_putline.3.docbook, doc/docbook/en/ref/man3/gfs_pio_puts.3.docbook, doc/docbook/en/ref/man3/gfs_pio_read.3.docbook, doc/docbook/en/ref/man3/gfs_pio_seek.3.docbook, doc/docbook/en/ref/man3/gfs_pio_set_local.3.docbook, doc/docbook/en/ref/man3/gfs_pio_set_view_local.3.docbook, doc/docbook/en/ref/man3/gfs_pio_ungetc.3.docbook, doc/docbook/en/ref/man3/gfs_pio_write.3.docbook, doc/docbook/en/ref/man3/gfs_readdir.3.docbook, doc/docbook/en/ref/man3/gfs_rename.3.docbook, doc/docbook/en/ref/man3/gfs_rmdir.3.docbook, doc/docbook/en/ref/man3/gfs_stat.3.docbook, doc/docbook/en/ref/man3/gfs_stat_free.3.docbook, doc/docbook/en/ref/man3/gfs_unlink.3.docbook, doc/docbook/en/ref/man8/gfmd.8.docbook, doc/docbook/en/ref/man8/gfsd.8.docbook:
	New file.

	* doc/docbook/en/ref/man3/gfarm_strings_free_deeply.3.docbook, doc/docbook/en/ref/man3/gfarm_terminate.3.docbook, doc/docbook/en/ref/man3/gfarm_url_hosts_schedule.3.docbook, doc/docbook/en/ref/man3/gfs_chmod.3.docbook, doc/docbook/en/ref/man3/gfs_chown.3.docbook, doc/docbook/en/ref/man3/gfs_closedir.3.docbook, doc/docbook/en/ref/man3/gfs_mkdir.3.docbook, doc/docbook/en/ref/man3/gfs_opendir.3.docbook, doc/docbook/en/ref/man3/gfs_pio_close.3.docbook, doc/docbook/en/ref/man3/gfs_pio_create.3.docbook, doc/docbook/en/ref/man3/gfs_pio_eof.3.docbook, doc/docbook/en/ref/man3/gfs_pio_error.3.docbook, doc/docbook/en/ref/man3/gfs_pio_flush.3.docbook, doc/docbook/en/ref/man3/gfs_pio_getc.3.docbook, doc/docbook/en/ref/man3/gfs_pio_getline.3.docbook, doc/docbook/en/ref/man3/gfs_pio_open.3.docbook, doc/docbook/en/ref/man3/gfs_pio_putc.3.docbook, doc/docbook/en/ref/man3/gfs_pio_putline.3.docbook, doc/docbook/en/ref/man3/gfs_pio_puts.3.docbook, doc/docbook/en/ref/man3/gfs_pio_read.3.docbook, doc/docbook/en/ref/man3/gfs_pio_seek.3.docbook, doc/docbook/en/ref/man3/gfs_pio_set_local.3.docbook, doc/docbook/en/ref/man3/gfs_pio_set_view_local.3.docbook, doc/docbook/en/ref/man3/gfs_pio_ungetc.3.docbook, doc/docbook/en/ref/man3/gfs_pio_write.3.docbook, doc/docbook/en/ref/man3/gfs_readdir.3.docbook, doc/docbook/en/ref/man3/gfs_rename.3.docbook, doc/docbook/en/ref/man3/gfs_rmdir.3.docbook, doc/docbook/en/ref/man3/gfs_stat.3.docbook, doc/docbook/en/ref/man3/gfs_stat_free.3.docbook, doc/docbook/en/ref/man3/gfs_unlink.3.docbook, doc/docbook/en/ref/man8/gfmd.8.docbook, doc/docbook/en/ref/man8/gfsd.8.docbook:
	man pages are now converted to SGML DocBook format.

	* doc/docbook/en/ref/man1/digest.1.docbook, doc/docbook/en/ref/man1/gfexport.1.docbook, doc/docbook/en/ref/man1/gfgrep.1.docbook, doc/docbook/en/ref/man1/gfimport_fixed.1.docbook, doc/docbook/en/ref/man1/gfimport_text.1.docbook, doc/docbook/en/ref/man1/gfkey.1.docbook, doc/docbook/en/ref/man1/gfls.1.docbook, doc/docbook/en/ref/man1/gfmpirun.1.docbook, doc/docbook/en/ref/man1/gfps.1.docbook, doc/docbook/en/ref/man1/gfrcmd.1.docbook, doc/docbook/en/ref/man1/gfreg.1.docbook, doc/docbook/en/ref/man1/gfrep.1.docbook, doc/docbook/en/ref/man1/gfrm.1.docbook, doc/docbook/en/ref/man1/gfrun.1.docbook, doc/docbook/en/ref/man1/gfsched.1.docbook, doc/docbook/en/ref/man1/gfwc.1.docbook, doc/docbook/en/ref/man1/gfwhere.1.docbook, doc/docbook/en/ref/man3/gfarm_initialize.3.docbook, doc/docbook/en/ref/man3/gfs_pio_set_view_index.3.docbook, doc/docbook/ja/ref/man1/digest.1.docbook, doc/docbook/ja/ref/man1/gfexport.1.docbook, doc/docbook/ja/ref/man1/gfgrep.1.docbook, doc/docbook/ja/ref/man1/gfimport_fixed.1.docbook, doc/docbook/ja/ref/man1/gfimport_text.1.docbook, doc/docbook/ja/ref/man1/gfkey.1.docbook, doc/docbook/ja/ref/man1/gfls.1.docbook, doc/docbook/ja/ref/man1/gfmkdir.1.docbook, doc/docbook/ja/ref/man1/gfmpirun.1.docbook, doc/docbook/ja/ref/man1/gfps.1.docbook, doc/docbook/ja/ref/man1/gfrcmd.1.docbook, doc/docbook/ja/ref/man1/gfreg.1.docbook, doc/docbook/ja/ref/man1/gfrep.1.docbook, doc/docbook/ja/ref/man1/gfrm.1.docbook, doc/docbook/ja/ref/man1/gfrmdir.1.docbook, doc/docbook/ja/ref/man1/gfrun.1.docbook, doc/docbook/ja/ref/man1/gfsched.1.docbook, doc/docbook/ja/ref/man1/gfwc.1.docbook, doc/docbook/ja/ref/man1/gfwhere.1.docbook, doc/docbook/ja/ref/man3/GFARM_STRINGLIST_ELEM.3.docbook, doc/docbook/ja/ref/man3/GFARM_STRINGLIST_STRARRAY.3.docbook, doc/docbook/ja/ref/man3/gfarm_hostlist_read.3.docbook, doc/docbook/ja/ref/man3/gfarm_import_fragment_config_read.3.docbook, doc/docbook/ja/ref/man3/gfarm_import_fragment_size_alloc.3.docbook, doc/docbook/ja/ref/man3/gfarm_initialize.3.docbook, doc/docbook/ja/ref/man3/gfarm_stringlist_add.3.docbook, doc/docbook/ja/ref/man3/gfarm_stringlist_cat.3.docbook, doc/docbook/ja/ref/man3/gfarm_stringlist_elem.3.docbook, doc/docbook/ja/ref/man3/gfarm_stringlist_free.3.docbook, doc/docbook/ja/ref/man3/gfarm_stringlist_init.3.docbook, doc/docbook/ja/ref/man3/gfarm_stringlist_length.3.docbook, doc/docbook/ja/ref/man3/gfarm_strings_free_deeply.3.docbook, doc/docbook/ja/ref/man3/gfarm_terminate.3.docbook, doc/docbook/ja/ref/man3/gfarm_url_fragments_replicate.3.docbook, doc/docbook/ja/ref/man3/gfarm_url_hosts_schedule.3.docbook, doc/docbook/ja/ref/man3/gfarm_url_program_deliver.3.docbook, doc/docbook/ja/ref/man3/gfarm_url_program_register.3.docbook, doc/docbook/ja/ref/man3/gfarm_url_section_replicate_from_to.3.docbook, doc/docbook/ja/ref/man3/gfarm_url_section_replicate_to.3.docbook, doc/docbook/ja/ref/man3/gfs_chmod.3.docbook, doc/docbook/ja/ref/man3/gfs_chown.3.docbook, doc/docbook/ja/ref/man3/gfs_closedir.3.docbook, doc/docbook/ja/ref/man3/gfs_mkdir.3.docbook, doc/docbook/ja/ref/man3/gfs_opendir.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_close.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_create.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_eof.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_error.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_flush.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_getc.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_getline.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_open.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_putc.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_putline.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_puts.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_read.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_seek.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_set_local.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_set_view_index.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_set_view_local.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_ungetc.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_write.3.docbook, doc/docbook/ja/ref/man3/gfs_readdir.3.docbook, doc/docbook/ja/ref/man3/gfs_rename.3.docbook, doc/docbook/ja/ref/man3/gfs_rmdir.3.docbook, doc/docbook/ja/ref/man3/gfs_stat.3.docbook, doc/docbook/ja/ref/man3/gfs_stat_free.3.docbook, doc/docbook/ja/ref/man3/gfs_unlink.3.docbook, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man8/gfmd.8.docbook, doc/docbook/ja/ref/man8/gfsd.8.docbook:
	New file.

	* doc/docbook/en/ref/man1/digest.1.docbook, doc/docbook/en/ref/man1/gfexport.1.docbook, doc/docbook/en/ref/man1/gfgrep.1.docbook, doc/docbook/en/ref/man1/gfimport_fixed.1.docbook, doc/docbook/en/ref/man1/gfimport_text.1.docbook, doc/docbook/en/ref/man1/gfkey.1.docbook, doc/docbook/en/ref/man1/gfls.1.docbook, doc/docbook/en/ref/man1/gfmpirun.1.docbook, doc/docbook/en/ref/man1/gfps.1.docbook, doc/docbook/en/ref/man1/gfrcmd.1.docbook, doc/docbook/en/ref/man1/gfreg.1.docbook, doc/docbook/en/ref/man1/gfrep.1.docbook, doc/docbook/en/ref/man1/gfrm.1.docbook, doc/docbook/en/ref/man1/gfrun.1.docbook, doc/docbook/en/ref/man1/gfsched.1.docbook, doc/docbook/en/ref/man1/gfwc.1.docbook, doc/docbook/en/ref/man1/gfwhere.1.docbook, doc/docbook/en/ref/man3/gfarm_initialize.3.docbook, doc/docbook/en/ref/man3/gfs_pio_set_view_index.3.docbook, doc/docbook/ja/ref/man1/digest.1.docbook, doc/docbook/ja/ref/man1/gfexport.1.docbook, doc/docbook/ja/ref/man1/gfgrep.1.docbook, doc/docbook/ja/ref/man1/gfimport_fixed.1.docbook, doc/docbook/ja/ref/man1/gfimport_text.1.docbook, doc/docbook/ja/ref/man1/gfkey.1.docbook, doc/docbook/ja/ref/man1/gfls.1.docbook, doc/docbook/ja/ref/man1/gfmkdir.1.docbook, doc/docbook/ja/ref/man1/gfmpirun.1.docbook, doc/docbook/ja/ref/man1/gfps.1.docbook, doc/docbook/ja/ref/man1/gfrcmd.1.docbook, doc/docbook/ja/ref/man1/gfreg.1.docbook, doc/docbook/ja/ref/man1/gfrep.1.docbook, doc/docbook/ja/ref/man1/gfrm.1.docbook, doc/docbook/ja/ref/man1/gfrmdir.1.docbook, doc/docbook/ja/ref/man1/gfrun.1.docbook, doc/docbook/ja/ref/man1/gfsched.1.docbook, doc/docbook/ja/ref/man1/gfwc.1.docbook, doc/docbook/ja/ref/man1/gfwhere.1.docbook, doc/docbook/ja/ref/man3/GFARM_STRINGLIST_ELEM.3.docbook, doc/docbook/ja/ref/man3/GFARM_STRINGLIST_STRARRAY.3.docbook, doc/docbook/ja/ref/man3/gfarm_hostlist_read.3.docbook, doc/docbook/ja/ref/man3/gfarm_import_fragment_config_read.3.docbook, doc/docbook/ja/ref/man3/gfarm_import_fragment_size_alloc.3.docbook, doc/docbook/ja/ref/man3/gfarm_initialize.3.docbook, doc/docbook/ja/ref/man3/gfarm_stringlist_add.3.docbook, doc/docbook/ja/ref/man3/gfarm_stringlist_cat.3.docbook, doc/docbook/ja/ref/man3/gfarm_stringlist_elem.3.docbook, doc/docbook/ja/ref/man3/gfarm_stringlist_free.3.docbook, doc/docbook/ja/ref/man3/gfarm_stringlist_init.3.docbook, doc/docbook/ja/ref/man3/gfarm_stringlist_length.3.docbook, doc/docbook/ja/ref/man3/gfarm_strings_free_deeply.3.docbook, doc/docbook/ja/ref/man3/gfarm_terminate.3.docbook, doc/docbook/ja/ref/man3/gfarm_url_fragments_replicate.3.docbook, doc/docbook/ja/ref/man3/gfarm_url_hosts_schedule.3.docbook, doc/docbook/ja/ref/man3/gfarm_url_program_deliver.3.docbook, doc/docbook/ja/ref/man3/gfarm_url_program_register.3.docbook, doc/docbook/ja/ref/man3/gfarm_url_section_replicate_from_to.3.docbook, doc/docbook/ja/ref/man3/gfarm_url_section_replicate_to.3.docbook, doc/docbook/ja/ref/man3/gfs_chmod.3.docbook, doc/docbook/ja/ref/man3/gfs_chown.3.docbook, doc/docbook/ja/ref/man3/gfs_closedir.3.docbook, doc/docbook/ja/ref/man3/gfs_mkdir.3.docbook, doc/docbook/ja/ref/man3/gfs_opendir.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_close.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_create.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_eof.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_error.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_flush.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_getc.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_getline.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_open.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_putc.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_putline.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_puts.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_read.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_seek.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_set_local.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_set_view_index.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_set_view_local.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_ungetc.3.docbook, doc/docbook/ja/ref/man3/gfs_pio_write.3.docbook, doc/docbook/ja/ref/man3/gfs_readdir.3.docbook, doc/docbook/ja/ref/man3/gfs_rename.3.docbook, doc/docbook/ja/ref/man3/gfs_rmdir.3.docbook, doc/docbook/ja/ref/man3/gfs_stat.3.docbook, doc/docbook/ja/ref/man3/gfs_stat_free.3.docbook, doc/docbook/ja/ref/man3/gfs_unlink.3.docbook, doc/docbook/ja/ref/man5/gfarm.conf.5.docbook, doc/docbook/ja/ref/man8/gfmd.8.docbook, doc/docbook/ja/ref/man8/gfsd.8.docbook:
	man pages are now converted to SGML DocBook format.

2003-03-17  Noriyuki Soda  <soda@sra.co.jp>

	* INSTALL.en, INSTALL.ja:
	- run gfmd and gfsd with the root privilage in examples.
	- note that slapd also requires root privilege in this example,
	  because the port number is less than 1024.
	- s/<ARCH>/<OS>/
	- correct directory name of start up script in japanese version.

	* INSTALL.ja: standardize punctuation

	* INSTALL.en, INSTALL.ja:
	remove "in the C shell" from an example which isn't really csh dependent now
	(except its prompt, but "%" may mean zsh, even.).

2003-03-14  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmlib/gfs_pio_misc.c (gfs_access):
	if the gfarm_url is an executable, does not check the number of fragment.

	* gfarmlib/gfs_pio_misc.c (gfs_access):
	Added a check whether a file can be accessable by other processes or not.

	* gfsd/main.c (gfs_server_digest): Plugged a memory leak.

2003-03-13  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmlib/gfs_pio.c (gfs_pio_seek):
	Fixed a bug such that gfs_pio_seek(SEEK_CUR) does not work when the file offset will be repositioned beyond the current io buffer.

2003-03-07  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfrm/gfrm.c: Implemented metacharacter expansion in arguments.

2003-03-06  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfls/gfls.c: add more clarification

	* gftool/gfls/gfls.c:
	fix a comment which tells a lie, pointed out by sotoyama-san.

2003-03-04  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gfarmlib/schedule.c, gfarmlib/schedule.h:
	Added gfarm_schedule_search_idle_by_all().

	* gfarmlib/gfs_pio_section.c:
	Implemented selecting another host if it is impossible to creating a file
	fragment on self host.

2003-02-28  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* bench/thput-fsys/thput-fsys.c, bench/thput-gfpio/thput-gfpio.c, bench/thput-pvfs/thput-pvfs.c:
	Replaced assert() with if statement.
	thput-gfpio.c: Removed an obsolete -S option.
	thput-gfpio.c: read or copy each entire file fragment with no -s <size> option.

2003-02-26  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* INSTALL.en, INSTALL.ja:
	Added a description about a path name of core.schema in slapd.conf.

2003-02-24  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* bench/thput-fsys/thput-fsys.c, bench/thput-gfpio/thput-gfpio.c:
	With the -m option, measure total time of write or read operation.

	* lib/gfs_hook/hooks.c:
	Commented a hook entry out for mmap() because it causes segfault while loading a shared library on i386 platform.

2003-02-21  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfls/gfls.c: remove ugly "XXX<directory-name>" warning,
	because an error message will be displayed anyway.

	* lib/gfs_hook/hooks.c: port to NetBSD again

	* gfarmlib/Makefile.in, makes/var.mk: update dependency information

2003-02-21  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* include/gfs.h: Moved glob function's declaration to gfs_glob.h.

	* include/gfarm_misc.h: Added gfarm url prefix declaration.

	* gfarmlib/glob.c, include/gfs_glob.h:
	Moved macro definitions from gfs_glob.h to glob.c.
	They are refered from functions in glob.c.

	* gftool/gfls/gfls.c, include/gfs_glob.h:
	rename type & function name gfarm_glob_* -> gfs_glob_*

	* gfarmlib/url.c:
	Added gfarm url string definition and a function skips gfarm url.

	* gfarmlib/gfs_dir.c, gfarmlib/glob.c:
	Moved functoins handle gfs_glob_t from gfs_dir.c to glob.c.

2003-02-21  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/gfm_client.c: - fix a memory leak
	- correct a case when an invalid job id is specified by a caller.

2003-02-21  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* lib/gfs_hook/hooks_64.c: Retrun to revision 1.6.

	* lib/gfs_hook/hooks.c: Retrunt to revision 1.17.

	* gfsd/main.c: Return to revision 1.45.

	* include/gfarm.h, lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_64.c, gfsd/main.c:
	Moved inclusion gfarm_stringlist.h, gfs_glob.h from include/gfs.h.

	* include/gfs_glob.h: Moved from include/gfarm_glob.h.

	* include/gfarm_glob.h: Moved include/gfs_glob.h.

2003-02-21  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfls/gfls.c: remove unnecessary code

2003-02-20  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/gfs_dir.c:
	implement free_node() for directory tree cache of client side.

	* gfarmlib/hash.c: implement gfarm_hash_table_free()

	* package/redhat/gfmd, package/redhat/gfsd:
	use installation directory which is described in the gfarm.spec file.
	use more appropriate start/stop priority

	* package/redhat/gfarm-slapd:
	use the LDAP port number described in INSTALL.{en,ja}
	use more appropriate start/stop priority

2003-02-20  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gfarmlib/gfs_dir.c: Fixed gfs_getcwd() scope error.

	* gfarmlib/gfs_dir.c, gfarmlib/gfs_pio.c, gfarmlib/gfs_pio_misc.c, gfarmlib/gfs_unlink.c, gfarmlib/glob.c, gfarmlib/stringlist.c, gftool/gfls/gfls.c:
	Moved functions from gfls.c into some files for archiving into library.

	* gfarmlib/Makefile.in:
	Added names splitted files from gftool/gfls/gfls.c

	* include/gfarm_glob.h:
	Moved typedef gfarm_dtypelist and macro defifinitions from gftool/gfls/gfls.c
	and changed it's name.
	Added the declarations of functions handles gfarm_glob_t.

	* include/gfarm_stringlist.h:
	Moved typedef gfarm_stringlist and functions from include/gfarm_misc.h.

	* include/gfarm_misc.h:
	Moved the type definition of gfarm_stringlist and the declaration of
	functions handle it.

	* include/gfs.h:
	Added gfs_glob() and gfs_uncachedir()'s declaration because some functions
	in gftool/gfls.c were moved to gfarmlib/gfs_dir.c.

	* gfarmlib/schedule.c: gfarm_file_section_host_schedule():
	  Fixed a error in testing memory allocation result.

2003-02-20  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrun/gfrun.c:
	Added -o and -e options for specifying stdout and stderr gfarm files, respectively.
	If stdout or stderr file is not correctly registered, try to do using gfarm:/bin/gfsplck.
	If both -G and -H are not specified and there is no gfarm input file, try to run on appropreate nodes although the local node is always chosen by this revision.
	If a remote program is not a gfarm file, do not add any gfarm specific arguments like --gfarm_index and --gfarm_nfrags.

	usage: gfrun -o gfarm:out -e gfarm:err gfarm:program . . .

	* gfarmlib/gfj_client.h, gfarmlib/gfm_client.c, gfmd/gfmd.c:
	gfm_client.c (gfj_client_info): Fixed a bug.
	Fixed a spelling miss.

2003-02-19  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmlib/gfs_pio_misc.c, gfptool/gfsplck/gfsplck.c:
	gfs_pio_misc.c (gfs_pio_set_fragment_info_local): Eliminated a symlink code.  Fixed a check sum checking code.
	gfsplck.c: Added -a and -d options.  The -a option checks filesystem metadata even if its section copy info is registered.  Thd -d option deletes files having invalid filesystem metadata.
	Plugged a memory leak.

2003-02-18  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gfarmlib/schedule.c: gfarm_schedule_search_idle_hosts():
	  - Changed name from "gfarm_schedule_search_idle_new"

	gfarm_schdeule_search_idle():
	  - Changed return value from strcut gfarm_file_section_copy_info array's
	    index to error message string.
	  - Added 3'rd output argument that points to host name strings.
	  - Calls gfarm_schedule_search_idle_hosts()

	* gfarmlib/gfs_pio_misc.c, gfarmlib/schedule.h: Changed function name:
	gfarm_schedule_search_idle_new() -> gfarm_schedule_search_idle_hosts()

2003-02-18  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks.c:
	Just added an entry of mmap to check this is called or not by linking with gfs_hook_debug.o

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_fstat.c, lib/gfs_hook/hooks_stat.c (__stat):
	Filled st_uid, st_gid, and st_nlink.
	(__dup2): Added a check whether SYS_dup2 is defined or not.

	* gfarmlib/gfs_pio_misc.c, gfptool/gfsplck/gfsplck.c (gfs_pio_set_fragment_info_local):
	Changed the second argument from gfarm_url to gfarm_file.
	(gfs_pio_set_fragment_info_local): Added a check about filesystem metadata consistency.
	(gfsplck): Gfarm directories or files can be specified by command-line arguments.

2003-02-17  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/gfs_pio_misc.c: plug a memory leak of gfs_access()

2003-02-17  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gfarmlib/gfs_pio_misc.c: back to revision 1.20 temporarily.

	* gfarmlib/schedule.h: back to revision 1.2 temporarily.

	* gfarmlib/schedule.c: back to revision 1.11 temporarily.

	* gfarmlib/gfs_pio_misc.c, gfarmlib/schedule.c, gfarmlib/schedule.h:
	Changed name of the function gfarm_schedule_search_idle_new()

2003-02-17  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog: Catched up with the current ChangeLog.

	* README.hook.en: README file for gfs_hook libraries.

	* lib/gfs_hook/hook_test.c, lib/gfs_hook/hooks.c (__access):
	use gfs_access().

	* gfarmlib/gfs_pio.h, gfarmlib/gfs_pio_misc.c, include/gfs.h:
	Added gfs_access().

	* lib/gfs_hook/hook_test.c, lib/gfs_hook/hooks_fstat.c:
	Fixed a type mismatch of a debug message.

	* lib/gfs_hook/hooks.c: Added a hook entry for execve.

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h:
	Added a hook entry for dup2().

2003-02-16  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmlib/gfs_pio_section.c (gfs_pio_view_section_close):
	Fixed a bug such that file size in filesystem metadata is not correct when file offset is not set to the last of the file.

2003-02-14  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_fstat.c: Use gfs_fstat().

	* gfarmlib/gfs_pio_misc.c, gfarmlib/gfs_pio_section.c, gfarmlib/gfs_pio.h, gfarmlib/gfs_pio_default.c, gfarmlib/gfs_pio_global.c, include/gfs.h:
	Added gfs_fstat().
	gfs_pio_misc.c (gfs_stat_section): Plugged a memory leak.

2003-02-14  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gfarmlib/gfs_pio_misc.c: - fixed memory leak.
	- returns error when #replied hosts < #requested hosts

2003-02-14  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hook_test.c: Just fixed a typo.

2003-02-14  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gfarmlib/schedule.c:
	Fixed bug gfreg faults. In previous revision, freed area not allocated.

2003-02-14  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmlib/gfs_unlink.c:
	Even when deletion of some file fragments fails, delete the section information when there is no section copy information.

	* lib/gfs_hook/hook_test.c:
	Don't display user name and group name since both uid and gid are not obtained by gfs_stat().

	* gfptool/gfcp/gfcp.c: Added a missing header file.

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_64.c, lib/gfs_hook/hooks_stat.c (__stat, __lstat):
	use gfs_stat, gfs_stat_section, or gfs_stat_index depending on the sitution.

	* gfarmlib/gfs_pio_misc.c, include/gfs.h:
	Added new functions: gfs_stat_section() and gfs_stat_index().

	* gfarmlib/gfs_unlink.c:
	Clean up collapsed filesystem metadata that does not have any section copy information.

	* gfarmlib/gfs_unlink.c, gfarmlib/metadb_ldap.c, include/gfarm_metadb.h:
	When removing all file replicas, remove the section information also.

	* gfarmlib/gfs_unlink.c, gftool/gfrm/gfrm.c, include/gfs.h:
	Added the -f option.  With -f option, delete file fragments even if they are the last fragments.

	* lib/gfs_hook/hooks_64.c:
	Deleted an entry of _IO_file_seek to avoid duplicate definition when compiling statically.
	According to the ChangeLog of glibc, even __open, __close, __write, and __read cannot be hooked whenever they are called within the glibc library after the change at August 2, 2002.  The only way to hook them seems to be a static compilation.

2003-02-13  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfreg/gfreg.c: Initial support for a directory destination.
	XXX - Since gfs_stat() cannot work correctly for a directory at this time, there is an ad hoc code to check it.

	* INSTALL.en, INSTALL.ja:
	Updated the description; make gfregister, sign-on, and import from a group of files.

	* gftool/gfreg/Makefile: include gfptool.mk instead of prog.mk.

	* man/man8/gfmd.8, man/man8/gfsd.8, man/ja/man8/gfmd.8, man/ja/man8/gfsd.8:
	Added the description how to execute as a user process.

	* man/ja/man5/gfarm.conf.5: Fixed a typo.

2003-02-10  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/example/gfimport_fixed/gfimport_fixed.c, gftool/example/gfimport_text/gfimport_text.c:
	fix longstanding bugs. found by sotoyama-san's test case.

2003-02-10  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gfarmlib/gfs_pio_misc.c, gfarmlib/schedule.c, gfarmlib/schedule.h:
	Added gfarm_schedule_search_idle_new() to schedule.c that searches near hosts using functions defined in gfs_client_udp.c.

2003-02-07  Noriyuki Soda  <soda@sra.co.jp>

	* makes/gfptool.mk, makes/man.mk, makes/prog.mk, makes/subdir.mk, nslib/Makefile.in, nstool/file/Makefile.in, gfarm/Makefile, gfarmd/Makefile.in, gfarmlib/Makefile.in, include/Makefile.in, lib/gfs_hook/Makefile.in, lib/gfs_hook/sysdep/linux/Makefile.in:
	make "make gfregister" work recursively from the top directory

2003-02-07  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* gftool/gfreg/gfreg.c:
	When going "gfreg foo gfarm:", the previous version create blank file name gfarm file.
	In this case, create gfarm:foo assumed as "foo".

2003-02-06  Noriyuki Soda  <soda@sra.co.jp>

	* INSTALL.en, INSTALL.ja, debian/rules, makes/var.mk:
	move example binaries from $(prefix)/bin/example/ to $(prefix)/bin/

	* makes/gfptool.mk: do not call "gfreg" at "make install", because:
	- it is impossible to make gfarm binary package (e.g. rpm, deb) with that way.
	- it is inconsistent with our current INSTALL.* document.
	  (Our installation document says that gfmd and gfsd should be run
	   after "make install").
	add "make gfregister" target for "gfreg".

2003-02-06  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* man/ja/man3/gfs_pio_create.3, man/ja/man3/gfs_pio_open.3, man/man3/gfs_pio_create.3, man/man3/gfs_pio_open.3:
	GFS_FILE_RDONLY should be GFARM_FILE_RDONLY.

	* gfarmlib/config.c:
	Added redirection feature of stdout and stderr to a gfarm file.
	XXX - This redirection relys on the current implementation of local storage manupulation and check-sum calculation.
	XXX - When gfarm_terminate() is not called, a redirected gfarm file will not be a complete file, although can be fixed by gfrun.
	usage: prog --gfarm_index <index> --gfarm_nfrags <nfrags> --gfarm_stdout gfarm:out --gfarm_stderr gfarm:err

2003-02-05  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hook_test.c: Added gfarm_terminate().

	* lib/gfs_hook/hooks_fstat.c: Eliminated compiler warnings.

	* lib/gfs_hook/hooks_subr.c: Added a comment.
	Changed debug messages slightly.

	* lib/gfs_hook/hooks_fstat.c: Fixed a compile error.

	* lib/gfs_hook/sysdep/linux/Makefile.in, lib/gfs_hook/sysdep/linux/fxstat.c, lib/gfs_hook/sysdep/linux/fxstat64.c, lib/gfs_hook/sysdep/linux/lxstat.c, lib/gfs_hook/sysdep/linux/lxstat64.c, lib/gfs_hook/sysdep/linux/xstat64.c, lib/gfs_hook/Makefile.in, lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_64.c, lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_fstat.c, lib/gfs_hook/hooks_stat.c:
	Added lstat and fstat hooks.

2003-02-04  Noriyuki Soda  <soda@sra.co.jp>

	* gfsd/main.c: add more comments about the race condition.

	* gfsd/main.c:
	Fix a race condition that SIGCHLD is delivered just before select(2)
	in gfs_server_command_io(). If this happens, gfsd waits forever at
	the select(2). Problem reported by naotaka-san.

2003-02-03  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hook_test.c, lib/gfs_hook/hooks_common.c:
	Changed a behavior for hooking the open syscall.
	If the number of fragments is not the same as the number of parallel processes, do not change to the local file view.

	* lib/gfs_hook/hooks_init.c, lib/gfs_hook/hooks_init_mpi.c:
	Fixed a compile error.

2003-02-02  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/hooks_init.c, lib/gfs_hook/hooks_init_mpi.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h:
	declare gfs_hook_initialize() in hooks_subr.h

	* lib/gfs_hook/hooks_64.c: - hook _IO_file_seek() on linux,
	  otherwise __llseek() called by _IO_file_seek() cannot be hooked,
	  probably because of symbol versioning reason.
	  XXX - it is better to find cleaner way...
	- hook llseek()
	- hook __libc_lseek64() on linux

	* lib/gfs_hook/Makefile.in: add some missing dependency.
	fix a problem that -DDEBUG wasn't passed for hooks_64.do.

	* lib/gfs_hook/hook_test.c:
	unbuffer stdout to make the output sync with truss/strace even if redirected

	* include/gfs_hook.h, lib/gfs_hook/hooks_subr.c: do not hook fseek()

2003-02-01  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfhost/gfhost.c:
	Fixed a segfault when the -D option is not specified.

	* gfarmlib/auth_server.c:
	Fixed a bug of a log message when the authentication fails.

	* include/Makefile.in:
	Even if removing symlinks fail, continue to 'make'.

	* gftool/gfreg/gfreg.c:
	Modified an error message for the resistration failure.

	* gftool/gfhost/gfhost.c, gfarmlib/metadb_ldap.c, include/gfarm_metadb.h:
	Added the -a <architecture> option and -D <domainname> option for listing hosts.
	The -D option to dump the filesystem node information is replaced with the -M option.

	* include/gfs_hook.h:
	fstat() can be hooked by lstat() on at least a solaris platform.

	* lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_init.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h, lib/gfs_hook/Makefile.in, lib/gfs_hook/hook_test.c, lib/gfs_hook/hook_test_mpi.c, lib/gfs_hook/hooks.c:
	Added test programs for syscall hooking, which are generated by 'make test' or 'make mpitest'.
	More quiet debug messages when linking gfs_hook_debug.o or gfs_hook_mpi_debug.o.
	Added hook functions for unlink and _unlink.

2003-01-31  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* include/gfs_hook.h, lib/gfs_hook/hooks_subr.c:
	Added gfs_fseek_hook().

	* Makefile.in: Added gfptool.

2003-01-30  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* makes/gfptool.mk, gftool/example/Makefile, gfptool/gfsplck/gfsplck.c, gfptool/gfwc/Makefile, gfptool/gfwc/gfwc.c, gfptool/gfcp_hook/Makefile, gfptool/gfcp_hook/gfcp_hook.c, gfptool/gfgrep/Makefile, gfptool/gfgrep/gfgrep.c, gfptool/gfsplck/Makefile, gfptool/gfcombine/gfcombine.c, gfptool/gfcombine_hook/Makefile, gfptool/gfcombine_hook/gfcombine_hook.c, gfptool/gfcp/Makefile, gfptool/gfcp/gfcp.c, bench/thput-gfpio/Makefile, gfptool/Makefile, gfptool/gfcombine/Makefile:
	Moved gfarm parallel tools to a new location, gfptool.

	* gfarmlib/config.c:
	Fixed a problem such that gfsd and gfmd result in segfault.

	* gfarmlib/config.c:
	When a client node is also a filesystem node, try to obtain gfarm_spool_root by locally-running gfsd instead of the default path.

2003-01-30  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/error.c:
	try to avoid a compilation error reported by yamamoto-san

2003-01-29  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_common.c:
	Fixed a problem such that a program whose fopen("w") is hooked creates an incomplete Gfarm file.

	* INSTALL.en, INSTALL.ja:
	Catched up with the modification of command-line arguments of gfhost.

2003-01-28  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/gfs_client_udp.c: - remove obsolete code fragments.
	- add missing "static" for an internal function.
	- do not output anything to stderr in a library function.

	* gfarmlib/error.c:
	use strerror() if linux && glibc>=3.2, to shut up the following warnings
	on RedHat-8.0:
	`sys_errlist' is deprecated; use `strerror' or `strerror_r' instead
	`sys_nerr' is deprecated; use `strerror' or `strerror_r' instead

	XXX - perhaps it's time to switch traditional error number scheme?

	* gftool/gfhost/gfhost.c:
	change meanings of some options as discussed with tatebe-san.
	(default):	list with long format	->	list hosts which are up
	-l:		dump metadb		->	list with long format
	-u:		list hosts which are up	->	<not used>
	-L:		list load average	->	sort by load average
	-r:		register/restore metadb	->	reverse order sort
	-D:		<not used>		->	dump metadb
	-H:		<not used>		->	list load average
	-R:		<not used>		->	register/restore metadb

2003-01-28  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gfarmlib/gfs_client_udp.c: fix warning at compile on linux.

2003-01-28  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfhost/gfhost.c:
	just a cosmetic fix: do not access uninitialized variable.

	* gftool/gfhost/gfhost.c: portability fix:
	<sys/socket.h> is needed for AF_INET and struct sockaddr,
	although compilation doesn't fail on linux.

	* gftool/gfhost/gfhost.c: fix warning at compile on linux.

2003-01-28  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* man/ja/man1/gfreg.1, man/man1/gfreg.1: Updated the description.

	* gftool/gfkey/gfkey.c: Added a missing include file.

	* gfarmd/gfd_cmd.y, gfarm/cmd.y: Added a missing semicolon.

	* gfarmlib/hostspec.h, gfarmlib/metadb_ldap.c, gfarmlib/param.c, gfarmlib/param.h, gfarmlib/sockopt.c, gfarmlib/sockopt.h, gfarmlib/url.c, gfarmlib/gfs_client.c, gfarmlib/gfs_client.h, gfarmlib/gfs_pio.c, gfarmlib/gfs_pio.h, gfarmlib/gfs_pio_default.c, gfarmlib/gfs_pio_global.c, gfarmlib/gfs_pio_local.c, gfarmlib/gfs_pio_misc.c, gfarmlib/gfs_pio_remote.c, gfarmlib/gfs_pio_section.c, gfarmlib/host.c, gfarmlib/hostspec.c, gfarmlib/error.c, include/gfarm_error.h, include/gfarm_metadb.h, include/gfarm_misc.h, include/gfs.h:
	Eliminated warnings related to the const qualifier.

	* gftool/gfreg/gfreg.c: Fixed typo.
	Try to determine index and nfrags using gfs_pio_get_node_{rank,size}.

2003-01-27  Naotaka Yamamoto  <naotaka@ni.aist.go.jp>

	* gftool/gfreg/gfreg.c: vailable -h option to specify hostname.
	change usage()

2003-01-27  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfsched/gfsched.c, man/ja/man1/Makefile, man/ja/man1/gfsched.1, man/man1/Makefile, man/man1/gfsched.1:
	Added a manual page for gfsched.

	* man/ja/man1/gfrm.1, man/man1/gfrm.1:
	Added the description about the -h option.

	* gftool/gfrm/gfrm.c:
	'gfrm -h hostname gfarm_url' removes file replicas of gfarm_url on hostname.

	* gfarmlib/Makefile.in, gfarmlib/gfs_pio_misc.c, gfarmlib/gfs_unlink.c, include/gfs.h:
	gfs_unlink() and gfs_unlink_section_replica() are moved to gfs_unlink.c.
	gfs_unlink_replicas_on_host() is added to remove file replicas of a file on a specific filesystem node.

	* gfsd/main.c:
	Reverted to the version 1.41.  Without a connection to a meta server, it is not possible to replicate a binary executable before execution.

2003-01-24  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmlib/Makefile.in, gfarmlib/gfs_exec.c, include/gfs.h, gfsd/main.c:
	Added a new function, gfs_execve, to execute a Gfarm file.
	XXX - no test yet.

2003-01-23  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmlib/auth_client_gsi.c:
	Changed the default gfarm-usermap file to /etc/grid-security/grid-mapfile.

	* gfarmlib/gfs_pio_misc.c (gfarm_url_fragments_replicate):
	When the number of destination filesystem nodes is not the same as the number of source filesystem nodes, the hostlist of destination nodes will be expanded in a cyclic manner.  Before this revison, it is errorous.

2003-01-22  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gftool/gfhost/gfhost.c:
	moved load average handling functions to gfarmlib/gfs_client_udp.c

	* gfarmlib/gfs_client_udp.c:
	moved load average handliing functions from gftool/gfhost/gfhost.c

	* gfarmlib/gfs_client.h:
	moved load average handling functions from gftool/gfhost/gfhost.c

	* gfarmlib/Makefile.in:
	mov load average handling functions from gftool/gfhost/gfhost.c

2003-01-22  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog: Catched up with the current ChangeLog.

	* man/ja/man1/gfwhere.1, man/man1/gfwhere.1:
	Added the description of the -I option.

	* gftool/gfwhere/gfwhere.c:
	Added the -I option for specifying an individual file fragment.
	XXX - need to improve the readability of the code.

2003-01-21  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/example/gfcp/gfcp.c:
	Fixed a bug related to parsing command-line arguments introduced by the revision 1.3.

2003-01-20  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* bench/thput-gfpio/thput-gfpio.c (thput-gfpio.c):
	Catched up with the change of behavior of gfarm_initialize().

	* gftool/gfwhere/gfwhere.c: Display usage when no file is specified.

	* gfarmlib/config.c, gftool/gfrun/gfrun.c:
	Changed command-line argument names added by gfrun from -I and -N to --gfarm_index and --gfarm_nfrags, respectively.
	These arguments will be parsed and eliminated by gfarm_initialize().

2003-01-19  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm.spec: japanese manual page for gfarm.conf

	* man/ja/Makefile, man/ja/man5/Makefile, man/ja/man5/gfarm.conf.5:
	manual page for gfarm.conf

	* INSTALL.en, INSTALL.ja:
	use "example.com" rather than "hpcc.jp" for examples.
	use port 389 (official port number for LDAP) rather than 9000 for LDAP service.

2003-01-16  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfreg/gfreg.c:
	Fixed a functionality to register a file fragment.

	* gfarmlib/config.c, gfarmlib/gfs_pio_local.c (gfs_pio_set_local):
	Added a range check for fragment index.

	* gfarmlib/gfs_pio_section.c (gfs_pio_set_view_index):
	Added a range check for fragment_index.

2003-01-10  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/Makefile.in:
	Fixed an installation error when gfs_hook_mpi.o is missing.

	* lib/gfs_hook/Makefile.in:
	Fixed a target name because of a name conflict.

2003-01-10  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/config.c: fix compilation error

2003-01-10  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/Makefile.in, lib/gfs_hook/hooks_init.c, lib/gfs_hook/hooks_init_mpi.c, lib/gfs_hook/hooks_subr.c:
	Added gfs_hook_mpi.o for MPI programs.
	Since gfarm_initialize() is automatically called, any change of source code is not necessary to utilize gfarm filesystem.

	* gfarmlib/config.c: *** empty log message ***

	* configure, configure.in:
	When --with-mpi is specified without a withval, MPICC is defined as mpicc.

	* configure, configure.in:
	Modified globus_gssapi_libs for Globus Toolkit 2.2.2.

2002-12-26  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/example/gfcombine_hook/gfcombine_hook.c, gftool/example/gfcp/gfcp.c, gftool/example/gfgrep/gfgrep.c, gfarmlib/config.c, gftool/example/gfcombine/gfcombine.c:
	config.c (gfarm_initialize): This function eliminates -I and -N options added by gfrun from the argument list and calls gfs_pio_set_local().
	Now, gfarm applications are not necessary to call gfs_pio_set_local() explicitly.

	* gftool/addsec/addsec.c:
	Changed the default prefix 'gfarm:/' to 'gfarm:'.
	This assumes this command is executed in the home directory of the gfarm spool not in the top directory.

	* gfarmlib/gfs_pio_local.c, include/gfs.h:
	Added gfs_pio_get_node_rank() and gfs_pio_get_node_size().

2002-12-16  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/example/gfcp/gfcp.c: Fixed a fatal typo, strcmp vs strcpy.

2002-12-09  Yasuhito Takamiya  <takamiya@matsulab.is.titech.ac.jp>

	* debian/changelog, debian/control, debian/gfarm-server.init, debian/rules:
	cvs 20021101 upstream release.

2002-12-06  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* package/redhat/gfarm.spec: change package category

2002-12-05  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* gfarmlib/gfs_pio_misc.c: change program registratin priority
	use local host first

2002-12-04  Tohru Sotoyama  <sotoyama@sra.co.jp>

	* package/redhat/gfarm.spec: gfarm rpm spec file for:
		gfarm-doc
		gfarm-clinet
		gfarm-server
		gfarm-fsnode
		gfarm-gfmd
		gfarm-devel

2002-12-03  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/hash.c: fatal typo

	* makes/config.mk.in: make default_mandir be able to be overridden, too

	* makes/var.mk, man/ja/Makefile.inc:
	make japanese mandir be able to be overriden

	* gftool/example/Makefile.inc, makes/var.mk:
	make example bindir be able to be overridden

2002-11-27  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/auth_server.c, gfarmlib/auth_server_gsi.c, configure, configure.in, gfarm_config.h.in:
	call setsid(), and if it's available, also setlogin(),
	to make getlogin() return correct login name on 4.4BSD derived systems.

2002-11-20  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/param.h, gfsd/main.c, gfarmlib/param.c:
	very experimental rate limiting code

2002-11-18  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h:
	workaround a problem caused by the way that the ROOT packages treats pathnames.

2002-11-17  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/example/gfcp/Makefile, gftool/example/gfcp/gfcp.c:
	Added gfcp.  usage: gfrun gfarm:gfcp input output

2002-11-11  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* bench/thput-fsys/thput-fsys.c:
	Added fsync(2 or 3c) after a write test.

2002-11-11  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfhost/gfhost.c:
	add "-u" (up) option, this option prints hostnames which are alive.

2002-11-10  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrep/gfrep.c, man/ja/man1/gfrep.1, man/man1/gfrep.1:
	Added the -D domainname option.  Gfarm file will be replicated to filesystem
	nodes in the domainname.

	* gfarmlib/gfs_pio_misc.c, gfarmlib/schedule.c, gfarmlib/schedule.h, gfarmlib/Makefile.in, include/gfs.h (gfs_pio_misc.c):
	Added gfarm_url_fragments_replicate_to_domainname(
					gfarm_url, domainname).
	This function replicates a file to filesystem nodes within the domainname.

	* gftool/addpath/addpath.c:
	Fixed a bug in version 1.2 when adding a Gfarm file.

	* gftool/addpath/addpath.c: Added -d option for metadata removal.

2002-11-09  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfhost/gfhost.c:
	Don't display incorrectly enormous or negative loadavg.

	* configure, configure.in:
	Corrected an installation directory for nsbins when --with-default-ns-exec-root option is explicitly specified.

	* gftool/example/gfcombine_hook/gfcombine_hook.c, gftool/example/gfcombine_hook/Makefile:
	Added a gfcombine_hook program that is a sample program using syscall hooking.

	* lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h, include/gfs_hook.h, lib/gfs_hook/hooks_common.c:
	Added file view management functions for syscall hooking:
		gfs_hook_set_default_view_local()
		gfs_hook_set_default_view_index(index, nfrags)
		gfs_hook_set_default_view_global()
		gfs_hook_set_view_local(fd, flags)
		gfs_hook_set_view_index(fd, nfrags, index, host, flags)
		gfs_hook_set_view_global(fd, flags)

	* man/man3/gfs_pio_set_view_local.3, man/ja/man3/gfs_pio_set_view_local.3:
	Fixed a function name...

2002-11-08  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfls/gfls.c: correct sort order of "gfls -lt" and "gfls -ltr"

	* gftool/gfhost/gfhost.c:
	don't call gfarm_initialize(), if it's not necessary (e.g. gfhost -Li <host>).
	because ldap_open(3), which is called from gfarm_initialize(), takes
	17..22 seconds on the indiana hosts (to LDAP server on gfm04.apgrid.org).

	* include/gfarm_metadb.h, gfarmlib/metadb_ldap.c, gftool/gfhost/gfhost.c:
	we couldn't modify host information without adding hostaliases for entries
	that don't have any hostaliases.
	this fixes the problem.

	* gftool/gfhost/gfhost.c:
	revert meaning of -A. because this seems to be more natural.
	e.g.
	- "gfhost -m -n <ncpu> <hostname>" doesn't change aliases.
	- "gfhost -m -n <ncpu> <hostname>" doesn't fail, if there is no hostalias.
	 ("gfhost -m -A <hostname>" will fail, if there is no hostalias.
	  but this is what we expect.)

	* INSTALL.en, INSTALL.ja:
	make slad.conf match with recently committed package/redhat/gfarm-slapd

2002-11-07  Noriyuki Soda  <soda@sra.co.jp>

	* package/redhat/gfarm-slapd:
	/etc/rc.d/init.d startup script for LDAP server on redhat derived systems.
	(only tested on Vine-2.5)

	* gftool/gfhost/gfhost.c:
	- disable warning message on default output mode.
	- add "-v" option to make the warning appear on default output mode.
	- use "x.xx" rather than "-.--" for hosts which don't return
	  GFARM_ERR_CONNECTION_REFUSED.

	* gftool/gfhost/gfhost.c: - fix incorrect timeout handling
	- do not ingore error event on poll(2)

	* gfarmlib/host.c: return the ``host'' argument as a *if_hostnamep,
	rather than "struct hostent:h_name",
	for non meta database case, too.
	as mentioned in previous commit message of this file.
	XXX - not sure this is the right thing. this makes gfhost output better, though.

	* gftool/gfsched/gfsched.c:
	add "-I" option to schedule a section (not a whole file),
	for gfarmlib debugging purpose

	* gfarmlib/gfs_client.c: fix a bug in previous commit.

	* gftool/gfhost/gfhost.c:
	sort output by default and also on -L option case.
	XXX - implementation is somewhat ad hoc....

	* INSTALL.en, INSTALL.ja, gftool/Makefile, gftool/gfhost/Makefile, gftool/gfhost/gfhost.c:
	add gfhost command, which manipulates/lists host information in meta database.
	this command also displays gfsd status by default.

	* include/gfarm_metadb.h:
	add gfarm_host_info_replace() interface and relevant infrastructure

	* gfarmlib/schedule.c:
	move timeout parameter for UDP service from here to gfs_client.[ch].
	remove unused #define symbol.

	* gfarmlib/stringlist.c: rename strvector_dup() and strvector_free() to
	gfarm_strarray_dup() and gfarm_strarray_free(),
	export these interface,
	and move these functions from metadb_ldap.c to stringlist.c.

	* gfarmlib/metadb_ldap.c:
	- add gfarm_host_info_replace() interface and relevant infrastructure
	- rename strvector_dup() and strvector_free() to
	  gfarm_strarray_dup() and gfarm_strarray_free(),
	  export these interface, and move these functions to stringlist.c.

	* include/gfarm_misc.h:
	- move gfarm_host_address_get() from "host.h" to <gfarm/gfarm_misc.h>.
	  i.e. export this interface to application.
	- export gfarm_host_info_get_by_if_hostname()
	- rename strvector_dup() and strvector_free() to
	  gfarm_strarray_dup() and gfarm_strarray_free(),
	  export these interface, and move these functions to stringlist.c.

	* gfarmlib/host.h:
	move gfarm_host_address_get() from "host.h" to <gfarm/gfarm_misc.h>.
	i.e. export this interface to application.

	* gfarmlib/host.c:
	return hostname or hostalias in meta database as a *if_hostnamep,
	rather than "struct hostent:h_name".

	XXX -	we should return the ``host'' argument as a *if_hostnamep,
		rather than "struct hostent:h_name",
		for non meta database case, too???

	* gfarmlib/gfs_client.h: define and export timeouts for UDP service

	* gfarmlib/gfs_client.c: - define and export timeouts for UDP service
	- support connected socket for UDP service

	* INSTALL.en, INSTALL.ja:
	describe missing, but very important slapd.conf setting
	which unlimits number of search results in LDAP protocol.

2002-11-07  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrm/gfrm.c, man/ja/man1/gfrm.1, man/man1/gfrm.1:
	Added the -h option to specify a filesystem node instead of the the -H option.

	* man/man1/gfrep.1:
	Added a description for -s and -d options.  It needs to be specified with -I option.

	* gftool/example/gfcombine/gfcombine.c:
	Added the -n option to specify the number of fragments to be combined.

2002-11-06  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrep/gfrep.c, man/ja/man1/gfrep.1, man/man1/gfrep.1:
	Added a description for -I, -s, and -d options.
	(gfrep.c): Just holding on 80 columns.

2002-11-06  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfrep/gfrep.c: use stderr instead of stdout for warning

2002-11-06  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrep/gfrep.c:
	Added -I, -s, and -d options to replicate a fragment of a file.
	usage: gfrep -I index [-s src-node] -d dest-node gfarm_url

2002-11-05  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/addsec/addsec.c: Fixed memory leak.

	* gftool/example/gfcombine/gfcombine.c, gftool/example/gfcombine/Makefile:
	Added a sample program to reduce the number of fragments by half; gfcombine.

		usage: gfcombine [-o outputfile] inputfile
		% gfrun -G gfarm:inputfile gfarm:gfcombine gfarm:inputfile

	Default output filename is 'gfarm:combine.out'.

	* gftool/gfrun/gfrun.c:
	Commented out the fragment number check code of output files.
	This is a temporal action to allow files whose number of fragments is not the same as the number of processes.

2002-11-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/addsec/addsec.c: Accept several filenames.

2002-11-03  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/addsec/Makefile, gftool/addsec/addsec.c, gftool/gfreg/gfreg.c, gfarmlib/gfs_pio_misc.c, gftool/addpath/Makefile, gftool/addpath/addpath.c, include/gfs.h:
	Added maintenance commands: addpath and addsec.
	usage:
		addpath pathname nfrags
		addsec pathname

	for example,
		% cd $gfarm_spool_root
		% addpath tatebe/foo:0 1
		% addsec tatbe/foo:0
		% addpath tatebe/echo:i386-intel-linux 1
		% addsec tatebe/echo:i386-intel-linux

2002-11-01  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog, include/gfarm_metadb.h:
	Catched up with the current ChangeLog.

2002-10-31  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/gfm_client.c: fix error added at revision 1.12.
	gfarm client doesn't have to be a compute host.

2002-10-28  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* man/man1/Makefile, man/man1/gfls.1:
	Added an manual page of gfls in English.

2002-10-28  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/Makefile, gftool/gfls/Makefile, gftool/gfls/gfls.c, include/gfarm_metadb.h, include/gfs.h, gfarmlib/metadb_ldap.c:
	add stopgap implementation of gfls

	* gfarmlib/gfs_pio.c: fill st_ctime at file creation.
	but st_mtime, st_atime and also st_ctime at other operations are not yet.

	* gfarmlib/hash.c, gfarmlib/hash.h: add iterator functions.

2002-10-14  Noriyuki Soda  <soda@sra.co.jp>

	* configure, configure.in:
	not only `getconf LFS_CFLAGS`, but also -D_GNU_SOURCE is required to
	make pwrite() 64bit-safe.

2002-10-13  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/hooks.c:
	previous version checked other's permission, rather than user's permission

	* lib/gfs_hook/hooks.c:
	add simple (and stupid) access(2) hook, but it seems this hook isn't called
	by goofy???

	* gfarmlib/gfs_pio_misc.c:
	gfs_unlink(3) couldn't remove inconsistent entry until this fix.

	* lib/gfs_hook/hooks_common.c: yet another kluge to deal with ROOT I/O.

	* gfarmlib/gfs_pio.c: fix typo

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_64.c, lib/gfs_hook/hooks_common.c:
	kluge for ROOT I/O.
	XXX - a lot of warnings about const qualifier.

	* gfarmlib/gfs_pio.c: changes for ROOT I/O

	* lib/gfs_hook/Makefile.in: honor $(OPTFLAGS)

	* lib/gfs_hook/hooks.c:
	revive some harmless debug message in __write().
	also note why I shouldn't add debug message bilindly here
	(I should remember this, but....).

	* lib/gfs_hook/hooks_common.c: more debug message

	* lib/gfs_hook/Makefile.in: add dependency

2002-10-13  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks.c (__write):
	Removed debug printing code to avoid infinite loops.

2002-10-13  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/gfs_pio_misc.c:
	move replica existence check to more appropriate place

	* gfarmlib/Makefile.in, gfarmlib/config.c, gfarmlib/gfs_client.c, gfarmlib/gfs_client.h, gfarmlib/gfs_proto.h, gfarmlib/param.c, gfarmlib/param.h, gfarmlib/sockopt.c, gfsd/main.c:
	network striping for replication controlled by the following directives:
		netparam parallel_streams=STREAM_COUNT [NETWORK]
		netparam stripe_unit_size=STRIPE_CHUNK_SIZE [NETWORK]

	* include/gfs.h:
	correct definitions of gfarm_url_section_replicate{_from}_to(3) API.

	* gfmd/gfmd.c: just change #include order

	* gfarmlib/gfs_pio_misc.c, man/ja/man3/gfarm_url_section_replicate_from_to.3, man/ja/man3/gfarm_url_section_replicate_to.3:
	correct definitions of gfarm_url_section_replicate{_from}_to(3) API.

	* bench/thput-fsstripe/thput-fsstripe.c:
	make this looks like gfsd/main.c more

	* configure, configure.in, gfarm_config.h.in: check pwrite(2)

	* gfarmlib/error.c, include/gfarm_error.h:
	add GFARM_ERR_NUMERICAL_RESULT_OUT_OF_RANGE which corresponds to ERANGE.

	* include/Makefile.in: missing dependency

	* lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_common.c:
	more debug message for gfs_hook functions.

2002-10-12  Noriyuki Soda  <soda@sra.co.jp>

	* lib/gfs_hook/Makefile.in: missing change in previous commitment

	* lib/gfs_hook/Makefile.in:
	compile & install gfs_hook_debug.o as well as gfs_hook.o by default.

	* bench/thput-fsstripe/thput-fsstripe.c:
	just tweak function parameter order

2002-10-11  Noriyuki Soda  <soda@sra.co.jp>

	* bench/thput-fsstripe/thput-fsstripe.c:
	oops, descriptor shoudn't be shared.

	* bench/thput-fsstripe/thput-fsstripe.c:
	missing headers and missing argument.

	* bench/Makefile, bench/thput-fsstripe/Makefile, bench/thput-fsstripe/thput-fsstripe.c:
	a program t measure fs throughput with striping

2002-10-11  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmlib/gfs_pio.c (gfs_pio_create):
	(quick hack) A RW mode checking code is commented out.  This is required for hooking ROOT I/O.

2002-10-10  Noriyuki Soda  <soda@sra.co.jp>

	* gfsd/main.c: forgot to initialize

	* gftool/gfmpirun/gfmpirun.c, gftool/gfrcmd/gfrcmd.c, gftool/gfreg/gfreg.c, gftool/gfrun/gfrun.c, include/gfarm_error.h, include/gfarm_metadb.h, gfarmlib/config.c, gfarmlib/error.c, gfarmlib/gfm_client.c, gfarmlib/gfs_pio.h, gfarmlib/gfs_pio_local.c, gfarmlib/gfs_pio_remote.c, gfarmlib/host.c, gfarmlib/host.h, gfarmlib/import_help.c, gfarmlib/metadb_ldap.c, gfarmlib/metadb_misc.c, INSTALL.en, INSTALL.ja, bench/thput-gfpio/thput-gfpio.c, gfarmlib/Makefile.in:
	make it possible to select multiple network interface

	* gfarmlib/gfs_pio_section.c, include/gfarm_misc.h:
	make it possible to select multiple network interface
	add gfarm_file_section_host_schedule{,_with_priority_local}()

	* gfarmlib/gfs_pio_misc.c:
	- make it possible to select multiple network interface
	- move gfarm_strings_free_deeply() from gfs_pio_misc.c to stringlist.c
	- add gfarm_file_section_host_schedule{,_with_priority_local}()

	* gfarmlib/schedule.c:
	- make it possible to select multiple network interface
	- fix several problems of the idle host search
	- add gfarm_file_section_host_schedule{,_with_priority_local}()

	* gfarmlib/gfs_client.c, gfarmlib/gfs_client.h:
	- make it possible to select multiple network interface
	- fix several problems in idle host search

	* gfmd/gfmd.c: split open_accepting_socket() from main()

	* gfsd/main.c: - make it possible to select multiple network interface
	- bind each interface address for udp service
	  to support multiple network interface.
	- split open_accepting_socket() from main()

	* gfsd/loadavg.c:
	bug fix - previous version didn't correctly work except first call.

	* gfarmlib/stringlist.c:
	move gfarm_strings_free_deeply() from gfs_pio_misc.c to stringlist.c

	* gfarmlib/auth_common.c: only call srandom(3) once.

	* acconfig.h, configure, configure.in, gfarm_config.h.in:
	deal with old BSDs which doesn't have strtoll() but does have strtoq()

2002-10-08  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrm/gfrm.c, man/ja/man1/gfrm.1, man/man1/gfexport.1, man/man1/gfrm.1, gftool/gfexport/gfexport.c:
	Improved the wording and fixed typos.

2002-10-04  Noriyuki Soda  <soda@sra.co.jp>

	* configure, configure.in, nstool/file/Makefile.in:
	correct nstool installation directory for the case that --prefix is omitted.

	* man/man1/gfrep.1, man/man1/gfrun.1, man/ja/man1/gfexport.1, man/ja/man1/gfimport_fixed.1, man/ja/man1/gfimport_text.1, man/ja/man1/gfrep.1, man/ja/man1/gfrun.1, man/man1/gfexport.1, man/man1/gfimport_fixed.1, man/man1/gfimport_text.1:
	describe ``-'' (standard input) for -H and -f option

	* man/ja/man1/gfrm.1, man/man1/gfrm.1:
	document the way to remove replica

	* gftool/gfexport/gfexport.c, gftool/gfrm/gfrm.c, man/ja/man1/gfexport.1, man/man1/gfexport.1:
	change fragment option (from '-s' in gfexport and '-i' in gfrm) to '-I',
	to make these consistent with gfreg.

2002-10-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog: Chatched up with the current ChangeLog.

2002-10-01  Noriyuki Soda  <soda@sra.co.jp>

	* gfmd/gfmd.c: plug memory leak

2002-09-27  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/config.c: make 2nd argument of "sockopt" optional.
	in that case, the configuration means for ALL + LISTENER.

2002-09-26  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/gfm_client.c, gfarmlib/gfs_client.c, gfarmlib/auth_server.c, gfarmlib/config.c, gfarmlib/sockopt.h:
	minor clean up for #include

2002-09-20  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/config.c: add comments

	* gfarmlib/io_fd.c, gfarmlib/io_fd.h, gfarmlib/io_gfsl.c, gfarmlib/sockopt.c, gfarmlib/Makefile.in:
	clean up includes

	* gfsd/main.c:
	decrease disk i/o block size for GFS_PROTO_BULKREAD from 64KB to 4KB.
	this increase gfrep bandwidth from 59MB/sec to 62MB/sec on
	Appro 1224X + e1000 + 3w-xxxx with default SO_RCVBUF (87380 bytes).

2002-09-19  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/config.c, gfarmlib/gfm_client.c, gfarmlib/gfs_client.c, gfarmlib/hostspec.c, gfarmlib/sockopt.c, gfarmlib/sockopt.h, gfmd/gfmd.c, gfsd/main.c:
	add a feature to configure socket options by the following syntax:
	connect(2) side:
	        sockopt rcvbuf=1048576 192.168.1.0/24
	listen(2)/accept(2) side:
	        sockopt rcvbuf=1048576 LISTENER

	* gfarmlib/auth_client.c, gfarmlib/auth_server.c:
	backout previous change, this timing is too late.
	socket buffer size is needed at TCP 3way handshake, since this information
	is needed for window scale option.

	this means listen/accept side only can use an option for "ALL",
	rather than per-peer setting.

	* gfarmlib/config.c: missing change in previous commit

	* gfarmlib/sockopt.c, gfarmlib/sockopt.h, gfarmlib/Makefile.in, gfarmlib/auth_client.c, gfarmlib/auth_server.c, gfarmlib/config.c:
	add feature to configure socket options by the following syntax:
		sockopt rcvbuf=1048576 192.168.1.0/24

	* bench/nconnect/nconnect.c:
	forgot to call apply_sockopts() when -b option is not specified.

2002-09-18  Noriyuki Soda  <soda@sra.co.jp>

	* gfsd/main.c:
	revert experimental code which was committed in revision 1.34 by accident.

	* gftool/gfrm/gfrm.c: thinko

	* gfarmlib/gfs_pio_misc.c: plug memory leak

	* gfarmlib/gfs_pio_misc.c, gfsd/main.c, gftool/gfrm/gfrm.c, include/gfs.h:
	add a feature to remove replica.
	API:		gfs_unlink_section_replica()
	command:	gfrm -i <fragment> -H <hostfile>

2002-09-12  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* man/ja/man3/Makefile: Added new man pages.

2002-09-09  Noriyuki Soda  <soda@sra.co.jp>

	* man/ja/man3/gfarm_url_fragments_replicate.3, man/ja/man3/gfarm_url_program_deliver.3, man/ja/man3/gfarm_url_program_register.3, man/ja/man3/gfarm_url_section_replicate_from_to.3, man/ja/man3/gfarm_url_section_replicate_to.3:
	add man pages for replication & program registration APIs

2002-09-05  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog: Catched up with the current ChangeLog.

	* man/man1/gfimport_text.1, man/man8/gfmd.8, INSTALL.en, INSTALL.ja:
	Added an installation manual in English.

2002-09-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmlib/gfs_pio.c (gfs_pio_seek):
	Fixed a bug not to update resultp when seeking within a fragment.

2002-09-02  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* package/redhat/gfmd, package/redhat/gfsd, package/solaris/gfmd, package/solaris/gfsd:
	Init files for solaris and redhat distribution.

2002-09-01  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/Makefile.in, lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_subr.c, lib/gfs_hook/hooks_subr.h:
	Extended a Gfarm URL format for syscall hooking to specify a section
	explicitly.  New Gfarm URL:  gfarm:[:section:]pathname
	For example, gfarm::0:foo is the first fragment of gfarm:foo.

	* gftool/gfreg/gfreg.c:
	Fixed an error message when a local file is missing.

2002-08-29  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* man/man1/Makefile, man/man3/Makefile, man/man8/Makefile:
	Fixed a path of top_objdir.

	* ChangeLog: Catched up with the current ChangeLog.

	* INSTALL.ja:
	Added a description of --with-globus for incorporating GFSL library.

	* man/man3/gfs_rmdir.3, man/man3/gfs_stat.3, man/man3/gfs_stat_free.3, man/man3/gfs_unlink.3, man/man8/Makefile, man/man8/gfmd.8, man/man8/gfsd.8, man/man3/gfs_pio_puts.3, man/man3/gfs_pio_read.3, man/man3/gfs_pio_seek.3, man/man3/gfs_pio_set_local.3, man/man3/gfs_pio_set_view_index.3, man/man3/gfs_pio_set_view_local.3, man/man3/gfs_pio_ungetc.3, man/man3/gfs_pio_write.3, man/man3/gfs_readdir.3, man/man3/gfs_rename.3, man/man3/gfs_pio_close.3, man/man3/gfs_pio_create.3, man/man3/gfs_pio_eof.3, man/man3/gfs_pio_error.3, man/man3/gfs_pio_flush.3, man/man3/gfs_pio_getc.3, man/man3/gfs_pio_getline.3, man/man3/gfs_pio_open.3, man/man3/gfs_pio_putc.3, man/man3/gfs_pio_putline.3, man/man3/Makefile, man/man3/gfarm_initialize.3, man/man3/gfarm_strings_free_deeply.3, man/man3/gfarm_terminate.3, man/man3/gfarm_url_hosts_schedule.3, man/man3/gfs_chmod.3, man/man3/gfs_chown.3, man/man3/gfs_closedir.3, man/man3/gfs_mkdir.3, man/man3/gfs_opendir.3, man/man1/gfreg.1, man/man1/gfrep.1, man/man1/gfrm.1, man/man1/gfrsh.1, man/man1/gfrun.1, man/man1/gfssh.1, man/man1/gfwc.1, man/man1/gfwhere.1, man/ja/man3/gfs_pio_set_view_local.3, man/man1/Makefile, man/man1/digest.1, man/man1/gfexport.1, man/man1/gfgrep.1, man/man1/gfimport_fixed.1, man/man1/gfimport_text.1, man/man1/gfkey.1, man/man1/gfmpirun.1, man/man1/gfps.1, man/man1/gfrcmd.1, man/Makefile, man/ja/man1/gfexport.1, man/ja/man1/gfgrep.1, man/ja/man1/gfimport_fixed.1, man/ja/man1/gfimport_text.1, man/ja/man1/gfkey.1, man/ja/man3/gfs_mkdir.3, man/ja/man3/gfs_pio_create.3, man/ja/man3/gfs_pio_open.3, man/ja/man3/gfs_pio_set_local.3:
	Added english man pages.

2002-08-09  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* man/ja/man1/gfrun.1, gftool/gfrun/gfrun.c:
	Changed the command option from -H gfarm-URL to -G gfarm-URL.

2002-08-06  Noriyuki Soda  <soda@sra.co.jp>

	* makes/var.mk, gftool/gfps/Makefile, gftool/gfrcmd/Makefile, gftool/gfreg/Makefile, lib/Makefile, Makefile.in, gfmd/Makefile, gfsd/Makefile, gftool/gfkey/Makefile:
	gfarmlib -> lib/libgfarm

	* include/gfs.h, makes/config.mk.in, gftool/gfrcmd/gfrcmd.c, gftool/gfreg/gfreg.c, include/gfarm_error.h, include/gfarm_metadb.h, include/gfarm_misc.h, bench/thput-gfpio/thput-gfpio.c:
	missing files when metadb development branch was imported

2002-08-02  Noriyuki Soda  <soda@sra.co.jp>

	* gfmd/ptcompat.h, gfsd/main.c: snapshot of metadb development branch

	* gfmd/metadb_ldap.c, gfmd/ptcompat.c, gfmd/ptcompat.h: New file.

	* gfmd/metadb.h, gfmd/metadb_ldap.c, gfmd/ptcompat.c:
	snapshot of metadb development branch

	* gfmd/inode.h, gfmd/job_table.c, gfmd/job_table.h, gfmd/metadb.h:
	New file.

	* gfmd/inode.h, gfmd/job_table.c, gfmd/job_table.h:
	snapshot of metadb development branch

	* gfmd/id_table.c, gfmd/id_table.h, gfmd/inode.c: New file.

	* gfmd/gfmd.c, gfmd/id_table.c, gfmd/id_table.h, gfmd/inode.c:
	snapshot of metadb development branch

	* gfmd/gflimits.h, gfmd/gfm_server.c, gfmd/gfm_server.h: New file.

	* gfmd/gflimits.h, gfmd/gfm_server.c, gfmd/gfm_server.h:
	snapshot of metadb development branch

	* gfmd/file.h, gfmd/gfj_server.c, gfmd/gfj_server.h: New file.

	* gfmd/file.c, gfmd/file.h, gfmd/gfj_server.c, gfmd/gfj_server.h:
	snapshot of metadb development branch

	* gfmd/client_table.c, gfmd/client_table.h, gfmd/file.c: New file.

	* gfmd/Makefile, gfmd/client_table.c, gfmd/client_table.h, configure, configure.in:
	snapshot of metadb development branch

	* gfarmlib/metadb_misc.c, gfarmlib/schedule.c, gfarmlib/stringlist.c, gfarmlib/url.c, gfarmlib/xxx_proto.c, gfarmlib/xxx_proto.h, gfarmlib/hash.h, gfarmlib/hostspec.c, gfarmlib/hostspec.h, gfarmlib/import_help.c, gfarmlib/io_fd.c, gfarmlib/io_fd.h, gfarmlib/io_gfsl.c, gfarmlib/io_gfsl.h, gfarmlib/iobuffer.c, gfarmlib/iobuffer.h, gfarmlib/logutil.c, gfarmlib/logutil.h, gfarmlib/metadb_ldap.c, gfarmlib/gfm_proto.h, gfarmlib/gfs_client.c, gfarmlib/gfs_client.h, gfarmlib/gfs_pio.c, gfarmlib/gfs_pio.h, gfarmlib/gfs_pio_default.c, gfarmlib/gfs_pio_global.c, gfarmlib/gfs_pio_local.c, gfarmlib/gfs_pio_misc.c, gfarmlib/gfs_pio_remote.c, gfarmlib/gfs_pio_section.c, gfarmlib/gfs_proto.c, gfarmlib/gfs_proto.h, gfarmlib/hash.c, gfarmlib/Makefile.in, gfarmlib/auth.h, gfarmlib/auth_client.c, gfarmlib/auth_client_gsi.c, gfarmlib/auth_common.c, gfarmlib/auth_config.c, gfarmlib/auth_server.c, gfarmlib/auth_server_gsi.c, gfarmlib/config.c, gfarmlib/error.c, gfarmlib/gfj_client.h, gfarmlib/gfm_client.c:
	move this directory to ../lib/libgfarm/

2002-07-04  Noriyuki Soda  <soda@sra.co.jp>

	* INSTALL.ja: add "-x" option to ldapsearch.
	this workarounds "ldap_sasl_interactive_bind_s: No such attribute" error
	which happens on certain configuration ("configure --with-cyrus-sasl"?).
	problem reported by morita-san.

2002-07-03  Noriyuki Soda  <soda@sra.co.jp>

	* INSTALL.ja: openldap-1.x -> openldap-2.x configuration file changes

	* INSTALL.ja: change domain name of examples: hpcc.gr.jp -> hpcc.jp

	* gfarmlib/metadb_ldap.c: remove "_" from attribute name, because:
	- it's illegal.
	- it doesn't work with slapd of openldap-2.x.

	* lib/gfs_hook/hooks_subr.c: reimplement warning output again.
	- don't have to check gfarm_initialized in gfs_hook_is_open(),
	  because _gfs_file_buf[fd] is always NULL, if !gfarm_initialized.
	  this change prevents infinite recursion as well.
	- print the warning message only once,
	  this also should prevent infinite recursion.

2002-07-03  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/hooks_subr.c (gfs_hook_not_initialized):
	Fixed typo.  Commented out fprintf("...") to avoid infinite recursive calls.

	* gfarmlib/auth_server.c:
	Added #include <limits.h> that should be needed on Solaris.

2002-07-03  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/config.c, include/gfarm_misc.h, lib/gfs_hook/hooks_subr.c:
	do not segfault, but print warning and ignore gfarm: prefix,
	when gfarm_initialized() isn't called.

2002-07-01  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/gfs_client.c: forgot to call strdup()

	* gfarmlib/gfs_client.c:
	gfs_canonical_hostname() always should return hostname,
	even if gethostbyname(3) failed.
	this is a workaround for strange configuration(?) of padXXX.is.titech.ac.jp.

	* gfsd/main.c: forgot to remove moved lines in last commit.
	(to make gfsd runnable with non-root user)

2002-06-25  Noriyuki Soda  <soda@sra.co.jp>

	* configure, configure.in: just a comment change

2002-06-24  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/auth_client_gsi.c, gfarmlib/auth_server_gsi.c, gfarmlib/io_gfsl.c:
	fix memory leak

	* gfarmlib/xxx_proto.c: fix fatal typo, this repairs gfrcmd.
	now gfrcmd works over GSI.

	* configure.in, gftool/example/Makefile, gftool/example/gfwc/Makefile, makes/config.mk.in, configure:
	add "--with-mpi=<MPICH-root-directory" option to configure script.
	"gftool/example/gfwc" is compiled, only if this option is specified.

	* gfarmlib/config.c, gfmd/gfmd.c, gfsd/main.c, include/gfarm_misc.h:
	add '-f' option to gfmd and gfsd for configuration pathname

	* INSTALL.ja, gfarmlib/xxx_proto.c, makes/var.mk, gfarmlib/auth_config.c, gfarmlib/auth_server.c, gfarmlib/auth_server_gsi.c, gfarmlib/config.c, gfarmlib/gfm_client.c, gfarmlib/gfs_client.c, gfarmlib/hostspec.c, gfarmlib/hostspec.h, gfarmlib/io_fd.c, gfarmlib/io_fd.h, configure, configure.in, gfarm_config.h.in, gfarmlib/Makefile.in, gfarmlib/auth.h, gfarmlib/auth_client.c, gfarmlib/auth_client_gsi.c, gfarmlib/auth_common.c:
	add "auth enable <auth-method> <host>" and "auth disable <auth-method> <host>"
	config directive to select authentication method.
	(default: NONE)

2002-06-21  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/gfs_hook/sysdep/linux/xstatconv.c, makes/man.mk, makes/subdir.mk, lib/gfs_hook/hooks_subr.h, lib/gfs_hook/sysdep/linux/Makefile.in, lib/gfs_hook/sysdep/linux/kernel_stat.h, lib/gfs_hook/sysdep/linux/xstat.c, lib/gfs_hook/sysdep/linux/xstat64.c, include/gfs.h, lib/Makefile, lib/gfs_hook/Makefile.in, lib/gfs_hook/hooks.c, lib/gfs_hook/hooks_64.c, lib/gfs_hook/hooks_common.c, lib/gfs_hook/hooks_subr.c, gfarmlib/Makefile.in, gfarmlib/gfs_hook.c, gfarmlib/url.c, Makefile.in, configure, configure.in:
	Added gfs_hook.o that is a modified version by soda-san.

	* ChangeLog: Update ChangeLog.

2002-06-21  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/auth_server_gsi.c:
	delegated credential should be used only for `switch_to' case.
	(i.e. only for gfsd case. and shouldn't be used for gfmd case.)

2002-06-21  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmlib/auth_client_gsi.c, gfarmlib/auth_server_gsi.c, ChangeLog:
	Sessions should be initiated with the delegated credential.  gfrep now works fine using GSI!

2002-06-19  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/auth_client.c, gfarmlib/auth_client_gsi.c, gfarmlib/auth_server.c, gfarmlib/auth_server_gsi.c, gfarmlib/gfm_client.c, gfarmlib/gfs_client.c, gfmd/gfmd.c, gfsd/main.c, gfarmlib/auth.h:
	remove symbol GFARM_AUTH_H_CLIENT and GFARM_AUTH_H_SERVER

	* gfarmlib/io_fd.c: missing reference to INFTIM in last commitment

	* configure, configure.in, gfarm_config.h.in, gfarmlib/io_fd.c:
	use -1 instead of INFTIM, because linux doesn't define INFTIM.

2002-06-17  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/auth_server_gsi.c: bug fix
	- xxx_proto_flush() should be called before calling GFSL routines
	- condition about global_username was opposite

	* gfarmlib/auth_client_gsi.c:
	remove unnecessary line (these lines are traces of gfarm_auth_request_simple())

	* lib/libgfsl/Makefile.gt1:
	leave original Makefile for Globus-1.x with different name.

2002-06-14  Noriyuki Soda  <soda@sra.co.jp>

	* gfsd/main.c:
	forgot to deal with multiple connection type on server side

	* gfarmlib/auth_client_gsi.c, gfarmlib/auth_server_gsi.c, gfarmlib/io_gfsl.h:
	forgot to switch to secure session

	* lib/libgfsl/gfarm_secure_session.h:
	add struct tag name `gfarmSecSession' to type gfarmSecSession,
	to make opaque reference easy.

	* gfarmlib/io_gfsl.h, lib/libgfsl/Makefile, makes/config.mk.in, makes/var.mk, gfarmlib/Makefile.in, gfarmlib/auth.h, gfarmlib/auth_client.c, gfarmlib/auth_client_gsi.c, gfarmlib/auth_server.c, gfarmlib/auth_server_gsi.c, gfarmlib/io_gfsl.c, Makefile.in, acconfig.h, configure, configure.in, gfarm_config.h.in:
	link Globus GSI and libgfsl.a, when --with-globus is specified with configure.

	* gfarmlib/io_fd.c, configure, configure.in, gfarm_config.h.in:
	SVR4 (including Solaris, IRIX) requires <stropts.h> for INFTIM

	* gfmd/gfmd.c, gfsd/main.c, configure, configure.in, gfarm_config.h.in, gfarmlib/gfm_client.c, gfarmlib/gfs_client.c, gfarmlib/io_fd.c, gfarmlib/iobuffer.c, gfarmlib/iobuffer.h, gfarmlib/xxx_proto.c, gfarmlib/xxx_proto.h:
	- close underlying stream in xxx_connection_free()
	- explicitly pass fd parameter to iobuffer read/write/close function,
	  to reduce number of function calls
	- use "char *" rather than "int" for iobuffer error status interface
	- use poll in io_fd.c

	* gfarmlib/gfs_pio_global.c: workaround type mismatch in Solaris 7

	* lib/libgfsl/gfarm-usermap: add my entry

	* gfarmlib/gfs_pio_global.c, gfarmlib/gfs_pio_misc.c:
	workaround type mismatch in Solaris 7

	* configure, configure.in:
	change default DEFAULT_NS_EXEC_ROOT from /var/tmp to ${prefix},
	approved by tatebe-san.

	* configure, configure.in: reorder some checks

	* gfarmlib/io_fd.c, gfarmlib/io_fd.h, gfarmlib/iobuffer.c, gfarmlib/iobuffer.h, gfarmlib/xxx_proto.c, gfarmlib/xxx_proto.h, gfmd/gfmd.c, gfsd/main.c, gfarmlib/Makefile.in, gfarmlib/gfm_client.c, gfarmlib/gfs_client.c:
	modify xxx_connection API again, to prepare GFSL integration.
	suggested by tatebe-san.

2002-06-13  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/iobuffer.c: remove obsolete comment

2002-06-11  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/gfs_client.c, gfarmlib/iobuffer.c, gfarmlib/iobuffer.h, gfarmlib/xxx_proto.c, gfarmlib/xxx_proto.h:
	modify gfarm_iobuffer API to prepare GFSL integration.

2002-05-20  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* nstool/file/get.c, nstool/file/put.c, nstool/file/stat.c:
	Added an error checking code for remote execution.

2002-05-10  Noriyuki Soda  <soda@sra.co.jp>

	* bench/thput-fsys/thput-fsys.c:
	- remove limitation of maximum buffer size
	- make this program work with linux raw device
	 (i.e. ensure 512byte aligned buffer)

	* bench/Makefile: add bwlat-syscache

	* bench/bwlat-syscache/Makefile, bench/bwlat-syscache/bwlat-syscache.c:
	New file.

	* bench/bwlat-syscache/Makefile, bench/bwlat-syscache/bwlat-syscache.c:
	benchmark program which reads same disk block repeatedly.
	bandwidth and latency between disk controller and cpu can be measured
	by specifying raw disk device with this program.

2002-05-09  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* man/ja/man3/Makefile: Fixed a typo of a filename.

2002-05-07  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/error.c, include/gfarm_error.h:
	add some errors (some of them will be used only internally in libgfarm)

	* gftool/gfmpirun/gfmpirun.c, gftool/gfrun/gfrun.c, include/gfarm_misc.h, gfarmlib/gfs_client.c, gfarmlib/import_help.c, gfarmlib/stringlist.c, gftool/gfexport/gfexport.c:
	adapt to new stringlist API described in man pages

	* Makefile.in, makes/config.mk.in: changes for man pages

	* makes/man.mk, man/ja/man3/GFARM_STRINGLIST_ELEM.3, man/ja/man3/GFARM_STRINGLIST_STRARRAY.3, man/ja/man3/Makefile, man/ja/man3/gfarm_import_fragment_size_alloc.3, man/ja/man3/gfarm_stringlist_cat.3, man/ja/man3/gfarm_stringlist_elem.3, man/ja/man3/gfarm_stringlist_free_deeply.3, man/ja/man3/gfarm_stringlist_length.3, man/ja/man3/gfarm_strings_free_deeply.3, man/ja/man3/gfs_pio_close.3, man/ja/man3/gfs_pio_eof.3, man/ja/man3/gfs_pio_error.3, man/ja/man8/Makefile, man/ja/man8/gfmd.8, man/ja/man8/gfsd.8:
	New file.

	* makes/man.mk, man/ja/man3/GFARM_STRINGLIST_ELEM.3, man/ja/man3/GFARM_STRINGLIST_STRARRAY.3, man/ja/man3/Makefile, man/ja/man3/gfarm_import_fragment_size_alloc.3, man/ja/man3/gfarm_stringlist_cat.3, man/ja/man3/gfarm_stringlist_elem.3, man/ja/man3/gfarm_stringlist_free_deeply.3, man/ja/man3/gfarm_stringlist_length.3, man/ja/man3/gfarm_strings_free_deeply.3, man/ja/man3/gfs_pio_close.3, man/ja/man3/gfs_pio_eof.3, man/ja/man3/gfs_pio_error.3, man/ja/man8/Makefile, man/ja/man8/gfmd.8, man/ja/man8/gfsd.8:
	man pages of libgfarm and gftools

	* man/Makefile, man/ja/Makefile, man/ja/Makefile.inc, man/ja/man1/Makefile, man/ja/man1/digest.1, man/ja/man1/gfexport.1, man/ja/man1/gfgrep.1, man/ja/man1/gfimport_fixed.1, man/ja/man1/gfimport_text.1, man/ja/man1/gfkey.1, man/ja/man1/gfls.1, man/ja/man1/gfmkdir.1, man/ja/man1/gfmpirun.1, man/ja/man1/gfps.1, man/ja/man1/gfrcmd.1, man/ja/man1/gfreg.1, man/ja/man1/gfrep.1, man/ja/man1/gfrm.1, man/ja/man1/gfrmdir.1, man/ja/man1/gfrsh.1, man/ja/man1/gfrun.1, man/ja/man1/gfssh.1, man/ja/man1/gfwc.1, man/ja/man1/gfwhere.1, man/ja/man3/gfarm_hostlist_read.3, man/ja/man3/gfarm_import_fragment_config_read.3, man/ja/man3/gfarm_initialize.3, man/ja/man3/gfarm_stringlist_add.3, man/ja/man3/gfarm_stringlist_free.3, man/ja/man3/gfarm_stringlist_init.3, man/ja/man3/gfarm_terminate.3, man/ja/man3/gfarm_url_hosts_schedule.3, man/ja/man3/gfs_chmod.3, man/ja/man3/gfs_chown.3, man/ja/man3/gfs_closedir.3, man/ja/man3/gfs_mkdir.3, man/ja/man3/gfs_opendir.3, man/ja/man3/gfs_pio_create.3, man/ja/man3/gfs_pio_flush.3, man/ja/man3/gfs_pio_getc.3, man/ja/man3/gfs_pio_getline.3, man/ja/man3/gfs_pio_open.3, man/ja/man3/gfs_pio_putc.3, man/ja/man3/gfs_pio_putline.3, man/ja/man3/gfs_pio_puts.3, man/ja/man3/gfs_pio_read.3, man/ja/man3/gfs_pio_seek.3, man/ja/man3/gfs_pio_set_local.3, man/ja/man3/gfs_pio_set_view_index.3, man/ja/man3/gfs_pio_set_view_local.3, man/ja/man3/gfs_pio_ungetc.3, man/ja/man3/gfs_pio_write.3, man/ja/man3/gfs_readdir.3, man/ja/man3/gfs_rename.3, man/ja/man3/gfs_rmdir.3, man/ja/man3/gfs_stat.3, man/ja/man3/gfs_stat_free.3, man/ja/man3/gfs_unlink.3:
	New file.

	* man/Makefile, man/ja/Makefile, man/ja/Makefile.inc, man/ja/man1/Makefile, man/ja/man1/digest.1, man/ja/man1/gfexport.1, man/ja/man1/gfgrep.1, man/ja/man1/gfimport_fixed.1, man/ja/man1/gfimport_text.1, man/ja/man1/gfkey.1, man/ja/man1/gfls.1, man/ja/man1/gfmkdir.1, man/ja/man1/gfmpirun.1, man/ja/man1/gfps.1, man/ja/man1/gfrcmd.1, man/ja/man1/gfreg.1, man/ja/man1/gfrep.1, man/ja/man1/gfrm.1, man/ja/man1/gfrmdir.1, man/ja/man1/gfrsh.1, man/ja/man1/gfrun.1, man/ja/man1/gfssh.1, man/ja/man1/gfwc.1, man/ja/man1/gfwhere.1, man/ja/man3/gfarm_hostlist_read.3, man/ja/man3/gfarm_import_fragment_config_read.3, man/ja/man3/gfarm_initialize.3, man/ja/man3/gfarm_stringlist_add.3, man/ja/man3/gfarm_stringlist_free.3, man/ja/man3/gfarm_stringlist_init.3, man/ja/man3/gfarm_terminate.3, man/ja/man3/gfarm_url_hosts_schedule.3, man/ja/man3/gfs_chmod.3, man/ja/man3/gfs_chown.3, man/ja/man3/gfs_closedir.3, man/ja/man3/gfs_mkdir.3, man/ja/man3/gfs_opendir.3, man/ja/man3/gfs_pio_create.3, man/ja/man3/gfs_pio_flush.3, man/ja/man3/gfs_pio_getc.3, man/ja/man3/gfs_pio_getline.3, man/ja/man3/gfs_pio_open.3, man/ja/man3/gfs_pio_putc.3, man/ja/man3/gfs_pio_putline.3, man/ja/man3/gfs_pio_puts.3, man/ja/man3/gfs_pio_read.3, man/ja/man3/gfs_pio_seek.3, man/ja/man3/gfs_pio_set_local.3, man/ja/man3/gfs_pio_set_view_index.3, man/ja/man3/gfs_pio_set_view_local.3, man/ja/man3/gfs_pio_ungetc.3, man/ja/man3/gfs_pio_write.3, man/ja/man3/gfs_readdir.3, man/ja/man3/gfs_rename.3, man/ja/man3/gfs_rmdir.3, man/ja/man3/gfs_stat.3, man/ja/man3/gfs_stat_free.3, man/ja/man3/gfs_unlink.3:
	man pages of libgfarm and gftools

2002-04-24  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfsl/Makefile, lib/libgfsl/README:
	Added a compile option for static linking.

2002-04-19  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* nstool/file/stat.c, nstool/file/Makefile.in:
	Added a ns client program stat.

	* ChangeLog, INSTALL.ja:
	Fixed a careless miss of a gfgrep command-line example.

2002-04-19  Noriyuki Soda  <soda@sra.co.jp>

	* INSTALL.ja:
	reflect recent changes, mention program registration by gfreg.

2002-04-19  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* bench/thput-pvfs/Makefile, bench/thput-pvfs/thput-pvfs.c:
	Experimental code for benchmarking of PVFS.

	* ChangeLog, INSTALL.ja: Added an introductory description.
	Catched up with the change of Gfarm terminology.

2002-04-18  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/gfs_pio_remote.c: avoid inefficient GFS_PROTO_WRITE request.
	partial read/write are already cared by upper gfs_pio layer.

	* gfsd/main.c:
	do not cause fatal error when buffer bigger than GFS_PROTO_MAX_IOSIZE
	are passed by GFS_PROTO_READ and GFS_PROTO_WRITE, but perform partial
	i/o operation for that case.
	note that client should avoid such case for GFS_PROTO_WRITE, because
	it is inefficient.

	* gfarmlib/iobuffer.h:
	add a comment about *_just() and *_x() functions.

2002-04-15  Noriyuki Soda  <soda@sra.co.jp>

	* bench/thput-gfpio/thput-gfpio.c:
	use file_offset_t and related macro to make thput-gfpio work on platforms
	which don't support "long long".
	but do not use that way for thput-fsys, to make it independent of gfarm.

2002-04-15  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* bench/thput-gfpio/thput-gfpio.c:
	Double-precision floating division is replaced with multiplication.
	Changed type format from ld to lld when printing file_size.

2002-04-10  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* include/comm.h, include/gflib.h, include/ns.h, include/nsclnt.h, include/nsexec.h:
	Catched up with the change of gfarm-related header files' path.

	* bench/thput-fsys/thput-fsys.c (timeval_sub):
	Changed division to multiplication.

2002-04-08  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfexport/gfexport.c: - use gfs_pio_get_nfragment()
	- call gfs_pio_open() only once for fragmented file

	* gftool/gfwhere/gfwhere.c: plug minor memory leak

	* gfarmlib/metadb_misc.c:
	use GFARM_ERR_OPERATION_NOT_PERMITTED for program vs fragmented-file mismatch

	* gfarmlib/gfs_pio.c:
	- rename gfs_pio_error() to gfs_pio_clearerr() just like <stdio.h>
	- define gfs_pio_get_nfragment()
	- honor umask
	- use GFARM_ERR_OPERATION_NOT_PERMITTED for program vs fragmented-file mismatch
	- be more consistent about gf->error

	* gfarmlib/gfs_pio_misc.c:
	use GFARM_S_IS_FRAGMENTED and GFARM_S_IS_PROGRAM

	* gfarmlib/gfs_pio_section.c:
	- use GFARM_ERR_OPERATION_NOT_PERMITTED for program vs fragmented-file mismatch
	- be more consistent about gf->error
	- be more robust when gfarm_path_info_set returns GFARM_ERR_ALREADY_EXISTS

	* gfarmlib/gfs_pio_global.c:
	- use GFARM_ERR_OPERATION_NOT_PERMITTED for program vs fragmented-file mismatch
	- be more consistent about gf->error

	* gfarmlib/gfs_pio_default.c: be more consistent about gf->error

	* gfarmlib/gfs_pio.h:
	- GFARM_IS_PROGRAM() is obsoleted by GFARM_S_IS_PROGRAM()

	* include/gfs.h: - define GFARM_S_IS_FRAGMENTED and GFARM_S_IS_PROGRAM
	- rename gfs_pio_error() to gfs_pio_clearerr() just like <stdio.h>
	- define gfs_pio_get_nfragment()

2002-04-05  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog: Catched up with the current ChangeLog.

	* bench/thput-gfpio/thput-gfpio.c:
	Use gettimeofday() on every platform except i386.

2002-04-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmlib/auth_common.c, gfarmlib/auth_server.c, gfarmlib/error.c, gfarmlib/gfs_pio_global.c, gfarmlib/stringlist.c:
	Added missing include files.

2002-04-04  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/config.c, include/gfarm_misc.h:
	export gfarm_attach_debugger()

	* gfarmlib/gfs_pio_section.c:
	fix fatal error which happens on writing more than 64KB with gfs_pio_write(),
	problem reported by tatebe-san.

	* bench/thput-gfpio/thput-gfpio.c: make debugger work

	* bench/thput-gfpio/Makefile: define $(DEPLIBS)

	* gfarmlib/gfs_pio_global.c:
	- introduceg internal function fs_pio_set_view_default() for common processing
	- fix resource leak on gfs_pio_view_global_close()
	- better errror recovery on failure of gfs_pio_set_view_index()

	* gfarmlib/gfs_pio.c, gfarmlib/gfs_pio.h, gfarmlib/gfs_pio_default.c, gfarmlib/gfs_pio_section.c:
	introduceg internal function fs_pio_set_view_default() for common processing

	* gfarmlib/gfs_pio_local.c:
	just renaming local variable to avoid misunderstanding

2002-04-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* bench/thput-gfpio/thput-gfpio.c: Catched up with the new Gfarm API.

2002-04-04  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/gfj_client.h, gfarmlib/gfm_client.c, gftool/gfmpirun/Makefile, gftool/gfmpirun/gfmpirun.c, gftool/gfrun/Makefile, gftool/gfrun/gfrun.c:
	forgot to register job on gfmpirun

2002-04-03  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmlib/schedule.c (gfarm_url_hosts_schedule):
	Fixed a bug when scheduling by a Gfarm file with multiple replicas.  strdup() is necessary.

	* gfarmlib/Makefile.in:
	Makefile.in: Exclude gfs_hook.o from libgfarm.a.  It is necessary to be linked explicitly.

2002-03-28  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmd/Makefile.in: clean up symbolic link (deamon.c)

	* include/gfs.h, gftool/gfkey/gfkey.c, gftool/gfps/gfps.c, gftool/gfrcmd/gfrcmd.c, gftool/gfrun/gfrun.c, gftool/gfsched/gfsched.c, gftool/gfwhere/gfwhere.c, include/gfarm_error.h, include/gfarm_metadb.h, include/gfarm_misc.h, gfmd/gfmd.c, gfsd/main.c, gftool/example/gfgrep/gfgrep.c, gftool/example/gfimport_fixed/gfimport_fixed.c, gftool/example/gfimport_text/gfimport_text.c, gftool/example/gfwc/gfwc.c, gftool/gfexport/gfexport.c, gfarmlib/gfs_pio_misc.c, gfarmlib/gfs_pio_remote.c, gfarmlib/gfs_pio_section.c, gfarmlib/gfs_proto.c, gfarmlib/gfs_proto.h, gfarmlib/metadb_ldap.c, gfarmlib/metadb_misc.c, gfarmlib/schedule.c, gfarmlib/url.c, gfarmlib/error.c, gfarmlib/gfs_client.c, gfarmlib/gfs_client.h, gfarmlib/gfs_hook.c, gfarmlib/gfs_pio.c, gfarmlib/gfs_pio.h, gfarmlib/gfs_pio_default.c, gfarmlib/gfs_pio_global.c, gfarmlib/gfs_pio_local.c, gfarmlib/Makefile.in, gfarmlib/auth.h, gfarmlib/auth_client.c, gfarmlib/auth_common.c, gfarmlib/auth_server.c, gfarmlib/config.c:
	changes for new gfarm API

	* nslib/nsclnt.c, nslib/soc-lxdr.c, nslib/soc.c, gftool/gfreg/gfreg.c, gftool/gfrep/gfrep.c, gftool/gfrm/gfrm.c, include/gfarm.h, include/soc-lxdr.h, nslib/comm.c, nslib/file.c, nslib/gflib.c, gfarmd/gfarmd.c, gfarmd/gfd_auth.c, gfarmd/gfd_parse.c, gfarmlib/gfm_client.c, gfarmlib/import_help.c, gfarmlib/stringlist.c, gfarmlib/xxx_proto.c, gfsd/daemon.c, gfsd/limit.c, gfsd/loadavg.c, gftool/gfmpirun/gfmpirun.c, bench/thput-gfpio/thput-gfpio.c, gfarm/gfarm.c:
	use <gfarm/XXXX.h> instead of <gfarm.h> for header file name of gfarm API.

	* makes/var.mk: move logutil.[ch] from gfsd/ to gfarmlib/

	* gftool/example/gfgrep/Makefile: typo

	* gfarmlib/logutil.c, gfarmlib/logutil.h, gfsd/logutil.h, gfarmd/Makefile.in, gfmd/Makefile, gfsd/Makefile, gfsd/logutil.c:
	move logutil.[ch] from gfsd/ to gfarmlib/

	* include/Makefile.in:
	use <gfarm/XXXX.h> instead of <gfarm.h> for header file name of gfarm API.

2002-03-26  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gftool/gfrun/gfrun.c:
	Added the -H <Gfarm file> option.  This option specifies the Gfarm file used for scheduling.

2002-03-06  Noriyuki Soda  <soda@sra.co.jp>

	* gfmd/gfmd.c:
	fix yet another uninitialized variable related to unlimit_nofiles()

2002-03-04  Noriyuki Soda  <soda@sra.co.jp>

	* gfsd/limit.c:
	RLIM_INFINITY might be incorrectly returned as maximum open files
	before this fix. (on AIX 4.2?)

	* configure, configure.in: correct warning message

	* gfarmlib/error.c:
	add MAX_ERRNO (1024 by default) as stopgap for AIX 4.3
	where sys_nerr isn't usable and strerror(i) never returns NULL.

	* gfarmlib/gfs_pio.c:
	- fix incorrect assertion that size_t is compatible with int.
	- fix misbehavior of gfs_pio_flush() on error case.

	* gfsd/main.c:
	before this change, table_size might be garbage, if !defined(HAVE_SETRLIMIT).

2002-03-01  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* bench/thput-fsys/thput-fsys.c:
	Use gettimeofday() on every platform except i386.

2002-02-14  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfsl/README:
	Added a description how to compile and how to test.

2002-02-12  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* lib/libgfsl/Makefile, lib/libgfsl/gfarm-usermap:
	Quich hack for Globus Toolkit 2.0.

2002-02-09  Noriyuki Soda  <soda@sra.co.jp>

	* makes/config.mk.in: correct variable name for shlib path setting

	* configure, configure.in:
	add sanity check about user specified compiler/liker option.
	problem noted by tatebe-san.

2002-02-08  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/config.c:
	use waitpid() instead of wait4(), because the former doesn't have portability.

	* configure, configure.in: check -lgen for basename(3) on IRIX.

	* makes/config.mk.in, configure, configure.in:
	- add "-lresolv", if openldap needs it.
	- specify -rpath (or -R) for extra libraries.
	problem reported by tatebe-san

	* lib/libgfsl/client2.c:
	print error message, if gfarmSecSessionInitiateByAddr() fails.

	* lib/libgfsl/gsi.c:
	remove unused function of getToken() and getGfarmEtcDir() reported by gcc -Wall.
	those functions are moved to misc.c.

	* lib/libgfsl/session.c, lib/libgfsl/auth.c, lib/libgfsl/gsi.c, lib/libgfsl/misc.c, lib/libgfsl/server.c, lib/libgfsl/server2.c:
	remove unused variables and labels reported by gcc -Wall

	* lib/libgfsl/scsub.c, lib/libgfsl/server2.c:
	typo in message: s/accpetor/acceptor/

	* lib/libgfsl/session.c:
	do not dumps core, rather returns error, if gfarmSecSessionAccept() aborts.

2002-02-07  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* ChangeLog, INSTALL.ja: Added ChangeLog and INSTALL.ja.

	* nslib/gflib.c, nslib/soc.c:
	Removed unnecessary cast operations for NULL.

	* gftool/gfrun/gfrun.c, gftool/Makefile, gftool/gfrun/Makefile:
	Renamed gfrsh to gfrun.
	gfrun executes programs using the environment variable GFRUN_CMD.
	You can submit jobs with globus-job-run!

2002-02-02  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfrep/Makefile, gftool/gfrm/Makefile, gftool/gfsched/Makefile, gftool/gfwhere/Makefile, makes/config.mk.in, makes/var.mk, nslib/Makefile.in, nstool/file/Makefile.in, gftool/example/gfimport_text/Makefile, gftool/example/gfwc/Makefile, gftool/gfexport/Makefile, gftool/gfkey/Makefile, gftool/gfmpirun/Makefile, gftool/gfps/Makefile, gftool/gfrcmd/Makefile, gftool/gfreg/Makefile, gfarm/Makefile, gfarmd/Makefile.in, gfarmlib/Makefile.in, gfarmlib/sysdep/ix86-pc-linux-gnu/Makefile.in, gfmd/Makefile, gfsd/Makefile, gftool/digest/Makefile, gftool/example/gfgrep/Makefile, gftool/example/gfimport_fixed/Makefile, bench/Makefile, bench/nconnect/Makefile, bench/thput-fsys/Makefile, bench/thput-gfpio/Makefile, configure, configure.in:
	enable largefile & 64bit off_t.

	* gfarmlib/gfs_hook.c:
	workaround symbol conflicts caused by 64bit off_t of largefile support

	* bench/thput-gfpio/thput-gfpio.c:
	make clock counter routine i386 generic (but still gcc dependent)

	* bench/thput-fsys/thput-fsys.c:
	- make clock counter routine i386 generic (but still gcc dependent)
	- fix problems reported by compiler

	* bench/nconnect/nconnect.c:
	remove strdup() to resolve conflict with libc.
	fix to problems reported by compiler.

2002-01-30  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfrcmd/gfrcmd.c: remove unused variables

	* bench/thput-gfpio/thput-gfpio.c:
	add "-m" option to measure gfs_pio call overhead (i.e. metadb access overhead)
	(made at Nov 1, 2001. forgot to commit...)

	* bench/thput-fsys/thput-fsys.c:
	add "-m" option to measure system call overhead
	(made at Nov 1, 2001. forgot to commit...)

	* gfarmlib/config.c, gfarmlib/gfm_client.c, gfmd/gfmd.c, include/gfarm_misc.h:
	add "metadb_serverport" config directive to support debugging without
	root privilege

	* gfarmlib/gfs_pio.c:
	- fix a race bug which was caused by shared LDAP connection of fork(2)ed
	  children.
	  calling gfarm_metadb_terminate() (i.e. ldap_unbind()) on children
	  after fork(2) doesn't fix this problem, so call it before fork(2),
	  and re-initialize metadb on parent after the fork(2) finished.
	- plug memory leak on gfarm_url_fragments_replicate()

	* gfarmlib/gfs_client.c:
	use "#ifdef XXX_MEASURE_CKSUM_COST" rather than "#if 0"

2002-01-23  Yasuhito Takamiya  <takamiya@matsulab.is.titech.ac.jp>

	* debian/gfarm-server.init, debian/postinst, debian/rules, debian/dirs, debian/docs, debian/gfarm-doc.docs, debian/gfarm-doc.files, debian/gfarm-pool.conffiles, debian/gfarm-pool.init, debian/gfarm-pool.postinst, debian/changelog, debian/control, debian/copyright:
	added debian related files.

2002-01-21  Noriyuki Soda  <soda@sra.co.jp>

	* lib/libgfsl/README, lib/libgfsl/Why: New file.

	* lib/libgfsl/README, lib/libgfsl/Why:
	secure session layer library by m-hirano

	* lib/libgfsl/Makefile, lib/libgfsl/REFERENCE, lib/libgfsl/auth.c, lib/libgfsl/client.c, lib/libgfsl/client2.c, lib/libgfsl/gfarm-initiator.conf, lib/libgfsl/gfarm-usermap, lib/libgfsl/gfarm_auth.h, lib/libgfsl/gfarm_config.h, lib/libgfsl/gfarm_gsi.h, lib/libgfsl/gfarm_hash.c, lib/libgfsl/gfarm_hash.h, lib/libgfsl/gfarm_secure_session.h, lib/libgfsl/gsi.c, lib/libgfsl/misc.c, lib/libgfsl/scsub.c, lib/libgfsl/server.c, lib/libgfsl/server2.c, lib/libgfsl/session.c, lib/libgfsl/tcputil.c, lib/libgfsl/tcputil.h:
	New file.

	* lib/libgfsl/Makefile, lib/libgfsl/REFERENCE, lib/libgfsl/auth.c, lib/libgfsl/client.c, lib/libgfsl/client2.c, lib/libgfsl/gfarm-initiator.conf, lib/libgfsl/gfarm-usermap, lib/libgfsl/gfarm_auth.h, lib/libgfsl/gfarm_config.h, lib/libgfsl/gfarm_gsi.h, lib/libgfsl/gfarm_hash.c, lib/libgfsl/gfarm_hash.h, lib/libgfsl/gfarm_secure_session.h, lib/libgfsl/gsi.c, lib/libgfsl/misc.c, lib/libgfsl/scsub.c, lib/libgfsl/server.c, lib/libgfsl/server2.c, lib/libgfsl/session.c, lib/libgfsl/tcputil.c, lib/libgfsl/tcputil.h:
	secure session layer library by m-hirano

2002-01-17  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfrcmd/gfrcmd.c:
	do not connect to metadb server (because it is unnecessary)
	to make this command run faster.

	still (sometimes 10times) slower than rsh, with a server on localhost.
	this seems to be a scheduling problem (CPU is mostly idle, and gfrcmd
	sometimes runs mostly same speed with rsh).

	* gfarmlib/iobuffer.h: correct false (obsolete) comment

2002-01-16  Noriyuki Soda  <soda@sra.co.jp>

	* configure, configure.in: libssl is needed for openldap-2.x

	* gfarmlib/metadb_ldap.c:
	portability fix: make this works with openldap-2.0.21

	* makes/subdir.mk:
	display "[ making DIRECTORY ]" rather than "*** making DIRECTORY",
	from tatebe-san

	* gfsd/main.c: - encapsulate EOF handling into iobuffer module
	- check return value of select(2), because contents of readable/writable
	  may be invalid, if select(2) returns -1.
	  for example, if SIGCHLD is delivered during select(2), select(2) may
	  be interrupted with errno == EINTR.
	  without this fix, xxx_proto_recv(client, 1, &eof, "i", &cmd) in
	  gfs_server_command_io_fd_set() waits forever, because readable is mistakenly
	  treated as true.
	- fix race condition about server_command_context.pid and
	  server_command_context.running handling
	- make protocol state neutral in gfs_server_client_command_result(),
	  if an invoked command exits during GFS_COMMAND_CLIENT_STATE_OUTPUT,
	  protocol becomes out of sync without this.
	- report EOF state of stdout/stderr to client

	* gfarmlib/gfs_client.c:
	- encapsulate EOF handling into iobuffer module
	- check return value of select(2), because contents of readable/writable
	  may be invalid, if select(2) returns -1 (e.g. due to EINTR).

	* gfarmlib/iobuffer.c, gfarmlib/iobuffer.h:
	- encapsulate eof handling into iobuffer module
	- add an ability to call a callback function at write-close
	 (currently not used).

	* gfarmlib/auth_common.c: do not use fopen(3) but use open(2),
	because fopen(2) wastes entropy and cpu resource by reading BUFSIZ random bytes
	rather than just reading the `length' bytes.

2002-01-11  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmlib/gfs_hook.c (open64): Fixed a bug when calling syscall().

	* gfarmlib/gfs_hook.c (_creat, __creat):
	Fixed a trivial bug about arguments.

2001-12-25  Noriyuki Soda  <soda@sra.co.jp>

	* bench/nconnect/nconnect.c:
	a program which was used to measure network+disk bandwidth.

2001-12-19  Noriyuki Soda  <soda@sra.co.jp>

	* gfmd/gfmd.c: - permit that one client registers multiple jobs
	- forgot to add the code which actually passes hostnames of nodes
	- add (currently unused) flag parameter to gfj_client_register()

	* gfarmlib/gfj_client.h, gfarmlib/gfm_client.c:
	- forgot to add the code which actually passes hostnames of nodes.
	- add (currently unused) flag parameter to gfj_client_register()

	* gfarmlib/gfs_pio.c: missing space in error message

	* gfarmlib/gfs_proto.c: portability fix

2001-12-17  Noriyuki Soda  <soda@sra.co.jp>

	* include/gfarm_misc.h: add meatdb server related variable

	* gfsd/main.c:
	move authentication module to gfarmlib, and other clean up

	* gftool/Makefile: add gfps

	* Makefile.in: add gfmd

	* gftool/gfkey/gfkey.c: s/GFS_AUTH/GFRAM_AUTH/g

	* gftool/gfps/Makefile, gftool/gfps/gfps.c:
	get process status from job manager

	* gfmd/Makefile, gfmd/gfmd.c:
	meta db server skelton. only job manager is included for now.

	* gfarmlib/Makefile.in, gfarmlib/config.c, gfarmlib/gfj_client.h, gfarmlib/gfm_client.c, gfarmlib/gfm_proto.h, gfarmlib/gfs_client.c, gfarmlib/gfs_proto.c, gfarmlib/gfs_proto.h:
	job manager client routines

	* gfarmlib/auth.h, gfarmlib/auth_client.c, gfarmlib/auth_common.c, gfarmlib/auth_server.c:
	split authentication module to share with gfmd

2001-12-14  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmd/gfarmd.c (gfarmd_wait):
	Unregister a process entry when the specified process is not a child process or has already gone.

2001-11-02  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/iobuffer.c, gfarmlib/iobuffer.h, gfarmlib/xxx_proto.c, gfarmlib/xxx_proto.h, gfarmlib/gfs_client.c:
	kick disk i/o as soon as some data are received from network.
	this makes replication performance 10% better on matsulab padXXX cluster.
	(protocol isn't changed, only client side implementation is changed.)

	* gfsd/main.c: better error handling

2001-10-30  Noriyuki Soda  <soda@sra.co.jp>

	* bench/thput-gfpio/thput-gfpio.c:
	simple i/o throughput benchmark of gfs_pio_read/write

	* bench/thput-fsys/thput-fsys.c:
	simple i/o throughput benchmark of read/write via filesystem.

	* gfsd/main.c, include/gfarm_misc.h, gfarmlib/config.c, gfarmlib/gfs_client.c:
	some debugging feature like follows:
	- make it possible to specify gfsd port number in /etc/gfarm.conf or ~/.gfarmrc
	- make it possible to run gfsd without root privilege
	  (gfsd only accepts connections from same user who invoked gfsd in this case)
	- remove obsolete rsh_invocation code in gfsd

2001-10-26  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/gfs_pio.c: redundant expression

2001-10-22  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/gfs_proto.c, gfarmlib/gfs_proto.h, gfarmlib/xxx_proto.c:
	better error handling

	* gfsd/main.c: - better error handling
	- correct behaviour in SIGPIPE case (ignore SIGPIPE and reply EPIPE)

	* gfarmlib/gfs_client.c: - better error handling
	- fix bugs in gfs_client_copyin(), gfs_client_command_result()

	* gfarmlib/gfs_hook.c: - set errno
	- plug potential resource leak

	* gfarmlib/error.c:
	- add some other error codes for better error handling
	- fix a bug which was introduced at Solaris port

	* include/gfarm_error.h:
	add some other error codes for better error handling

	* gftool/gfrcmd/gfrcmd.c: remove unused variables

	* gfarmlib/iobuffer.h: missing function prototypes

	* gfarmlib/iobuffer.c: missing return statement

	* gfarmlib/config.c:
	<sys/wait.h> is needed for function prototype of waitpid(2).

2001-10-16  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/gfs_hook.c: fix problem of lseek emulation on NetBSD.

2001-10-15  Noriyuki Soda  <soda@sra.co.jp>

	* makes/config.mk.in, makes/prog.mk, makes/subdir.mk, makes/var.mk, nslib/Makefile.in, nstool/Makefile, nstool/file/Makefile.in, gftool/gfrcmd/Makefile, gftool/gfreg/Makefile, gftool/gfreg/gfreg.c, gftool/gfrep/Makefile, gftool/gfrm/Makefile, gftool/gfsched/Makefile, gftool/gfwhere/Makefile, include/Makefile.in, gftool/digest/Makefile, gftool/example/Makefile, gftool/example/Makefile.inc, gftool/example/gfgrep/Makefile, gftool/example/gfimport_fixed/Makefile, gftool/example/gfimport_text/Makefile, gftool/example/gfwc/Makefile, gftool/gfexport/Makefile, gftool/gfkey/Makefile, gftool/gfmpirun/Makefile, config.sub, configure, configure.in, gfarm/Makefile, gfarmd/Makefile.in, gfarmlib/Makefile.in, gfarmlib/gfs_hook.c, gfarmlib/sysdep/ix86-pc-linux-gnu/Makefile.in, gfsd/Makefile, gftool/Makefile, install-sh, Makefile.in:
	support --srcdir option for configure, to make it possible to build/test
	multiple architectures from single source directories.
	this change introduces $(srcdir), $(obj_srcdir) in addition to $(src_topdir).

2001-10-10  Noriyuki Soda  <soda@sra.co.jp>

	* nstool/file/Makefile.in:
	link libns before $(LIBS), because libns refers cuserid(2) which may belong
	to $(LIBS) (actually libcompat in $(LIBS))

	* configure, configure.in, gfarm_config.h.in:
	check existence of libcompat, because cuserid(3) belongs to libcompat on NetBSD

	* acconfig.h:
	forgot to commit this, when HAVE_SYS_NERR was added for Solaris 7.

	* gftool/gfsched/Makefile, gftool/gfsched/Makefile.in, gftool/gfwhere/Makefile, gftool/gfwhere/Makefile.in, makes/prog.mk, gftool/gfmpirun/Makefile, gftool/gfmpirun/Makefile.in, gftool/gfrcmd/Makefile, gftool/gfrcmd/Makefile.in, gftool/gfreg/Makefile, gftool/gfreg/Makefile.in, gftool/gfrep/Makefile, gftool/gfrep/Makefile.in, gftool/gfrm/Makefile, gftool/gfrm/Makefile.in, gftool/example/gfimport_fixed/Makefile, gftool/example/gfimport_fixed/Makefile.in, gftool/example/gfimport_text/Makefile, gftool/example/gfimport_text/Makefile.in, gftool/example/gfwc/Makefile, gftool/example/gfwc/Makefile.in, gftool/gfexport/Makefile, gftool/gfexport/Makefile.in, gftool/gfkey/Makefile, gftool/gfkey/Makefile.in, configure, configure.in, gfarm/Makefile, gfarm/Makefile.in, gfsd/Makefile, gfsd/Makefile.in, gftool/digest/Makefile, gftool/digest/Makefile.in, gftool/example/Makefile.inc, gftool/example/gfgrep/Makefile, gftool/example/gfgrep/Makefile.in:
	- repair missing "install" target.
	 (example programs are installed under bin/example/, currently...)
	- use makes/prog.mk for common rule for program Makefiles.
	- use gftool/example/Makefile.inc for common rule of gftools/example/*
	- stop needless Makefile.in -> Makefile generation for simple Makefiles,
	  use plain Makefile instead.
	 (Makefile.in files which use @xxx@ substitution other than @top_srcdir@
	  remain untouched.)

	* gftool/gfrcmd/gfrcmd.c: duplicate include directive

	* gfarmlib/sysdep/ix86-pc-linux-gnu/Makefile.in:
	remove unneeded autoconf substitutions

2001-10-10  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmd/gfd_auth.c: Fixed careless miss.

2001-10-10  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/sysdep/ix86-pc-linux-gnu/gfarm_linux_kernel_stat.h:
	I'm using (very) old linux distribution which doesn't define _STAT_VER_KERNEL
	in /usr/include/bits/stat.h...

2001-10-10  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfsd/logutil.c: Added #include <stdlib.h> for exit(2).

	* gfarmd/gfarmd.c, gfarmd/gfarmd.h, gfarmd/gfd_auth.c, gfarmd/gfd_file.c, gfarmd/gfd_parse.c, gfarmd/symtab.c:
	Changed a home directory in gfarmd to the same home directory in a passwd file.

	* nslib/gflib.c (gfarm_clnt_login):
	getlogin() returns NULL on the terminal like rxvt in Linux 2.4.  In this case, try cuserid() and getenv("LOGNAME").

2001-10-09  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfsched/gfsched.c, nslib/soc.c, configure, configure.in, gfarm_config.h.in, gfarmlib/error.c, gftool/gfmpirun/gfmpirun.c, gftool/gfreg/gfreg.c:
	fix compile error on Solaris 7

	* configure.in, gftool/Makefile, configure: add gftools/gfrcmd/

	* gftool/gfmpirun/gfmpirun.c, gftool/gfreg/gfreg.c, gftool/gfrep/gfrep.c, gftool/gfrm/gfrm.c, gftool/gfsched/gfsched.c, gftool/gfwhere/gfwhere.c, gftool/example/gfgrep/gfgrep.c, gftool/example/gfimport_fixed/gfimport_fixed.c, gftool/example/gfimport_text/gfimport_text.c, gftool/example/gfwc/gfwc.c, gftool/gfexport/gfexport.c:
	add argc/argv parameter to gfarm_initialize().

	* gfarmlib/gfs_client.c, gfarmlib/gfs_client.h, gfarmlib/gfs_proto.c, gfarmlib/gfs_proto.h, gfsd/main.c, gftool/gfrcmd/Makefile.in, gftool/gfrcmd/gfrcmd.c:
	- add command invocation feature to gfsd
	- add rsh-like command `gfrcmd' which uses the gfsd command invocation

	* include/gfarm_misc.h:
	- add argc, argv parameter to gfarm_initialize()
	- make gfarm_server_initialize/terminate() function.
	- add fixed bit length types
	- move hash functions to private header (gfarmlib/hash.h)

	* gfarmlib/import_help.c: error in error message

	* gfarmlib/url.c, gfarmlib/gfs_pio.c:
	use gfarm_errno_to_error() rather than strerror()

	* gfarmlib/gfs_hook.c: slight change for NetBSD (not really tested)

	* gfarmlib/Makefile.in: add iobuffer module

	* include/gfs.h: - update some interface (but not latest spec, yet.)

	* gfarmlib/error.c, include/gfarm_error.h:
	- add conversion function from/to errno
	- add the following errors
		GFARM_ERR_OPERATION_NOT_PERMITTED
		GFARM_ERR_AUTHENTICATION
		GFARM_ERR_NO_SPACE

	* gfarmlib/config.c: - add argc/argv parameter to gfarm_initialize()
	- create gfarm_server_initialize/terminate()
	- add runtime debug support ($GFARM_DEBUG_MODE=gdb)

	* gfarmlib/xxx_proto.c, gfarmlib/xxx_proto.h:
	- use struct iobuffer rather than FILE for buffering
	- add `just' parameter to all receive functions

	* gfarmlib/iobuffer.c, gfarmlib/iobuffer.h: i/o buffering module

	* gfarmlib/hash.c, gfarmlib/hash.h: - (hopefully) better interface
	- fix a bug about casefold string key

2001-09-01  Noriyuki Soda  <soda@sra.co.jp>

	* configure.in, configure:
	fix problem that sed @...@ susbstitution isn't done, if there isn't
	gfarmlib/${sysdep_dir}/Makefile.

	it seems AC_OUTPUT() can appear only at once in configure.in, at least
	on autoconf-2.13. the sed substition isn't generated at second appearance
	of AC_OUTPUT().

2001-08-31  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmlib/gfs_hook.c: Added a hook of stat() on Linux!

2001-08-31  Motonori Hirano  <m-hirano@aist.go.jp>

	* gfarmlib/sysdep/ix86-pc-linux-gnu/linux_stat.c:
		o Omit calling __ptrvalue().

	* gfarmlib/sysdep/ix86-pc-linux-gnu/xstatconv.c, gfarmlib/Makefile.in, gfarmlib/sysdep/ix86-pc-linux-gnu/Makefile.in, gfarmlib/sysdep/ix86-pc-linux-gnu/gfarm_linux_bp-checks.h, gfarmlib/sysdep/ix86-pc-linux-gnu/gfarm_linux_kernel_stat.h, gfarmlib/sysdep/ix86-pc-linux-gnu/linux_stat.c, gfarmlib/sysdep/ix86-pc-linux-gnu/linux_stat.h, Makefile.in, config.guess, configure, configure.in:
		o Adding mechanism to select system dependent syscall (or others)
		  hooking configuration. Right now, only for ix86 based Linux.

2001-08-31  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmlib/gfs_hook.c, gfarmlib/url.c:
	url.c (is_url,url_make_path): Objectivity patch.  '/gfarm:' is also considered as a Gfarm URL.
	gfs_hook.c: Added stat() hooking, however it works on only Solaris not Linux.  Linux inlines stat() which calls __xstat() with an additional version argument.  Since gfs_stat() is not implemented yet, this hook only works like stat_local().

2001-08-28  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* include/gfarm_misc.h, gfarmlib/Makefile.in, gfarmlib/gfs_hook.c, gfarmlib/url.c:
	First version for hooking system calls like open(), close(), read() and write().
	Tested on Linux and Solaris.
	errno is not set appropriately yet when gfs_*() is invoked.

2001-08-23  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* nstool/file/ns_readdir.c: Sends a stat also.

2001-08-22  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* include/comm.h, include/nscom.h, include/soc-lxdr.h, include/soc.h, nslib/comm.c, nslib/file.c, nslib/soc-lxdr.c, nslib/soc.c:
	Addd a const type qualifier to a buf argument of ns_data_send().

2001-08-21  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* nstool/file/Makefile.in, nstool/file/ns_readlink.c, nstool/file/ns_symlink.c:
	ns_readlink.c, ns_symlink.c: Added.

	* nslib/gflib.c (gfarm_clnt_init):
	When NS_DEBUG is defined, call gfarm_clnt_display_msg() to display reply messages from gfarmd.

	* nslib/nsclnt.c, nslib/nsexec.c, gfarm/gfarm.c, gfarmd/gfarmd.c, include/gflib.h, include/nsexec.h, nslib/gflib.c:
	gflib.c (gfarm_clnt_display_cmd): Added to control whether reply messages from gfarmd are displayed or not.

	* nstool/file/Makefile.in, nstool/file/ns_mkdir.c, nstool/file/ns_readdir.c:
	Added new ns executables for file manipulations.

2001-08-17  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* nslib/file.c, nslib/nsclnt.c, nslib/soc-lxdr.c, nslib/soc.c, nstool/file/ns_lstat.c, nstool/file/ns_stat.c, nstool/file/ns_unlink_dir.c, include/comm.h, include/soc-lxdr.h, include/soc.h, nslib/comm.c:
	Changed datatype of buf argument of ns_send and recv from char * to void *.

	* nstool/file/ns_stat.c, nstool/file/ns_unlink.c, nstool/file/ns_unlink_dir.c, nstool/file/put.c, nstool/file/Makefile.in, nstool/file/get.c, nstool/file/ns_get.c, nstool/file/ns_lstat.c, nstool/file/ns_put.c, nstool/file/ns_rename.c:
	Added several remote file functions.

	* include/nscom.h, nslib/file.c:
	Modified API name from ns_{send,recv}_lstat to ns_{send,recv}_stat.

	* nslib/soc-lxdr.c (ns_lxdr_recv): Return if there is no message.

2001-08-01  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* nslib/file.c, nstool/file/get.c, nstool/file/ns_get.c, nstool/file/ns_put.c, nstool/file/put.c, include/nscom.h:
	Modified APIs for file transfer between a Gfarm client and a Gfarm server.

2001-07-05  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmlib/gfs_pio.c (gfs_pio_write):
	Fixed a bug not to update the number of byte written.

2001-06-29  Noriyuki Soda  <soda@sra.co.jp>

	* configure, configure.in, gftool/Makefile: add gfwhere and gfrm

	* include/gfarm_metadb.h, gfarmlib/gfs_pio.c, gftool/gfrm/Makefile.in, gftool/gfrm/gfrm.c:
	gfrm: tool to remove gfarm file.

	* gftool/gfwhere/Makefile.in, gftool/gfwhere/gfwhere.c:
	a tool to display locations of replica.
		Usage: gfwhere <gfarm_url>

	* gfarmlib/import_help.c: forgot to canonicalize hostname here.

	* configure, configure.in, gftool/Makefile, gftool/gfrep/Makefile.in, gftool/gfrep/gfrep.c:
	rename "gfreplicate" to "gfrep", suggested by tatebe-san

	* gfarmlib/gfs_client.c, gfarmlib/gfs_client.h, gfarmlib/gfs_pio.c, gfsd/main.c, include/gfs.h, configure, configure.in:
	add a simple tool to create replica.

2001-06-11  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarm/gfarm.c (gfarm_nexec):
	Added gfarm_clnt_display_msgs() for flushing messages before closing a data connection.

	* nslib/gflib.c:
	Added an error checking code for all ns_comm_printf()s.

2001-05-17  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarm/cmd.h, gfarm/cmd.l, gfarm/cmd.y, gfarm/gfarm.c, include/gflib.h, nslib/gflib.c:
	Changed a syntax of the kill command, kill pid.

	* gfarmd/gfarmd.c, gfarmd/gfd_cmd.h, gfarmd/gfd_cmd.y:
	Changed a syntax of the KILL protocol, KILL pid.

2001-05-16  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/gfmpirun/gfmpirun.c: SA_RESETHAND is not needed, and harmful.

2001-05-15  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmlib/url.c (gfarm_username): Added.
	(gfarm_canonical_path): gfarm:path/name is now expanded to ${USER}/path/name like scp filenames.

	* gftool/gfreg/gfreg.c:
	Moved a file existence check to the if-condition clause for checking it is executable or not.  That is because gfreg for Gfarm files (not program) specifies a fragment by the Gfarm canonical path.

	* gftool/gfmpirun/gfmpirun.c: Added #include <stdlib.h> for mkstemp().

	* nslib/gflib.c (gfarm_clnt_wait):
	Added a special treatment for pid -1.

	* gfarm/cmd.h, gfarm/cmd.l, gfarm/cmd.y, gfarm/gfarm.c:
	Added new gfarm shell commands, nexec and wait.

2001-05-14  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/gfs_pio.c:
	yet another error check, pointed out by tatebe-san

2001-05-14  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmd/gfd_cmd.h: Added #include <sys/types.h> for pid_t.

2001-05-14  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/gfs_pio.c:
	slightly better (but not yet complete) error handling.
	-- error condition reported by tatebe-san.

2001-05-11  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/gfs_client.c, gfarmlib/gfs_client.h, gfarmlib/gfs_pio.c, gfarmlib/gfs_proto.c, gfarmlib/gfs_proto.h, gfarmlib/metadb_ldap.c, gfarmlib/xxx_proto.c, gfsd/main.c, include/gfarm_metadb.h, include/gfarm_misc.h, include/gfs.h, gfarmlib/config.c:
	- enable to register program binary to gfarm spool.
	- automatic program delivery via gfarm url.
	enable to specify gfarm url as program name

	* gftool/gfmpirun/gfmpirun.c:
	- do not do ad hoc parsing, but call gfarm_url_fragment_number().
	  (similar change with gfrsh.c revision 1.2 and 1.4)
	- enable to specify gfarm url as program name.

	* gftool/gfreg/gfreg.c:
	add a feature to register program binary to gfarm spool.

2001-05-09  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarm/gfarm.c, gfarmd/gfarmd.c, gfarmd/gfd_auth.c, gfarmd/gfd_cmd.h, gfarmd/gfd_cmd.l, gfarmd/gfd_cmd.y, gfarmd/gfd_parse.c, include/gflib.h, include/nsclnt.h, nslib/gflib.c, nslib/nsclnt.c, nstool/file/get.c, nstool/file/put.c:
	Added a new protocol WAIT pid for gfarmd.  This waits for the process completion specified by pid.
	gfarmd/gfarmd.c (gfarmd_wait): Added.
	gfarmd/gfd_auth.c, gfarmd/gfarmd.c: Replaced syslog() with log_message().
	nslib/gflib.c, nslib/nsclnt.c: Changed APIs for nonblocking execution.
	nstool/file/{put,get}.c: Followed the above changes.

	* include/comm.h, include/soc-lxdr.h, include/soc.h, nslib/comm.c, nslib/soc.c (ns_comm_printf):
	 Changed a return datatype from void to int.  This function returns EOF upon unsuccessful completion.

2001-04-05  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* nslib/nsclnt.c (ns_clnt_wait_input): Commented out.

	* gfarmd/gfd_file.c, gfarmd/gfd_parse.c, gfarmd/Makefile.in, gfarmd/gfarmd.c, gfarmd/gfarmd.h, gfarmd/gfd_auth.c:
	Makefile.in: Added gfd_file.c.
	gfarmd.c (gfarmd_init): Added a check for necessary directories.
	gfd_file.c: Added.  This file contains functions for file and directory manipulation.
	gfd_auth.c (gfarmd_mk_home_directory): Renamed to gfarmd_mkdir and moved to gfd_file.c.
	gfd_auth.c (gfarmd_login, gfarmd_user): Changed HOME directory to $root/GFARMD_HOME/$username.  PATH is now $root/GFARMD_HOME/$username:$root/GFARMD_BIN.  Added a return-code check of strdup().

	* gfarmlib/url.c (gfarm_url_make_path):
	Removed a definition of unused variables.

	* gfarm/gfarm.c:
	Just enclose a variable definition of gfarm_out with #ifdef USE_READLINE and #endif.

2001-04-04  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* nstool/file/get.c, nstool/file/put.c:
	If sending arguments fails, go to ns_clnt_rexec_wait() instead of exit(1), because it is nesessary to receive a status message from gfarm server.

	* gfarmd/gfd_cmd.h, gfarmd/gfd_cmd.l, gfarmd/gfd_cmd.y, gfarmd/gfd_parse.c, gfarmd/gfarmd.c:
	Changed the default syslog facility to GFARM_DEFAULT_FACILITY (= LOG_USER0).
	Added ACTV command.

	* gfarm/cmd.h, gfarm/cmd.l, gfarm/cmd.y, gfarm/gfarm.c:
	Added active command.

	* nslib/nsclnt.c (ns_clnt_rexec_wait):
	Change to the standard mode after waiting the remote execution if NS_PROXY is not defined.

	* include/gflib.h, nslib/gflib.c (gfarm_clnt_active): Added.

2001-04-03  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmd/Makefile.in, gfarmd/gfarmd.c, gfarmd/gfarmd.h, gfarmd/gfd_parse.c:
	Makefile.in: Added daemon.c.
	gfd_parse.c (ns_register_proc, ns_unregister_proc): Added.  This registers a process entry.
	gfd_parse.c (ns_free_argv): Added.
	gfd_parse.c (gfd_rmdir): Added.  Equivalent to rm -rf, while this function is currently declared as a static function.
	gfarmd.c (gfarmd_exec): Register executed processes.

	* gfarm/gfarm.c (gfarm_wait_input): Deleted.  It is no longer used.
	(prompt): Delete a commented-out code.

2001-04-02  Noriyuki Soda  <soda@sra.co.jp>

	* configure, configure.in, gfarm_config.h.in, makes/config.mk.in:
	- add "--with-readline=XXX" option (default: disable)
	- actually check setrlimit() and daemon()

	* gfarm/Makefile.in:
	use variables generated by "configure --with-readline=XXX".

	* gfsd/Makefile.in, gfsd/daemon.c, gfsd/limit.c, gfsd/main.c:
	- split daemon() to daemon.c
	- split unlimit_nofiles() to limit.c
	to share these functions with gfarmd.

	* gfsd/main.c, gfsd/logutil.c:
	use GFARM_ARRAY_LENGTH() rather than home grown ARRAY_LENGTH().

2001-04-02  Osamu Tatebe  <o.tatebe@aist.go.jp>

	* gfarmd/gfarmd.c (main):
	Become a daemon after listening a socket.  That is because the error message for failure of the bind is not displayed.

	* gfarm/Makefile.in, gfarm/gfarm.c:
	Added USE_READLINE to utilize libreadline.

	* gfarmd/gfarmd.c, gfarmd/gfd_auth.c:
	gfd_auth.c (gfarmd_user, gfarmd_login_ext): Added a call of log_set_auxiliary_info().
	LOG_NOTICE is used instead of LOG_INFO.
	Default syslog facility is now LOG_DAEMON.

	* gfsd/logutil.c, gfsd/main.c:
	Fixed ARRAY_LENGTH macro to calculate correctly the number of array elements.

2001-03-30  Noriyuki Soda  <soda@sra.co.jp>

	* gfsd/logutil.c:
	priority was not used on log_message(), pointed out by tatebe-san.

2001-03-30  Osamu Tatebe  <tatebe@etl.go.jp>

	* nslib/soc.c, gfarmd/Makefile.in, gfarmd/gfarmd.c, gfarmd/gfd_auth.c, makes/var.mk:
	gfarmd: use syslog().  However, not tested enough yet.  Just temporally check in.

2001-03-27  Noriyuki Soda  <soda@sra.co.jp>

	* gfsd/logutil.c, gfsd/logutil.h, gfsd/main.c:
	rename syslog related functions and variables.
	e.g. use "log_" as prefix of log related functions.

	* gfsd/Makefile.in, gfsd/logutil.c, gfsd/logutil.h, gfsd/main.c:
	split log related functions to logutil.c/logutil.h

2001-03-23  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/gfs_pio.c: gfs_pio_set_fragment_info_local():
	- plug memory leaks about `local_path'
	- some style fixes (remove casts which are not needed on ANSI-C)

	* gfarmlib/url.c: gfarm_basename():
	- do not access `errno', because strdup() doesn't set it.
	- only call malloc() once. (not twice)

2001-03-11  Osamu Tatebe  <tatebe@etl.go.jp>

	* gfarmlib/gfs_pio.c, gfarmlib/url.c, include/gfarm_misc.h:
	url.c (gfarm_cannonical_path): Added.  This function is called within gfarm_url_make_path().
	gfs_pio.c (gfs_pio_set_fragment_info_local): Gfarm spool directory is added prior to the given local filename.

	* gftool/gfreg/gfreg.c (main):
	Deleted a file existence check because the gfarm spool root directory should be added prior to the path name of the file.

2001-03-10  Osamu Tatebe  <tatebe@etl.go.jp>

	* gfarmd/gfd_auth.c (gfarmd_login): Set the environment variable HOME.

2001-03-09  Osamu Tatebe  <tatebe@etl.go.jp>

	* gftool/gfreg/gfreg.c: Index is now specified using the -I option.

	* gftool/gfsched/gfsched.c:
	Added an error checking of a missing command argument.

	* gftool/example/gfgrep/gfgrep.c, gftool/gfreg/gfreg.c:
	gfreg.c (main): Added a code for command option parsing.
	gfgrep.c (main): Added a missing '\n' of an error message.

2001-03-02  Osamu Tatebe  <tatebe@etl.go.jp>

	* gfarmlib/gfs_pio.c, gfarmlib/url.c:
	gfs_pio.c (gfs_pio_set_fragment_info_local): Unlink a newly created symlink if registration farls.  Changed indentation.
	url.c (gfarm_basename): Added.

2001-03-01  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/metadb_ldap.c:
	use better error message, add one sanity check to detect configuration errror.

	* gfarmlib/url.c:
	treat "gfarm:~user/path" as same with "gfarm:/user/path".

	* gfarmlib/url.c:
	change error message of gfarm_url_make_path() from "invalid argument"to
	"invalid gfarm URL" as suggested by tatebe-san

	* gfarmlib/url.c:
	fix problem about "~" expansion in "gfarm:~/path/name".
	pointed out by tatebe-san.

	* gfsd/main.c: fix stupid error. gfsd no longer creates zombie.

	* configure, configure.in, gftool/Makefile, gftool/gfkey/Makefile.in, gftool/gfkey/gfkey.c:
	add `gfkey', a utility to create ~/.gfarm_shared_key.

	* gfsd/main.c:
	fix privilege to read ~/.gfarm_shared_key, this was `root' and that didn't
	work with NFS shared home directory, if root access to the home directory
	is not permitted.

	* gfsd/main.c: - fix false error message
	- report authentication error in detail

	* gfarmlib/config.c:
	fix a bug to read ~/.gfarmrc. pointed out by tatebe-san.

2001-03-01  Osamu Tatebe  <tatebe@etl.go.jp>

	* configure, configure.in, gftool/Makefile, gftool/gfsched/Makefile.in, gftool/gfsched/gfsched.c:
	gftool/gfsched: Added.  This program create a hostfile from a given gfarm_url.

	* configure, configure.in, gftool/Makefile, gftool/gfreg/Makefile.in, gftool/gfreg/gfreg.c:
	gftool/gfreg: Added.  This is a tool to register a local file to the Gfarm Meta DB.

	* include/gfarm_misc.h, include/gfs.h, gfarmlib/gfs_pio.c, gfarmlib/url.c:
	gfs_pio.c (gfs_pio_set_fragment_info_local): Added.  This function is used with legacy applications.
	url.c (gfarm_file_absolute): Added.  This function returns the absolute path from a given relative path.

2001-02-28  Osamu Tatebe  <tatebe@etl.go.jp>

	* gfarm/gfarm.c, gfarmd/gfarmd.c:
	Reverted the default mode of gfarm and gfarmd to active mode.  That is because there is no method to flush stdout message of every remote program in passive mode.  Passive mode is used in the case of GridRPC.

2001-02-26  Osamu Tatebe  <tatebe@etl.go.jp>

	* nslib/soc-lxdr.c:
	Added an error checking after ns_soc_send() and ns_soc_recv().

	* nstool/file/put.c, nslib/file.c, nstool/file/get.c, nstool/file/ns_get.c, nstool/file/ns_put.c:
	Added a handshake code to indicate that a file can be opened or created.

	* nslib/nsclnt.c, nslib/soc.c:
	Added a check code after every malloc() system call.
	(ns_soc_recv): Return -1 when read error occurs.

2001-02-23  Osamu Tatebe  <tatebe@etl.go.jp>

	* nslib/nsclnt.c: Changed default mode to the passive mode.

	* gfarm/gfarm.c, gfarmd/gfarmd.c: Change default mode to passive mode.

2001-02-22  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/hash.c:
	bug fix: there was a case where (*createdp) wasn't set.

	* configure, configure.in:
	add gftool/{gfmpirun,gfrsh,example/{gfgrep,gfwc}}

	* gftool/example/Makefile: make gfwc, too

	* gftool/example/gfwc/Makefile.in, gftool/example/gfwc/gfwc.c:
	sample program for gfmpirun

	* gftool/example/gfgrep/Makefile.in, gftool/example/gfgrep/gfgrep.c:
	sample program for gfrsh

	* gftool/Makefile, gftool/example/Makefile, gftool/gfmpirun/Makefile.in, gftool/gfmpirun/gfmpirun.c:
	very bare bone gfmpirun and gfrsh.
	(history handling is not implemented, yet)

	* gfsd/main.c: fix bug which was introduced in revision 1.6

	* gfarmlib/Makefile.in, gfarmlib/host_config.c, gfarmlib/import_help.c, include/gfarm_misc.h, gftool/example/gfimport_fixed/gfimport_fixed.c, gftool/example/gfimport_text/gfimport_text.c, gftool/gfexport/gfexport.c:
	merge gfarm_hostlist_read() and gfarm_paths_read()

	* gfsd/main.c: only cosmetic change

	* gfarmlib/gfs_pio.c: do not add suffix twice

	* gfarmlib/gfs_pio.c: fix uninitialized variables

	* gftool/example/gfimport_fixed/gfimport_fixed.c, gftool/example/gfimport_text/gfimport_text.c, gfarmlib/import_help.c, gfarmlib/metadb_misc.c, include/gfarm_misc.h:
	better implementation of gfarm_url_fragment_cleanup()

	* gfarmlib/gfs_client.c, gfarmlib/gfs_client.h:
	add index argument to unlink/chmod/chgrp

	* gfarmlib/metadb_ldap.c: missing changes in revision 1.6

	* gfsd/main.c: add index argument to unlink/chmod/chgrp, some cleanup

	* gfarmlib/gfs_pio.c: more function prototype fixes, and typo fix

	* gfarmlib/schedule.c, include/gfarm_misc.h:
	add gfarm_url_hosts_schedule() as a wrapper of gfarm_hosts_schedule()
	for convenience.

	* gfarmlib/xxx_proto.c: more function prototype fix

	* gftool/example/gfimport_fixed/gfimport_fixed.c:
	remove unused variable

	* gftool/digest/digest.c: more fix about function prototype

	* gfsd/loadavg.c, gfsd/main.c, gfarmlib/gfs_pio.c, gfarmlib/gfs_proto.c, gfarmlib/schedule.c, gfarmlib/url.c:
	more fix about prototype

2001-02-21  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/example/gfimport_text/gfimport_text.c: remove unused variables

	* include/gfarm_misc.h, gfsd/main.c, gfarmlib/config.c, gfarmlib/gfs_client.c:
	split gfarm_server_config_read() from gfarm_config_read(),
	and let gfarm_config_read() read ~/.gfarmrc.

	* gfarmlib/hash.c, gfarmlib/import_help.c, gfarmlib/url.c:
	include headers to get function prototype

	* gfsd/loadavg.c:
	porting to Tru64 UNIX (formerly known as OSF/1 or Digital UNIX)

2001-02-20  Noriyuki Soda  <soda@sra.co.jp>

	* gftool/digest/digest.c: fix type mismatch

	* gfarmlib/gfs_pio.c: typo

	* gfarmlib/url.c, gfsd/main.c, gfarmlib/gfs_client.c, gfarmlib/gfs_client.h, gfarmlib/gfs_pio.c, gfarmlib/gfs_proto.c, gfarmlib/gfs_proto.h, gfarmlib/import_help.c, gfarmlib/metadb_ldap.c, gfarmlib/metadb_misc.c:
	fix some type mismatch and garbage collect unreferenced variables

	* configure, configure.in:
	fix following socklen_t problem on IRIX (pointed out by tatebe-san):
	AC_TRY_LINK() always succeed even if socklen_t is not size_t,
	due to weak type checking of C language.

	* configure, configure.in: remove not yet committed directories for now

	* gfarmlib/host_config.c, gfarmlib/import_help.c:
	fix compile error on solaris

	* gftool/gfexport/gfexport.c, gftool/Makefile, gftool/digest/Makefile.in, gftool/digest/digest.c, gftool/example/Makefile, gftool/example/gfimport_fixed/Makefile.in, gftool/example/gfimport_fixed/gfimport_fixed.c, gftool/example/gfimport_text/Makefile.in, gftool/example/gfimport_text/gfimport_text.c, gftool/gfexport/Makefile.in:
	add basic gfarm tools.

	* gfsd/loadavg.c, gfsd/main.c, include/gfarm_metadb.h, include/gfarm_misc.h, include/gfs.h, gfarmlib/Makefile.in, gfarmlib/config.c, gfarmlib/gfs_client.c, gfarmlib/gfs_client.h, gfarmlib/gfs_pio.c, gfarmlib/gfs_proto.c, gfarmlib/gfs_proto.h, gfarmlib/host_config.c, gfarmlib/import_help.c, gfarmlib/metadb_ldap.c, gfarmlib/metadb_misc.c, gfarmlib/schedule.c, gfarmlib/url.c, gfarmlib/xxx_proto.c, gfarmlib/xxx_proto.h, gfsd/Makefile.in:
	bug fixes

	* configure.in, Makefile.in, configure: make "gfsd" and "gftool".

	* acconfig.h, gfarm_config.h.in: add definition of FILE_OFFSET_T_MAX

2001-02-19  Osamu Tatebe  <tatebe@etl.go.jp>

	* gfarmd/gfd_cmd.l, gfarm/cmd.l: Added special characters to string.

	* nstool/file/get.c, nstool/file/put.c:
	Disconnect a connection between client and library after receiving a completion message from a server.

	* nslib/gflib.c (gfarm_clnt_connect_ext):
	Referred NS_SERVER as a default server if server is not specified.

	* nstool/file/get.c, nstool/file/put.c:
	ns_put and ns_get is assumed to be installed <gfarmd_root>/nsbin.

	* gfarmd/gfarmd.c, gfarmd/gfd_parse.c:
	gfarmd.c (gfarmd_perror_reply): Added.

2001-02-18  Osamu Tatebe  <tatebe@etl.go.jp>

	* gfarmd/gfarmd.c, gfarmd/gfarmd.h, gfarmd/gfd_auth.c:
	gfarmd_auth.c: Fixed a bug of chroot() for anonymous login.
	gfarmd_auth.c: Restricted a command path to gfarmd_root/user_directory and gfarmd_root/nsbin.
	For anonymous users, it is necessary to create gfarmd_root/lib directory and copy necessary shared libraries in the directory.

2001-02-16  Osamu Tatebe  <tatebe@etl.go.jp>

	* include/nscom.h, nslib/file.c, nstool/file/get.c, nstool/file/ns_get.c, nstool/file/ns_put.c:
	ns_recv_file(): Added an optional argument to specify a local filename.

	* nstool/file/ns_put.c, nstool/file/put.c, include/nsexec.h, include/nslib.h, nslib/Makefile.in, nslib/file.c, nslib/nsclnt.c, nslib/nslib.c, nstool/file/Makefile.in, nstool/file/file.c, nstool/file/file.h, nstool/file/get.c, nstool/file/ns_get.c, include/ns.h, include/nsclnt.h, include/nscom.h:
	nstool/file/file.c: Moved to the nslib/ directory.
	nstool/file/file.h: Renamed to nscom.h and moved to the include/ directory.
	nslib.h: Renamed to nsclnt.h.  NS client should include ns.h instead of nslib.h.

	* gfarmd/Makefile.in, gfarmd/gfarmd.c, gfarmd/gfd_auth.c, gfarmd/gfd_parse.c:
	Makefile.in: Updated a dependency.
	Added a comment and corrected spelling miss of a message.

2001-02-15  Noriyuki Soda  <soda@sra.co.jp>

	* Makefile.in, configure, configure.in, nstool/Makefile:
	add nstool/file/

	* nstool/file/Makefile.in: changes for autoconf

	* nstool/file/Makefile, nstool/file/Makefile.in:
	rename Makefile to Makefine.in

2001-02-15  Osamu Tatebe  <tatebe@etl.go.jp>

	* nstool/file/Makefile, nstool/file/file.c, nstool/file/file.h, nstool/file/get.c, nstool/file/ns_get.c, nstool/file/ns_put.c, nstool/file/put.c:
	NS tools.  This directory contains NS client/server tools.

	* nslib/nsexec.c, nslib/nslib.c, nslib/soc.c, gfarm/Makefile.in, gfarm/cmd.h, gfarm/cmd.l, gfarm/cmd.y, gfarm/gfarm.c, gfarmd/gfarmd.c, gfarmd/gfd_cmd.h, gfarmd/gfd_cmd.l, gfarmd/gfd_cmd.y, gfarmd/gfd_parse.c, include/gflib.h, include/nslib.h, nslib/gflib.c:
	Added a passive mode.  The previous passive mode is now renamed a proxy mode.
	In the passive mode, a gfarm client makes another connection to a gfarm server that will be used to communicate with a remote program.

	* nslib/soc.c: Added a comment and a debug message.

2001-02-14  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/gfs_client.c: remove unused array.

	* gfarmlib/gfs_client.c, gfarmlib/gfs_proto.c, gfarmlib/gfs_proto.h, gfarmlib/import_help.c:
	fix compile error on linux, by removing EFTYPE, EAUTH, ENEEDAUTH,
	because those errno is not really portable. pointed out by tatebe-san.

	* gfarmlib/stringlist.c: clean up and fix bogons

2001-02-14  Osamu Tatebe  <tatebe@etl.go.jp>

	* nslib/comm.c, nslib/soc.c, include/comm.h, include/soc-lxdr.h, include/soc.h:
	Added a host entry in struct Connect.
	(ns_comm_getservname): Added.

2001-02-14  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/Makefile.in, gfsd/Makefile.in, makes/config.mk.in, configure, configure.in:
	add --with-openssl=... option to specify OpenSSL installation directory

	* include/gfarm_misc.h, include/gfs.h, gfsd/Makefile.in, gfsd/loadavg.c, gfsd/main.c, include/gfarm.h, include/gfarm_error.h, include/gfarm_metadb.h, gfarmlib/metadb_ldap.c, gfarmlib/metadb_misc.c, gfarmlib/schedule.c, gfarmlib/stringlist.c, gfarmlib/url.c, gfarmlib/xxx_proto.c, gfarmlib/xxx_proto.h, gfarmlib/gfs_client.c, gfarmlib/gfs_client.h, gfarmlib/gfs_pio.c, gfarmlib/gfs_proto.c, gfarmlib/gfs_proto.h, gfarmlib/hash.c, gfarmlib/import_help.c, acconfig.h, configure, configure.in, gfarm_config.h.in, gfarmlib/Makefile.in, gfarmlib/config.c, gfarmlib/error.c:
	gfarm pio library and gfsd implementation

2001-02-09  Osamu Tatebe  <tatebe@etl.go.jp>

	* gfarm/gfarm.c, gfarmd/gfd_auth.c (gfarmd_user):
	Changed an effective userid to root during execution of getspnam_r().

	* gfarmd/gfarmd.c:
	Added an error checking code for ns_comm_listen() since now ns_comm_listen() does not exit(1) when an error occurs.

	* include/comm.h, include/gflib.h, nslib/comm.c, nslib/gflib.c, nslib/nslib.c, gfarm/gfarm.c, gfarmd/gfarmd.c:
	gflib.c (gfarm_clnt_passive): Added an additional argument, server.  The server name is returned to a client proran.
	comm.h: Added a constant definition NS_MAXHOSTNAMELEN.  I think this should be equal to MAXHOSTNAMELEN if it is defined, though now it is a constant 256.
	gfarmd.c (gfarmd_passive): Now the return message includes the proxy-server hostname.

	* gfarm/cmd.l, gfarmd/gfd_cmd.l:
	If YY_READ_BUF_SIZE is already defined, it should be undefined first before it is re-defined.

	* nslib/gflib.c (gfarm_clnt_wait_reply_msg):
	Eliminated an unused variable.

	* gfarm/gfarm.c:
	Deleted a function body of snprintf(3) and declared only the function prototype even if there is no snprintf(3) since snprintf() is defined in soc.c.

2001-02-06  Noriyuki Soda  <soda@sra.co.jp>

	* nslib/Makefile.in, configure, configure.in, gfarmd/Makefile.in:
	- remove SHARED_DIRECTORY, it is obsolete.
	- add -with-gfarm-rsh option to configure
	- remove double quotation from configure's argument, add it on Makefile

2001-02-05  Osamu Tatebe  <tatebe@etl.go.jp>

	* gfarmd/gfarmd.c (gfarmd_setenv):
	Added.  This function is called before execution of the gfarm pool program to set up the environment variable, now only NS_DEBUG.

	* gfarmd/gfarmd.c, include/comm.h, include/soc-lxdr.h, include/soc.h, nslib/comm.c, nslib/soc.c:
	comm.c (ns_data_irecv): Added.  This function is almost the same of read(2), and returns without waiting to receive all data.
	gfarmd.c (gfarmd_proxy): Now this function uses ns_data_irecv() not ns_data_recv() because this function should not be blocked.

	* gfarmd/gfarmd.c, gfarmd/gfarmd.h, gfarmd/gfd_auth.c:
	gfd_auth.c (gfarmd_getuidnam): Added.  This function returns uid from username.

2001-02-03  Osamu Tatebe  <tatebe@etl.go.jp>

	* gfarmd/gfd_cmd.h, gfarmd/gfd_cmd.l, gfarmd/gfd_cmd.y, include/gflib.h, nslib/gflib.c, nslib/nslib.c, gfarm/cmd.h, gfarm/cmd.l, gfarm/cmd.y, gfarm/gfarm.c, gfarmd/gfarmd.c:
	Added a passive mode.  In active mode, a remote program executed by gfarm server connects a gfarm client.  In passive mode, both a gfarm client and a remote program connect a gfarm proxy forked by gfarm server.
	gfarm.c (gfarm_disconnect): Added a code for a re-initialization of static variables.
	gfarm.c (gfarm_setenv): Added.  Set the environment variable NS_PASSIVE and NS_PASSIVE_PORT if passive mode.
	nslib.c (ns_clnt_rexec): If the environment variable NS_PASSIVE is defined, this function calls ns_clnt_rexec_passive/proxy(), otherwise this function calls ns_clnt_rexec_active().

	* gfarmd/Makefile.in, gfarmd/gfarmd.c, gfarmd/gfarmd.h, gfarmd/gfd_auth.c (gfarmd_user, gfarmd_pass):
	Moved to a new file gfd_auth.c.

2001-02-02  Osamu Tatebe  <tatebe@etl.go.jp>

	* include/soc-lxdr.h, include/soc.h, nslib/comm.c, nslib/gflib.c, nslib/soc.c, include/comm.h (ns_comm_connect_ext):
	Added.  This function is used to connect using rsh/ssh.
	(gfarm_clnt_connect): if the environment variable GFARM_AUTH is defined, ns_comm_connect_ext() is used.  Otherwise, ns_comm_connect() is used.  Remote shell program like rsh and ssh can be specified by GFARM_RSH.  Default is rsh.

	* gfarmd/gfarmd.c: I think it is necessary to divide a file.
	SHARED_DIRECTORY, gfarmd_append_path(), gfarmd_search_prog(): Deleted.
	(gfarmd_init): Added the command option -i to be able to execute gfarmd using rsh/ssh.
	symtab_strsave() is replaced by strdup(3).
	(gfarmd_login): Added.
	(gfarmd_login_ext): Added.  This function is used with rsh/ssh authentication.
	ns_user: The data type of this global variable is changed to struct passwd from struct passwd *.

	* gfarm/gfarm.c (gfarm_connect):
	Added a check code of return value of ns_comm_getpeername().

2001-02-02  Noriyuki Soda  <soda@sra.co.jp>

	* configure, configure.in: replace "_" by "-" on "-with-XXX_XXX" option

2001-02-01  Osamu Tatebe  <tatebe@etl.go.jp>

	* nslib/soc.c (ns_soc_connect_stdio):
	Added an initialization of streams.
	(ns_soc_get{sock,peer}name): return NULL when getsockname() or getpeername() fails.

	* gfarm/gfarm.c: symtab_strsave() is replaced by strdup(3).

	* nslib/soc.c (ns_soc_strsave):
	Removed.  This function is replaced by strdup(3).

2001-02-01  Noriyuki Soda  <soda@sra.co.jp>

	* acconfig.h, gfarm_config.h.in: just comment fix.
	SUSv2 does define getpwname_r(), but doesn't define getspnam_r().

	* configure.in, configure:
	move AC_CHECK_LIB() before socklen_t check, to fix the following
	problem reported by tatebe-san:
		because "-lsocket -lnsl" option is missing,
		socklen_t is incorrectly treated as not defined on Solaris.

	* configure, configure.in: change default C compiler from gcc to cc.
	to use gcc, please set environment variable CC=gcc before running configure.

2001-01-31  Noriyuki Soda  <soda@sra.co.jp>

	* configure, configure.in: fatal typo

2001-01-30  Noriyuki Soda  <soda@sra.co.jp>

	* nslib/soc-lxdr.c, nslib/soc.c, makes/config.mk.in, makes/var.mk, nslib/Makefile, nslib/Makefile.in, nslib/gflib.c, makes/Make.inc.netbsd, makes/Make.inc.rssp, makes/Make.inc.solaris, makes/Make.inc.sr8k, makes/Make.inc.all, makes/Make.inc.digital, makes/Make.inc.irix, makes/Make.inc.linux, gfarmd/Makefile.in, gfarmd/gfarmd.c, gfarmlib/Makefile.in, include/Makefile.in, include/soc-lxdr.h, gfarm/Makefile, gfarm/Makefile.in, gfarm_config.h.in, gfarmd/Makefile, Makefile, Makefile.in, acconfig.h, configure, configure.in:
	use GNU autoconf

	* gfarmlib/metadb_ldap.c, include/gfarm_metadb.h:
	fix warnings reported by "gcc -Wall"

2001-01-29  Osamu Tatebe  <tatebe@etl.go.jp>

	* gfarmd/gfarmd.c (reapchild):
	Just changed a code to display pids of reaped children.

	* gfarmd/gfarmd.c (main):
	Fixed a bug such that a necessary memory region is free-ed.

	* nslib/comm.c, nslib/soc-lxdr.c, nslib/soc-xdr.c, gfarmd/Makefile, include/bswap.h, include/comm.h, include/soc-lxdr.h, include/soc-xdr.h, include/soc.h, nslib/Makefile, nslib/bswap.h, gfarm/Makefile:
	bswap.h: Now this file is only included by nslib/soc-lxdr.c.
	include/soc-lxdr.h: Fixed a bug of incorrect use of NS_BYTE_ORDER.  Now NS_BYTE_ORDER is only used by this file.  If neither NS_BYTE_ORDER or HAVE_MACHINE_ENDIAN_H is defined, big endian is assumed.

	* makes/Make.inc.digital, makes/Make.inc.alpha:
	Make.inc.digital: Make.inc.alpha is renamed.

2001-01-29  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmd/gfarmd.c:
	porting to Net/2 derived BSDs. (i.e. BSD/OS, FreeBSD, NetBSD, OpenBSD)

	* gfarmd/gfarmd.c:
	fix problem that effective uid may be incorrectly left as root.

2001-01-27  Osamu Tatebe  <tatebe@etl.go.jp>

	* nslib/comm.c, nslib/gflib.c, nslib/nsexec.c, nslib/nslib.c, nslib/soc-lxdr.c, nslib/soc.c, gfarm/gfarm.c, gfarmd/gfarmd.c, include/bswap.h, include/comm.h, include/soc-lxdr.h, include/soc.h, nslib/Makefile, nslib/bswap.c:
	Added a socket library with light-weight network-byte-order translation.  Byte-order translation is only applied by ns_data_send() and ns_data_recv(), and other functions are defined by the original socket library, soc.c.  Now this library is default.

2001-01-26  Osamu Tatebe  <tatebe@etl.go.jp>

	* nslib/nsexec.c, include/nslib.h:
	nslib.h: Added a missing function declaration of ns_clnt_rexec_wait().
	nsexec.c (ns_exec_finalize): Added free().

	* include/nslib.h, nslib/nslib.c:
	nslib.c (ns_clnt_connect): Changed an interface.  Now, this function checks whether login succeeds or not.

2001-01-25  Osamu Tatebe  <tatebe@etl.go.jp>

	* nslib/nsexec.c, nslib/nslib.c, nslib/soc.c:
	nslib.c, nsexec.c (main): Fix a bug and changed an initialization part slightly. This main function is for testing.
	soc.c (ns_soc_recv): Deleted a printf() statement for debug.

	* gfarm/Makefile, nslib/Makefile, nslib/nsexec.c:
	Makefile: Updated dependency though this should be automatically done every timebefore make.

	* include/gflib.h, include/nsexec.h, makes/Make.inc.sr8k, gfarmd/gfarmd.c:
	Make.inc.sr8k: -DNS_SOCKLEN_T_IS_INT is added to NSLIB_DEFFLAGS.
	gflib.h, nsexec.h: Removed extern int _ns_gDebug;

	* nslib/soc.c, include/comm.h, include/soc.h, makes/Make.inc.irix, makes/Make.inc.linux, makes/Make.inc.solaris, nslib/comm.c, nslib/gflib.c, nslib/nslib.c, gfarm/gfarm.c:
	soc.c: Added ns_soc_poll().
	gfarm.c, nslib.c, gflib.c: ns_comm_poll() is called instead of select(2) system call.
	nslib.c, Make.inc: Added a HAVE_INTTYPES_H macro since Digital Unix does not have it.

	* nslib/nsexec.c, nslib/nslib.c:
	nslib.c: Added a static funciton ns_clnt_wait_input() to select an input from a server or a remote executable.

2001-01-24  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/metadb_ldap.c: portability fix on solaris

	* include/bswap.h:
	portability fix: use <machine/endian.h> on BSD derived systems.

2001-01-24  Osamu Tatebe  <tatebe@etl.go.jp>

	* nslib/stublib.c, makes/Make.inc.Linux, makes/Make.inc.all, makes/Make.inc.irix, makes/Make.inc.linux, makes/Make.inc.rssp, makes/Make.inc.solaris, makes/Make.inc.sr8k, nslib/Makefile, nslib/clntcom.c, nslib/clntlib.c, nslib/comm.c, nslib/gflib.c, nslib/nsexec.c, nslib/nslib.c, nslib/soc.c, gfarm/gfarm.c, gfarmd/gfarmd.c, include/comm.h, include/gflib.h, include/nsexec.h, include/nslib.h:
	Added gflib.c that is a library for gfarm client protocol in nslib/ directory.
	clntlib.c, stublib.c and nslib.c are renamed to nslib.c, nsexec.c and comm.c, respectively.

2001-01-24  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/metadb_ldap.c, include/gfarm_metadb.h:
	define gfarm_file_fragment_copy_info,
	and move hostname from gfarm_file_fragment_info to it,
	to support fragment replica.

	* makes/Make.inc.netbsd: configuration for NetBSD.

	* nslib/soc.c:
	portability fix: <sys/types.h> and <sys/socket.h> is needed before <netinet/*>

	* nslib/nslib.c:
	portablity fix: <sys/types.h> is needed before <netinet/in.h>

2001-01-24  Osamu Tatebe  <tatebe@etl.go.jp>

	* makes/Make.inc.Linux, makes/Make.inc.all, makes/Make.inc.alpha, makes/Make.inc.irix, makes/Make.inc.rssp, makes/Make.inc.solaris, makes/Make.inc.sr8k, nslib/soc.c:
	Added a configuration file for IBM RS6000/SP.
	Added compilation flags; -DNS_SOCKLEN_T_IS_INT and -DNS_SOCKLEN_T_IS_SIZE_T.

2001-01-23  Osamu Tatebe  <tatebe@etl.go.jp>

	* makes/Make.inc.sr8k: Added a comment for getpasswd(3).

	* makes/Make.inc.sr8k: Added a new make.inc file for sr8k.

2001-01-22  Osamu Tatebe  <tatebe@etl.go.jp>

	* include/nslib.h, include/soc.h, nslib/clntcom.c, nslib/clntlib.c, nslib/nslib.c, nslib/soc.c:
	Added ns_comm_setenv() and ns_comm_getenv() to pass the descriptor of a socket.
	clntcom.c (nc_clnt_init): This function now returns the connection if it is passed by environment variables.
	clntlib.c (ns_clnt_rexec): Changed the behavior w.r.t. a connection to a server.  Now, it should be passed by argument and is not closed in this function.

	* gfarmd/gfarmd.c, gfarmd/gfd_parse.c:
	gfarmd.c (gfarmd_pass): Added chroot() for a guest user, however it is not implemented enough.

	* gfarm/cmd.h, gfarm/cmd.l, gfarm/cmd.y, gfarm/gfarm.c, gfarm/Makefile:
	gfarm.c: Added gfarm_lexec() and removed gfarm_datafarm().

2001-01-19  Osamu Tatebe  <tatebe@etl.go.jp>

	* gfarmd/gfarmd.c (gfarmd_pass):
	After logged in, user ID (not user effective ID) of a child process is changed.

	* gfarm/Makefile, gfarm/gfarm.c, makes/Make.inc.all, makes/Make.inc.solaris:
	gfarm.c: Added command-line arguments: gfarm [server [port]].
	gfarm.c: Added -DHAVE_GETPASSPHRASE for Solaris to use getpassphrase() since getpass() returns only 8 characters in Solaris.

	* nslib/clntlib.c (ns_clnt_connect): Added a comment.

	* gfarmd/gfd_parse.c (gfarmd_create_machinefile): Warning elimination.

2001-01-19  Noriyuki Soda  <soda@sra.co.jp>

	* gfarmlib/metadb_ldap.c, include/gfarm_metadb.h:
	GFarm meta database i/f

2001-01-17  Osamu Tatebe  <tatebe@etl.go.jp>

	* nslib/soc.c (ns_soc_close): Execution continues when close(2) fails.

	* gfarmd/gfarmd.c:
	Changed a home directory from /var/tmp to /var/tmp/username.
	If the home directory is missing, it is created.

	* gfarm/cmd.l, gfarm/cmd.y: Changed an usage message slightly.

2001-01-16  Osamu Tatebe  <tatebe@etl.go.jp>

	* gfarmd/gfd_parse.c, include/nslib.h, include/soc.h, nslib/nslib.c, nslib/soc.c, gfarmd/gfarmd.c, gfarmd/gfd_cmd.l:
	Added ns_comm_dup_stderr() to redirect stderr of a remotely executed program.

	* gfarm/cmd.h, gfarm/cmd.l, gfarm/cmd.y, gfarm/gfarm.c:
	Added an exec command.

	* Makefile, gfarm/Makefile, nslib/Makefile:
	Added a rule to create necessary symlinks.
	Added make veryclean in nslib/Makefile.

2001-01-15  Osamu Tatebe  <tatebe@etl.go.jp>

	* Makefile, gfarm/Makefile, gfarm/cmd.h, gfarm/cmd.l, gfarm/cmd.y, gfarm/gfarm.c, gfarmd/Makefile, gfarmd/gfarmd.c, gfarmd/gfarmd.h, gfarmd/gfd_cmd.h, gfarmd/gfd_cmd.l, gfarmd/gfd_cmd.y, gfarmd/gfd_parse.c, gfarmd/symtab.c, gfarmd/symtab.h, gfarmd/yyerror.c, include/bswap.h, include/debug.h, include/nslib.h, include/soc-xdr.h, include/soc.h, include/type.h, makes/Make.inc.Linux, makes/Make.inc.all, makes/Make.inc.alpha, makes/Make.inc.irix, makes/Make.inc.solaris, nslib/Makefile, nslib/bswap.c, nslib/clntcom.c, nslib/clntlib.c, nslib/nslib.c, nslib/soc-xdr.c, nslib/soc.c, nslib/stublib.c:
	Grid Data Farm

	* Makefile, gfarm/Makefile, gfarm/cmd.h, gfarm/cmd.l, gfarm/cmd.y, gfarm/gfarm.c, gfarmd/Makefile, gfarmd/gfarmd.c, gfarmd/gfarmd.h, gfarmd/gfd_cmd.h, gfarmd/gfd_cmd.l, gfarmd/gfd_cmd.y, gfarmd/gfd_parse.c, gfarmd/symtab.c, gfarmd/symtab.h, gfarmd/yyerror.c, include/bswap.h, include/debug.h, include/nslib.h, include/soc-xdr.h, include/soc.h, include/type.h, makes/Make.inc.Linux, makes/Make.inc.all, makes/Make.inc.alpha, makes/Make.inc.irix, makes/Make.inc.solaris, nslib/Makefile, nslib/bswap.c, nslib/clntcom.c, nslib/clntlib.c, nslib/nslib.c, nslib/soc-xdr.c, nslib/soc.c, nslib/stublib.c:
	New file.

